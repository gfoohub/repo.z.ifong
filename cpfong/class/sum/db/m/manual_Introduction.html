  <HTML>
  <HEAD>
  
  <TITLE>MySQL Reference Manual for version 5.0.3-alpha - 1  General Information</TITLE>
   <style> code {color:purple} tt {color:green} samp {color:navy} pre {color:maroon} </style>
  </HEAD>
  <BODY BGCOLOR=silver TEXT=#000000 LINK=#101090 VLINK=#7030B0>
Go to the first, previous, <A HREF="manual_Installing.html">next</A>, <A HREF="manual_Concept_Index.html">last</A> section, <A HREF="manual_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="Introduction" HREF="manual_toc.html#Introduction">1  General Information</A></H1>

<P>
<A NAME="IDX1"></A>
<A NAME="IDX2"></A>

</P>

<P>
The MySQL (R) software delivers a very fast, multi-threaded,
multi-user, and robust SQL (Structured Query Language)
database server.
MySQL Server is intended for mission-critical, heavy-load
production systems as well as for embedding into mass-deployed software.
MySQL is a registered trademark of MySQL AB.

</P>
<P>
The MySQL software is Dual Licensed. Users can choose to
use the MySQL software as an Open Source
product under the terms of the GNU General Public License
(<a HREF="http://www.fsf.org/licenses/">http://www.fsf.org/licenses/</a>) or can purchase a standard
commercial license from MySQL AB. See 
<a HREF="http://www.mysql.com/company/legal/licensing/">http://www.mysql.com/company/legal/licensing/</a> 
for more information on our licensing policies.

</P>
<P>
The following list describes some sections of particular interest in this manual:

</P>

<UL>
<LI>

For a discussion about the capabilities of the MySQL Database Server,
see section <A HREF="manual_Introduction.html#Features">1.2.2  The Main Features of MySQL</A>.

<LI>

For installation instructions, see section <A HREF="manual_Installing.html#Installing">2  Installing MySQL</A>.

<LI>

For tips on porting the MySQL Database Software to new architectures
or operating systems, see section <A HREF="manual_Porting.html#Porting">E  Porting to Other Systems</A>.

<LI>

For information about upgrading from a Version 4.0 release, see
section <A HREF="manual_Installing.html#Upgrading-from-4.0">2.10.2  Upgrading from Version 4.0 to 4.1</A>.

<LI>

For information about upgrading from a Version 3.23 release, see
section <A HREF="manual_Installing.html#Upgrading-from-3.23">2.10.3  Upgrading from Version 3.23 to 4.0</A>.

<LI>

For information about upgrading from a Version 3.22 release, see
section <A HREF="manual_Installing.html#Upgrading-from-3.22">2.10.4  Upgrading from Version 3.22 to 3.23</A>.

<LI>

For a tutorial introduction to the MySQL Database Server,
see section <A HREF="manual_Tutorial.html#Tutorial">3  MySQL Tutorial</A>.

<LI>

For examples of SQL and benchmarking information, see the
benchmarking directory (<tt>`sql-bench'</tt> in the distribution).

<LI>

For a history of new features and bugfixes, see section <A HREF="manual_News.html#News">D  MySQL Change History</A>.

<LI>

For a list of currently known bugs and misfeatures, see section <A HREF="manual_Introduction.html#Bugs">1.5.7  Known Errors and Design Deficiencies in MySQL</A>.

<LI>

For future plans, see section <A HREF="manual_TODO.html#TODO">C  MySQL and the Future (the TODO)</A>.

<LI>

For a list of all the contributors to this project, see section <A HREF="manual_Credits.html#Credits">B  Credits</A>.
</UL>

<P>
<strong>Important</strong>:

</P>
<P>
Reports of errors (often called ``bugs''), as well as questions and comments,
should be sent to <a HREF="http://bugs.mysql.com">http://bugs.mysql.com</a>. See section <A HREF="manual_Introduction.html#Bug_reports">1.4.1.3  How to Report Bugs or Problems</A>.

</P>
<P>
If you have found a sensitive security bug in MySQL Server, please let
us know immediately by sending an email message to <a HREF="mailto:security@mysql.com">security@mysql.com</a>.

</P>
<P>
<A NAME="IDX3"></A>
<A NAME="IDX4"></A>
<A NAME="IDX5"></A>
<A NAME="IDX6"></A>

</P>



<H2><A NAME="Manual-info" HREF="manual_toc.html#Manual-info">1.1  About This Manual</A></H2>

<P>
<A NAME="IDX7"></A>
<A NAME="IDX8"></A>

</P>

<P>
This is the Reference Manual for the MySQL Database System.
It documents MySQL up to Version 5.0.3-alpha, but is also
applicable for older versions of the MySQL software (such as 3.23 or
4.0-production) because functional changes are indicated with reference to a
version number.

</P>
<P>
Because this manual serves as a reference, it does not provide general
instruction on SQL or relational database concepts. It also will not teach
you how to use your operating system or command-line interpreter.

</P>
<P>
The MySQL Database Software is under constant development, and the
Reference Manual is updated frequently as well.  The most recent version of
the manual is available online in searchable form at
<a HREF="http://dev.mysql.com/doc/">http://dev.mysql.com/doc/</a>.  Other formats also are available,
including HTML, PDF, and Windows CHM versions.

</P>
<P>
<A NAME="IDX9"></A>
<A NAME="IDX10"></A>

</P>
<P>
The primary document is the Texinfo file.
The HTML version is produced automatically using a modified version of
<code>texi2html</code>.
The plain text and Info versions are produced with <code>makeinfo</code>.
The PostScript version is produced using <code>texi2dvi</code> and <code>dvips</code>.
The PDF version is produced with <code>pdftex</code>.

</P>
<P>
If you have any suggestions concerning additions or corrections to this
manual, please send them to the documentation team at <a HREF="mailto:docs@mysql.com">docs@mysql.com</a>.

</P>
<P>
This manual was initially written by David Axmark and Michael ``Monty''
Widenius. It is now maintained by the MySQL Documentation Team,
consisting of Paul DuBois, Stefan Hinz, Mike Hillyer, and Jon Stephens.
For the many other contributors, see section <A HREF="manual_Credits.html#Credits">B  Credits</A>.

</P>
<P>
The copyright (2004) to this manual is owned by the Swedish company
MySQL AB.
MySQL and the MySQL logo are (registered) trademarks of MySQL AB.
Other trademarks and registered trademarks referred to in this manual
are the property of their respective owners, and are used for
identification purposes only.

</P>



<H3><A NAME="Manual_conventions" HREF="manual_toc.html#Manual_conventions">1.1.1  Conventions Used in This Manual</A></H3>

<P>
This manual uses certain typographical conventions:

</P>
<P>
<A NAME="IDX11"></A>
<A NAME="IDX12"></A>
<A NAME="IDX13"></A>

</P>
<DL COMPACT>

<DT><code>constant</code>
<DD>
Constant-width font is used for command names and options; SQL statements;
database, table, and column names; C and Perl code; and environment variables.
Example: ``To see how <code>mysqladmin</code> works, invoke it with the
<code>--help</code> option.''

<DT><var>constant italic</var>
<DD>
Italic constant-width font is used to indicate variable input for which you
should substitute a value of your own choosing.

<DT><tt>`filename'</tt>
<DD>
Constant-width font with surrounding quotes is used for filenames and
pathnames.  Example: ``The distribution is installed under the
<tt>`/usr/local/'</tt> directory.''

<DT><samp>`c'</samp>
<DD>
Constant-width font with surrounding quotes is also used to indicate
character sequences.  Example: ``To specify a wildcard, use the <samp>`%'</samp>
character.''

<DT><em>italic</em>
<DD>
Italic font is used for emphasis, <em>like this</em>.

<DT><strong>boldface</strong>
<DD>
Boldface font is used in table headings and to convey
<strong>especially strong emphasis</strong>.
</DL>

<P>
When commands are shown that are meant to be executed from within a particular
program, the program is indicated by a prompt shown before the command.  For
example, <code>shell&#62;</code> indicates a command that you execute from your login
shell, and <code>mysql&#62;</code> indicates a statement that you execute from the
<code>mysql</code> client program:

</P>

<PRE>
shell&#62; type a shell command here
mysql&#62; type a mysql statement here
</PRE>

<P>
The ``shell'' is your command interpreter. On Unix, this is typically a
program such as <code>sh</code> or <code>csh</code>. On Windows, the equivalent program is
<code>command.com</code> or <code>cmd.exe</code>, typically run in a console window.

</P>
<P>
When you enter a command or statement shown in an example, do not type
the prompt shown in the example.

</P>
<P>
Database, table, and column names must often be substituted into statements.  To
indicate that such substitution is necessary, this manual uses
<var>db_name</var>, <var>tbl_name</var>, and <var>col_name</var>.  For example, you might
see a statement like this:

</P>

<PRE>
mysql&#62; SELECT <var>col_name</var> FROM <var>db_name</var>.<var>tbl_name</var>;
</PRE>

<P>
This means that if you were to enter a similar statement, you would supply
your own database, table, and column names, perhaps like this:

</P>

<PRE>
mysql&#62; SELECT author_name FROM biblio_db.author_list;
</PRE>

<P>
SQL keywords are not case sensitive and may be written in uppercase or
lowercase.  This manual uses uppercase.

</P>
<P>
In syntax descriptions, square brackets (<samp>`['</samp> and <samp>`]'</samp>) are used
to indicate optional words or clauses.  For example, in the following
statement, <code>IF EXISTS</code> is optional:

</P>

<PRE>
DROP TABLE [IF EXISTS] <var>tbl_name</var>
</PRE>

<P>
When a syntax element consists of a number of alternatives, the alternatives
are separated by vertical bars (<samp>`|'</samp>).  When one member from a set of
choices <em>may</em> be chosen, the alternatives are listed within square
brackets (<samp>`['</samp> and <samp>`]'</samp>):

</P>

<PRE>
TRIM([[BOTH | LEADING | TRAILING] [<var>remstr</var>] FROM] <var>str</var>)
</PRE>

<P>
When one member from a set of choices <em>must</em> be chosen, the
alternatives are listed within braces (<samp>`{'</samp> and <samp>`}'</samp>):

</P>

<PRE>
{DESCRIBE | DESC} <var>tbl_name</var> [<var>col_name</var> | <var>wild</var>]
</PRE>

<P>
An ellipsis (<code>...</code>) indicates the omission of a section of a statement,
typically to provide a shorter version of more complex syntax. For example,
<code>INSERT ... SELECT</code> is shorthand for the form of <code>INSERT</code> statement
that is followed by a <code>SELECT</code> statement.

</P>
<P>
An ellipsis can also indicate that the preceding syntax element of a statement
may be repeated. In the following example, multiple <var>reset_option</var> values
may be given, with each of those after the first preceded by commas:

</P>

<PRE>
RESET <var>reset_option</var> [,<var>reset_option</var>] ...
</PRE>

<P>
Commands for setting shell variables are shown using Bourne shell syntax.
For example, the sequence to set an environment variable and run a command
looks like this in Bourne shell syntax:

</P>

<PRE>
shell&#62; <var>VARNAME</var>=<var>value</var> <var>some_command</var>
</PRE>

<P>
<A NAME="IDX14"></A>
<A NAME="IDX15"></A>

</P>
<P>
If you are using <code>csh</code> or <code>tcsh</code>, you must issue commands somewhat
differently.  You would execute the sequence just shown like this:

</P>

<PRE>
shell&#62; setenv <var>VARNAME</var> <var>value</var>
shell&#62; <var>some_command</var>
</PRE>



<H2><A NAME="What-is" HREF="manual_toc.html#What-is">1.2  Overview of the MySQL Database Management System</A></H2>

<P>
<A NAME="IDX16"></A>
<A NAME="IDX17"></A>

</P>
<P>
MySQL, the most popular Open Source SQL database management
system, is
developed, distributed, and supported by MySQL AB.  MySQL AB is a
commercial company, founded by the MySQL developers.
It is a second generation Open Source company that unites Open
Source values and methodology with a successful business model.

</P>
<P>
The MySQL Web site (<a HREF="http://www.mysql.com/">http://www.mysql.com/</a>)
provides the latest information about MySQL software and
MySQL AB.

</P>
<DL COMPACT>

<DT>MySQL is a database management system.
<DD>
A database is a structured collection of data.  It may be anything from a
simple shopping list to a picture gallery or the vast amounts of
information in a corporate network.  To add, access, and process data
stored in a computer database, you need a database management system
such as MySQL Server.  Since computers are very good at handling large
amounts of data, database management systems play a central role in computing,
as standalone utilities or as parts of other applications.

<DT>MySQL is a relational database management system.
<DD>
<A NAME="IDX18"></A>
A relational database stores data in separate tables rather than putting
all the data in one big storeroom.  This adds speed and flexibility.
The SQL part of ``MySQL'' stands for ``Structured
Query Language.'' SQL is the most common standardized language used to
access databases and is defined by the ANSI/ISO SQL Standard. The SQL 
standard has been evolving since 1986 and several versions exist. In this 
manual, ``SQL-92'' refers to the standard released in 1992,
``SQL:1999'' refers to the standard released in 1999, and
``SQL:2003'' refers to the current version of the standard.
We use the phrase ``the SQL standard'' to 
mean the current version of the SQL Standard at any time.

<DT>MySQL software is Open Source.
<DD>
<A NAME="IDX19"></A>
<A NAME="IDX20"></A>
<A NAME="IDX21"></A>
<A NAME="IDX22"></A>
Open Source means that it is possible for anyone to use and modify the software.
Anybody can download the MySQL software from the Internet and use it
without paying anything.  If you wish, you may study the source code
and change it to suit your needs.  The MySQL software uses the
GPL (GNU General Public License),
<a HREF="http://www.fsf.org/licenses/">http://www.fsf.org/licenses/</a>, to define what you
may and may not do with the software in different situations.
If you feel uncomfortable with the GPL or need to embed
MySQL code into a commercial application, you can buy a
commercially licensed version from us.
See the MySQL Licensing Overview for more information 
(<a HREF="http://www.mysql.com/company/legal/licensing/">http://www.mysql.com/company/legal/licensing/</a>).

<DT>The MySQL Database Server is very fast, reliable, and easy to use.
<DD>
If that is what you are looking for, you should give it a try.
MySQL Server also has a practical set of features developed in
close cooperation with our users.  You can find a performance comparison
of MySQL Server with other database managers on our benchmark page.
See section <A HREF="manual_MySQL_Optimization.html#MySQL_Benchmarks">7.1.4  The MySQL Benchmark Suite</A>.

MySQL Server was originally developed to handle large databases
much faster than existing solutions and has been successfully used in
highly demanding production environments for several years.  Although
under constant development, MySQL Server today offers a rich and
useful set of functions.  Its connectivity, speed, and security make
MySQL Server highly suited for accessing databases on the Internet.

<DT>MySQL Server works in client/server or embedded systems.
<DD>
The MySQL Database Software is a client/server system that consists
of a multi-threaded SQL server that supports different backends,
several different client programs and libraries, administrative tools,
and a wide range of application programming interfaces (APIs).

We also provide MySQL Server as an embedded multi-threaded library
that you can link into your application to get a smaller, faster,
easier-to-manage product.

<DT>A large amount of contributed MySQL software is available.
<DD>
It is very likely that you will find that your favorite application or
language already supports the MySQL Database Server.

</DL>

<P>
<A NAME="IDX23"></A>
<A NAME="IDX24"></A>
<A NAME="IDX25"></A>
The official way to pronounce ``MySQL'' is ``My Ess Que Ell'' (not
``my sequel''), but we don't mind if you pronounce it as ``my sequel''
or in some other localized way.

</P>



<H3><A NAME="History" HREF="manual_toc.html#History">1.2.1  History of MySQL</A></H3>

<P>
<A NAME="IDX26"></A>
<A NAME="IDX27"></A>
<A NAME="IDX28"></A>
<A NAME="IDX29"></A>
<A NAME="IDX30"></A>
<A NAME="IDX31"></A>

</P>
<P>
We started out with the intention of using <code>mSQL</code> to connect to our
tables using our own fast low-level (ISAM) routines. However, after some
testing, we came to the conclusion that <code>mSQL</code> was not fast enough or
flexible enough for our needs.  This resulted in a new SQL interface to our
database but with almost the same API interface as <code>mSQL</code>.  This API was
designed to allow third-party code that was written for use with <code>mSQL</code> to
be ported easily for use with MySQL.

</P>
<P>
The derivation of the name MySQL is not clear.  Our base
directory and a large number of our libraries and tools have had the prefix
``my'' for well over 10 years.  However, co-founder Monty Widenius's daughter
is also named My.  Which of the two gave its name to
MySQL is still a mystery, even for us.

</P>
<P>
The name of the MySQL Dolphin (our logo) is ``Sakila,'' which was chosen
by the founders of MySQL AB from a huge list of names suggested by users
in our ``Name the Dolphin'' contest. The winning name was submitted by
Ambrose Twebaze, an Open Source software developer from Swaziland, Africa.
According to Ambrose, the name Sakila has its roots in SiSwati, the local
language of Swaziland. Sakila is also the name of a town in Arusha,
Tanzania, near Ambrose's country of origin, Uganda.

</P>



<H3><A NAME="Features" HREF="manual_toc.html#Features">1.2.2  The Main Features of MySQL</A></H3>

<P>
<A NAME="IDX32"></A>
<A NAME="IDX33"></A>

</P>
<P>
The following list describes some of the important characteristics of the
MySQL Database Software. See also section <A HREF="manual_Introduction.html#Roadmap">1.3  MySQL Development Roadmap</A> for more information
about current and upcoming features.

</P>
<DL COMPACT>

<DT>Internals and Portability
<DD>

<UL>
<LI>

Written in C and C++.
<LI>

Tested with a broad range of different compilers.
<LI>

Works on many different platforms.  See section <A HREF="manual_Installing.html#Which_OS">2.1.1  Operating Systems Supported by MySQL</A>.
<LI>

Uses GNU Automake, Autoconf, and Libtool for portability.
<LI>

APIs for C, C++, Eiffel, Java, Perl, PHP, Python, Ruby, and Tcl are available.
See section <A HREF="manual_MySQL_APIs.html#MySQL_APIs">21  MySQL APIs</A>.
<LI>

Fully multi-threaded using kernel threads.  It can easily
use multiple CPUs if they are available.
<LI>

Provides transactional and non-transactional storage engines.
<LI>

Uses very fast B-tree disk tables (<code>MyISAM</code>) with index compression.
<LI>

Relatively easy to add another storage engine. This is useful if you
want to add an SQL interface to an in-house database.
<LI>

A very fast thread-based memory allocation system.
<LI>

Very fast joins using an optimized one-sweep multi-join.
<LI>

In-memory hash tables, which are used as temporary tables.
<LI>

SQL functions are implemented using a highly optimized class library and
should be as fast as possible.  Usually there is no memory allocation
at all after query initialization.
<LI>

The MySQL code is tested with Purify
(a commercial memory leakage detector) as well as with Valgrind,
a GPL tool (<a HREF="http://developer.kde.org/~sewardj/">http://developer.kde.org/~sewardj/</a>).
<LI>

The server is available as a separate program for use in a client/server
networked environment.  It is also available as a library that can be
embedded (linked) into standalone applications. Such applications can be
used in isolation or in environments where no network is available.
</UL>

<DT>Column Types
<DD>

<UL>
<LI>

Many column types: signed/unsigned integers 1, 2, 3, 4, and 8 bytes
long, <code>FLOAT</code>, <code>DOUBLE</code>, <code>CHAR</code>, <code>VARCHAR</code>,
<code>TEXT</code>, <code>BLOB</code>, <code>DATE</code>, <code>TIME</code>, <code>DATETIME</code>,
<code>TIMESTAMP</code>, <code>YEAR</code>, <code>SET</code>, <code>ENUM</code>, and OpenGIS spatial
types.
See section <A HREF="manual_Column_types.html#Column_types">11  Column Types</A>.
<LI>

Fixed-length and variable-length records.
</UL>

<DT>Statements and Functions
<DD>

<UL>
<LI>

Full operator and function support in the <code>SELECT</code> and <code>WHERE</code>
clauses of queries.  For example:


<PRE>
mysql&#62; SELECT CONCAT(first_name, ' ', last_name)
    -&#62; FROM citizen
    -&#62; WHERE income/dependents &#62; 10000 AND age &#62; 30;
</PRE>

<LI>

Full support for SQL <code>GROUP BY</code> and
<code>ORDER BY</code> clauses.  Support
for group functions (<code>COUNT()</code>,
<code>COUNT(DISTINCT ...)</code>,
<code>AVG()</code>, <code>STD()</code>,
<code>SUM()</code>, <code>MAX()</code>, <code>MIN()</code>, and <code>GROUP_CONCAT()</code>).
<LI>

Support for <code>LEFT OUTER JOIN</code> and <code>RIGHT OUTER JOIN</code> with both standard
SQL and ODBC syntax.
<LI>

Support for aliases on tables and columns as required by standard SQL.
<LI>

<code>DELETE</code>, <code>INSERT</code>, <code>REPLACE</code>, and <code>UPDATE</code> return
the number of rows that were changed (affected).  It is possible to return
the number of rows matched instead by setting a flag when connecting to the
server.
<LI>

The MySQL-specific <code>SHOW</code> command can be used to retrieve
information about databases, tables, and indexes.  The <code>EXPLAIN</code> command
can be used to determine how the optimizer resolves a query.
<LI>

Function names do not clash with table or column names.  For example,
<code>ABS</code> is a valid column name.  The only restriction is that for a
function call, no spaces are allowed between the function name and the
<samp>`('</samp> that follows it.  See section <A HREF="manual_Language_Structure.html#Reserved_words">9.6  Treatment of Reserved Words in MySQL</A>.
<LI>

You can mix tables from different databases in the same query (as of
MySQL 3.22).
</UL>

<DT>Security
<DD>

<UL>
<LI>

A privilege and password system that is very flexible and secure, and
that allows host-based verification.  Passwords are secure because all
password traffic is encrypted when you connect to a server.
</UL>

<DT>Scalability and Limits
<DD>

<UL>
<LI>

Handles large databases.  We use MySQL Server with databases that 
contain 50 million records. We also know of users who
use MySQL Server with 60,000 tables and about 5,000,000,000 rows.
<LI>

Up to 64 indexes per table are allowed (32 before MySQL 4.1.2).  Each index may
consist of 1 to 16 columns or parts of columns.  The maximum index width is
1000 bytes (500 before MySQL 4.1.2).
An index may use a prefix of a column for <code>CHAR</code>, <code>VARCHAR</code>,
<code>BLOB</code>, or <code>TEXT</code> column types.
</UL>

<DT>Connectivity
<DD>

<UL>
<LI>

Clients can connect to the MySQL server using TCP/IP sockets
on any platform.  On Windows systems in the NT family (NT, 2000, XP, or 2003), 
clients can connect using named pipes. On Unix systems,
clients can connect using Unix domain socket files.
<LI>

In MySQL versions 4.1 and higher, Windows servers also support shared-memory
connections if started with the <code>--shared-memory</code> option.  Clients can
connect through shared memory by using the <code>--protocol=memory</code> option.
<LI>

The Connector/ODBC (MyODBC) interface provides MySQL support for client
programs that use ODBC (Open Database Connectivity) connections.  For
example, you can use MS Access to connect to your MySQL server.  Clients can
be run on Windows or Unix.  MyODBC source is available.  All ODBC
2.5 functions are supported, as are many others.
See section <A HREF="manual_MySQL_Connectors.html#ODBC_Connector">22.1  MySQL ODBC Support</A>.
<LI>

The Connector/J interface provides MySQL support for Java client
programs that use JDBC connections.  Clients can be run on Windows or Unix.
Connector/J source is available.
See section <A HREF="manual_MySQL_Connectors.html#Java_Connector">22.2  MySQL Java Connectivity (JDBC)</A>.
</UL>

<DT>Localization
<DD>

<UL>
<LI>

The server can provide error messages to clients in many languages.
See section <A HREF="manual_MySQL_Database_Administration.html#Languages">5.8.2  Setting the Error Message Language</A>.
<LI>

Full support for several different character sets, including
<code>latin1</code> (ISO-8859-1), <code>german</code>, <code>big5</code>, <code>ujis</code>,
and more.  For example,
the Scandinavian characters <samp>`&acirc;'</samp>, <samp>`&auml;'</samp> and <samp>`&ouml;'</samp> are
allowed in table and column names.
Unicode support is available as of MySQL 4.1.
<LI>

All data is saved in the chosen character set.  All comparisons for normal
string columns are case-insensitive.
<LI>

Sorting is done according to the chosen character set (using Swedish
collation by default).  It is possible to change this when the MySQL
server is started.  To see an example of very advanced sorting, look
at the Czech sorting code.  MySQL Server supports many different
character sets that can be specified at compile time and runtime.
</UL>

<DT>Clients and Tools
<DD>

<UL>
<LI>

The MySQL server has built-in support for SQL statements to check,
optimize, and repair tables.  These statements are available from the
command line through the <code>mysqlcheck</code> client. MySQL also includes
<code>myisamchk</code>, a very fast command-line utility for performing these
operations on <code>MyISAM</code> tables.
See section <A HREF="manual_MySQL_Database_Administration.html#MySQL_Database_Administration">5  Database Administration</A>.
<LI>

All MySQL programs can be invoked with the <code>--help</code> or <code>-?</code>
options to obtain online assistance.
</UL>

</DL>



<H3><A NAME="Stability" HREF="manual_toc.html#Stability">1.2.3  MySQL Stability</A></H3>

<P>
<A NAME="IDX34"></A>

</P>
<P>
This section addresses the questions, ``<em>How stable is MySQL Server?</em>''
and, ``<em>Can I depend on MySQL Server in this project?</em>''
We will try to clarify these issues and answer some important
questions that concern many potential users. The information in this
section is based on data gathered from the mailing lists, which are
very active in identifying problems as well as reporting types of use.

</P>
<P>
The original code stems back to the early 1980s. It provides a stable code
base, and the <code>ISAM</code> table format used by the original storage engine
remains backward-compatible.
At TcX, the predecessor of MySQL AB, MySQL code has worked
in projects since mid-1996, without any problems.
When the MySQL Database Software initially was released to a wider public,
our new users quickly found some pieces of untested code. Each new release
since then has had fewer portability problems, even though each new release
has also had many new features.

</P>
<P>
Each release of the MySQL Server has been usable. Problems have occurred
only when users try code from the ``gray zones.''  Naturally, new users
don't know what the gray zones are; this section therefore attempts to
document those areas that are currently known.
The descriptions mostly deal with Version 3.23, 4.0 and 4.1 of MySQL Server.
All known and reported bugs are fixed in the latest version, with the
exception of those listed in the bugs section, which
are design-related.  See section <A HREF="manual_Introduction.html#Bugs">1.5.7  Known Errors and Design Deficiencies in MySQL</A>.

</P>
<P>
The MySQL Server design is multi-layered with independent modules.
Some of the newer modules are listed here with an indication of how
well-tested each of them is:

</P>
<P>
<A NAME="IDX35"></A>

</P>
<DL COMPACT>

<DT>Replication (Stable)
<DD>
Large groups of servers using replication are in production use, with
good results. Work on enhanced replication features is continuing
in MySQL 5.x.

<DT><code>InnoDB</code> tables (Stable)
<DD>
The <code>InnoDB</code> transactional storage engine has been declared
stable in the MySQL 3.23 tree, starting from version 3.23.49.
<code>InnoDB</code> is being used in large, heavy-load production systems.

<DT><code>BDB</code> tables (Stable)
<DD>
The <code>Berkeley DB</code> code is very stable, but we are still improving
the <code>BDB</code> transactional storage engine interface in MySQL Server.

<DT>Full-text searches (Stable)
<DD>
Full-text searching is widely used.
Important feature enhancements were added in MySQL 4.0 and 4.1.

<DT><code>MyODBC</code> 3.51 (Stable)
<DD>
<code>MyODBC</code> 3.51 uses ODBC SDK 3.51 and is in wide production use.
Some issues brought up appear to be application-related and independent of
the ODBC driver or underlying database server.

</DL>



<H3><A NAME="Table_size" HREF="manual_toc.html#Table_size">1.2.4  How Big MySQL Tables Can Be</A></H3>

<P>
<A NAME="IDX36"></A>
<A NAME="IDX37"></A>
<A NAME="IDX38"></A>
<A NAME="IDX39"></A>
<A NAME="IDX40"></A>

</P>
<P>
MySQL 3.22 had a 4GB (4 gigabyte) limit on table size. With the
<code>MyISAM</code> storage engine in MySQL 3.23, the maximum table
size was increased to 8 million terabytes (2 ^ 63 bytes). With this larger
allowed table size, the maximum effective table size for MySQL
databases now usually is determined by operating system constraints
on file sizes, not by MySQL internal limits.

</P>
<P>
The <code>InnoDB</code> storage engine maintains <code>InnoDB</code> tables within a
tablespace that can be created from several files. This allows a
table to exceed the maximum individual file size. The tablespace can include
raw disk partitions, which allows extremely large tables. The maximum
tablespace size is 64TB.

</P>
<P>
The following table lists some examples of operating system file-size
limits. This is only a rough guide and is not intended to be definitive. 
For the most up-to-date information, be sure to check the documentation 
specific to your operating system.

</P>
<TABLE BORDER>
<TR><TD><strong>Operating System</strong> </TD><TD> <strong>File-size Limit</strong>
</TD></TR>
<TR><TD>Linux 2.2-Intel 32-bit </TD><TD> 2GB (LFS: 4GB)
</TD></TR>
<TR><TD>Linux 2.4 </TD><TD> (using ext3 filesystem) 4TB
</TD></TR>
<TR><TD>Solaris 9/10 </TD><TD> 16TB
</TD></TR>
<TR><TD>NetWare w/NSS filesystem </TD><TD> 8TB
</TD></TR>
<TR><TD>win32 w/ FAT/FAT32 </TD><TD> 2GB/4GB
</TD></TR>
<TR><TD>win32 w/ NTFS </TD><TD> 2TB (possibly larger)
</TD></TR>
<TR><TD>MacOS X w/ HFS+ </TD><TD> 2TB
</TD></TR>
</TABLE>

<P>
On Linux 2.2, you can get <code>MyISAM</code> tables larger than 2GB in size by
using the Large File Support (LFS) patch for the ext2 filesystem. On Linux
2.4, patches also exist for ReiserFS to get support for big files (up to 2TB). Most
current Linux distributions are based on kernel 2.4 and already include all
the required LFS patches. With JFS and XFS, petabyte and larger files 
are possible on Linux. However, the maximum available file size still depends 
on several factors, one of them being the filesystem used to store MySQL tables.

</P>
<P>
For a detailed overview about LFS in Linux, have a look at Andreas
Jaeger's <cite>Large File Support in Linux</cite> page at
<a HREF="http://www.suse.de/~aj/linux_lfs.html">http://www.suse.de/~aj/linux_lfs.html</a>.

</P>
<P>
Windows users please note: FAT and VFAT (FAT32) are <strong>not</strong> considered suitable
for production use with MySQL. Use NTFS instead.

</P>
<P>
By default, MySQL creates <code>MyISAM</code> tables with an internal
structure that allows a maximum size of about 4GB.  You can
check the maximum table size for a table with the <code>SHOW TABLE STATUS</code>
statement or with <code>myisamchk -dv <var>tbl_name</var></code>.
See section <A HREF="manual_SQL_Syntax.html#SHOW">13.5.4  <code>SHOW</code> Syntax</A>.

</P>
<P>
If you need a <code>MyISAM</code> table that will be larger than 4GB in size (and your
operating system supports large files), the <code>CREATE TABLE</code> statement
allows <code>AVG_ROW_LENGTH</code> and <code>MAX_ROWS</code> options.
See section <A HREF="manual_SQL_Syntax.html#CREATE_TABLE">13.2.6  <code>CREATE TABLE</code> Syntax</A>.
You can also change these options with <code>ALTER TABLE</code> after the table has
been created, to increase the table's maximum allowable size.
See section <A HREF="manual_SQL_Syntax.html#ALTER_TABLE">13.2.2  <code>ALTER TABLE</code> Syntax</A>. 

</P>
<P>
Other ways to work around file-size limits for <code>MyISAM</code> tables are as
follows:

</P>

<UL>
<LI>

If your large table is read-only, you can use <code>myisampack</code> to
compress it.  <code>myisampack</code> usually compresses a table by at
least 50%, so you can have, in effect, much bigger tables.
<code>myisampack</code> also can merge multiple tables into a single table.
See section <A HREF="manual_Client-Side_Scripts.html#myisampack">8.2  <code>myisampack</code>, the MySQL Compressed Read-only Table Generator</A>.

<LI>

Another way to get around the operating system file limit for <code>MyISAM</code>
data files is by using the <code>RAID</code> options.
See section <A HREF="manual_SQL_Syntax.html#CREATE_TABLE">13.2.6  <code>CREATE TABLE</code> Syntax</A>.

<LI>

MySQL includes a <code>MERGE</code> library that allows
you to handle a collection of <code>MyISAM</code> tables that have identical
structure as a single <code>MERGE</code> table.
See section <A HREF="manual_Storage_engines.html#MERGE_storage_engine">14.2  The <code>MERGE</code> Storage Engine</A>.

</UL>



<H3><A NAME="Year_2000_compliance" HREF="manual_toc.html#Year_2000_compliance">1.2.5  Year 2000 Compliance</A></H3>

<P>
<A NAME="IDX41"></A>
<A NAME="IDX42"></A>
<A NAME="IDX43"></A>

</P>
<P>
The MySQL Server itself has no problems with Year 2000 (Y2K)
compliance:

</P>

<UL>
<LI>

MySQL Server uses Unix time functions that handle dates into the year
<code>2037</code> for <code>TIMESTAMP</code> values. For <code>DATE</code> and <code>DATETIME</code>
values, dates through the year <code>9999</code> are accepted.

<LI>

All MySQL date functions are implemented in one source file,
<tt>`sql/time.cc'</tt>, and are coded very carefully to be year 2000-safe.

<LI>

In MySQL 3.22 and later, the <code>YEAR</code> column type
can store years <code>0</code> and <code>1901</code> to <code>2155</code> in one byte and
display them using two or four digits.
All two-digit years are considered to be in the range
<code>1970</code> to <code>2069</code>, which means that if you store <code>01</code> in a
<code>YEAR</code> column, MySQL Server treats it as <code>2001</code>.
</UL>

<P>
The following simple demonstration illustrates that MySQL Server
has no problems with <code>DATE</code> or <code>DATETIME</code> values through the year
9999, and no problems with <code>TIMESTAMP</code> values until after the year 2030:

</P>

<PRE>
mysql&#62; DROP TABLE IF EXISTS y2k;
Query OK, 0 rows affected (0.01 sec)

mysql&#62; CREATE TABLE y2k (date DATE,
    -&#62;                   date_time DATETIME,
    -&#62;                   time_stamp TIMESTAMP);
Query OK, 0 rows affected (0.01 sec)

mysql&#62; INSERT INTO y2k VALUES
    -&#62; ('1998-12-31','1998-12-31 23:59:59',19981231235959),
    -&#62; ('1999-01-01','1999-01-01 00:00:00',19990101000000),
    -&#62; ('1999-09-09','1999-09-09 23:59:59',19990909235959),
    -&#62; ('2000-01-01','2000-01-01 00:00:00',20000101000000),
    -&#62; ('2000-02-28','2000-02-28 00:00:00',20000228000000),
    -&#62; ('2000-02-29','2000-02-29 00:00:00',20000229000000),
    -&#62; ('2000-03-01','2000-03-01 00:00:00',20000301000000),
    -&#62; ('2000-12-31','2000-12-31 23:59:59',20001231235959),
    -&#62; ('2001-01-01','2001-01-01 00:00:00',20010101000000),
    -&#62; ('2004-12-31','2004-12-31 23:59:59',20041231235959),
    -&#62; ('2005-01-01','2005-01-01 00:00:00',20050101000000),
    -&#62; ('2030-01-01','2030-01-01 00:00:00',20300101000000),
    -&#62; ('2040-01-01','2040-01-01 00:00:00',20400101000000),
    -&#62; ('9999-12-31','9999-12-31 23:59:59',99991231235959);
Query OK, 14 rows affected (0.01 sec)
Records: 14  Duplicates: 0  Warnings: 2

mysql&#62; SELECT * FROM y2k;
+------------+---------------------+----------------+
| date       | date_time           | time_stamp     |
+------------+---------------------+----------------+
| 1998-12-31 | 1998-12-31 23:59:59 | 19981231235959 |
| 1999-01-01 | 1999-01-01 00:00:00 | 19990101000000 |
| 1999-09-09 | 1999-09-09 23:59:59 | 19990909235959 |
| 2000-01-01 | 2000-01-01 00:00:00 | 20000101000000 |
| 2000-02-28 | 2000-02-28 00:00:00 | 20000228000000 |
| 2000-02-29 | 2000-02-29 00:00:00 | 20000229000000 |
| 2000-03-01 | 2000-03-01 00:00:00 | 20000301000000 |
| 2000-12-31 | 2000-12-31 23:59:59 | 20001231235959 |
| 2001-01-01 | 2001-01-01 00:00:00 | 20010101000000 |
| 2004-12-31 | 2004-12-31 23:59:59 | 20041231235959 |
| 2005-01-01 | 2005-01-01 00:00:00 | 20050101000000 |
| 2030-01-01 | 2030-01-01 00:00:00 | 20300101000000 |
| 2040-01-01 | 2040-01-01 00:00:00 | 00000000000000 |
| 9999-12-31 | 9999-12-31 23:59:59 | 00000000000000 |
+------------+---------------------+----------------+
14 rows in set (0.00 sec)
</PRE>

<P>
The final two <code>TIMESTAMP</code> column values are zero because the
year values (<code>2040</code>, <code>9999</code>) exceed the <code>TIMESTAMP</code> maximum.  The
<code>TIMESTAMP</code> data type, which is used to store the current time,
supports values that range from <code>19700101000000</code> to
<code>20300101000000</code> on 32-bit machines (signed value).  On 64-bit
machines, <code>TIMESTAMP</code> handles values up to <code>2106</code> (unsigned
value).

</P>
<P>
Although MySQL Server itself is Y2K-safe, you may run into
problems if you use it with applications that are not Y2K-safe.
For example, many old applications store or manipulate years using
two-digit values (which are ambiguous) rather than four-digit values.
This problem may be compounded by applications that use
values such as <code>00</code> or <code>99</code> as ``missing'' value indicators.
Unfortunately, these problems may be difficult to fix because different
applications may be written by different programmers, each of whom may
use a different set of conventions and date-handling functions.

</P>
<P>
Thus, even though MySQL Server has no Y2K problems, it is
the application's responsibility to provide unambiguous input.
See section <A HREF="manual_Column_types.html#Y2K_issues">11.3.4  Y2K Issues and Date Types</A> for MySQL Server's rules for dealing
with ambiguous date input data that contains two-digit year values.

</P>


<H2><A NAME="Roadmap" HREF="manual_toc.html#Roadmap">1.3  MySQL Development Roadmap</A></H2>

<P>
This section provides a snapshot of the MySQL development roadmap, including
major features implemented or planned for MySQL 4.0, 4.1, 5.0, and 5.1.
The following sections provide information for each release series.

</P>
<P>
The current production release series is MySQL 4.1, which was declared
stable for production use as of Version 4.1.7, released in October 2004.  The
previous production release series is MySQL 4.0, which was declared stable
for production use as of Version 4.0.12, released in March 2003. Production
status means that future 4.1 and 4.0 development is limited only to bugfixes.
For the older MySQL 3.23 series, only critical bugfixes are made.

</P>
<P>
Active MySQL development currently is taking place in the MySQL 5.0
release series, this means that new features are being added there.
MySQL 5.0 is available in alpha status.

</P>
<P>
Before upgrading from one release series to the next, please see the notes
at section <A HREF="manual_Installing.html#Upgrade">2.10  Upgrading MySQL</A>.

</P>
<P>
Plans for some of the most requested features are summarized in the following
table.

</P>
<TABLE BORDER>
<TR><TD><strong>Feature</strong> </TD><TD> <strong>MySQL Series</strong>
</TD></TR>
<TR><TD>Unions </TD><TD> 4.0
</TD></TR>
<TR><TD>Subqueries </TD><TD> 4.1
</TD></TR>
<TR><TD>R-trees </TD><TD> 4.1 (for <code>MyISAM</code> tables)
</TD></TR>
<TR><TD>Stored procedures </TD><TD> 5.0
</TD></TR>
<TR><TD>Views </TD><TD> 5.0
</TD></TR>
<TR><TD>Cursors </TD><TD> 5.0
</TD></TR>
<TR><TD>Foreign keys </TD><TD> 5.1 (already implemented in 3.23 for <code>InnoDB</code>)
</TD></TR>
<TR><TD>Triggers </TD><TD> 5.0 and 5.1
</TD></TR>
<TR><TD>Full outer join </TD><TD> 5.1
</TD></TR>
<TR><TD>Constraints </TD><TD> 5.1
</TD></TR>
</TABLE>



<H3><A NAME="MySQL_4.0_Nutshell" HREF="manual_toc.html#MySQL_4.0_Nutshell">1.3.1  MySQL 4.0 in a Nutshell</A></H3>

<P>
MySQL Server 4.0 is available in production status.

</P>
<P>
MySQL 4.0 is available for download at <a HREF="http://dev.mysql.com/">http://dev.mysql.com/</a>
and from our mirrors. MySQL 4.0 has been tested by a large number of users
and is in production use at many large sites.

</P>
<P>
The major new features of MySQL Server 4.0 are geared toward our existing
business and community users, enhancing the MySQL database software
as the solution for mission-critical, heavy-load database systems.
Other new features target the users of embedded databases.

</P>



<H4><A NAME="Nutshell_4.0_features" HREF="manual_toc.html#Nutshell_4.0_features">1.3.1.1  Features Available in MySQL 4.0</A></H4>

<DL COMPACT>

<DT>Speed enhancements
<DD>

<UL>
<LI>

MySQL 4.0 has a query cache that can give a huge speed boost to
applications with repetitive queries. See section <A HREF="manual_MySQL_Database_Administration.html#Query_Cache">5.11  The MySQL Query Cache</A>.

<LI>

Version 4.0 further increases the speed of MySQL Server
in a number of areas, such as bulk <code>INSERT</code> statements, searching on
packed indexes, full-text searching (using <code>FULLTEXT</code> indexes), and
<code>COUNT(DISTINCT)</code>.
</UL>

<DT>Embedded MySQL Server introduced
<DD>

<UL>
<LI>

The new Embedded Server library can easily be used to create standalone and
embedded applications.  The embedded server provides an alternative to using
MySQL in a client/server environment.
See section <A HREF="manual_Introduction.html#Nutshell_Embedded_MySQL">1.3.1.2  The Embedded MySQL Server</A>.
</UL>

<DT><code>InnoDB</code> storage engine as standard
<DD>

<UL>
<LI>

The <code>InnoDB</code> storage engine is offered as a standard feature of the
MySQL server. This means full support for ACID transactions, foreign
keys with cascading <code>UPDATE</code> and <code>DELETE</code>, and row-level locking
are now standard features.
See section <A HREF="manual_InnoDB.html#InnoDB">15  The <code>InnoDB</code> Storage Engine</A>.
</UL>

<DT>New functionality
<DD>

<UL>
<LI>

The enhanced <code>FULLTEXT</code> search properties of MySQL Server 4.0 enables
<code>FULLTEXT</code> indexing of large text masses with both binary
and natural-language searching logic. You can customize minimal word
length and define your own stop word lists in any human language,
enabling a new set of applications to be built with MySQL Server.
See section <A HREF="manual_Functions.html#Fulltext_Search">12.6  Full-Text Search Functions</A>.
</UL>

<DT>Standards compliance, portability, and migration
<DD>

<UL>
<LI>

Many users will also be happy to learn that MySQL Server now supports the
<code>UNION</code> statement, a long-awaited standard SQL feature.

<LI>

MySQL runs natively on the Novell NetWare platform beginning with NetWare
6.0.
See section <A HREF="manual_Installing.html#NetWare_installation">2.6  Installing MySQL on NetWare</A>.

<LI>

Features to simplify migration from other database systems to MySQL
Server include <code>TRUNCATE TABLE</code> (as in Oracle).
</UL>

<DT>Internationalization
<DD>

<UL>
<LI>

Our German, Austrian, and Swiss users will note that MySQL 4.0 now
supports a new character set, <code>latin1_de</code>, which ensures that the 
<em>German sorting order</em> sorts words with umlauts in the same order 
as do German telephone books.
</UL>

<DT>Usability enhancements
<DD>
In the process of implementing features for new users, we have not forgotten
requests from our loyal community of existing users.


<UL>
<LI>

Most <code>mysqld</code> parameters (startup options) can be set without taking
down the server. This is a convenient feature for database administrators
(DBAs).
See section <A HREF="manual_SQL_Syntax.html#SET_OPTION">13.5.3  <code>SET</code> Syntax</A>.

<LI>

Multiple-table <code>DELETE</code> and <code>UPDATE</code> statements have been added.

<LI>

On Windows, symbolic link handling at the database level is enabled by default.
On Unix, the <code>MyISAM</code> storage engine supports symbolic
linking at the table level (and not just the database level as before).

<LI>

<code>SQL_CALC_FOUND_ROWS</code> and <code>FOUND_ROWS()</code> are new functions that make it
possible to find out the number of rows a <code>SELECT</code> query that includes a
<code>LIMIT</code> clause would have returned without that clause.
</UL>

</DL>

<P>
The news section of this manual includes a more in-depth list of features.
See section <A HREF="manual_News.html#News-4.0.x">D.3  Changes in release 4.0.x (Production)</A>.

</P>



<H4><A NAME="Nutshell_Embedded_MySQL" HREF="manual_toc.html#Nutshell_Embedded_MySQL">1.3.1.2  The Embedded MySQL Server</A></H4>

<P>
The <code>libmysqld</code> embedded server library makes MySQL Server suitable for
a vastly expanded realm of applications. By using this library, developers can
embed MySQL Server into various applications and electronics devices, where
the end user has no knowledge of there actually being an underlying
database. Embedded MySQL Server is ideal for use behind
the scenes in Internet appliances, public kiosks, turnkey
hardware/software combination units, high performance Internet
servers, self-contained databases distributed on CD-ROM, and so on.

</P>
<P>
Many users of <code>libmysqld</code> will benefit from the MySQL
Dual Licensing. For those not wishing to be bound by the GPL,
the software is also made available under a commercial license.
See <a HREF="http://www.mysql.com/company/legal/licensing/">http://www.mysql.com/company/legal/licensing/</a> for more information
on the licensing policy of MySQL AB.
The embedded MySQL library uses the same interface as the normal
client library, so it is convenient and easy to use.
See section <A HREF="manual_MySQL_APIs.html#libmysqld">21.2.16  libmysqld, the Embedded MySQL Server Library</A>.

</P>
<P>
On Windows there are two different libraries:

</P>
<TABLE BORDER>
<TR><TD><code>libmysqld.lib</code> </TD><TD> Dynamic library for threaded applications.
</TD></TR>
<TR><TD><code>mysqldemb.lib</code> </TD><TD> Static library for not threaded applications.
</TD></TR>
</TABLE>



<H3><A NAME="MySQL_4.1_Nutshell" HREF="manual_toc.html#MySQL_4.1_Nutshell">1.3.2  MySQL 4.1 in a Nutshell</A></H3>

<P>
MySQL Server 4.0 laid the foundation for new features implemented in MySQL
4.1, such as subqueries and Unicode support, and for the work on stored
procedures being done in version 5.0.  These features come at the top of the
wish list of many of our customers.  Already well-known for its stability,
speed, and ease of use, MySQL Server is now able to fulfill the requirement
checklists of very demanding buyers.

</P>
<P>
MySQL Server 4.1 is currently in production status, and binaries are available
for download at <a HREF="http://dev.mysql.com/downloads/mysql/4.1.html">http://dev.mysql.com/downloads/mysql/4.1.html</a>.  All
binary releases pass our extensive test suite without any errors on the
platforms on which we test.
See section <A HREF="manual_News.html#News-4.1.x">D.2  Changes in release 4.1.x (Production)</A>.

</P>
<P>
For those wishing to use the most recent development source for MySQL 4.1,
we also make our BitKeeper repositories publicly available.
See section <A HREF="manual_Installing.html#Installing_source_tree">2.8.3  Installing from the Development Source Tree</A>.

</P>



<H4><A NAME="Nutshell_4.1_features" HREF="manual_toc.html#Nutshell_4.1_features">1.3.2.1  Features Available in MySQL 4.1</A></H4>

<P>
This section lists features implemented in MySQL 4.1.  New features that
will be available in MySQL 5.0 are described in section <A HREF="manual_TODO.html#TODO_MySQL_5.0">C.1  New Features Planned for 5.0</A>.

</P>
<DL COMPACT>

<DT>Support for subqueries and derived tables
<DD>

<UL>
<LI>

A ``subquery'' is a <code>SELECT</code> statement nested within another statement.
A ``derived table'' (an unnamed view) is a subquery in the <code>FROM</code> clause
of another statement.
See section <A HREF="manual_SQL_Syntax.html#Subqueries">13.1.8  Subquery Syntax</A>.
</UL>

<DT>Speed enhancements
<DD>

<UL>
<LI>

Faster binary client/server protocol with support for prepared statements
and parameter binding.
See section <A HREF="manual_MySQL_APIs.html#C_API_Prepared_statements">21.2.4  C API Prepared Statements</A>.
<LI>

<code>BTREE</code> indexing is supported for <code>HEAP</code> tables,
significantly improving response time for non-exact searches.
</UL>

<DT>New functionality
<DD>

<UL>
<LI>

<code>CREATE TABLE <var>tbl_name2</var> LIKE <var>tbl_name1</var></code> allows you to create, with
a single statement, a new table with a structure exactly like that of an
existing table.
<LI>

The <code>MyISAM</code> storage engine supports
OpenGIS spatial types for storing geographical data.
See section <A HREF="manual_Spatial_extensions_in_MySQL.html#Spatial_extensions_in_MySQL">18  Spatial Extensions in MySQL</A>.
<LI>

Replication can be done over SSL connections.
</UL>

<DT>Standards compliance, portability, and migration
<DD>

<UL>
<LI>

The new client/server protocol adds the ability to pass multiple warnings to
the client, rather than only a single result. This makes it much easier to
track problems that occur in operations such as bulk data loading.
<LI>

<code>SHOW WARNINGS</code> shows warnings for the last command.
See section <A HREF="manual_SQL_Syntax.html#SHOW_WARNINGS">13.5.4.20  <code>SHOW WARNINGS</code> Syntax</A>.
</UL>

<DT>Internationalization and Localization
<DD>

<UL>
<LI>

To support applications that require the use of local languages,
the MySQL software offers extensive
Unicode support through the <code>utf8</code> and <code>ucs2</code> character sets.
<LI>

Character sets can be defined per column, table, and database.
This allows for a high degree of flexibility in application design,
particularly for multi-language Web sites.
<LI>

For documentation for this improved character set support,
see section <A HREF="manual_Charset.html#Charset">10  Character Set Support</A>.
<LI>

Per-connection time zones are supported, allowing individual clients to select
their own time zone when necessary.
</UL>

<DT>Usability enhancements
<DD>

<UL>
<LI>

In response to popular demand, we have added a server-based
<code>HELP</code> command that can be used
to get help information for SQL statements.
The advantage of having this information on the server side is that the
information is always applicable to the particular server version that you
actually are using.
Because this information is available by issuing an SQL statement, any client
can be written to access it.
For example, the <code>help</code> command of the <code>mysql</code> command-line client
has been modified to have this capability.
<LI>

In the new client/server protocol, multiple statements can be issued with
a single call.
See section <A HREF="manual_MySQL_APIs.html#C_API_multiple_queries">21.2.9  C API Handling of Multiple Query Execution</A>.
<LI>

The new client/server protocol also supports returning multiple result sets.
This might occur as a result of sending multiple statements, for example.
<LI>

A new <code>INSERT ... ON DUPLICATE KEY UPDATE ...</code> syntax has been
implemented. This allows you to <code>UPDATE</code> an existing row if the
<code>INSERT</code> would have caused a duplicate in a <code>PRIMARY</code> or
<code>UNIQUE</code> index.
See section <A HREF="manual_SQL_Syntax.html#INSERT">13.1.4  <code>INSERT</code> Syntax</A>.
<LI>

A new aggregate function, <code>GROUP_CONCAT()</code>
adds the extremely useful capability of concatenating column values from
grouped rows into a single result string.
See section <A HREF="manual_Functions.html#Group_by_functions_and_modifiers">12.9  Functions and Modifiers for Use with <code>GROUP BY</code> Clauses</A>.
</UL>

</DL>

<P>
The news section of this manual includes a more in-depth list of features.
See section <A HREF="manual_News.html#News-4.1.x">D.2  Changes in release 4.1.x (Production)</A>.

</P>



<H3><A NAME="MySQL_5.0_Nutshell" HREF="manual_toc.html#MySQL_5.0_Nutshell">1.3.3  MySQL 5.0: The Next Development Release</A></H3>

<P>
New development for MySQL is focused on the 5.0 release, featuring
stored procedures, views (including updatable views), rudimentary triggers,
and other new features.
See section <A HREF="manual_TODO.html#TODO_MySQL_5.0">C.1  New Features Planned for 5.0</A>.

</P>
<P>
For those wishing to take a look at the bleeding edge of MySQL
development, we make our BitKeeper repository for
MySQL version 5.0 publicly available.
See section <A HREF="manual_Installing.html#Installing_source_tree">2.8.3  Installing from the Development Source Tree</A>.
As of December 2003, binary builds of version 5.0 have also been available.

</P>


<H2><A NAME="MySQL_Information_Sources" HREF="manual_toc.html#MySQL_Information_Sources">1.4  MySQL Information Sources</A></H2>



<H3><A NAME="Questions" HREF="manual_toc.html#Questions">1.4.1  MySQL Mailing Lists</A></H3>

<P>
<A NAME="IDX44"></A>
<A NAME="IDX45"></A>
<A NAME="IDX46"></A>

</P>

<P>
This section introduces the MySQL mailing lists and provides
guidelines as to how the lists should be used. When you subscribe to a mailing
list, you will receive all postings to the list as email messages. You can 
also send your own questions and answers to the list.

</P>



<H4><A NAME="Mailing-list" HREF="manual_toc.html#Mailing-list">1.4.1.1  The MySQL Mailing Lists</A></H4>

<P>
<A NAME="IDX47"></A>
<A NAME="IDX48"></A>

</P>
<P>
To subscribe to or unsubscribe from any of the mailing lists described in this
section, visit <a HREF="http://lists.mysql.com/">http://lists.mysql.com/</a>. For most of them, you can select
the regular version of the list where you get individual messages, or a digest
version where you get one large message per day.

</P>
<P>
Please <em>do not</em> send messages about
subscribing or unsubscribing to any of the mailing lists, because such
messages are distributed automatically to thousands of other users.

</P>
<P>
Your local site may have many subscribers to a MySQL mailing list.
If so, the site may have a local mailing list, so that messages sent from
<code>lists.mysql.com</code> to your site are propagated to the local list.  In such
cases, please contact your system administrator to be added to or dropped
from the local MySQL list.

</P>
<P>
If you wish to have traffic for a mailing list go to a separate mailbox in
your mail program, set up a filter based on the message headers.  You can
use either the <code>List-ID:</code> or <code>Delivered-To:</code> headers to identify
list messages.

</P>
<P>
The MySQL mailing lists are as follows:

</P>
<DL COMPACT>

<DT><code>announce</code>
<DD>
This list is for announcements of new versions of MySQL and related
programs.  This is a low-volume list to which all MySQL users should
subscribe.

<DT><code>mysql</code>
<DD>
This is the main list for general MySQL discussion.  Please note that some
topics are better discussed on the more-specialized lists.  If you post to the
wrong list, you may not get an answer.

<DT><code>bugs</code>
<DD>
This list will be of interest to you if you want to stay informed about
issues reported since the last release of MySQL or if you want to be
actively involved in the process of bug hunting and fixing.
See section <A HREF="manual_Introduction.html#Bug_reports">1.4.1.3  How to Report Bugs or Problems</A>.

<DT><code>internals</code>
<DD>
This list is for people who work on the MySQL code.  This is also the
forum for discussions on MySQL development and for posting patches.

<DT><code>mysqldoc</code>
<DD>
This list is for people who work on the MySQL documentation:
people from MySQL AB, translators, and other community members.

<DT><code>benchmarks</code>
<DD>
This list is for anyone interested in performance issues. Discussions
concentrate on database performance (not limited to MySQL), but also
include broader categories such as performance of the kernel,
filesystem, disk system, and so on.

<DT><code>packagers</code>
<DD>
This list is for discussions on packaging and distributing MySQL. This is the 
forum used by distribution maintainers to exchange ideas on packaging MySQL 
and on ensuring that MySQL looks and feels as similar as possible on all 
supported platforms and operating systems.

<DT><code>java</code>
<DD>
This list is for discussions about the MySQL server and Java. It is mostly 
used to discuss JDBC drivers, including MySQL Connector/J.

<DT><code>win32</code>
<DD>
This list is for all topics concerning the MySQL software on Microsoft 
operating systems, such as Windows 9x, Me, NT, 2000, XP, and 2003.

<DT><code>myodbc</code>
<DD>
This list is for all topics concerning connecting to the MySQL server with ODBC.

<DT><code>gui-tools</code>
<DD>
This list is for all topics concerning MySQL GUI tools, including <code>MySQL
Administrator</code> and the <code>MySQL Control Center</code> graphical client.

<DT><code>cluster</code>
<DD>
This list is for discussion of MySQL Cluster.

<DT><code>dotnet</code>
<DD>
This list is for discussion of the MySQL server and the .NET platform.
Mostly related to the MySQL Connector/Net provider.

<DT><code>plusplus</code>
<DD>
This list is for all topics concerning programming with the C++ API for MySQL.

<DT><code>perl</code>
<DD>
This list is for all topics concerning the Perl support for MySQL with
<code>DBD::mysql</code>.

</DL>

<P>
If you're unable to get an answer to your questions from a MySQL mailing
list, one option is to purchase support from MySQL AB. This will put you
in direct contact with MySQL developers. 

</P>
<P>
The following table shows some MySQL mailing lists in languages other than
English.  These lists are not operated by MySQL AB.

</P>
<DL COMPACT>

<DT><code><a HREF="mailto:mysql-france-subscribe@yahoogroups.com">mysql-france-subscribe@yahoogroups.com</a></code>
<DD>
A French mailing list.

<DT><code><a HREF="mailto:list@tinc.net">list@tinc.net</a></code>
<DD>
A Korean mailing list.
Email <code>subscribe mysql your@email.address</code> to this list.

<DT><code><a HREF="mailto:mysql-de-request@lists.4t2.com">mysql-de-request@lists.4t2.com</a></code>
<DD>
A German mailing list.
Email <code>subscribe mysql-de your@email.address</code> to this list.
You can find information about this mailing list at
<a HREF="http://www.4t2.com/mysql/">http://www.4t2.com/mysql/</a>.

<DT><code><a HREF="mailto:mysql-br-request@listas.linkway.com.br">mysql-br-request@listas.linkway.com.br</a></code>
<DD>
A Portuguese mailing list.
Email <code>subscribe mysql-br your@email.address</code> to this list.

<DT><code><a HREF="mailto:mysql-alta@elistas.net">mysql-alta@elistas.net</a></code>
<DD>
A Spanish mailing list.
Email <code>subscribe mysql your@email.address</code> to this list.

</DL>



<H4><A NAME="Asking_questions" HREF="manual_toc.html#Asking_questions">1.4.1.2  Asking Questions or Reporting Bugs</A></H4>

<P>
<A NAME="IDX49"></A>
<A NAME="IDX50"></A>
<A NAME="IDX51"></A>

</P>
<P>
Before posting a bug report or question, please do the following:

</P>

<UL>
<LI>

Start by searching the MySQL online manual at
<a HREF="http://dev.mysql.com/doc/">http://dev.mysql.com/doc/</a>.
We try to keep the manual up to date by updating it frequently with
solutions to newly found problems. The change history
(<a HREF="http://dev.mysql.com/doc/mysql/en/News.html">http://dev.mysql.com/doc/mysql/en/News.html</a>) can be particularly
useful since it is quite possible that a newer version already
contains a solution to your problem.

<LI>

Search in the bugs database at <a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a> to see 
whether the bug has already been reported and fixed.

<LI>

Search the MySQL mailing list archives at
<a HREF="http://lists.mysql.com/">http://lists.mysql.com/</a>.
<LI>

You can also use <a HREF="http://www.mysql.com/search/">http://www.mysql.com/search/</a> to search all the
Web pages (including the manual) that are located at the MySQL AB Web site.
</UL>

<P>
If you can't find an answer in the manual or the archives, check with your
local MySQL expert.  If you still can't find an answer to your
question, please follow the guidelines on sending mail to a MySQL mailing list, 
outlined in the next section, before contacting us.

</P>



<H4><A NAME="Bug_reports" HREF="manual_toc.html#Bug_reports">1.4.1.3  How to Report Bugs or Problems</A></H4>

<P>
<A NAME="IDX52"></A>
<A NAME="IDX53"></A>
<A NAME="IDX54"></A>
<A NAME="IDX55"></A>
<A NAME="IDX56"></A>
<A NAME="IDX57"></A>
<A NAME="IDX58"></A>
<A NAME="IDX59"></A>
<A NAME="IDX60"></A>

</P>
<P>
The normal place to report bugs is <a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a>, which is the
address for our bugs database.
This database is public, and can be browsed and searched by anyone.
If you log in to the system, you will also be able to enter new reports.

</P>
<P>
Writing a good bug report takes patience, but doing it right the first
time saves time both for us and for yourself.  A good bug report, containing
a full test case for the bug, makes it very likely that we will fix the bug in
the next release.  This section will help you write your report correctly
so that you don't waste your time doing things that may not help us much
or at all.

</P>
<P>
We encourage everyone to use the <code>mysqlbug</code> script to generate a bug
report (or a report about any problem).  <code>mysqlbug</code> can be
found in the <tt>`scripts'</tt> directory (source distribution) and in the 
<tt>`bin'</tt> directory under your MySQL installation directory (binary distribution). 
If you are unable to use <code>mysqlbug</code> (for example, if you are running 
on Windows), it is still vital that you include all the necessary information 
noted in this section (most importantly, a description of the operating system 
and the MySQL version).

</P>
<P>
The <code>mysqlbug</code> script helps you generate a report by determining much
of the following information automatically, but if something important is
missing, please include it with your message.  Please read this section
carefully and make sure that all the information described here is included
in your report.

</P>
<P>
Preferably, you should test the problem using the latest production or
development version of MySQL Server before posting.  Anyone should be
able to repeat the bug by just using <code>mysql test &#60; script_file</code> on the
included test case or by running the shell or Perl script that is included in the
bug report.

</P>
<P>
All bugs posted in the bugs database at <a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a>
will be corrected or documented in the
next MySQL release. If only minor code changes are needed to correct a
problem, we may also post a patch that fixes the problem.

</P>
<P>
If you have found a sensitive security bug in MySQL, you can send
email to <a HREF="mailto:security@mysql.com">security@mysql.com</a>.

</P>
<P>
If you have a repeatable bug report, please report it to the bugs
database at <a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a>.  Note that even in this case
it's good to run the <code>mysqlbug</code> script first to find information
about your system.  Any bug that we are able to repeat has a high chance
of being fixed in the next MySQL release.

</P>
<P>
To report other problems, you can use one of the MySQL mailing lists.

</P>
<P>
Remember that it is possible for us to respond to a message containing too much
information, but not to one containing too little.  People often omit facts
because they think they know the cause of a problem and assume that some
details don't matter.  A good principle is this: If you are in doubt about stating
something, state it.  It is faster and less troublesome to
write a couple more lines in your report than to wait longer for the answer
if we must ask you to provide information that was missing from the initial
report.

</P>
<P>
The most common errors made in bug reports are (a) not including the version number of
the MySQL distribution used, and (b) not fully describing the platform on which the MySQL server
is installed (including the platform type and version number).  This is highly
relevant information, and in 99 cases out of 100, the bug report is useless without it.  
Very often we get questions like,
``Why doesn't this work for me?'' Then we find that the feature
requested wasn't implemented in that MySQL version, or that a bug
described in a report has already been fixed in newer MySQL
versions.  Sometimes the error is platform-dependent; in such cases, it is
next to impossible for us to fix anything without knowing the operating system and
the version number of the platform.

</P>
<P>
If you compiled MySQL from source,
remember also to provide information about your compiler, if it is related to
the problem.  Often people find bugs in compilers and think the problem is
MySQL-related.  Most compilers are under development all the time and
become better version by version.  To determine whether your
problem depends on your compiler, we need to know what compiler you use.
Note that every compiling problem should be regarded as a bug and
reported accordingly.

</P>
<P>
It is most helpful when a good description of the problem is included in the
bug report.  That is, give a good example of everything you did that led to
the problem and describe, in exact detail, the problem itself.  The best reports are
those that include a full example showing how to reproduce the bug or
problem.  See section <A HREF="manual_Porting.html#Reproduceable_test_case">E.1.6  Making a Test Case If You Experience Table Corruption</A>.

</P>
<P>
If a program produces an error message, it is very important to include the
message in your report.  If we try to search for something from the archives
using programs, it is better that the error message reported exactly matches
the one that the program produces.  (Even the lettercase should be observed.)
You should never try to reproduce from memory what the error message was;
instead, copy and paste the entire message into your report.

</P>
<P>
If you have a problem with Connector/ODBC (MyODBC), please try to generate a
trace file and send it with your report.  See section <A HREF="manual_MySQL_Connectors.html#MyODBC_bug_report">22.1.1.9  How to Report MyODBC Problems or Bugs</A>.

</P>
<P>
Please remember that many of the people who will read your report will
do so using an 80-column display.  When generating reports or examples
using the <code>mysql</code> command-line tool, you should therefore use
the <code>--vertical</code> option (or the <code>\G</code> statement terminator)
for output that would exceed the available width for such a display
(for example, with the <code>EXPLAIN SELECT</code> statement; see the
example later in this section).

</P>
<P>
<A NAME="IDX61"></A>
Please include the following information in your report:

</P>

<UL>
<LI>

The version number of the MySQL distribution you are using (for
example, MySQL 4.0.12). You can find out which version you
are running by executing <code>mysqladmin version</code>.  The <code>mysqladmin</code>
program can be found in the <tt>`bin'</tt> directory under your MySQL
installation directory.

<LI>

The manufacturer and model of the machine on which you experience the 
problem.

<LI>

The operating system name and version.  If you work with Windows, you
can usually get the name and version number by double-clicking your
My Computer icon and pulling down the ``Help/About Windows'' menu.
For most Unix-like operating systems, you can get this information by
executing the command <code>uname -a</code>.

<LI>

Sometimes the amount of memory (real and virtual) is relevant. If in doubt,
include these values.

<LI>

If you are using a source distribution of the MySQL software, the name and
version number of the compiler used are needed.  If you have a binary
distribution, the distribution name is needed.

<LI>

If the problem occurs during compilation, include the exact error
messages and also a few lines of context around the offending code in the
file where the error occurs.

<LI>

If <code>mysqld</code> died, you should also report the query that crashed
<code>mysqld</code>.  You can usually find this out by running <code>mysqld</code> with
query logging enabled, and then looking in the log after <code>mysqld</code> crashes
See section <A HREF="manual_Porting.html#Using_log_files">E.1.5  Using Log Files to Find Cause of Errors in <code>mysqld</code></A>.

<LI>

If a database table is related to the problem, include the output from
<code>mysqldump --no-data <var>db_name</var> <var>tbl_name</var></code>.  This is very easy
to do and is a powerful way to get information about any table in a database.
The information will help us create a situation matching the one you have.

<LI>

For speed-related bugs or problems with <code>SELECT</code> statements, you
should always include the output of <code>EXPLAIN SELECT ...</code>, and at
least the number of rows that the <code>SELECT</code> statement produces.  You
should also include the output from <code>SHOW CREATE TABLE <var>tbl_name</var></code>
for each involved table. The more information you give about your
situation, the more likely it is that someone can help you.

The following is an example of a very good bug report. It should be posted
with the <code>mysqlbug</code> script.  The example uses the <code>mysql</code>
command-line tool. Note the use of the <code>\G</code> statement terminator for
statements whose output width would otherwise exceed that of an 80-column
display device.


<PRE>
mysql&#62; SHOW VARIABLES;
mysql&#62; SHOW COLUMNS FROM ...\G
       &#60;output from SHOW COLUMNS&#62;
mysql&#62; EXPLAIN SELECT ...\G
       &#60;output from EXPLAIN&#62;
mysql&#62; FLUSH STATUS;
mysql&#62; SELECT ...;
       &#60;A short version of the output from SELECT,
       including the time taken to run the query&#62;
mysql&#62; SHOW STATUS;
       &#60;output from SHOW STATUS&#62;
</PRE>

<LI>

If a bug or problem occurs while running <code>mysqld</code>, try to provide an
input script that will reproduce the anomaly.  This script should include any
necessary source files.  The more closely the script can reproduce your
situation, the better.  If you can make a reproducible test case, you should
post it on <a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a> for high-priority treatment.

If you can't provide a script, you should at least include the output
from <code>mysqladmin variables extended-status processlist</code> in your mail to
provide some information on how your system is performing.

<LI>

If you can't produce a test case with only a few rows, or if the test table
is too big to be mailed to the mailing list (more than 10 rows), you should
dump your tables using <code>mysqldump</code> and create a <tt>`README'</tt> file
that describes your problem.

Create a compressed archive of your files using
<code>tar</code> and <code>gzip</code> or <code>zip</code>, and use FTP to transfer the
archive to <a HREF="ftp://ftp.mysql.com/pub/mysql/upload/">ftp://ftp.mysql.com/pub/mysql/upload/</a>.  Then enter
the problem into our bugs database at <a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a>.

<LI>

If you think that the MySQL server produces a strange result from a query,
include not only the result, but also your opinion of what the result
should be, and an account describing the basis for your opinion.

<LI>

When giving an example of the problem, it's better to use the variable names,
table names, and so on that exist in your actual situation than to come up with
new names.  The problem could be related to the name of a variable or table.
These cases are rare, perhaps, but it is better to be safe than sorry.
After all, it should be easier for you to provide an example that uses your
actual situation, and it is by all means better for us.  In case you have data
that you don't want to show to others, you can use FTP to transfer it to
<a HREF="ftp://ftp.mysql.com/pub/mysql/upload/">ftp://ftp.mysql.com/pub/mysql/upload/</a>.  If the information is
really top secret and you don't want to show it even to us, then go ahead
and provide an example using other names, but please regard this as the last
choice.

<LI>

Include all the options given to the relevant programs, if possible.  For
example, indicate the options that you use when you start the <code>mysqld</code>
server as well as the options that you use to run any MySQL client programs.
The options to programs such as <code>mysqld</code> and <code>mysql</code>, and to the
<code>configure</code> script, are often keys to answers and are very relevant.
It is never a bad idea to include them.  If you use any modules, such
as Perl or PHP, please include the version numbers of those as well.

<LI>

If your question is related to the privilege system, please include the
output of <code>mysqlaccess</code>, the output of <code>mysqladmin reload</code>, and all
the error messages you get when trying to connect.  When you test your
privileges, you should first run <code>mysqlaccess</code>.  After this, execute
<code>mysqladmin reload version</code> and try to connect with the program that
gives you trouble.  <code>mysqlaccess</code> can be found in the <tt>`bin'</tt>
directory under your MySQL installation directory.

<LI>

If you have a patch for a bug, do include it.  But don't assume that the patch is
all we need, or that we will use it, if you don't provide some necessary
information such as test cases showing the bug that your patch fixes.  We
might find problems with your patch or we might not understand it at all; if
so, we can't use it.

If we can't verify exactly what the purpose of the patch is, we won't use it.
Test cases will help us here.  Show that the patch will handle all the
situations that may occur.  If we find a borderline case (even a rare one)
where the patch won't work, it may be useless.

<LI>

Guesses about what the bug is, why it occurs, or what it depends on
are usually wrong.  Even the MySQL team can't guess such things
without first using a debugger to determine the real cause of a bug.

<LI>

Indicate in your bug report that you have checked the reference manual
and mail archive so that others know you have tried to solve the
problem yourself.

<LI>

If you get a <code>parse error</code>, please check your syntax closely.  If
you can't find something wrong with it, it's extremely likely that your
current version of MySQL Server doesn't support the syntax you are
using.  If you are using the current version and the manual at
<a HREF="http://dev.mysql.com/doc/">http://dev.mysql.com/doc/</a> doesn't cover the
syntax you are using, MySQL Server doesn't support your query.  In this
case, your only options are to implement the syntax yourself or email
<a HREF="mailto:licensing@mysql.com">licensing@mysql.com</a> and ask for an offer to implement it.

If the manual covers the syntax you are using, but you have an older version
of MySQL Server, you should check the MySQL change history to see
when the syntax was implemented.  In this case, you have the option of
upgrading to a newer version of MySQL Server.  See section <A HREF="manual_News.html#News">D  MySQL Change History</A>.

<LI>

If your problem is that your data appears corrupt or you get errors
when you access a particular table, you should first check and then try
to repair your tables with <code>CHECK TABLE</code> and <code>REPAIR TABLE</code>
or with <code>myisamchk</code>.
See section <A HREF="manual_MySQL_Database_Administration.html#MySQL_Database_Administration">5  Database Administration</A>.

If you are running Windows, please verify that <code>lower_case_table_names</code>
is 1 or 2 with <code>SHOW VARIABLES LIKE 'lower_case_table_names'</code>.

<LI>

If you often get corrupted tables, you should try to find out when and why this
happens.  In this case, the error log in the MySQL data directory
may contain some information about what happened. (This is the file with the
<tt>`.err'</tt> suffix in the name.)  See section <A HREF="manual_MySQL_Database_Administration.html#Error_log">5.9.1  The Error Log</A>.  Please
include any relevant information from this file in your bug report.  Normally
<code>mysqld</code> should <em>never</em> crash a table if nothing killed it in the
middle of an update.  If you can find the cause of <code>mysqld</code> dying,
it's much easier for us to provide you with a fix for the problem.
See section <A HREF="manual_Problems.html#What_is_crashing">A.1  How to Determine What Is Causing a Problem</A>.

<LI>

If possible, download and install the most recent version of MySQL Server
and check whether it solves your problem.  All versions of
the MySQL software are thoroughly tested and should work without problems.
We believe in making everything as backward-compatible as possible,
and you should be able to switch MySQL versions without difficulty.
See section <A HREF="manual_Installing.html#Which_version">2.1.2  Choosing Which MySQL Distribution to Install</A>.
</UL>

<P>
<A NAME="IDX62"></A>
<A NAME="IDX63"></A>
<A NAME="IDX64"></A>
<A NAME="IDX65"></A>
If you are a support customer, please cross-post the bug report to
<a HREF="mailto:mysql-support@mysql.com">mysql-support@mysql.com</a> for higher-priority treatment, as well as to
the appropriate mailing list to see whether someone else has experienced (and
perhaps solved) the problem.

</P>
<P>
For information on reporting bugs in MyODBC, see section <A HREF="manual_MySQL_Connectors.html#MyODBC_bug_report">22.1.1.9  How to Report MyODBC Problems or Bugs</A>.

</P>
<P>
For solutions to some common problems, see section <A HREF="manual_Problems.html#Problems">A  Problems and Common Errors</A>.

</P>
<P>
When answers are sent to you individually and not to the mailing list,
it is considered good etiquette to summarize the answers and send the
summary to the mailing list so that others may have the benefit of
responses you received that helped you solve your problem.

</P>



<H4><A NAME="Answering_questions" HREF="manual_toc.html#Answering_questions">1.4.1.4  Guidelines for Answering Questions on the Mailing List</A></H4>

<P>
<A NAME="IDX66"></A>
<A NAME="IDX67"></A>
<A NAME="IDX68"></A>
<A NAME="IDX69"></A>

</P>
<P>
If you consider your answer to have broad interest, you may want to post it
to the mailing list instead of replying directly to the individual who
asked.  Try to make your answer general enough that people other than the
original poster may benefit from it.  When you post to the list, please make
sure that your answer is not a duplication of a previous answer.

</P>
<P>
Try to summarize the essential part of the question in your reply; don't feel
obliged to quote the entire original message.

</P>
<P>
Please don't post mail messages from your browser with HTML mode turned on.
Many users don't read mail with a browser.

</P>


<H3><A NAME="IRC" HREF="manual_toc.html#IRC">1.4.2  MySQL Community Support on IRC (Internet Relay Chat)</A></H3>

<P>
<A NAME="IDX70"></A>
<A NAME="IDX71"></A>

</P>
<P>
In addition to the various MySQL mailing lists, you can find experienced
community people on <code>IRC</code> (<code>Internet Relay Chat</code>).
These are the best networks/channels currently known to us:

</P>

<UL>
<LI><strong>freenode</strong> (see <a HREF="http://www.freenode.net/">http://www.freenode.net/</a> for servers)


<UL>
<LI><code>#mysql</code>

Primarily MySQL questions, but other database and general SQL questions are welcome.
Questions about PHP, Perl or C in combination with MySQL are also common.
</UL>

<LI><strong>EFnet</strong> (see <a HREF="http://www.efnet.org/">http://www.efnet.org/</a> for servers)


<UL>
<LI><code>#mysql</code>

MySQL questions.
</UL>

</UL>

<P>
If you are looking for IRC client software to connect to an IRC network,
take a look at <code>X-Chat</code> (<a HREF="http://www.xchat.org/">http://www.xchat.org/</a>).
X-Chat (GPL licensed) is available for Unix as well as for Windows platforms.

</P>


<H3><A NAME="Forums" HREF="manual_toc.html#Forums">1.4.3  MySQL Community Support at the MySQL Forums</A></H3>

<P>
<A NAME="IDX72"></A>

</P>
<P>
The latest community support resource are the forums at <a HREF="http://forums.mysql.com">http://forums.mysql.com</a>.

</P>
<P>
There are a variety of forums available, grouped in the following general categories:

</P>

<UL>
<LI>Migration

<LI>MySQL Usage

<LI>MySQL Connectors

<LI>MySQL Technology

<LI>Business

</UL>



<H2><A NAME="Compatibility" HREF="manual_toc.html#Compatibility">1.5  MySQL Standards Compliance</A></H2>

<P>
<A NAME="IDX73"></A>
<A NAME="IDX74"></A>
<A NAME="IDX75"></A>
<A NAME="IDX76"></A>
<A NAME="IDX77"></A>

</P>
<P>
This section describes how MySQL relates to the ANSI/ISO SQL standards.
MySQL Server has many extensions to the SQL standard, and here you
will find out what they are and how to use them.  You will also find
information about functionality missing from MySQL Server, and how to work
around some differences.

</P>
<P>
The SQL standard has been evolving since 1986 and several versions exist. In
this manual, ``SQL-92'' refers to the standard released in 1992,
``SQL:1999'' refers to the standard released in 1999, and ``SQL:2003''
refers to the current version of the standard.  We use the phrase ``the SQL
standard'' to mean the current version of the SQL Standard at any time.

</P>
<P>
Our goal is to not restrict MySQL Server usability for any usage without a
very good reason for doing so.  Even if we don't have the resources to perform
 development for every possible use, we are always willing to help and offer
suggestions to people who are trying to use MySQL Server in new territories.

</P>
<P>
One of our main goals with the product is to continue to work toward
compliance with the SQL standard, but without sacrificing speed or reliability.
We are not afraid to add extensions to SQL or support for non-SQL
features if this greatly increases the usability of MySQL Server for a large
segment of our user base.
The <code>HANDLER</code> interface in MySQL Server 4.0 is an example of this
strategy. See section <A HREF="manual_SQL_Syntax.html#HANDLER">13.1.3  <code>HANDLER</code> Syntax</A>.

</P>
<P>
We will continue to support transactional and non-transactional
databases to satisfy both mission-critical 24/7 usage and
heavy Web or logging usage.

</P>
<P>
MySQL Server was originally designed to work with medium size databases
(10-100 million rows, or about 100MB per table) on small computer systems. 
Today MySQL Server handles terabyte-size databases, but the code can also be
compiled in a reduced version suitable for hand-held and embedded devices.
The compact design of the MySQL server makes development in both directions
possible without any conflicts in the source tree.

</P>
<P>
Currently, we are not targeting realtime support, although MySQL
replication capabilities already offer significant functionality.

</P>
<P>
Database cluster support now exists through third-party clustering
solutions as well as the integration of our acquired NDB Cluster
technology into a new storage engine, available from version 4.1.2.
See section <A HREF="manual_NDBCluster.html#NDBCluster">16  MySQL Cluster</A>.

</P>
<P>
We are also looking at providing XML support in the database server.

</P>



<H3><A NAME="Standards" HREF="manual_toc.html#Standards">1.5.1  What Standards MySQL Follows</A></H3>

<P>
We are aiming toward supporting the full ANSI/ISO SQL standard,
but without making concessions to speed and quality of the code.

</P>
<P>
ODBC levels 0-3.51.

</P>



<H3><A NAME="SQL_mode" HREF="manual_toc.html#SQL_mode">1.5.2  Selecting SQL Modes</A></H3>

<P>
The MySQL server can operate in different SQL modes, and can apply these
modes differentially for different clients. This allows an application to
tailor server operation to its own requirements.

</P>
<P>
Modes define what SQL syntax MySQL should support and what kind of
validation checks it should perform on the data.  This makes it easier
to use MySQL in a lot of different environments and to use MySQL together
with other database servers.

</P>
<P>
You can set the default SQL mode by starting <code>mysqld</code> with the
<code>--sql-mode="modes"</code> option. Beginning with MySQL 4.1, you can also
change the mode after startup time by setting the <code>sql_mode</code> variable
with a <code>SET [SESSION|GLOBAL] sql_mode='modes'</code> statement.

</P>
<P>
For more information on setting the server mode, see section <A HREF="manual_MySQL_Database_Administration.html#Server_SQL_mode">5.2.2  The Server SQL Mode</A>.

</P>



<H3><A NAME="ANSI_mode" HREF="manual_toc.html#ANSI_mode">1.5.3  Running MySQL in ANSI Mode</A></H3>

<P>
<A NAME="IDX78"></A>
<A NAME="IDX79"></A>

</P>
<P>
You can tell <code>mysqld</code> to use the ANSI mode with the <code>--ansi</code>
startup option. See section <A HREF="manual_MySQL_Database_Administration.html#Server_options">5.2.1  <code>mysqld</code> Command-Line Options</A>.

</P>
<P>
Running the server in ANSI mode is the same as starting it with these options
(specify the <code>--sql_mode</code> value on a single line):

</P>

<PRE>
--transaction-isolation=SERIALIZABLE
--sql-mode=REAL_AS_FLOAT,PIPES_AS_CONCAT,ANSI_QUOTES,
IGNORE_SPACE,ONLY_FULL_GROUP_BY
</PRE>

<P>
In MySQL 4.1, you can achieve the same effect with these two statements
(specify the <code>sql_mode</code> value on a single line):

</P>

<PRE>
SET GLOBAL TRANSACTION ISOLATION LEVEL SERIALIZABLE;
SET GLOBAL sql_mode = 'REAL_AS_FLOAT,PIPES_AS_CONCAT,ANSI_QUOTES,
IGNORE_SPACE,ONLY_FULL_GROUP_BY';
</PRE>

<P>
See section <A HREF="manual_Introduction.html#SQL_mode">1.5.2  Selecting SQL Modes</A>.

</P>
<P>
In MySQL 4.1.1, the <code>sql_mode</code> options shown can be also be set with
this statement:

</P>

<PRE>
SET GLOBAL sql_mode='ansi';
</PRE>

<P>
In this case, the value of the <code>sql_mode</code> variable will be set to all
options that are relevant for ANSI mode. You can check the result like this:

</P>

<PRE>
mysql&#62; SET GLOBAL sql_mode='ansi';
mysql&#62; SELECT @@global.sql_mode;
        -&#62; 'REAL_AS_FLOAT,PIPES_AS_CONCAT,ANSI_QUOTES,
            IGNORE_SPACE,ONLY_FULL_GROUP_BY,ANSI';
</PRE>



<H3><A NAME="Extensions_to_ANSI" HREF="manual_toc.html#Extensions_to_ANSI">1.5.4  MySQL Extensions to Standard SQL</A></H3>

<P>
<A NAME="IDX80"></A>
MySQL Server includes some extensions that you probably will not find in
other SQL databases.  Be warned that if you use them, your code will not be
portable to other SQL servers.  In some cases, you can write code that
includes MySQL extensions, but is still portable, by using comments
of the form <code>/*! ... */</code>.  In this case, MySQL Server will parse and
execute the code within the comment as it would any other MySQL
statement, but other SQL servers will ignore the extensions.  For example:

</P>

<PRE>
SELECT /*! STRAIGHT_JOIN */ col_name FROM table1,table2 WHERE ...
</PRE>

<P>
If you add a version number after the <samp>`!'</samp> character, the syntax within
the comment will be
executed only if the MySQL version is equal to or newer than the specified
version number:

</P>

<PRE>
CREATE /*!32302 TEMPORARY */ TABLE t (a INT);
</PRE>

<P>
This means that if you have Version 3.23.02 or newer, MySQL
Server will use the <code>TEMPORARY</code> keyword.

</P>
<P>
The following descriptions list MySQL extensions, organized by category.

</P>
<DL COMPACT>

<DT>Organization of data on disk
<DD>
MySQL Server maps each database to a directory under the MySQL
data directory, and tables within a database to filenames in the database
directory.
This has a few implications:


<UL>

<LI>

<A NAME="IDX81"></A>
<A NAME="IDX82"></A>
<A NAME="IDX83"></A>
<A NAME="IDX84"></A>
Database names and table names are case sensitive in MySQL Server on
operating systems that have case-sensitive filenames (such as most Unix
systems). See section <A HREF="manual_Language_Structure.html#Name_case_sensitivity">9.2.2  Identifier Case Sensitivity</A>.

<LI>

You can use standard system commands to back up, rename, move, delete, and copy
tables that are managed by the <code>MyISAM</code> or <code>ISAM</code> storage engines.
For example, to rename a <code>MyISAM</code> table, rename the <tt>`.MYD'</tt>,
<tt>`.MYI'</tt>, and <tt>`.frm'</tt> files to which the table corresponds.
</UL>

Database, table, index, column, or alias names may begin with a digit
(but may not consist solely of digits).

<DT>General language syntax
<DD>

<UL>

<LI>

Strings may be enclosed by either <samp>`"'</samp> or <samp>`''</samp>, not just by <samp>`''</samp>.

<LI>

Use of <samp>`\'</samp> as an escape character in strings.

<LI>

In SQL statements, you can access tables from different databases
with the <var>db_name.tbl_name</var> syntax.  Some SQL servers provide
the same functionality but call this <code>User space</code>.
MySQL Server doesn't support tablespaces such as used in statements like this:
<code>CREATE TABLE ralph.my_table...IN my_tablespace</code>.

</UL>

<DT>SQL statement syntax
<DD>

<UL>

<LI>

The <code>ANALYZE TABLE</code>, <code>CHECK TABLE</code>, <code>OPTIMIZE TABLE</code>, and
<code>REPAIR TABLE</code> statements.

<LI>

The <code>CREATE DATABASE</code> and <code>DROP DATABASE</code> statements.
See section <A HREF="manual_SQL_Syntax.html#CREATE_DATABASE">13.2.4  <code>CREATE DATABASE</code> Syntax</A>.

<LI>

The <code>DO</code> statement.

<LI>

<code>EXPLAIN SELECT</code> to get a description of how tables are joined.

<LI>

The <code>FLUSH</code> and <code>RESET</code> statements.

<LI>

The <code>SET</code> statement. See section <A HREF="manual_SQL_Syntax.html#SET_OPTION">13.5.3  <code>SET</code> Syntax</A>.

<LI>

The <code>SHOW</code> statement.
See section <A HREF="manual_SQL_Syntax.html#SHOW">13.5.4  <code>SHOW</code> Syntax</A>.

<A NAME="IDX85"></A>
<A NAME="IDX86"></A>
<LI>

Use of <code>LOAD DATA INFILE</code>. In many cases, this syntax is compatible with
Oracle's <code>LOAD DATA INFILE</code>. See section <A HREF="manual_SQL_Syntax.html#LOAD_DATA">13.1.5  <code>LOAD DATA INFILE</code> Syntax</A>.

<LI>

Use of <code>RENAME TABLE</code>. See section <A HREF="manual_SQL_Syntax.html#RENAME_TABLE">13.2.12  <code>RENAME TABLE</code> Syntax</A>.

<LI>

Use of <code>REPLACE</code> instead of <code>DELETE</code> + <code>INSERT</code>.
See section <A HREF="manual_SQL_Syntax.html#REPLACE">13.1.6  <code>REPLACE</code> Syntax</A>.

<LI>

Use of <code>CHANGE col_name</code>, <code>DROP col_name</code>, or <code>DROP
INDEX</code>, <code>IGNORE</code> or <code>RENAME</code> in an <code>ALTER TABLE</code>
statement.
Use of multiple <code>ADD</code>, <code>ALTER</code>, <code>DROP</code>, or <code>CHANGE</code>
clauses in an <code>ALTER TABLE</code> statement.
See section <A HREF="manual_SQL_Syntax.html#ALTER_TABLE">13.2.2  <code>ALTER TABLE</code> Syntax</A>.

<LI>

Use of index names, indexes on a prefix of a field, and use of
<code>INDEX</code> or <code>KEY</code> in a <code>CREATE TABLE</code>
statement. See section <A HREF="manual_SQL_Syntax.html#CREATE_TABLE">13.2.6  <code>CREATE TABLE</code> Syntax</A>.

<LI>

Use of <code>TEMPORARY</code> or <code>IF NOT EXISTS</code> with <code>CREATE TABLE</code>.

<LI>

Use of <code>IF EXISTS</code> with <code>DROP TABLE</code>.

<LI>

You can drop multiple tables with a single <code>DROP TABLE</code> statement.

<LI>

The <code>ORDER BY</code> and <code>LIMIT</code> clauses of the <code>UPDATE</code> and
<code>DELETE</code> statements.

<LI>

<code>INSERT INTO ... SET col_name = ...</code> syntax.

<LI>

The <code>DELAYED</code> clause of the <code>INSERT</code> and <code>REPLACE</code>
statements.

<LI>

The <code>LOW_PRIORITY</code> clause of the <code>INSERT</code>, <code>REPLACE</code>,
<code>DELETE</code>, and <code>UPDATE</code> statements.

<LI>

Use of <code>INTO OUTFILE</code> and <code>STRAIGHT_JOIN</code> in a <code>SELECT</code>
statement. See section <A HREF="manual_SQL_Syntax.html#SELECT">13.1.7  <code>SELECT</code> Syntax</A>.

<LI>

The <code>SQL_SMALL_RESULT</code> option in a <code>SELECT</code> statement.

<LI>

You don't need to name all selected columns in the <code>GROUP BY</code> part.
This gives better performance for some very specific, but quite normal
queries.
See section <A HREF="manual_Functions.html#Group_by_functions_and_modifiers">12.9  Functions and Modifiers for Use with <code>GROUP BY</code> Clauses</A>.

<LI>

You can specify <code>ASC</code> and <code>DESC</code> with <code>GROUP BY</code>.

<LI>

The ability to set variables in a statement with the <code>:=</code> assignment
operator:

<PRE>
mysql&#62; SELECT @a:=SUM(total),@b=COUNT(*),@a/@b AS avg
    -&#62; FROM test_table;
mysql&#62; SELECT @t1:=(@t2:=1)+@t3:=4,@t1,@t2,@t3;
</PRE>

</UL>

<DT>Column types
<DD>

<UL>
<LI>

The column types <code>MEDIUMINT</code>, <code>SET</code>, <code>ENUM</code>, and the
different <code>BLOB</code> and <code>TEXT</code> types.

<LI>

The column attributes <code>AUTO_INCREMENT</code>, <code>BINARY</code>, <code>NULL</code>,
<code>UNSIGNED</code>, and <code>ZEROFILL</code>.
</UL>

<DT>Functions and operators
<DD>

<UL>

<LI>

To make it easier for users who come from other SQL environments,
MySQL Server supports aliases for many functions. For example, all
string functions support both standard SQL syntax and ODBC syntax.

<LI>

MySQL Server understands the <code>||</code> and <code>&#38;&#38;</code> operators to mean
logical OR and AND, as in the C programming language.  In MySQL Server,
<code>||</code> and <code>OR</code> are synonyms, as are <code>&#38;&#38;</code> and <code>AND</code>.
Because of this nice syntax, MySQL Server doesn't support
the standard SQL <code>||</code> operator for string concatenation; use
<code>CONCAT()</code> instead. Because <code>CONCAT()</code> takes any number
of arguments, it's easy to convert use of the <code>||</code> operator to
MySQL Server.

<LI>

Use of <code>COUNT(DISTINCT list)</code> where <code>list</code> has more than one element.

<LI>

All string comparisons are case-insensitive by default, with sort
ordering determined by the current character set (ISO-8859-1 Latin1 by
default).  If you don't like this, you should declare your columns with
the <code>BINARY</code> attribute or use the <code>BINARY</code> cast, which causes
comparisons to be done using the underlying character code values rather
then a lexical ordering.

<A NAME="IDX87"></A>
<A NAME="IDX88"></A>
<LI>

The <code>%</code> operator is a synonym for <code>MOD()</code>.  That is,
<code>N % M</code> is equivalent to <code>MOD(N,M)</code>.  <code>%</code> is supported
for C programmers and for compatibility with PostgreSQL.

<LI>

The <code>=</code>, <code>&#60;&#62;</code>, <code>&#60;=</code> ,<code>&#60;</code>, <code>&#62;=</code>,<code>&#62;</code>,
<code>&#60;&#60;</code>, <code>&#62;&#62;</code>, <code>&#60;=&#62;</code>, <code>AND</code>, <code>OR</code>, or <code>LIKE</code>
operators may be used in column comparisons to the left of the
<code>FROM</code> in <code>SELECT</code> statements.  For example:


<PRE>
mysql&#62; SELECT col1=1 AND col2=2 FROM <var>tbl_name</var>;
</PRE>

<LI>

The <code>LAST_INSERT_ID()</code> function that returns the most recent
<code>AUTO_INCREMENT</code> value.
See section <A HREF="manual_Functions.html#Information_functions">12.8.3  Information Functions</A>.

<LI>

<code>LIKE</code> is allowed on numeric columns.

<LI>

The <code>REGEXP</code> and <code>NOT REGEXP</code> extended regular expression
operators.

<LI>

<code>CONCAT()</code> or <code>CHAR()</code> with one argument or more than two
arguments.  (In MySQL Server, these functions can take any number of
arguments.)

<LI>The <code>BIT_COUNT()</code>, <code>CASE</code>, <code>ELT()</code>,

<code>FROM_DAYS()</code>, <code>FORMAT()</code>, <code>IF()</code>, <code>PASSWORD()</code>,
<code>ENCRYPT()</code>, <code>MD5()</code>, <code>ENCODE()</code>, <code>DECODE()</code>,
<code>PERIOD_ADD()</code>, <code>PERIOD_DIFF()</code>, <code>TO_DAYS()</code>, and
<code>WEEKDAY()</code> functions.

<LI>

Use of <code>TRIM()</code> to trim substrings.  Standard SQL supports removal
of single characters only.

<LI>

The <code>GROUP BY</code> functions <code>STD()</code>, <code>BIT_OR()</code>,
<code>BIT_AND()</code>, <code>BIT_XOR()</code>, and <code>GROUP_CONCAT()</code>.
See section <A HREF="manual_Functions.html#Group_by_functions_and_modifiers">12.9  Functions and Modifiers for Use with <code>GROUP BY</code> Clauses</A>.
</UL>

</DL>

<P>
For a prioritized list indicating when new extensions will be added to
MySQL Server, you should consult the online MySQL TODO list at
<a HREF="http://dev.mysql.com/doc/mysql/en/TODO.html">http://dev.mysql.com/doc/mysql/en/TODO.html</a>.
That is the latest version of the TODO list in this manual. See section <A HREF="manual_TODO.html#TODO">C  MySQL and the Future (the TODO)</A>.

</P>



<H3><A NAME="Differences_from_ANSI" HREF="manual_toc.html#Differences_from_ANSI">1.5.5  MySQL Differences from Standard SQL</A></H3>

<P>
We try to make MySQL Server follow the ANSI SQL standard and the
ODBC SQL standard, but MySQL Server performs operations differently in some
cases:

</P>

<UL>
<LI>

For <code>VARCHAR</code> columns, trailing spaces are removed when the value is
stored. (Fixed in MySQL 5.0.3). See section <A HREF="manual_Introduction.html#Bugs">1.5.7  Known Errors and Design Deficiencies in MySQL</A>.

<LI>

In some cases, <code>CHAR</code> columns are silently converted to <code>VARCHAR</code>
columns when you define a table or alter its structure. (Fixed in MySQL 5.0.3).
See section <A HREF="manual_SQL_Syntax.html#Silent_column_changes">13.2.6.1  Silent Column Specification Changes</A>.

<LI>

Privileges for a table are not automatically revoked when you delete a
table. You must explicitly issue a <code>REVOKE</code> statement to revoke
privileges for a table. See section <A HREF="manual_SQL_Syntax.html#GRANT">13.5.1.2  <code>GRANT</code> and <code>REVOKE</code> Syntax</A>.
</UL>



<H4><A NAME="ANSI_diff_Subqueries" HREF="manual_toc.html#ANSI_diff_Subqueries">1.5.5.1  Subqueries</A></H4>

<P>
MySQL 4.1 supports subqueries and derived tables.
A ``subquery'' is a <code>SELECT</code> statement nested within another statement.
A ``derived table'' (an unnamed view) is a subquery in the <code>FROM</code> clause
of another statement.
See section <A HREF="manual_SQL_Syntax.html#Subqueries">13.1.8  Subquery Syntax</A>.

</P>
<P>
For MySQL versions older than 4.1, most subqueries can be
rewritten using joins or other methods.
See section <A HREF="manual_SQL_Syntax.html#Rewriting_subqueries">13.1.8.11  Rewriting Subqueries as Joins for Earlier MySQL Versions</A> for examples that show how to do this.

</P>



<H4><A NAME="ANSI_diff_SELECT_INTO_TABLE" HREF="manual_toc.html#ANSI_diff_SELECT_INTO_TABLE">1.5.5.2  <code>SELECT INTO TABLE</code></A></H4>

<P>
<A NAME="IDX89"></A>

</P>
<P>
MySQL Server doesn't support the Sybase SQL extension:
<code>SELECT ... INTO TABLE ...</code>.  Instead, MySQL Server supports the
standard SQL syntax <code>INSERT INTO ... SELECT ...</code>, which is basically
the same thing. See section <A HREF="manual_SQL_Syntax.html#INSERT_SELECT">13.1.4.1  <code>INSERT ... SELECT</code> Syntax</A>.

</P>

<PRE>
INSERT INTO tbl_temp2 (fld_id)
    SELECT tbl_temp1.fld_order_id
    FROM tbl_temp1 WHERE tbl_temp1.fld_order_id &#62; 100;
</PRE>

<P>
Alternatively, you can use <code>SELECT INTO OUTFILE ...</code> or
<code>CREATE TABLE ... SELECT</code>.

</P>
<P>
From version 5.0, MySQL supports <code>SELECT ... INTO</code> with user
variables. The same syntax may also be used inside stored procedures using
cursors and local variables.
See section <A HREF="manual_Stored_Procedures.html#SELECT_INTO_Statement">19.1.6.3  <code>SELECT ... INTO</code> Statement</A>.

</P>



<H4><A NAME="ANSI_diff_Transactions" HREF="manual_toc.html#ANSI_diff_Transactions">1.5.5.3  Transactions and Atomic Operations</A></H4>

<P>
<A NAME="IDX90"></A>
<A NAME="IDX91"></A>
<A NAME="IDX92"></A>
<A NAME="IDX93"></A>
<A NAME="IDX94"></A>
<A NAME="IDX95"></A>
<A NAME="IDX96"></A>
<A NAME="IDX97"></A>
<A NAME="IDX98"></A>

</P>
<P>
MySQL Server (version 3.23-max and all versions 4.0 and above) supports
transactions with the <code>InnoDB</code> and <code>BDB</code>
transactional storage engines.
<code>InnoDB</code> provides <em>full</em> <code>ACID</code> compliance.
See section <A HREF="manual_Storage_engines.html#Storage_engines">14  MySQL Storage Engines and Table Types</A>.

</P>
<P>
The other non-transactional storage engines in MySQL Server (such as
<code>MyISAM</code>) follow a different paradigm for data integrity called
``atomic operations.'' In transactional terms, <code>MyISAM</code>
tables effectively always operate in <code>AUTOCOMMIT=1</code> mode.
Atomic operations often offer comparable integrity with higher performance.

</P>
<P>
With MySQL Server supporting both paradigms, you can decide whether your
applications are best served by the speed of atomic operations or the use of
transactional features. This choice can be made on a per-table basis.

</P>
<P>
As noted, the trade-off for transactional versus non-transactional table
types lies mostly in performance. Transactional tables have significantly
higher memory and diskspace requirements, and more CPU overhead.
On the other hand, transactional table types such as <code>InnoDB</code> also
offer many significant features. MySQL Server's modular design allows the
concurrent use of different storage engines to suit different
requirements and deliver optimum performance in all situations.

</P>
<P>
But how do you use the features of MySQL Server to maintain rigorous
integrity even with the non-transactional <code>MyISAM</code> tables, and how
do these features compare with the transactional table types?

</P>

<OL>
<LI>

If your applications are written in a way that is dependent on being able
to call <code>ROLLBACK</code> rather than
<code>COMMIT</code> in critical situations, transactions are more
convenient. Transactions also ensure that unfinished updates or
corrupting activities are not committed to the database; the server is
given the opportunity to do an automatic rollback and your database is
saved.

If you use non-transactional tables,
MySQL Server in almost all cases allows you to resolve potential problems
by including simple checks before updates and by running simple scripts
that check the databases for inconsistencies and automatically repair
or warn if such an inconsistency occurs. Note that just by using the
MySQL log or even adding one extra log, you can normally fix tables
perfectly with no data integrity loss.

<LI>

More often than not, critical transactional updates can be rewritten to be
atomic. Generally speaking, all integrity problems that transactions
solve can be done with <code>LOCK TABLES</code> or atomic updates, ensuring
that you never will get an automatic abort from the server, which is
a common problem with transactional database systems.

<LI>

Even a transactional system can lose data if the server goes down.
The difference between different systems lies in just how small the
time-lag is where they could lose data. No system is 100% secure, only
``secure enough.'' Even Oracle, reputed to be the safest of
transactional database systems, is reported to sometimes lose data in such
situations.

To be safe with MySQL Server, whether or not using transactional tables, you
only need to have backups and have binary logging turned on. With
this you can recover from any situation that you could with any
other transactional database system.  It is always good to have
backups, regardless of which database system you use.
</OL>

<P>
The transactional paradigm has its benefits and its drawbacks. Many
users and application developers depend on the ease with which they
can code around problems where an abort appears to be, or is necessary.
However, even if you are new to the atomic operations paradigm, or more
familiar with transactions, do consider the speed benefit that
non-transactional tables can offer on the order of three to five times
the speed of the fastest and most optimally tuned transactional tables.

</P>
<P>
In situations where integrity is of highest importance, MySQL Server offers
transaction-level reliability and integrity even for non-transactional tables.
If you lock tables with <code>LOCK TABLES</code>, all updates will stall
until any integrity checks are made. If you obtain a <code>READ LOCAL</code> lock
(as opposed to a write lock) for a table that allows concurrent inserts at the
end of the table, reads are allowed, as are inserts by other clients.
The new inserted records will not be seen by the
client that has the read lock until it releases the lock.
With <code>INSERT DELAYED</code>, you can queue inserts into a local
queue, until the locks are released, without having the client wait
for the insert to complete. See section <A HREF="manual_SQL_Syntax.html#INSERT_DELAYED">13.1.4.2  <code>INSERT DELAYED</code> Syntax</A>.

</P>
<P>
``Atomic,'' in the sense that we mean it, is nothing magical. It only
means that you can be sure that while each specific update is running,
no other user can interfere with it, and there will never be an
automatic rollback (which can happen with transactional tables if you
are not very careful).  MySQL Server also guarantees that there will not be
any dirty reads.

</P>
<P>
Following are some techniques for working with non-transactional tables:

</P>

<UL>
<LI>

Loops that need transactions normally can be coded with the help of
<code>LOCK TABLES</code>, and you don't need cursors to update
records on the fly.

<LI>

To avoid using <code>ROLLBACK</code>, you can use the following strategy:


<OL>
<LI>

Use <code>LOCK TABLES</code> to lock all the tables you want to access.
<LI>

Test the conditions that must be true before performing the update.
<LI>

Update if everything is okay.
<LI>

Use <code>UNLOCK TABLES</code> to release your locks.
</OL>

This is usually a much faster method than using transactions with
possible rollbacks, although not always. The only situation
this solution doesn't handle is when someone kills the threads in the
middle of an update. In this case, all locks will be released but some
of the updates may not have been executed.

<LI>

You can also use functions to update records in a single operation.
You can get a very efficient application by using the following
techniques:


<UL>
<LI>Modify columns relative to their current value.

<LI>Update only those columns that actually have changed.

</UL>

For example, when we are doing updates to some customer information, we
update only the customer data that has changed and test only that none of
the changed data, or data that depends on the changed data, has changed
compared to the original row. The test for changed data is done with the
<code>WHERE</code> clause in the <code>UPDATE</code> statement. If the record wasn't
updated, we give the client a message: ``Some of the data you have changed
has been changed by another user.'' Then we show the old row versus the new
row in a window so that the user can decide which version of the customer
record to use.

This gives us something that is similar to column locking but is actually
even better because we only update some of the columns, using values that
are relative to their current values.  This means that typical <code>UPDATE</code>
statements look something like these:


<PRE>
UPDATE tablename SET pay_back=pay_back+125;

UPDATE customer
  SET
    customer_date='current_date',
    address='new address',
    phone='new phone',
    money_owed_to_us=money_owed_to_us-125
  WHERE
    customer_id=id AND address='old address' AND phone='old phone';
</PRE>

This is very efficient and works even if another client
has changed the values in the <code>pay_back</code> or <code>money_owed_to_us</code>
columns.

<LI>

<A NAME="IDX99"></A>
<A NAME="IDX100"></A>
In many cases, users have wanted <code>LOCK TABLES</code> and/or <code>ROLLBACK</code>
for the purpose of managing unique identifiers.  This can be handled much
more efficiently without locking or rolling back by using an
<code>AUTO_INCREMENT</code> column and either the
<code>LAST_INSERT_ID()</code> SQL function or the <code>mysql_insert_id()</code> C API function.
See section <A HREF="manual_Functions.html#Information_functions">12.8.3  Information Functions</A>.
See section <A HREF="manual_MySQL_APIs.html#mysql_insert_id">21.2.3.33  <code>mysql_insert_id()</code></A>.

<A NAME="IDX101"></A>
<A NAME="IDX102"></A>
You can generally code around the need for row-level locking. Some situations
really do need it, and <code>InnoDB</code> tables support row-level locking. With
<code>MyISAM</code> tables, you can use a flag column in the table and do something
like the following:


<PRE>
UPDATE <var>tbl_name</var> SET row_flag=1 WHERE id=ID;
</PRE>

MySQL returns 1 for the number of affected rows if the row was
found and <code>row_flag</code> wasn't already 1 in the original row.

You can think of it as though MySQL Server changed the preceding query to:


<PRE>
UPDATE <var>tbl_name</var> SET row_flag=1 WHERE id=ID AND row_flag &#60;&#62; 1;
</PRE>

</UL>



<H4><A NAME="ANSI_diff_Triggers" HREF="manual_toc.html#ANSI_diff_Triggers">1.5.5.4  Stored Procedures and Triggers</A></H4>

<P>
<A NAME="IDX103"></A>
<A NAME="IDX104"></A>
<A NAME="IDX105"></A>

</P>
<P>
Stored procedures are implemented in MySQL version 5.0.
See section <A HREF="manual_Stored_Procedures.html#Stored_Procedures">19  Stored Procedures and Functions</A>.

</P>
<P>
Triggers are currently being implemented, with basic functionality in
MySQL 5.0, with further development planned for MySQL 5.1.

</P>



<H4><A NAME="ANSI_diff_Foreign_Keys" HREF="manual_toc.html#ANSI_diff_Foreign_Keys">1.5.5.5  Foreign Keys</A></H4>

<P>
<A NAME="IDX106"></A>
<A NAME="IDX107"></A>

</P>
<P>
In MySQL Server 3.23.44 and up, the <code>InnoDB</code> storage engine supports
checking of foreign key constraints, including <code>CASCADE</code>, <code>ON
DELETE</code>, and <code>ON UPDATE</code>. See section <A HREF="manual_InnoDB.html#InnoDB_foreign_key_constraints">15.7.4  <code>FOREIGN KEY</code> Constraints</A>.

</P>
<P>
For storage engines other than <code>InnoDB</code>, MySQL Server parses the
<code>FOREIGN KEY</code> syntax in <code>CREATE TABLE</code> statements, but does not
use or store it. In the future, the implementation will be
extended to store this information in the table specification file so that it
may be retrieved by <code>mysqldump</code> and ODBC.  At a later stage,
foreign key constraints will be implemented for <code>MyISAM</code> tables as well.

</P>
<P>
Foreign key enforcement offers several benefits to database developers:

</P>

<UL>
<LI>

Assuming proper design of the relationships, foreign key constraints
make it more difficult for a programmer to introduce an inconsistency
into the database.

<LI>

Centralized checking of constraints by the database server makes it
unnecessary to perform these checks on the application side. This
eliminates the possibility that different applications may not all check the
constraints in the same way.

<LI>

Using cascading updates and deletes can simplify the application code.

<LI>

Properly designed foreign key rules aid in documenting relationships
between tables.
</UL>

<P>
Do keep in mind that these benefits come at the cost of additional overhead
for the database server to perform the necessary checks. Additional checking
by the server affects performance, which for some applications may be
sufficiently undesirable as to be avoided if possible.
(Some major commercial applications have coded the foreign-key logic at the
application level for this reason.)

</P>
<P>
MySQL gives database developers the choice of which approach to use. If you
don't need foreign keys and want to avoid the overhead associated with
enforcing referential integrity, you can choose another table type instead,
such as <code>MyISAM</code>. (For example, the <code>MyISAM</code> storage engine offers
very fast performance for applications that perform only <code>INSERT</code> and
<code>SELECT</code> operations, because the inserts can be performed concurrently
with retrievals.  See section <A HREF="manual_MySQL_Optimization.html#Table_locking">7.3.2  Table Locking Issues</A>.)

</P>
<P>
If you choose not to take advantage of referential integrity checks,
keep the following considerations in mind:

</P>

<UL>
<LI>

In the absence of server-side foreign key relationship checking, the
application itself must handle relationship issues.  For example, it must
take care to insert rows into tables in the proper
order, and to avoid creating orphaned child records. It must also be able to
recover from errors that occur in the middle of multiple-record insert
operations.

<LI>

If <code>ON DELETE</code> is the only referential integrity capability an
application needs, note that as of MySQL Server 4.0, you can use
multiple-table <code>DELETE</code> statements to delete rows from many
tables with a single statement. See section <A HREF="manual_SQL_Syntax.html#DELETE">13.1.1  <code>DELETE</code> Syntax</A>.

<LI>

A workaround for the lack of <code>ON DELETE</code> is to add
the appropriate <code>DELETE</code> statement to your application when you
delete records from a table that has a foreign key. In practice, this is often
as quick as using foreign keys, and is more portable.

</UL>

<P>
Be aware that the use of foreign keys can in some instances lead
to problems:

</P>

<UL>
<LI>

Foreign key support addresses many referential integrity
issues, but it is still necessary to design key relationships carefully to avoid
circular rules or incorrect combinations of cascading deletes.

<LI>

It is not uncommon for a DBA to create a topology of relationships that
makes it difficult to restore individual tables from a backup.
(MySQL alleviates this difficulty by allowing you to temporarily disable
foreign key checks when reloading a table that depends on other tables.
See section <A HREF="manual_InnoDB.html#InnoDB_foreign_key_constraints">15.7.4  <code>FOREIGN KEY</code> Constraints</A>.
As of MySQL 4.1.1,
<code>mysqldump</code> generates dump files that take advantage of this
capability automatically when reloaded.)
</UL>

<P>
Note that foreign keys in SQL are used to check and enforce referential
integrity, not to join tables.  If you want to get results from multiple
tables from a <code>SELECT</code> statement, you do this by performing a join
between them:

</P>

<PRE>
SELECT * FROM t1, t2 WHERE t1.id = t2.id;
</PRE>

<P>
See section <A HREF="manual_SQL_Syntax.html#JOIN">13.1.7.1  <code>JOIN</code> Syntax</A>. See section <A HREF="manual_Tutorial.html#example-Foreign_keys">3.6.6  Using Foreign Keys</A>.

</P>
<P>
The <code>FOREIGN KEY</code> syntax without <code>ON DELETE ...</code> is often used
by ODBC applications to produce automatic <code>WHERE</code> clauses.

</P>



<H4><A NAME="ANSI_diff_Views" HREF="manual_toc.html#ANSI_diff_Views">1.5.5.6  Views</A></H4>

<P>
<A NAME="IDX108"></A>
<A NAME="IDX109"></A>

</P>
<P>
Views (including updatable views) are being implemented in the 5.0 version
of MySQL Server.  They are already available in binary releases from 5.0.1
and up.
See section <A HREF="manual_SQL_Syntax.html#CREATE_VIEW">13.2.7  <code>CREATE VIEW</code> Syntax</A>.

</P>
<P>
Views are useful for allowing users to access a set of relations (tables)
as if it were a single table, and limiting their access to just that.
Views can also be used to restrict access to rows (a subset of a
particular table).
For access control to columns, you can also use the sophisticated
privilege system in MySQL Server.
See section <A HREF="manual_MySQL_Database_Administration.html#Privilege_system">5.5  The MySQL Access Privilege System</A>.

</P>
<P>
In designing an implementation of views, our ambitious goal, as much as
is possible within the confines of SQL, has been full compliance with
``Codd's Rule #6'' for relational database systems: ``All views
that are theoretically updatable, should in practice also be updatable.''

</P>



<H4><A NAME="ANSI_diff_comments" HREF="manual_toc.html#ANSI_diff_comments">1.5.5.7  <samp>`--'</samp> as the Start of a Comment</A></H4>

<P>
<A NAME="IDX110"></A>
<A NAME="IDX111"></A>

</P>
<P>
Some other SQL databases use <samp>`--'</samp> to start comments.
MySQL Server uses <samp>`#'</samp> as the start comment character. You can also use
the C comment style <code>/* this is a comment */</code> with MySQL Server.
See section <A HREF="manual_Language_Structure.html#Comments">9.5  Comment Syntax</A>.

</P>
<P>
MySQL Server 3.23.3 and above support the <samp>`--'</samp> comment style,
provided the comment is followed by a space (or by a control character such
as a newline). The requirement for a space is to prevent problems with
automatically generated SQL queries that have used something like the following code, where we automatically insert the value of the payment for
<code>!payment!</code>:

</P>

<PRE>
UPDATE account SET credit=credit-!payment!
</PRE>

<P>
Think about what happens if the value of <code>payment</code> is a negative value
such as <code>-1</code>:

</P>

<PRE>
UPDATE account SET credit=credit--1
</PRE>

<P>
<code>credit--1</code> is a legal expression in SQL, but if <code>--</code> is interpreted
as the start of a comment, part of the expression is discarded. The result is a
statement that has a completely different meaning than intended:

</P>

<PRE>
UPDATE account SET credit=credit
</PRE>

<P>
The statement produces no change in value at all!  This illustrates that
allowing comments to start with <samp>`--'</samp> can have serious consequences.

</P>
<P>
Using our implementation of this method of commenting in MySQL Server
3.23.3 and up, <code>credit--1</code> is actually safe.

</P>
<P>
Another safe feature is that the <code>mysql</code> command-line client
removes all lines that start with <samp>`--'</samp>.

</P>

<P>
The following information is relevant only if you are running a
MySQL version earlier than 3.23.3:

</P>
<P>
If you have an SQL program in a text file that contains <samp>`--'</samp>
comments, you should use the <code>replace</code> utility as follows to convert the
comments to use <samp>`#'</samp> characters:

</P>

<PRE>
shell&#62; replace " --" " #" &#60; text-file-with-funny-comments.sql \
         | mysql <var>db_name</var>
</PRE>

<P>
instead of the usual:

</P>

<PRE>
shell&#62; mysql <var>db_name</var> &#60; text-file-with-funny-comments.sql
</PRE>

<P>
You can also edit the command file ``in place'' to change the <samp>`--'</samp>
comments to <samp>`#'</samp> comments:

</P>

<PRE>
shell&#62; replace " --" " #" -- text-file-with-funny-comments.sql
</PRE>

<P>
Change them back with this command:

</P>

<PRE>
shell&#62; replace " #" " --" -- text-file-with-funny-comments.sql
</PRE>



<H3><A NAME="Constraints" HREF="manual_toc.html#Constraints">1.5.6  How MySQL Deals with Constraints</A></H3>

<P>
<A NAME="IDX112"></A>

</P>
<P>
MySQL allows you to work both with transactional tables that allow
rollback and with non-transactional tables that do not. Because of this,
constraint handling is a bit different in MySQL than in other databases.
We must handle the case when you have inserted or updated a lot of rows
in a non-transactional table for which changes cannot be rolled back when
an error occurs.

</P>
<P>
The basic philosophy is that MySQL Server tries to produce an error for
anything that it can detect while parsing a statement to be executed, and
tries to recover from any errors that occur while executing the statement.
We do this in most cases, but not yet for all. See section <A HREF="manual_TODO.html#TODO_future">C.3  New Features Planned for the Near Future</A>.

</P>
<P>
The options MySQL has when an error occurs are to stop the statement in the
middle or to recover as well as possible from the problem and continue.
By default, the server follows the latter course. This means, for example,
that the server may coerce illegal values to the closest legal values.

</P>
<P>
Beginning with MySQL 5.0.2, several SQL mode options are available to provide
greater control over how accepting to be of bad data values and whether to
continue executing a statement or abort it when errors occur. Using these
options, you can configure MySQL Server to act in a more traditional fashion
that is like other DBMSs that reject improper input. The SQL mode can be set
at runtime, which enables individual clients to select the behavior most
appropriate for their requirements.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_SQL_mode">5.2.2  The Server SQL Mode</A>.

</P>
<P>
The following sections describe what happens for the different types of
constraints.

</P>



<H4><A NAME="constraint_primary_key" HREF="manual_toc.html#constraint_primary_key">1.5.6.1  <code>PRIMARY KEY</code> and <code>UNIQUE</code> Index Constraints</A></H4>

<P>
<A NAME="IDX113"></A>
<A NAME="IDX114"></A>
<A NAME="IDX115"></A>

</P>
<P>
Normally, an error occurs when you try to <code>INSERT</code> or <code>UPDATE</code>
a row that causes a primary key, unique key, or foreign key violation.
If you are using a transactional storage engine such as <code>InnoDB</code>, MySQL
automatically rolls back the statement.  If you are using a non-transactional
storage engine, MySQL stops processing the statement at the row for which
the error occurred and leaves any remaining rows unprocessed.

</P>
<P>
If you wish to ignore such key violations, MySQL supports an <code>IGNORE</code>
keyword for <code>INSERT</code> and <code>UPDATE</code>. In this case, MySQL ignores
any key violations and continues processing with the next row.
See section <A HREF="manual_SQL_Syntax.html#INSERT">13.1.4  <code>INSERT</code> Syntax</A>.
See section <A HREF="manual_SQL_Syntax.html#UPDATE">13.1.10  <code>UPDATE</code> Syntax</A>.

</P>
<P>
You can get information about the number of rows actually inserted or
updated with the <code>mysql_info()</code> C API function.
See section <A HREF="manual_MySQL_APIs.html#mysql_info">21.2.3.31  <code>mysql_info()</code></A>.
In MySQL 4.1 and up, you also can use the <code>SHOW WARNINGS</code> statement.
See section <A HREF="manual_SQL_Syntax.html#SHOW_WARNINGS">13.5.4.20  <code>SHOW WARNINGS</code> Syntax</A>.

</P>
<P>
For the moment, only <code>InnoDB</code> tables support foreign keys.
See section <A HREF="manual_InnoDB.html#InnoDB_foreign_key_constraints">15.7.4  <code>FOREIGN KEY</code> Constraints</A>.
Foreign key support in <code>MyISAM</code> tables is scheduled for implementation
in MySQL 5.1.

</P>



<H4><A NAME="constraint_invalid_data" HREF="manual_toc.html#constraint_invalid_data">1.5.6.2  Constraints on Invalid Data</A></H4>

<P>
<A NAME="IDX116"></A>
<A NAME="IDX117"></A>
<A NAME="IDX118"></A>
<A NAME="IDX119"></A>
<A NAME="IDX120"></A>

</P>
<P>
Before MySQL 5.0.2, MySQL is forgiving of illegal or improper data values
and coerces them to legal values for data entry. In MySQL 5.0.2 and up,
that remains the default behavior, but you can select more traditional
treatment of bad values such that the server rejects them and aborts
the statement in which they occur.  This section describes the default
(forgiving) behavior of MySQL, as well as the newer strict SQL mode and
how it differs.

</P>
<P>
The following holds true when you are not using strict mode.
If you insert an ``incorrect'' value into a column, such as a <code>NULL</code>
into a <code>NOT NULL</code> column or a too-large numeric value into a
numeric column, MySQL sets the column to the ``best possible value''
instead of producing an error:

</P>

<UL>
<LI>

If you try to store an out of range value in a numeric column, MySQL
Server instead stores zero, the smallest possible value, or the largest
possible value in the column.

<LI>

For strings, MySQL stores either the empty string or the longest
possible string that can be in the column.

<LI>

If you try to store a string that doesn't start with a number into a
numeric column, MySQL Server stores 0.

<LI>

If you try to store <code>NULL</code> into a column that doesn't take <code>NULL</code>
values, MySQL Server stores 0 or <code>''</code> (the empty string) instead.

<LI>

MySQL allows you to store certain incorrect date values into <code>DATE</code> and
<code>DATETIME</code> columns (such as <code>'2000-02-31'</code> or <code>'2000-02-00'</code>).
The idea is that it's not the job of the SQL server to validate dates. If
MySQL can store a date value and retrieve exactly the same value, MySQL
stores it as given.  If the date is totally wrong (outside the server's
ability to store it), the special date value <code>'0000-00-00'</code> is stored
in the column instead.

<LI>

If an <code>INSERT</code> statement specifies no value for a column, MySQL inserts
its default value if the column definition includes an explicit <code>DEFAULT</code>
clause. If the definition has no such <code>DEFAULT</code> clause, MySQL inserts
the implicit default value for the column data type.  In general,
this is the empty string for string columns, 0 for numeric columns,
and <code>'0000-00-00'</code> for date columns.  Implicit default values are
discussed in section <A HREF="manual_SQL_Syntax.html#CREATE_TABLE">13.2.6  <code>CREATE TABLE</code> Syntax</A>.

</UL>

<P>
The reason for the preceding rules is that we can't check these conditions
until the statement has begun executing.  We can't just roll back if we
encounter a problem after updating a few rows, because the storage engine may
not support rollback.  The option of terminating the statement is not that
good; in this case, the update would be ``half done,'' which is probably the
worst possible scenario.  In this case, it's better to ``do the best you
can'' and then continue as if nothing happened.

</P>
<P>
In MySQL 5.0.2 and up, you can select stricter treatment of input values by
using the <code>STRICT_TRANS_TABLES</code> or <code>STRICT_ALL_TABLES</code> SQL modes.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_SQL_mode">5.2.2  The Server SQL Mode</A>.

</P>
<P>
<code>STRICT_TRANS_TABLES</code> works like this: For transactional storage
engines, bad data values occurring anywhere in the statement causes
the to abort and roll back.  For non-transactional storage engines,
the statement aborts if the error occurs in the first row to be inserted
or updated.  (In this case, the statement can be regarded to leave the
table unchanged, just as for a transactional table.)  Errors in rows
after the first do not abort the statement. Instead, bad data values
are adjusted and result in warnings rather than errors.  In other words,
with <code>STRICT_TRANS_TABLES</code>, a wrong value causes MySQL to roll back,
if it can, all updates done so far.

</P>
<P>
For stricter checking, enable <code>STRICT_ALL_TABLES</code>. This is the same as
<code>STRICT_TRANS_TABLES</code> except that for non-transactional storage engines,
errors abort the statement even for bad data in rows following the first row.
This means that if an error occurs partway through a multiple-row insert or
update for a non-transactional table, a partial update results.  Earlier rows
are inserted or updated, but those from the point of the error on are not.
To avoid this for non-transactional tables, either use single-row statements
or else use <code>STRICT_TRANS_TABLES</code> if conversion warnings rather than
errors are acceptable.  To avoid problems in the first place, do not use
MySQL to check column content. It is safest (and often faster) to let the
application ensure that it passes only legal values to the database.

</P>
<P>
With either of the strict mode options, you can cause errors to be treated
as warnings by using <code>INSERT IGNORE</code> or <code>UPDATE IGNORE</code>.

</P>



<H4><A NAME="constraint_enum" HREF="manual_toc.html#constraint_enum">1.5.6.3  <code>ENUM</code> and <code>SET</code> Constraints</A></H4>

<P>
<code>ENUM</code> and <code>SET</code> columns provide an efficient way to define columns
that can contain only a given set of values.  However, before MySQL 5.0.2,
<code>ENUM</code> and <code>SET</code> are not real constraints.  This is for the same
reasons that <code>NOT NULL</code> is not honored.
See section <A HREF="manual_Introduction.html#constraint_invalid_data">1.5.6.2  Constraints on Invalid Data</A>.

</P>
<P>
<code>ENUM</code> columns always have a default value. If you don't specify
a default value, then it will be <code>NULL</code> for columns that can have
<code>NULL</code>, otherwise the first enumeration value is used as the default
value.

</P>
<P>
If you insert an incorrect value into an <code>ENUM</code> column or if you
force a value into an <code>ENUM</code> column with <code>IGNORE</code>, it is set
to the reserved enumeration value of <code>0</code>, which is displayed as an
empty string in string context. See section <A HREF="manual_Column_types.html#ENUM">11.4.4  The <code>ENUM</code> Type</A>.

</P>
<P>
If you insert an incorrect value into a <code>SET</code> column, the incorrect value
is ignored. For example, if the column can contain the values
<code>'a'</code>, <code>'b'</code>, and <code>'c'</code>, an attempt to assign <code>'a,x,b,y'</code>
results in a value of <code>'a,b'</code>.
See section <A HREF="manual_Column_types.html#SET">11.4.5  The <code>SET</code> Type</A>.

</P>
<P>
As of MySQL 5.0.2, you can configure the server to use strict SQL mode.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_SQL_mode">5.2.2  The Server SQL Mode</A>.
When strict mode is not enabled, values entered into <code>ENUM</code> and <code>SET</code>
columns are handled as just described for MySQL 4.x.  However, if strict
mode is enabled, the definition of a <code>ENUM</code> or <code>SET</code> column does
act as a constraint on values entered into the column. An error occurs
for values that do not satisify these conditions:

</P>

<UL>

<LI>

An <code>ENUM</code> value must be one of those listed in the column definition, or
the internal numeric equivalent thereof. The value cannot be the error value
(that is, 0 or the empty string).
For a column defined as <code>ENUM('a','b','c')</code>, values such as <code>''</code>,
<code>'d'</code>, and <code>'ax'</code> are illegal and are rejected.

<LI>

A <code>SET</code> value must be the empty string or a value consisting of one or
more of the values listed in the column definition separated by commas.
For a column defined as <code>SET('a','b','c')</code>, values such as
<code>'d'</code>, and <code>'a,b,c,d'</code> are illegal and are rejected.

</UL>

<P>
Errors for invalid values can be suppressed in strict mode if you use
<code>INSERT IGNORE</code> or <code>UPDATE IGNORE</code>.  In this case, a warning is
generated rather than an error. For <code>ENUM</code>, the value is inserted as the
error member (<code>0</code>). For <code>SET</code>, the value is inserted as given except
that any invalid substrings are deleted. For example, <code>'a,x,b,y'</code>
results in a value of <code>'a,b'</code>, as described earlier.

</P>



<H3><A NAME="Bugs" HREF="manual_toc.html#Bugs">1.5.7  Known Errors and Design Deficiencies in MySQL</A></H3>

<P>
<A NAME="IDX121"></A>
<A NAME="IDX122"></A>
<A NAME="IDX123"></A>
<A NAME="IDX124"></A>

</P>



<H4><A NAME="Errors_in_3.23" HREF="manual_toc.html#Errors_in_3.23">1.5.7.1  Errors in 3.23 Fixed in a Later MySQL Version</A></H4>

<P>
The following known errors or bugs are not fixed in MySQL 3.23 because fixing
them would involve changing a lot of code that could introduce other
even worse bugs. The bugs are also classified as ``not fatal'' or
``bearable.''

</P>

<UL>
<LI>

You should avoid using spaces at the end of column names because this can
cause weird behavior. (Fixed in MySQL 4.0.) (Bug #4196)
<LI>

You can get a deadlock (hung thread) if you use <code>LOCK TABLE</code> to lock
multiple tables and then in the same connection use <code>DROP TABLE</code> to
drop one of them while another thread is trying to lock it.  (To break the
deadlock, you can use <code>KILL</code> to terminate any of the threads involved.)
This issue is resolved as of MySQL 4.0.12.
<LI>

<code>SELECT MAX(key_column) FROM t1,t2,t3...</code> where one of the tables are
empty doesn't return <code>NULL</code> but instead returns the maximum value for the
column.  This issue is resolved as of MySQL 4.0.11.
<LI>

<code>DELETE FROM heap_table</code> without a <code>WHERE</code> clause doesn't work on
a locked <code>HEAP</code> table.
</UL>



<H4><A NAME="Errors_in_4.0" HREF="manual_toc.html#Errors_in_4.0">1.5.7.2  Errors in 4.0 Fixed in a Later MySQL Version</A></H4>

<P>
The following known errors or bugs are not fixed in MySQL 4.0 because fixing
them would involve changing a lot of code that could introduce other
even worse bugs. The bugs are also classified as ``not fatal'' or
``bearable.''

</P>

<UL>
<LI>

In a <code>UNION</code>, the first <code>SELECT</code> determines the type,
<code>max_length</code>, and <code>NULL</code> properties for the resulting
columns.  This issue is resolved as of MySQL 4.1.1; the property values are
based on the rows from all <code>UNION</code> parts.
<LI>

In <code>DELETE</code> with many tables, you can't refer to tables to be
deleted through an alias. This is fixed as of MySQL 4.1.
<LI>

You cannot mix <code>UNION ALL</code> and <code>UNION DISTINCT</code> in the same query.
If you use <code>ALL</code> for one <code>UNION</code>, it is used for all
of them.  This is fixed as of MySQL 4.1.2. The rules for mixed <code>UNION</code>
types are given in section <A HREF="manual_SQL_Syntax.html#UNION">13.1.7.2  <code>UNION</code> Syntax</A>.
<LI>

<code>FLUSH TABLES WITH READ LOCK</code> does not block <code>CREATE TABLE</code>, which
may cause a problem with the binary log position when
doing a full backup of tables and the binary log.
<LI>

<code>mysqldump --single-transaction --master-data</code> behaved like
<code>mysqldump --master-data</code>, so the dump was a blocking one. This is fixed
starting from MySQL 4.1.8.
</UL>



<H4><A NAME="Open_bugs" HREF="manual_toc.html#Open_bugs">1.5.7.3  Open Bugs and Design Deficiencies in MySQL</A></H4>

<P>
The following problems are known and fixing them is a high priority:

</P>

<UL>
<LI>

Even if you are using <code>lower_case_table_names=2</code> (which enables
MySQL to remember the used case for databases and table names) MySQL
will not on case insensitive systems remember the used case for database
names for the function <code>DATABASE()</code> or in various logs.

<LI>

Dropping a <code>FOREIGN KEY</code> constraint doesn't work in replication because
the constraint may have another name on the slave.

<LI>

<code>REPLACE</code> (and <code>LOAD DATA</code> with the <code>REPLACE</code> option) does not
trigger <code>ON DELETE CASCADE</code>.

<LI>

<code>DISTINCT</code> with <code>ORDER BY</code> doesn't work inside <code>GROUP_CONCAT()</code>
if you don't use all and only those columns that are in the
<code>DISTINCT</code> list.

<LI>

If one user has a long-running transaction and another user drops a
table that is updated in the transaction, there is small chance that the
binary log may contain the <code>DROP TABLE</code> command before the table is
used in the transaction itself.  We plan to fix this in 5.0 by
having the <code>DROP TABLE</code> wait until the table is not used in any
transaction.

<LI>

When inserting a big integer value (between 2^63 and 2^64-1) into a
decimal/string column, it is inserted as a negative value because
the number is evaluated in a signed integer context. We plan to fix this in
MySQL 4.1.

<LI>

<code>FLUSH TABLES WITH READ LOCK</code> does not block <code>COMMIT</code> if the server
is running without binary logging, which may cause a problem (of consistency
between tables) when doing a full backup.

<LI>

<code>ANALYZE TABLE</code> on a <code>BDB</code> table may in some cases make the table
unusable until you restart <code>mysqld</code>.  If this happens, you will
see errors of the following form in the MySQL error file:


<PRE>
001207 22:07:56  bdb:  log_flush: LSN past current end-of-log
</PRE>

<LI>

MySQL accepts parentheses in the <code>FROM</code> clause of a <code>SELECT</code>
statement, but silently
ignores them.  The reason for not giving an error is that many clients
that automatically generate queries add parentheses in the <code>FROM</code>
clause even where they are not needed.

<LI>

Concatenating many <code>RIGHT JOINS</code> or combining <code>LEFT</code> and
<code>RIGHT</code> join in the same query may not give a correct answer because
MySQL only generates <code>NULL</code> rows for the table preceding a <code>LEFT</code> or
before a <code>RIGHT</code> join.  This will be fixed in 5.0 at the same time
we add support for parentheses in the <code>FROM</code> clause.

<LI>

Don't execute <code>ALTER TABLE</code> on a <code>BDB</code> table on which you are
running multiple-statement transactions until all those transactions complete.
(The transaction will probably be ignored.)

<LI>

<code>ANALYZE TABLE</code>, <code>OPTIMIZE TABLE</code>, and <code>REPAIR TABLE</code> may
cause problems on tables for which you are using <code>INSERT DELAYED</code>.

<LI>

Doing a <code>LOCK TABLE ...</code> and <code>FLUSH TABLES ...</code> doesn't
guarantee that there isn't a half-finished transaction in progress on the
table.

<LI>

<code>BDB</code> tables are a bit slow to open. If you have many <code>BDB</code> tables
in a database, it will take a long time to use the <code>mysql</code> client on
the database if you are not using the <code>-A</code> option or if you are using
<code>rehash</code>. This is especially notable when you have a large table cache.

<LI>

Replication uses query-level logging: The master writes the executed
queries to the binary log. This is a very fast, compact, and efficient
logging method that works perfectly in most cases.
Although we have never heard of it actually occurring, it is theoretically
possible for the data on the master and slave to become different if a
query is designed in such a way that the data modification is
non-deterministic; that is, left to the will of the query optimizer. (That
generally is not a good practice anyway, even outside of replication!)
For example: 


<UL>
<LI>

<code>CREATE ... SELECT</code> or
<code>INSERT ... SELECT</code>  statements that
insert zero or <code>NULL</code> values into an <code>AUTO_INCREMENT</code> column.
<LI>

<code>DELETE</code> if you are
deleting rows from a table that has foreign keys with <code>ON DELETE
CASCADE</code> properties.
<LI>

<code>REPLACE ... SELECT</code>, 
<code>INSERT IGNORE ... SELECT</code> if you have
duplicate key values in the inserted data.
</UL>

<strong>If and only if all these queries have no <code>ORDER BY</code>
clause guaranteeing a deterministic order</strong>.

For example, for <code>INSERT ... SELECT</code> with no <code>ORDER
BY</code>, the <code>SELECT</code> may return rows in a different order
(which will result in a row having different ranks, hence getting a
different number in the <code>AUTO_INCREMENT</code> column),
depending on the choices made by the optimizers on the master and
slave. A query will be optimized differently on the master and slave only if:


<UL>
<LI>

The files used by the two queries are not exactly the same; for
example, <code>OPTIMIZE TABLE</code> was run on the master tables and not on
the slave tables. (To fix this, <code>OPTIMIZE TABLE</code>, <code>ANALYZE TABLE</code>,
and <code>REPAIR TABLE</code> are written to the binary log as of MySQL 4.1.1).
<LI>

The table is stored using a different storage engine on the master than
on the slave. (It is possible to use different storage engines on the master
and slave. For example, you can use <code>InnoDB</code> on the master,
but <code>MyISAM</code> on the slave if the slave has less available disk
space.)
<LI>

MySQL buffer sizes (<code>key_buffer_size</code>, and so on) are different on
the master and slave. 
<LI>

The master and slave run different MySQL versions, and the optimizer
code differs between these versions.
</UL>

This problem may also affect database restoration using
<code>mysqlbinlog|mysql</code>.

The easiest way to avoid this problem in all cases is to add an
<code>ORDER BY</code> clause to 
such non-deterministic queries to ensure that the rows are always
stored or modified in the same order. 
In future MySQL versions, we will automatically add an <code>ORDER BY</code>
clause when needed.

</UL>

<P>
The following problems are known and will be fixed in due time:

</P>

<UL>

<LI>

Log filenames are based on the server hostname (if you don't specify a
filename with the startup option). For now you have to use options like
<code>--log-bin=<var>old_host_name</var>-bin</code> if you change your hostname to something
else. Another option is to just rename the old files to reflect your
hostname change. See section <A HREF="manual_MySQL_Database_Administration.html#Server_options">5.2.1  <code>mysqld</code> Command-Line Options</A>.

<LI>

<code>mysqlbinlog</code> will not delete temporary files left after a
<code>LOAD DATA INFILE</code> command. See section <A HREF="manual_Client-Side_Scripts.html#mysqlbinlog">8.5  The <code>mysqlbinlog</code> Binary Log Utility</A>.

<LI>

<code>RENAME</code> doesn't work with <code>TEMPORARY</code> tables or tables used in a
<code>MERGE</code> table.

<LI>

When using the <code>RPAD()</code> function in a query that has to be
resolved by using a temporary table, all resulting strings will
have rightmost spaces removed. This is an example of such a query:


<PRE>
SELECT RPAD(t1.column1, 50, ' ') AS f2, RPAD(t2.column2, 50, ' ') AS f1
FROM table1 as t1 LEFT JOIN table2 AS t2 ON t1.record=t2.joinID
ORDER BY t2.record;
</PRE>

The final result of this bug is that you will not be able to get spaces on
the right side of the resulting values. The problem also occurs for any other
string function that adds spaces to the right.

The reason for this is due to the fact that <code>HEAP</code> tables, which are used
first for temporary tables, are not capable of handling <code>VARCHAR</code> columns.

This behavior exists in all versions of MySQL. 
It will be fixed in one of the 4.1 series releases.

<LI>

Due to the way table definition files are stored, you cannot use
character 255 (<code>CHAR(255)</code>) in table names, column names, or enumerations.
This is scheduled to be fixed in version 5.1 when we have new table
definition format files.

<LI>

When using <code>SET CHARACTER SET</code>, you can't use translated
characters in database, table, and column names.

<LI>

You can't use <samp>`_'</samp> or <samp>`%'</samp> with <code>ESCAPE</code> in <code>LIKE
... ESCAPE</code>.

<LI>

If you have a <code>DECIMAL</code> column in which the same number is stored in
different formats (for example, <code>+01.00</code>, <code>1.00</code>, <code>01.00</code>),
<code>GROUP BY</code> may regard each value as a different value.

<LI>

You cannot build the server in another directory when using
MIT-pthreads. Because this requires changes to MIT-pthreads, we are not
likely to fix this. See section <A HREF="manual_Installing.html#MIT-pthreads">2.8.5  MIT-pthreads Notes</A>.

<LI>

<code>BLOB</code> and <code>TEXT</code>values can't ``reliably'' be used in <code>GROUP
BY</code> or <code>ORDER BY</code> or <code>DISTINCT</code>. Only the first
<code>max_sort_length</code> bytes are used when comparing <code>BLOB</code> values in
these cases.  The default value of <code>max_sort_length</code> value is 1024. It
can be changed at server startup time.  As of MySQL 4.0.3, it can also be
changed at runtime. For older versions, a workaround for most cases is to
use a substring.  For example:


<PRE>
SELECT DISTINCT LEFT(<var>blob_col</var>,2048) FROM <var>tbl_name</var>;
</PRE>

<LI>

Numeric
calculations are done with <code>BIGINT</code> or <code>DOUBLE</code> (both are
normally 64 bits long). Which precision you get depends on the function.
The general rule is that bit functions are done with <code>BIGINT</code>
precision, <code>IF</code> and <code>ELT()</code> with <code>BIGINT</code> or <code>DOUBLE</code>
precision, and the rest with <code>DOUBLE</code> precision.  You should try to
avoid using unsigned long long values if they resolve to be bigger than
63 bits (9223372036854775807) for anything other than bit fields.
MySQL Server 4.0 has better <code>BIGINT</code> handling than 3.23.

<LI>

All string columns, except <code>BLOB</code> and <code>TEXT</code> columns, automatically
have all trailing spaces removed when retrieved. For <code>CHAR</code> types, this
is okay. The bug is
that in MySQL Server, <code>VARCHAR</code> columns are treated the same way.

<LI>

You can have only up to 255 <code>ENUM</code> and <code>SET</code> columns in one table.

<LI>

In <code>MIN()</code>, <code>MAX()</code>, and other aggregate functions, MySQL
currently compares <code>ENUM</code> and <code>SET</code> columns by their string
value rather than by the string's relative position in the set.

<LI>

<code>mysqld_safe</code> redirects all messages from <code>mysqld</code> to the
<code>mysqld</code> log.  One problem with this is that if you execute
<code>mysqladmin refresh</code> to close and reopen the log,
<code>stdout</code> and <code>stderr</code> are still redirected to the old log.
If you use <code>--log</code> extensively, you should edit <code>mysqld_safe</code> to
log to <tt>`<var>host_name</var>.err'</tt> instead of <tt>`<var>host_name</var>.log'</tt> so that you can
easily reclaim the space for the old log by deleting the old one and
executing <code>mysqladmin refresh</code>.

<LI>

In the <code>UPDATE</code> statement, columns are updated from left to right.  If
you refer to an updated column, you get the updated value instead of the
original value. For example, the following statement increments <code>KEY</code>
by <code>2</code>, not <code>1</code>:


<PRE>
mysql&#62; UPDATE <var>tbl_name</var> SET KEY=KEY+1,KEY=KEY+1;
</PRE>

<LI>

You can refer to multiple temporary tables in the same query, but
you cannot refer to any given temporary table more than once.
For example, the following doesn't work:


<PRE>
mysql&#62; SELECT * FROM temp_table, temp_table AS t2;
ERROR 1137: Can't reopen table: 'temp_table'
</PRE>

<LI>

The optimizer may handle <code>DISTINCT</code> differently when you are using
``hidden'' columns in a join than when you are not.  In a join, hidden
columns are counted as part of the result (even if they are not shown),
whereas in normal queries, hidden columns don't participate in the
<code>DISTINCT</code> comparison.  We will probably change this in the future to
never compare the hidden columns when executing <code>DISTINCT</code>.

An example of this is:


<PRE>
SELECT DISTINCT mp3id FROM band_downloads
       WHERE userid = 9 ORDER BY id DESC;
</PRE>

and


<PRE>
SELECT DISTINCT band_downloads.mp3id
       FROM band_downloads,band_mp3
       WHERE band_downloads.userid = 9
       AND band_mp3.id = band_downloads.mp3id
       ORDER BY band_downloads.id DESC;
</PRE>

In the second case, you might in MySQL Server 3.23.x get two identical rows in
the result set (because the values in the hidden <code>id</code> column may differ).

Note that this happens only for queries where you don't have the
<code>ORDER BY</code> columns in the result.

<LI>

Because MySQL Server allows you to work with table types that don't
support transactions, and thus can't roll back data, some things
behave a little differently in MySQL Server than in other SQL servers.
This is just to ensure that MySQL Server never needs to do a rollback
for an SQL statement.  This may be a little awkward at times because column
values must be checked in the application, but this will actually give
you a nice speed increase because it allows MySQL Server to do some
optimizations that otherwise would be very hard to do.

If you set a column to an incorrect value, MySQL Server will, instead of
doing a rollback, store the ``best possible value'' in the column. For
information about how this occurs, see section <A HREF="manual_Introduction.html#Constraints">1.5.6  How MySQL Deals with Constraints</A>.

<LI>

If you execute a <code>PROCEDURE</code> on a query that returns an empty set,
in some cases the <code>PROCEDURE</code> will not transform the columns.

<LI>

Creation of a table of type <code>MERGE</code> doesn't check whether the underlying
tables are of compatible types.

<LI>

If you use <code>ALTER TABLE</code> first to add a <code>UNIQUE</code> index to a
table used in a <code>MERGE</code> table and then to
add a normal index on the <code>MERGE</code> table, the key order will be
different for the tables if there was an old key that was not unique in the
table. This is because <code>ALTER TABLE</code> puts <code>UNIQUE</code> indexes before
normal indexes to be able to detect duplicate keys as early as possible.
</UL>

<P>
The following are known bugs in earlier versions of MySQL:

</P>

<UL>
<LI>

In the following case you can get a core dump:


<UL>
<LI>

Delayed insert handler has pending inserts to a table.

<LI>

<code>LOCK TABLE</code> with <code>WRITE</code>.

<LI>

<code>FLUSH TABLES</code>.
</UL>

<LI>

Before MySQL Server 3.23.2, an <code>UPDATE</code> that updated a key with
a <code>WHERE</code> on the same key may have failed because the key was used to
search for records and the same row may have been found multiple times:


<PRE>
UPDATE <var>tbl_name</var> SET KEY=KEY+1 WHERE KEY &#62; 100;
</PRE>

A workaround is to use:


<PRE>
UPDATE <var>tbl_name</var> SET KEY=KEY+1 WHERE KEY+0 &#62; 100;
</PRE>

This will work because MySQL Server will not use an index on expressions in
the <code>WHERE</code> clause.

<LI>

Before MySQL Server 3.23, all numeric types were treated as
fixed-point fields. That means that you had to specify how many decimals
a floating-point field should have. All results were returned with the
correct number of decimals.
</UL>

<P>
For information about platform-specific bugs, see the installation and
porting instructions in section <A HREF="manual_Installing.html#Operating_System_Specific_Notes">2.12  Operating System-Specific Notes</A> and
section <A HREF="manual_Porting.html#Porting">E  Porting to Other Systems</A>.

</P>

<P><HR><P>
Go to the first, previous, <A HREF="manual_Installing.html">next</A>, <A HREF="manual_Concept_Index.html">last</A> section, <A HREF="manual_toc.html">table of contents</A>.
 </BODY>
 </HTML>
