  <HTML>
  <HEAD>
  
  <TITLE>MySQL Reference Manual for version 5.0.3-alpha - D  MySQL Change History</TITLE>
   <style> code {color:purple} tt {color:green} samp {color:navy} pre {color:maroon} </style>
  </HEAD>
  <BODY BGCOLOR=silver TEXT=#000000 LINK=#101090 VLINK=#7030B0>
Go to the <A HREF="manual_Introduction.html">first</A>, <A HREF="manual_TODO.html">previous</A>, <A HREF="manual_Porting.html">next</A>, <A HREF="manual_Concept_Index.html">last</A> section, <A HREF="manual_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="News" HREF="manual_toc.html#News">D  MySQL Change History</A></H1>

<P>
<A NAME="IDX2379"></A>
<A NAME="IDX2380"></A>
<A NAME="IDX2381"></A>

</P>
<P>
This appendix lists the changes from version to version in the MySQL
source code.

</P>
<P>
We are now working actively on MySQL 4.1 and 5.0, and will provide
only critical bugfixes for MySQL 4.0 and MySQL 3.23.  We update this section
as we add new features, so that everybody can follow the development.

</P>
<P>
Our TODO section contains what further plans we have for MySQL 4.1 and 5.0.
See section <A HREF="manual_TODO.html#TODO">C  MySQL and the Future (the TODO)</A>.

</P>
<P>
Note that we tend to update the manual at the same time we make changes to
MySQL.  If you find a recent version of MySQL listed here that you can't
find on our download page (<a HREF="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>),
it means that the version has not yet been released.

</P>
<P>
The date mentioned with a release version is the date of the last BitKeeper
ChangeSet on which the release was based, not the date when
the packages were made available. The binaries are usually made
available a few days after the date of the tagged ChangeSet, because building
and testing all packages takes some time.

</P>



<H2><A NAME="News-5.0.x" HREF="manual_toc.html#News-5.0.x">D.1  Changes in release 5.0.x (Development)</A></H2>

<P>
<A NAME="IDX2382"></A>

</P>
<P>
The following changelog shows what has already been done in the 5.0 tree:

</P>

<UL>
<LI>

Basic support for read-only server side cursors.
<LI>

Basic support for (updatable) views.
See, for example, section <A HREF="manual_SQL_Syntax.html#CREATE_VIEW">13.2.7  <code>CREATE VIEW</code> Syntax</A>.
<LI>

Basic support for stored procedures (SQL:2003 style).
See section <A HREF="manual_Stored_Procedures.html#Stored_Procedures">19  Stored Procedures and Functions</A>.
<LI>

Initial support for rudimentary triggers.
<LI>

Added <code>SELECT INTO <var>list_of_vars</var></code>, which can be of mixed
(that is, global and local) types.
See section <A HREF="manual_Stored_Procedures.html#SELECT_INTO_Statement">19.1.6.3  <code>SELECT ... INTO</code> Statement</A>.
<LI>

Removed the update log. It is fully replaced by the binary log.
If the MySQL server is started with <code>--log-update</code>, it will be
translated to <code>--log-bin</code> (or ignored if the server is explicitly
started with <code>--log-bin</code>), and a warning message will be written to
the error log. Setting <code>SQL_LOG_UPDATE</code> will silently set
<code>SQL_LOG_BIN</code> instead (or do nothing if the server is explicitly
started with <code>--log-bin</code>).
<LI>

User variable names are now case insensitive: If you do <code>SET
@a=10;</code> then <code>SELECT @A;</code> will now return <code>10</code>.
Case sensitivity of a variable's value depends on the collation of the value.
<LI>

Strict mode, which in essence means that you will get an error instead
of a warning when inserting an incorrect value into a column.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_SQL_mode">5.2.2  The Server SQL Mode</A>.
<LI>

<code>VARCHAR</code> fields now remembers end space. A <code>VARCHAR()</code> field can
now contain up to 65535 bytes.
<LI>

When using a constant string or a function that generate a string result
in <code>CREATE ... SELECT</code>, MySQL now creates the result field based
on the max_length of the string/expression:

<TABLE BORDER>
<TR><TD><strong>max_length</strong> </TD><TD> <strong>Column type</strong>
</TD></TR>
<TR><TD>= 0 </TD><TD> <code>CHAR(0)</code>
</TD></TR>
<TR><TD>&#60; 512 </TD><TD> <code>VARCHAR(max_length)</code>
</TD></TR>
<TR><TD>&#62;= 512 </TD><TD> <code>TEXT</code>
</TD></TR>
</TABLE>
</UL>

<P>
For a full list of changes, please refer to the changelog sections for
each individual 5.0.x release.

</P>



<H3><A NAME="News-5.0.3" HREF="manual_toc.html#News-5.0.3">D.1.1  Changes in release 5.0.3 (not released yet)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Added <code>cp932</code> (SJIS for Windows Japanese) and
<code>eucjpms</code> (UJIS for Windows Japanese) character sets.
<LI>

Added several <code>InnoDB</code> status variables.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_status_variables">5.2.4  Server Status Variables</A>.
<LI>

Added the <code>FEDERATED</code> storage engine.
See section <A HREF="manual_Storage_engines.html#FEDERATED_storage_engine">14.6  The <code>FEDERATED</code> Storage Engine</A>.
<LI>

<code>SHOW CREATE TABLE</code> now uses <code>USING <var>index_type</var></code> rather than
<code>TYPE <var>index_type</var></code> to specify an index type. (Bug #7233)
<LI>

Added an <code>error</code> member to the <code>MYSQL_BIND</code> data structure that
is used in the C API for prepared statements. This member is used for
reporting data truncation errors.  Truncation reporting is enabled via the
new <code>MYSQL_REPORT_DATA_TRUNCATION</code> option for the <code>mysql_options()</code>
C API function.
<LI>

API change: the <code>reconnect</code> flag in the <code>MYSQL</code> structure is now set
to 0 by <code>mysql_real_connect()</code>. Only those client programs which didn't
explicitely set this flag to 0 or 1 after <code>mysql_real_connect()</code> will
experience a change. Having automatic reconnection enabled by default was
considered too dangerous (after reconnection, table locks, temporary tables,
user and session variables are lost).
<LI>

<code>FLUSH TABLES WITH READ LOCK</code> is now killable while it's waiting for
running <code>COMMIT</code> statements to finish.
<LI>

<code>VARCHAR</code> columns now remember end space. A <code>VARCHAR()</code> column can
now contain up to 65535 bytes. For more details, see section <A HREF="manual_News.html#News-5.0.x">D.1  Changes in release 5.0.x (Development)</A>.
If the table handler doesn't support the new <code>VARCHAR</code> type, then
it's converted to a <code>CHAR</code> column. Currently this happens for <code>NDB</code>
and <code>InnoDB</code> tables.
<LI>

InnoDB: Introduced a compact record format that does not store the
number of columns or the lengths of fixed-size columns.  The old
format can be requested by specifying <code>ROW_FORMAT=REDUNDANT</code>.
The new format (<code>ROW_FORMAT=COMPACT</code>) is the default.
<LI>

InnoDB: Setting the initial <code>AUTO_INCREMENT</code> value for the table
using <code>CREATE TABLE...AUTO_INCREMENT = </code> works now also for the
<code>InnoDB</code> table.
<LI>

<code>Seconds_Behind_Master</code> will be <code>NULL</code> (which means ``unknown'') if
the slave SQL thread is not running, or if the slave I/O thread is not running
or not connected to master. It will be zero if SQL thread has caught up on I/O
thread. It no longer grows indefinitely if the master is idle.
<LI>

The MySQL server aborts immediately instead of simply issuing a warning if
it is started with the <code>--log-bin</code> option but cannot initialize the
binary log at startup (that is, an error occurs when writing to the binary
log file or binary log index file).
<LI>

The binary log file and binary log index file now are handled the same way
as <code>MyISAM</code> tables when there is a ``disk full'' or ``quota exceeded''
error.
See section <A HREF="manual_Problems.html#Full_disk">A.4.3  How MySQL Handles a Full Disk</A>.
<LI>

The MySQL server will now abort when started with option
<code>--log-bin-index</code> and without <code>--log-bin</code>, and when started with
<code>--log-slave-updates</code> and without <code>--log-bin</code>.
<LI>

If the MySQL server is started without an argument to <code>--log-bin</code> and
without <code>--log-bin-index</code>, thus not specifying a name for the binary log
index file, a warning will be issued because MySQL will fall back to
using the hostname for that name, and this is prone to replication issues if
the server's hostname's gets changed later.
<LI>

Added account-specific <code>MAX_USER_CONNECTIONS</code> limit, which allows to
specify maximum number of concurrent connections for the account. Also now 
all limited resources are counted per account (instead of being counted per
user + host pair as it was before). One can use <code>--old-style-user-limits</code>
option to get old behavior.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed a bug in <code>max_heap_table_size</code> handling, that resulted in
<code>Table is full</code> error when the table was still smaller than the limit.
(Bug #7791).
<LI>

Fixed a symlink vulnerability in the <code>mysqlaccess</code> script.
Reported by Javier Fernandez-Sanguino Pena
and <a HREF="http://www.debian.org/security/audit"> Debian Security Audit Team</a>.
(<a HREF="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0004"> CAN-2005-0004</a>)
<LI>

Fixed a bug that caused server crash if some error occured during filling of
temporary table created for derived table or view handling. (Bug #7413)
<LI>

Fixed a bug which caused server crash if query containing <code>CONVERT_TZ()</code>
function with constant arguments was prepared. (Bug #6849)
<LI>

Prevent adding <code>CREATE TABLE .. SELECT</code> query to the binary log when the
insertion of new records partially failed. (Bug #6682)
<LI>

Fixed a bug which caused a crash when only the slave I/O thread was
stopped and started. (Bug #6148)
<LI>

Giving <code>mysqld</code> a <code>SIGHUP</code> caused it to crash.
<LI>

Changed semantics of <code>CREATE/ALTER/DROP DATABASE</code> statements so
that replication of <code>CREATE DATABASE</code> is possible when using
<code>--binlog-do-db</code> and <code>--binlog-ignore-db</code>. (Bug #6391)
<LI>

A sequence of <code>BEGIN</code> (or <code>SET AUTOCOMMIT=0</code>), <code>FLUSH TABLES
WITH READ LOCK</code>, transactional update, <code>COMMIT</code>, <code>FLUSH
TABLES WITH READ LOCK</code> could hang the connection forever and possibly the MySQL
server itself. This happened for example when running the <code>innobackup</code>
script several times. (Bug #6732)
<LI>

<code>mysqlbinlog</code> did not print <code>SET PSEUDO_THREAD_ID</code> statements in
front of <code>LOAD DATA INFILE</code> statements inserting into temporary tables,
thus causing potential problems when rolling forward these statements after
restoring a backup. (Bug #6671)
<LI>

InnoDB: Fixed a bug no error message for ALTER with InnoDB and AUTO_INCREMENT
(Bug #7061). <code>InnoDB</code> now supports <code>ALTER
TABLE...AUTO_INCREMENT = x</code> query to set auto increment value for a
table. 
<LI>

Made the MySQL server accept executing <code>SHOW CREATE DATABASE</code> even if the
connection has an open transaction or locked tables; refusing it made
<code>mysqldump --single-transaction</code> sometimes fail to print a complete
<code>CREATE DATABASE</code> statement for some dumped databases. (Bug #7358)
<LI>

Fixed that, when encountering a ``disk full'' or ``quota exceeded'' write
error, <code>MyISAM</code> sometimes didn't sleep and retry the write, thus
resulting in a corrupted table. (Bug #7714)
<LI>

Fixed that <code>--expire-log-days</code> was not honored if using only transactions.
(Bug #7236)
<LI>

Fixed that a slave could crash after replicating many <code>ANALYZE
TABLE</code>, <code>OPTIMIZE TABLE</code>, or <code>REPAIR TABLE</code> statements from the
master. (Bug #6461, Bug #7658)
</UL>



<H3><A NAME="News-5.0.2" HREF="manual_toc.html#News-5.0.2">D.1.2  Changes in release 5.0.2 (01 Dec 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<strong>Warning: Incompatible change!</strong>
The precedence of <code>NOT</code> operator has changed so that expressions such as
<code>NOT a BETWEEN b AND c</code> are parsed correctly as
<code>NOT (a BETWEEN b AND c)</code> rather than as
<code>(NOT a) BETWEEN b AND c</code>.
The pre-5.0 higher-precedence behavior can be obtained by enabling the new
<code>HIGH_NOT_PRECEDENCE</code> SQL mode.
<LI>

Added <code>IS [NOT] <var>boolean_value</var></code> syntax, where <var>boolean_value</var> is
<code>TRUE</code>, <code>FALSE</code>, or <code>UNKNOWN</code>.
<LI>

Added several <code>InnoDB</code> status variables.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_status_variables">5.2.4  Server Status Variables</A>.
<LI>

Implemented the <code>WITH CHECK OPTION</code> clause for <code>CREATE VIEW</code>.
<LI>

<code>CHECK TABLE</code> now works for views.
<LI>

The <code>SCHEMA</code> and <code>SCHEMAS</code> keywords are now accepted as synonyms
for <code>DATABASE</code> and <code>DATABASES</code>.
<LI>

Added initial support for rudimentary triggers (the <code>CREATE TRIGGER</code> and
<code>DROP TRIGGER</code> statements).
<LI>

Added basic support for read-only server side cursors.
<LI>

<code>mysqldump --single-transaction --master-data</code> is now able to take an
online (non-blocking) dump of InnoDB and report the corresponding binary log
coordinates, which makes a backup suitable for point-in-time recovery,
roll-forward or replication slave creation. See section <A HREF="manual_Client-Side_Scripts.html#mysqldump">8.8  The <code>mysqldump</code> Database Backup Program</A>.
<LI>

Added <code>--start-datetime</code>, <code>--stop-datetime</code>,
<code>--start-position</code>, <code>--stop-position</code> options to
<code>mysqlbinlog</code> (makes point-in-time recovery easier).
<LI>

Made the MySQL server not react to signals <code>SIGHUP</code> and <code>SIGQUIT</code> on
Mac OS X 10.3. This is needed because under this OS, the MySQL server receives
lots of these signals (reported as Bug #2030).
<LI>

New <code>--auto-increment-increment</code> and <code>--auto-increment-offset</code>
startup options. These allow you to set up a server to generate
auto-increment values that don't conflict with another server.
<LI>

MySQL now by default will check dates and only allow fully correct
dates. If you want to MySQL to behave as default, you should enable the
new <code>ALLOW_INVALID_DATES</code> SQL mode.
<LI>

Added <code>STRICT_TRANS_TABLES</code>, <code>STRICT_ALL_TABLES</code>,
<code>NO_ZERO_IN_DATE</code>, <code>NO_ZERO_DATE</code>,
<code>ERROR_FOR_DIVISION_BY_ZERO</code>, and <code>TRADITIONAL</code> SQL modes.
The <code>TRADITIONAL</code> mode is shorthand for all the preceding modes.
When using mode <code>TRADITIONAL</code>, MySQL generates an error if you try
to insert a wrong value in a column. It does not adjust the value to the
closest possible legal value.
<LI>

MySQL now remembers which columns were declared to have default values.
In <code>STRICT_TRANS_TABLES</code>/<code>STRICT_ALL_TABLES</code> mode, you now get
an error if you do an <code>INSERT</code> without specifying all columns that
don't have a default value. A side effect of this is that when you do
<code>SHOW CREATE</code> for a new table, you will no longer see a <code>DEFAULT</code>
value for a column for which you didn't specify a default value.
<LI>

The compilation flag <code>DONT_USE_DEFAULT_FIELDS</code> was removed because you
can get the same behavior by setting the <code>sql_mode</code> system variable to
<code>STRICT_TRANS_TABLES</code>.
<LI>

Added <code>NO_AUTO_CREATE_USER</code> SQL mode to prevent <code>GRANT</code>
from automatically creating new users if it would otherwise do so,
unless a password also is specified.
<LI>

We now detect too-large floating point numbers during statement parsing
and generate an error messages for them.
<LI>

Renamed the <code>sql_updatable_view_key</code> system variable to
<code>updatable_views_with_limit</code>. This variable now can have only two values:

<UL>
<LI>

<code>1</code> or <code>YES</code>: Don't issue an error message (warning only) if a
VIEW without presence of a key in the underlying table is used in queries
with a <code>LIMIT</code> clause for updating. (This is the default value.)
<LI>

<code>0</code> or <code>NO</code>: Prohibit update of a VIEW, which does not contain a
key in the underlying table and the query uses a <code>LIMIT</code> clause (usually
get from GUI tools).
</UL>

<LI>

Reverted output format of <code>SHOW TABLES</code> to old pre-5.0.1 format that did
not include a table type column. To get the additional column that lists the
table type, use <code>SHOW FULL TABLES</code> now.
<LI>

The <code>mysql_fix_privilege_tables</code> script now initializes the global
<code>CREATE VIEW</code> and <code>SHOW VIEW</code> privileges in the <code>user</code>
table to the value of the <code>CREATE</code> privilege in that table.
<LI>

If the server finds that the <code>user</code> table has not been upgraded to
include the view-related privilege columns, it treats each account as having
view privileges that are the same as its <code>CREATE</code> privilege.
<LI>

InnoDB: If you specify the option <code>innodb_locks_unsafe_for_binlog</code>
in <tt>`my.cnf'</tt>, InnoDB in an <code>UPDATE</code> or a <code>DELETE</code> only
locks the rows that it updates or deletes. This greatly reduces the
probability of deadlocks.
<LI>

A connection doing a rollback will now display "Rolling back" in the
<code>State</code> column of <code>SHOW PROCESSLIST</code>.
<LI>

<code>mysqlbinlog</code> now prints an informative commented line (thread id,
timestamp, server id, etc) before each <code>LOAD DATA INFILE</code>, like it already
does for other queries; unless <code>--short-form</code> is used.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed that <code>mysqlbinlog --read-from-remote-server</code> sometimes
couldn't accept two binary logfiles on the command line. (Bug #4507)
<LI>

Fixed that <code>mysqlbinlog --position --read-from-remote-server</code>
had incorrect <code># at</code> lines. (Bug #4506)
<LI>

Fixed that <code>CREATE TABLE ... TYPE=HEAP ... AS SELECT...</code> caused
replication slave to stop. (Bug #4971)
<LI>

Fixed that <code>mysql_options(...,MYSQL_OPT_LOCAL_INFILE,...)</code> failed to
disable <code>LOAD DATA LOCAL INFILE</code>. (Bug #5038)
<LI>

Fixed that <code>disable-local-infile</code> option had no effect if client read it
from a configuration file using
<code>mysql_options(...,MYSQL_READ_DEFAULT,...)</code>. (Bug #5073)
<LI>

Fixed that <code>SET GLOBAL SYNC_BINLOG</code> did not work on some platforms (Mac OS
X). (Bug #5064)
<LI>

Fixed that <code>mysql-test-run</code> failed on the <code>rpl_trunc_binlog</code> test if
running test from the installed (the target of 'make install') directory. (Bug
#5050)
<LI>

Fixed that <code>mysql-test-run</code> failed on the <code>grant_cache</code> test when run
as Unix user 'root'. (Bug #4678)
<LI>

Fixed an unlikely deadlock which could happen when using <code>KILL</code>. (Bug
#4810)
<LI>

Fixed a crash when one connection got <code>KILL</code>ed while it was doing
<code>START SLAVE</code>. (Bug #4827)
<LI>

Made <code>FLUSH TABLES WITH READ LOCK</code> block <code>COMMIT</code> if server is
running with binary logging; this ensures that the binary log position can be
trusted when doing a full backup of tables and the binary log. (Bug #4953)
<LI>

Fixed that the counter of an <code>auto_increment</code> column was not reset by
<code>TRUNCATE TABLE</code> is the table was a temporary one. (Bug #5033)
<LI>

Fixed slave SQL thread so that the <code>SET COLLATION_SERVER...</code> statements it
replicates don't advance its position (so that if it gets interrupted before
the actual update query, it will later redo the <code>SET</code>). (Bug #5705)
<LI>

Fixed that if the slave SQL thread found a syntax error in a query (which
should be rare, as the master parsed it successfully), it stops. (Bug #5711)
<LI>

Fixed that if a write to a MyISAM table fails because of a full disk or an
exceeded disk quota, it prints a message to the error log every 10 minutes, and
waits until disk becomes free. (Bug #3248)
<LI>

Fixed problem introduced in 4.0.21 where a connection starting a transaction,
doing updates, then <code>FLUSH TABLES WITH READ LOCK</code>, then <code>COMMIT</code>,
would cause replication slaves to stop (complaining about error 1223). Bug
surfaced when using the InnoDB <code>innobackup</code> script. (Bug #5949)
<LI>

<code>OPTIMIZE TABLE</code>, <code>REPAIR TABLE</code>, and <code>ANALYZE TABLE</code> are now replicated 
without any error code in the binary log. (Bug #5551)
<LI>

If a connection had an open transaction but had done no updates to
transactional tables (for example if had just done a <code>SELECT FOR UPDATE</code>
then executed a non-transactional update, that update automatically committed
the transaction (thus releasing InnoDB's row-level locks etc). (Bug #5714)
<LI>

If a connection was interrupted by a network error and did a rollback, the
network error code got stored into the <code>BEGIN</code> and <code>ROLLBACK</code> binary
log events; that caused superfluous slave stops. (Bug #6522)
</UL>



<H3><A NAME="News-5.0.1" HREF="manual_toc.html#News-5.0.1">D.1.3  Changes in release 5.0.1 (27 Jul 2004)</A></H3>

<P>
<strong>Note</strong>: This build passes our test suite and fixes a lot of reported
bugs found in the previous 5.0.0 release. However, please be aware that this is
not a ``standard MYSQL build'' in the sense that there are still some
open critical bugs in our bugs database at <a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a>
that affect this release as well. We are actively fixing these and will
make a new release where these are fixed as soon as possible. However,
this binary should be a good candidate for testing new MySQL 5.0 features
for future products.

</P>
<P>
Functionality added or changed:

<UL>
<LI>

Added support for read-only and updatable views based on a single table or
other updatable views. View use requires that you upgrade your grant tables
to add the view-related privileges.
See section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.
<LI>

Implemented a new ``greedy search'' optimizer that can significantly reduce
the time spent on query optimization for some many-table joins. (You are
affected if not only some particular <code>SELECT</code> is slow, but even using
<code>EXPLAIN</code> for it takes a noticeable amount of time.) Two new system
variables, <code>optimizer_search_depth</code> and <code>optimizer_prune_level</code>, can
be used to fine-tune optimizer behavior.
<LI>

<strong>Warning: Incompatible change!</strong>
C API change: <code>mysql_shutdown()</code> now requires a second argument.
This is a source-level incompatibility that affects how you compile client
programs; it does not affect the ability of compiled clients to communicate
with older servers.
See section <A HREF="manual_MySQL_APIs.html#mysql_shutdown">21.2.3.52  <code>mysql_shutdown()</code></A>.
<LI>

A stored procedure is no longer ``global.'' That is, it now belongs to a
specific database:

<UL>
<LI>

When a database is dropped, all routines belonging to that database are also
dropped.
<LI>

Procedure names may be qualified, for example, <code>db.p()</code>
<LI>

When executed from another database, an implicit <code>USE <var>db_name</var></code> is
in effect.
<LI>

Explicit <code>USE <var>db_name</var></code> statements no longer are allowed in a
stored procedure.
</UL>

See section <A HREF="manual_Stored_Procedures.html#Stored_Procedures">19  Stored Procedures and Functions</A>.
<LI>

Fixed <code>SHOW TABLES</code> output field name and values according to standard.
Field name changed from <code>Type</code> to <code>table_type</code>, values are
<code>BASE TABLE</code>, <code>VIEW</code> and <code>ERROR</code>. (Bug #4603)
<LI>

Added the <code>sql_updatable_view_key</code> system variable.
<LI>

Added the <code>--replicate-same-server-id</code> server option.
<LI>

Added <code>Last_query_cost</code> status variable that reports optimizer cost
for last compiled query.
<LI>

Added the <code>--to-last-log</code> option to <code>mysqlbinlog</code>, for use
in conjunction with <code>--read-from-remote-server</code>.
<LI>

Added the <code>--innodb-safe-binlog</code> server option, which adds consistency
guarantees between the content of <code>InnoDB</code> tables and the binary log.
See section <A HREF="manual_MySQL_Database_Administration.html#Binary_log">5.9.4  The Binary Log</A>.
<LI>

<code>OPTIMIZE TABLE</code> for <code>InnoDB</code> tables is now mapped to <code>ALTER
TABLE</code> instead of <code>ANALYZE TABLE</code>.
<LI>

<code>sync_frm</code> is now a settable global variable (not only a startup option).
<LI>

For replication of <code>MEMORY</code> (<code>HEAP</code>) tables: Made the master
automatically write a <code>DELETE FROM</code> statement to its binary log when a
<code>MEMORY</code> table is opened for the first time since master's startup.
This is for the case where the slave has replicated a non-empty
<code>MEMORY</code> table, then the master is shut down and restarted: the table
is now empty on master; the <code>DELETE FROM</code> empties it on slave too. Note
that even with this fix, between the master's restart and the first use of
the table on master, the slave still has out-of-date data in the table. But
if you use the <code>--init-file</code> option to populate the <code>MEMORY</code> table
on the master at startup, it ensures that the failing time interval is zero.
(Bug #2477)
<LI>

When a session having open temporary tables terminates, the statement
automatically written to the binary log is now <code>DROP TEMPORARY TABLE IF
EXISTS</code> instead of <code>DROP TEMPORARY TABLE</code>, for more robustness.
<LI>

The MySQL server now returns an error if <code>SET SQL_LOG_BIN</code> is issued by a
user without the <code>SUPER</code> privilege (in previous versions it just silently
ignored the statement in this case).
<LI>

Changed that when the MySQL server has binary logging disabled (that is,
no <code>--log-bin</code> option was used), then no transaction binary log cache
is allocated for connections. This should save <code>binlog_cache_size</code>
bytes of memory (32KB by default) for every connection.
<LI>

Added the <code>sync_binlog=N</code> global variable and startup option, which makes
the MySQL server synchronize its binary log to disk (<code>fdatasync()</code>) after
every Nth write to the binary log.
<LI>

Changed the slave SQL thread to print less useless error messages (no more
message duplication; no more messages when an error is skipped because of
<code>slave-skip-errors</code>).
<LI>

<code>DROP DATABASE IF EXISTS</code>, <code>DROP TABLE IF EXISTS</code>, single-table
<code>DELETE</code>, and single-table <code>UPDATE</code> now are written to the binary log
even if they changed nothing on the master (for example, even if a
<code>DELETE</code> matched no rows). The old behavior sometimes caused bad surprises
in replication setups.
<LI>

Replication and <code>mysqlbinlog</code> now have better support for the case that
the session character set and collation variables are changed within a given
session.
See section <A HREF="manual_Replication.html#Replication_Features">6.7  Replication Features and Known Problems</A>.
<LI>

Killing a <code>CHECK TABLE</code> statement does not result in the table being
marked as ``corrupted'' any more; the table remains as if <code>CHECK TABLE</code>
had not even started.
See section <A HREF="manual_SQL_Syntax.html#KILL">13.5.5.3  <code>KILL</code> Syntax</A>.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Strange results with index (x, y) ... WHERE x=val_1 AND y&#62;=val_2 ORDER BY pk; (Bug #3155)
<LI>

Subquery and order by (Bug #3118)
<LI>

<code>ALTER DATABASE</code> caused the client to hang if the database did not
exist. (Bug #2333)
<LI>

<code>SLAVE START</code> (which is a deprecated syntax, <code>START SLAVE</code> should be
used instead) could crash the slave. (Bug #2516)
<LI>

Multiple-table <code>DELETE</code> statements were never replicated by the slave if
there were any <code>--replicate-*-table</code> options. (Bug #2527)
<LI>

The MySQL server did not report any error if a statement (submitted through
<code>mysql_real_query()</code> or <code>mysql_stmt_prepare()</code>) was terminated
by garbage characters. This can happen if you pass a wrong <code>length</code>
parameter to these functions. The result was that the
garbage characters were written into the binary log. (Bug #2703)
<LI>

Replication:
If a client connects to a slave server and issues an administrative
statement for a table (for example, <code>OPTIMIZE TABLE</code> or <code>REPAIR
TABLE</code>), this could sometimes stop the slave SQL thread. This does not lead
to any corruption, but you must use <code>START SLAVE</code> to get replication
going again. (Bug #1858)
<LI>

Made clearer the error message that one gets when an update is refused because
of the <code>--read-only</code> option. (Bug #2757)
<LI>

Fixed that <code>--replicate-wild-*-table</code> rules apply to <code>ALTER DATABASE</code>
when the table pattern is <code>%</code>, as is already the case for <code>CREATE
DATABASE</code> and <code>DROP DATABASE</code>. (Bug #3000)
<LI>

Fixed that when a <code>Rotate</code> event is found by the slave SQL thread in the
middle of a transaction, the value of <code>Relay_Log_Pos</code> in <code>SHOW SLAVE
STATUS</code> remains correct. (Bug #3017)
<LI>

Corrected the master's binary log position that <code>InnoDB</code> reports when it is doing a
crash recovery on a slave server. (Bug #3015)
<LI>

Changed the column <code>Seconds_Behind_Master</code> in <code>SHOW SLAVE STATUS</code> to
never show a value of -1. (Bug #2826)
<LI>

Changed that when a <code>DROP TEMPORARY TABLE</code> statement is automatically
written to the binary log when a session ends, the statement is recorded with an
error code of value zero (this ensures that killing a <code>SELECT</code> on the
master does not result in a superfluous error on the slave). (Bug #3063)
<LI>

Changed that when a thread handling <code>INSERT DELAYED</code> (also known as a
<code>delayed_insert</code> thread) is killed, its statements are recorded with an
error code of value zero (killing such a thread does not endanger
replication, so we thus avoid a superfluous error on the slave). (Bug #3081)
<LI>

Fixed deadlock when two <code>START SLAVE</code> commands were run at the same
time. (Bug #2921)
<LI>

Fixed that a statement never triggers a superfluous error on the slave, if it
must be excluded given the <code>--replicate-*</code> options. The bug was that if the
statement had been killed on the master, the slave would stop. (Bug #2983)
<LI>

The <code>--local-load</code> option of <code>mysqlbinlog</code> now requires an argument.
<LI>

Fixed a segmentation fault when running <code>LOAD DATA FROM MASTER</code> after
<code>RESET SLAVE</code>. (Bug #2922)
<LI>

<code>mysqlbinlog --read-from-remote-server</code> read all binary logs following the
one that was requested.  It now stops at the end of the requested file, the
same as it does when reading a local binary log. There is an option
<code>--to-last-log</code> to get the old behavior. (Bug #3204)
<LI>

Fixed <code>mysqlbinlog --read-from-remote-server</code> to print the exact
positions of events in the "at #" lines. (Bug #3214)
<LI>

Fixed a rare error condition that caused the slave SQL thread spuriously
to print the message <code>Binlog has bad magic number</code> and stop when it
was not necessary to do so.  (Bug #3401)
<LI>

Fixed <code>mysqlbinlog</code> not to forget to print a <code>USE</code> statement
under rare circumstances where the binary log contained a <code>LOAD DATA
INFILE</code> statement. (Bug #3415)
<LI>

Fixed a memory corruption when replicating a <code>LOAD DATA INFILE</code> when the
master had version 3.23. (Bug #3422)
<LI>

Multiple-table <code>DELETE</code> statements were always replicated by the slave if
there were some <code>--replicate-*-ignore-table</code> options and no
<code>--replicate-*-do-table</code> options. (Bug #3461)
<LI>

Fixed a crash of the MySQL slave server when it was built with
<code>--with-debug</code> and replicating itself. (Bug #3568)
<LI>

Fixed that in some replication error messages, a very long query caused the rest
of the message to be invisible (truncated), by putting the query last in the
message. (Bug #3357)
<LI>

If <code>server-id</code> was not set using startup options but with <code>SET
GLOBAL</code>, the replication slave still complained that it was not set.
(Bug #3829)
<LI>

<code>mysql_fix_privilege_tables</code> didn't correctly handle the argument of its
<code>--password=#</code> option. (Bug #4240)
<LI>

Fixed potential memory overrun in <code>mysql_real_connect()</code> (which
required a compromised DNS server and certain operating systems). (Bug #4017)
<LI>

During the installation process of the server RPM on Linux, <code>mysqld</code>
was run as the <code>root</code> system user, and if you had
<code>--log-bin=&#60;somewhere_out_of_var_lib_mysql&#62;</code> it created binary log
files owned by <code>root</code> in this directory, which remained owned by
<code>root</code> after the installation. This is now fixed by starting
<code>mysqld</code> as the <code>mysql</code> system user instead. (Bug #4038)
<LI>

Made <code>DROP DATABASE</code> honor the value of
<code>lower_case_table_names</code>. (Bug #4066)
<LI>

The slave SQL thread refused to replicate <code>INSERT ... SELECT</code> if it
examined more than 4 billion rows. (Bug #3871)
<LI>

<code>mysqlbinlog</code> didn't escape the string content of user variables, and did
not deal well when these variables were in non-ASCII character sets; this is
now fixed by always printing the string content of user variables in
hexadecimal. The character set and collation of the string is now also
printed. (Bug #3875)
<LI>

Fixed incorrect destruction of expression that led to a server crash on
complex <code>AND</code>/<code>OR</code> expressions if query was ignored (either by a
replication server because of <code>--replicate-*-table</code> rules, or by any MySQL
server because of a syntax error). (Bug #3969, Bug #4494)
<LI>

If <code>CREATE TEMPORARY TABLE t SELECT</code> failed while loading the data, the
temporary table was not dropped. (Bug #4551)
<LI>

Fixed that when a multiple-table <code>DROP TABLE</code> failed to drop a table on
the master server, the error code was not written to the binary log.
(Bug #4553)
<LI>

When the slave SQL thread was replicating a <code>LOAD DATA INFILE</code>
statement, it didn't show the statement in the output of <code>SHOW
PROCESSLIST</code>. (Bug #4326)
</UL>



<H3><A NAME="News-5.0.0" HREF="manual_toc.html#News-5.0.0">D.1.4  Changes in release 5.0.0 (22 Dec 2003: Alpha)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

The <code>KILL</code> statement now takes <code>CONNECTION</code> and <code>QUERY</code>
modifiers. The first is the same as <code>KILL</code> with no modifier (it
kills a given connection thread).  The second kills only the statement
currently being executed by the connection.
<LI>

Added <code>TIMESTAMPADD()</code> and <code>TIMESTAMPDIFF()</code> functions.
<LI>

Added <code>WEEK</code> and <code>QUARTER</code> values as <code>INTERVAL</code> arguments
for the <code>DATE_ADD()</code> and <code>DATE_SUB()</code> functions.
<LI>

New binary log format that enables replication of these session variables:
<code>sql_mode</code>, <code>SQL_AUTO_IS_NULL</code>, <code>FOREIGN_KEY_CHECKS</code>
(which was already replicated since 4.0.14, but here it's done more
efficiently and takes less space in the binary logs), <code>UNIQUE_CHECKS</code>.
Other variables (like character sets, <code>SQL_SELECT_LIMIT</code>, ...) will be
replicated in upcoming 5.0.x releases.
<LI>

Implemented Index Merge optimization for <code>OR</code> clauses.
See section <A HREF="manual_MySQL_Optimization.html#Index_Merge_optimization">7.2.6  Index Merge Optimization</A>.
<LI>

Basic support for stored procedures (SQL:2003 style).
See section <A HREF="manual_Stored_Procedures.html#Stored_Procedures">19  Stored Procedures and Functions</A>.
<LI>

Added <code>SELECT INTO <var>list_of_vars</var></code>, which can be of mixed
(that is, global and local) types.
See section <A HREF="manual_Stored_Procedures.html#SELECT_INTO_Statement">19.1.6.3  <code>SELECT ... INTO</code> Statement</A>.
<LI>

Easier replication upgrade (5.0.0 masters can read older binary logs and
5.0.0 slaves can read older relay logs). See section <A HREF="manual_Replication.html#Replication_Compatibility">6.5  Replication Compatibility Between MySQL Versions</A>
for more details). The format of the binary log and relay log is changed
compared to that of MySQL 4.1 and older.
<LI>

<strong>Important note:</strong> If you upgrade to MySQL 4.1.1 or higher, it is
difficult to downgrade back to 4.0 or 4.1.0! That is because, for earlier
versions, <code>InnoDB</code> is not aware of multiple tablespaces.
</UL>

<P>
Bugs fixed:

<UL>
</UL>



<H2><A NAME="News-4.1.x" HREF="manual_toc.html#News-4.1.x">D.2  Changes in release 4.1.x (Production)</A></H2>

<P>
<A NAME="IDX2383"></A>

</P>
<P>
Version 4.1 of the MySQL server includes many enhancements and new features.
Binaries for this version are available for download at
<a HREF="http://dev.mysql.com/downloads/mysql-4.1.html">http://dev.mysql.com/downloads/mysql-4.1.html</a>.

</P>

<UL>
<LI>

Subqueries and derived tables (unnamed views).
See section <A HREF="manual_SQL_Syntax.html#Subqueries">13.1.8  Subquery Syntax</A>.
<LI>

<code>INSERT ... ON DUPLICATE KEY UPDATE ...</code> syntax.  This allows you to
<code>UPDATE</code> an existing row if the insert would cause a duplicate value
in a <code>PRIMARY</code> or <code>UNIQUE</code> key. (<code>REPLACE</code> allows you to
overwrite an existing row, which is something entirely different.)
See section <A HREF="manual_SQL_Syntax.html#INSERT">13.1.4  <code>INSERT</code> Syntax</A>.
<LI>

A newly designed <code>GROUP_CONCAT()</code> aggregate function.
See section <A HREF="manual_Functions.html#Group_by_functions_and_modifiers">12.9  Functions and Modifiers for Use with <code>GROUP BY</code> Clauses</A>.
<LI>

Extensive Unicode (UTF8) support.
<LI>

Table names and column names now are stored in <code>UTF8</code>. This makes MySQL
more flexible, but might cause some problems upgrading if you have table
or column names that use characters outside of the standard 7-bit US-ASCII
range.
See section <A HREF="manual_Installing.html#Upgrading-from-4.0">2.10.2  Upgrading from Version 4.0 to 4.1</A>.
<LI>

Character sets can be defined per column, table, and database.
<LI>

New key cache for <code>MyISAM</code> tables with many tunable parameters.  You can
have multiple key caches, preload index into caches for batches...
<LI>

<code>BTREE</code> index on <code>HEAP</code> tables.
<LI>

Support for OpenGIS spatial types (geographical data).
See section <A HREF="manual_Spatial_extensions_in_MySQL.html#Spatial_extensions_in_MySQL">18  Spatial Extensions in MySQL</A>.
<LI>

<code>SHOW WARNINGS</code> shows warnings for the last command.
See section <A HREF="manual_SQL_Syntax.html#SHOW_WARNINGS">13.5.4.20  <code>SHOW WARNINGS</code> Syntax</A>.
<LI>

Faster binary protocol with prepared statements and parameter binding.
See section <A HREF="manual_MySQL_APIs.html#C_API_Prepared_statements">21.2.4  C API Prepared Statements</A>.
<LI>

You can now issue multiple statements with a single C API call and
then read the results in one go.
See section <A HREF="manual_MySQL_APIs.html#C_API_multiple_queries">21.2.9  C API Handling of Multiple Query Execution</A>.
<LI>

Create Table: <code>CREATE [TEMPORARY] TABLE [IF NOT EXISTS] table2 LIKE
table1</code>.
<LI>

Server based <code>HELP</code> command that can be used in the <code>mysql</code>
command-line client (and other clients) to get help for SQL statements.
</UL>

<P>
For a full list of changes, please refer to the changelog sections for
each individual 4.1.x release.

</P>



<H3><A NAME="News-4.1.10" HREF="manual_toc.html#News-4.1.10">D.2.1  Changes in release 4.1.10 (not released yet)</A></H3>

<P>
Functionality added or changed:

<UL>
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed a bug in <code>max_heap_table_size</code> handling, that resulted in
<code>Table is full</code> error when the table was still smaller than the limit.
(Bug #7791).
<LI>

Fixed a symlink vulnerability in the <code>mysqlaccess</code> script.
Reported by Javier Fernandez-Sanguino Pena
and <a HREF="http://www.debian.org/security/audit"> Debian Security Audit Team</a>.
(<a HREF="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0004"> CAN-2005-0004</a>)
</UL>



<H3><A NAME="News-4.1.9" HREF="manual_toc.html#News-4.1.9">D.2.2  Changes in release 4.1.9 (13 Jan 2005)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

The naming scheme of the Windows installation packages has changed slightly:

<UL>
<LI>

The platform suffix was changed from <code>-win</code> to <code>-win32</code>
<LI>

The product descriptions <code>-noinstall</code> and <code>-essential</code> have been
moved in front of the version number
</UL>

Examples: <tt>`mysql-essential-4.1.9-win32.msi'</tt>, <tt>`mysql-noinstall-4.1.9-win32.zip'</tt>
See section <A HREF="manual_Installing.html#Windows_installation">2.3  Installing MySQL on Windows</A>.
<LI>

The Mac OS X 10.3 installation disk images now include a MySQL Preference
Pane for the Mac OS X Control Panel that enables the user to start and
stop the MySQL server via the GUI and activate and deactivate the automatic
MySQL server startup on bootup.
<LI>

<code>Seconds_Behind_Master</code> will be <code>NULL</code> (which means ``unknown'') if
the slave SQL thread is not running, or if the slave I/O thread is not running
or not connected to master. It will be zero if the SQL thread has caught up
with the I/O thread. It no longer grows indefinitely if the master is idle.
<LI>

InnoDB: Do not acquire an internal <code>InnoDB</code> table lock in <code>LOCK
TABLES</code> if <code>AUTOCOMMIT=1</code>. This helps in porting old <code>MyISAM</code>
applications to <code>InnoDB</code>. <code>InnoDB</code> table locks in that case
caused deadlocks very easily.
<LI>

InnoDB: Print a more descriptive error and refuse to start <code>InnoDB</code>
if the size of <tt>`ibdata'</tt> files is smaller than what is stored in the
tablespace header; <code>innodb_force_recovery</code> overrides this.
<LI>

The MySQL server aborts immediately instead of simply issuing a warning if
it is started with the <code>--log-bin</code> option but cannot initialize the
binary log at startup (that is, an error occurs when writing to the binary
log file or binary log index file).
<LI>

The binary log file and binary log index file now behave like <code>MyISAM</code>
when there is a "disk full" or "quota exceeded" error. See section <A HREF="manual_Problems.html#Full_disk">A.4.3  How MySQL Handles a Full Disk</A>.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

InnoDB: Fixed the <strong>critical bug</strong> if you enabled
<code>innodb_file_per_table</code> in <tt>`my.cnf'</tt>.
If you shut down <code>mysqld</code>, records could disappear from
the secondary indexes of a table. (Bug #7496)
<LI>

InnoDB: Fixed a bug: 32-bit <code>mysqld</code> binaries built on HP-UX-11 did
not work with <code>InnoDB</code> files greater than 2 GB in size. (Bug #6189)
<LI>

InnoDB: Return a sensible error code from <code>DISCARD TABLESPACE</code>
if it fails because the table is referenced by a <code>FOREIGN KEY</code>.
<LI>

InnoDB: Fixed a bug: <code>InnoDB</code> failed to drop a table in the background
drop queue if the table was referenced by a <code>FOREIGN KEY</code> constraint.
<LI>

InnoDB: Fixed a bug: if we dropped a table where an <code>INSERT</code> was waiting
for a lock to check a <code>FOREIGN KEY</code> constraint, then an assertion would
fail in <code>lock_reset_all_on_table()</code>.
<LI>

InnoDB: Fix a little bug: we looked at the physical size of a stored
SQL <code>NULL</code> value from a wrong field in the index; this has probably
caused no bugs visible to the user. It caused only some extra space to be 
used in some rare cases.
<LI>

InnoDB: Use the <code>fcntl()</code> file flush method on Mac OS X versions 10.3
and up. Apple had disabled <code>fsync()</code> in Mac OS X for internal disk
drives, which caused corruption at power outages.
<LI>

<code>mysqladmin password</code> now checks whether the server has
<code>--old-passwords</code> turned on or predates 4.1 and uses the old-format
password if so. (Bug #7451)
<LI>

Added a <code>--default-character-set</code> option to <code>mysqladmin</code> to avoid
problems when the default character set is not <code>latin1</code>. (Bug #7524)
<LI>

Fix a problem with truncation of <code>FLOAT</code> values. (Bug #7361)
<LI>

Fixed a bug in <code>PROCEDURE ANALYSE()</code>, which did not quote some
<code>ENUM</code> values properly. (Bug #2813)
<LI>

Fixed a bug that caused incorrect results for complex datetime expressions
containing casts of datetime values to <code>TIME</code> or <code>DATE</code> values.
(Bug #6914)
<LI>

Include compression library flags in the output from
<code>mysql_config --lib_r</code>.
(Bug #7021)
<LI>

Corrected a problem with <code>mysql_config</code> not producing all relevant
flags from <code>CFLAGS</code>.  (Bug #6964)
<LI>

Corrected a problem with <code>mysqld_safe</code> not properly capturing
output from <code>ps</code>.  (Bug #5878)
<LI>

Fixed a bug that caused a linking failure when linking both the MySQL client
library and IMAP library. (Bug #7428)
<LI>

Fixed a bug that caused microseconds to be gobbled from the string result
of the <code>STR_TO_DATE</code> function, if there is some other specifier in
the format string following <code>%f</code>. (Bugs #7458)
<LI>

Made the MySQL server accept executing <code>SHOW CREATE DATABASE</code> even if the
connection has an open transaction or locked tables. Refusing it made
<code>mysqldump --single-transaction</code> sometimes fail to print a complete
<code>CREATE DATABASE</code> statement for some dumped databases. (Bug #7358)
<LI>

Fixed that, when encountering a ``disk full'' or ``quota exceeded'' write
error, <code>MyISAM</code> sometimes didn't sleep and retry the write, thus
resulting in a corrupted table. (Bug #7714)
<LI>

Fixed that <code>--expire-log-days</code> was not honored if using only transactions.
(Bug #7236)
<LI>

Fixed that a slave could crash after replicating many <code>ANALYZE
TABLE</code>, <code>OPTIMIZE TABLE</code>, or <code>REPAIR TABLE</code> statements from the
master. (Bug #6461, Bug #7658)
</UL>



<H3><A NAME="News-4.1.8" HREF="manual_toc.html#News-4.1.8">D.2.3  Changes in release 4.1.8 (14 Dec 2004)</A></H3>

<P>
<strong>Note</strong>: Due to a libtool-related bug in the source distribution,
the creation of shared <code>libmysqlclient</code> libraries was not possible
(the resulting files were missing the <code>.so</code> file name extension).
The file <tt>`ltmain.sh'</tt> was updated to fix this problem and the resulting
source distribution was released as <tt>`mysql-4.1.8a.tar.gz'</tt>. This
modification did not affect the binary packages. (Bug #7401)

</P>
<P>
Functionality added or changed:

<UL>
<LI>

For <code>ALTER DATABASE</code>, the database name now can be omitted to apply the
change to the default database.
<LI>

Added <code>WITH CONSISTENT SNAPSHOT</code> clause to <code>START TRANSACTION</code> to
begin a transaction with a consistent read.
<LI>

Added <code>--order-by-primary</code> to <code>mysqldump</code>,
to sort each table's data in a dump file.
This may be useful when dumping a MyISAM table which
will be loaded into an InnoDB table.
Dumping a MyISAM table with this option is considerably
slower than without.
<LI>

InnoDB: Do not periodically write <code>SHOW INNODB STATUS</code> information
to a temporary file unless the configuration option
<code>innodb_status_file=1</code> is set.
<LI>

InnoDB: Commit after every 10,000 copied rows when executing
<code>ALTER TABLE</code>.  This makes it much faster to recover from an
aborted <code>ALTER TABLE</code> or <code>OPTIMIZE TABLE</code>.
<LI>

<code>FULLTEXT</code> index block size is changed to be 1024 instead of 2048.
<LI>

Added <code>--disable-log-bin</code> option to <code>mysqlbinlog</code>. Using
this option you can disable binary logging for the statements produced
by <code>mysqlbinlog</code>. That is, <code>mysqlbinlog --disable-log-bin
&#60;file_name&#62; | mysql</code> won't write any statements to the MySQL server
binary log.
<LI>

The <code>--master-data</code> option for <code>mysqldump</code> now takes an optional
argument of 1 or 2 to produce a non-commented or commented <code>CHANGE MASTER
TO</code> statement. The default is 1 for backward compatibility.
<LI>

<code>mysqldump --single-transaction --master-data</code> now is able to take an
online (non-blocking) dump of InnoDB and report the corresponding binary log
coordinates. This makes a backup suitable for point-in-time recovery,
roll-forward or replication slave creation. See section <A HREF="manual_Client-Side_Scripts.html#mysqldump">8.8  The <code>mysqldump</code> Database Backup Program</A>.
<LI>

Added <code>--lock-all-tables</code> to <code>mysqldump</code> to lock all tables by
acquiring a global read lock.
<LI>

Added <code>--hex-blob</code> option to <code>mysqldump</code> for dumping binary
string columns using hexadecimal notation.
<LI>

Added <code>mysql_hex_string()</code> C API function that hex-encodes a string.
<LI>

In the normal log MySQL now prints the logposition for <code>Binlog Dump</code>
requests.
<LI>

Added <code>[mysql_cluster]</code> section to <tt>`my.cnf'</tt> file for configuration
settings specific to MySQL Cluster. <code>ndb-connectstring</code> variable moved here.
<LI>

A connection doing a rollback will now display "Rolling back" in the
<code>State</code> column of <code>SHOW PROCESSLIST</code>.
<LI>

<code>mysqlbinlog</code> now prints an informative commented line (thread id,
timestamp, server id, etc) before each <code>LOAD DATA INFILE</code>, like it already
does for other queries; unless <code>--short-form</code> is used.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed incorrect referencing to column by name from subquery to outer query in
case of using temporary table by outer query and placing subquery in the
<code>WHERE</code> clause. (Bug #7079)
<LI>

Fixed a bug in authentication code that allowed a malicious user
to crash the server with specially crafted packets
(using a modified client library). (Bug #7187)
<LI>

Fixed a crashing bug in a string function <code>LEFT</code>, when this function
is part of the expression which is used as <code>GROUP BY</code> field.
(Bug #7101)
<LI>

Fixed bug which caused MySQL to require privileges on system time zone
description tables for implicit access to them (i.e. if one set 
<code>time_zone</code> variable or used <code>CONVERT_TZ()</code> function) in case
when some table-level or column-level privileges existed. (Bug #6765)
<LI>

<code>mysql_stmt_data_seek(stmt,0)</code> will now rewind a counter and enable
that buffered rows can be re-fetched on the client side.
(Bug #6996)
<LI>

Fixed an insufficient privilege check in <code>SHOW CREATE TABLE</code>
command. (Bug #7043)
<LI>

Fixed a rare memory corruption (that resulted in a crash) in
<code>MATCH ... AGAINST</code> on columns that use multi-byte character sets.
(Bug #6269)
<LI>

Fixed NULL processing in ALL/SOME subqueries. (Bug #6247)
<LI>

Fixed execution complex queries with subqueries. (Bug #6406, Bug #6841)
<LI>

Fixed initialization of some internal structures for first execution.
(Bug #6517)
<LI>

Backported a fix for the fulltext interface from MySQL 5.0.
(Bug #6523)
<LI>

Fixed NULL value handling in case of empty results in subqueries. (Bug #6806)
<LI>

Prevent adding <code>CREATE TABLE .. SELECT</code> query to the binary log when the
insertion of new records partially failed. (Bug #6682)
<LI>

<code>INSERT ... SELECT</code> no longer reports spurious "column truncated" warnings
(Bug #6284)
<LI>

Fixed a bug that could cause "Record has changed since last read in table"
error message in some queires on <code>HEAP</code> tables that contain only one row.
(Bug #6748)
<LI>

<code>mysqld_safe</code> was in many cases ignoring any
<code>--no-defaults</code>, <code>--defaults-file</code>, or
<code>--defaults-extra-file</code> arguments.  Those arguments
are now honored, and this may change what options are
passed to <code>mysqld</code> in some installations.
<LI>

The server was interpreting <code>CHAR BINARY</code> and <code>VARCHAR BINARY</code>
columns from 4.0 tables as having the <code>BINARY</code> and <code>VARBINARY</code>
data types.  Now they are interpreted as <code>CHAR</code> and <code>VARCHAR</code>
columns that have the binary collation of the column's character set. (This
is the same way that <code>CHAR BINARY</code> and <code>VARCHAR BINARY</code> are
handled for new tables created in 4.1.)
<LI>

Fixed spurious "duplicate key" error from <code>REPLACE</code> or
<code>INSERT ... ON DUPLICATE KEY UPDATE</code> statements performing multiple-row
insert in the table that had unique and fulltext indexes.
(Bug #6784)
<LI>

Fixed a bug in execution of subqueries in <code>SET</code> and <code>DO</code> statements
which caused wrong results to be returned from subsequent queries.
(Bug #6462)
<LI>

Fixed a bug which allowed server to accept datetime values with wrong year
part. Also now server will perform same checks for datetime values passed 
through <code>MYSQL_TIME</code> structure as for datetime values passed as strings.
(Bug #6266)
<LI>

Fixed a bug with <code>INSERT</code> for a table with <code>FULLTEXT</code> indexes.
Under rare circumstances, this could result in a corrupted table if words of
different lengths may be considered equal. This is possible in some
collations, for example, in <code>utf8_general_ci</code> or <code>latin1_german2_ci</code>.
(Bug #6265)
<LI>

InnoDB: Do not intentionally crash <tt>`mysqld'</tt> if the buffer
pool is exhausted by the lock table; return error 1206 instead.
Do not intentionally crash <tt>`mysqld'</tt> if we cannot allocate the
memory for the InnoDB buffer pool. (Bug #6817) (Bug #6827)
<LI>

InnoDB: Let InnoDB's <code>FOREIGN KEY</code> parser to remove the <code>latin1</code>
character <code>0xA0</code> from the end of an unquoted identifier. The EMS MySQL
Manager in <code>ALTER TABLE</code> adds that character after a table name, which
caused error 121 when we tried to add a new constraint.
<LI>

InnoDB: Refuse to open new-style tables created with MySQL 5.0.3 or later.
(Bug #7089)
<LI>

InnoDB: Do not call <code>rewind()</code> when displaying
<code>SHOW INNODB STATUS</code> information on <code>stderr</code>.
<LI>

InnoDB: Made the foreign key parser better aware of quotes.  (Bug #6340)
<LI>

InnoDB: If one used <code>INSERT IGNORE</code> to insert several rows at a time,
and the first inserts were ignored because of a duplicate key collision,
then InnoDB in a replication slave assigned <code>AUTO_INCREMENT</code> values 1
bigger than in the master. This broke the MySQL replication. (Bug #6287)
<LI>

InnoDB: Fixed a bug: InnoDB ignored in <code>innodb_data_file_path</code> the
<code>max</code> specification in <code>:autoextend:max:2000M</code>.
This bug was introduced in 4.1.1.
<LI>

InnoDB: Fixed a bug: <code>innodb_locks_unsafe_for_binlog</code> still uses
next-key locking (Bug #6747). InnoDB used next-key locking when
record matched completely to search tuple. This unnecessary
next-key locking is now removed when <code>innodb_locks_unsafe_for_binlog</code>
option is used.
<LI>

InnoDB: Fix two hangs: <code>FOREIGN KEY</code> constraints treated table and
database names as case-insensitive. <code>RENAME TABLE t TO T</code> would hang
in an endless loop if <code>t</code> had a foreign key constraint defined on it.
Fix also a hang over the dictionary mutex that would occur if one tried
in <code>ALTER TABLE</code> or <code>RENAME TABLE</code> to create a foreign key
constraint name that collided with another existing name. (Bug #3478)
<LI>

If <code>STMT_ATTR_UPDATE_MAX_LENGTH</code> is set for a prepared statement,
<code>mysql_stmt_store_result()</code> will update <code>field-&#62;max_length</code>
for numeric columns as well. (Bug#6096)
<LI>

Prepared statements now handle <code>ZEROFILL</code> when converting <code>integer</code>
to <code>string</code>.
<LI>

Fixed crash when a call to <code>mysql_stmt_store_result()</code> occurred without
a preceding call to <code>mysql_stmt_bind_result()</code>.
<LI>

Fixed crash in prepared statements when using
<code>SELECT * FROM t1 NATURAL JOIN t2...</code>.
<LI>

Fixed crash in prepared statements when using <code>SELECT ... PROCEDURE</code>.
<LI>

Fixed crash in prepared statements when using subqueries.
<LI>

<code>GROUP_CONCAT(...ORDER BY)</code> when used with prepared statements gave
wrong sorting order.
<LI>

<code>CREATE TABLE <var>created_table</var></code> didn't signal when table was created.
This could cause a <code>DROP TABLE <var>created_table</var></code> in another thread
to wait "forever".
<LI>

Server warnings now are reset when you execute a prepared statement.
<LI>

Improved performance of identifier comparisons
(if many tables or columns are specified).
<LI>

<code>OPTIMIZE TABLE</code>, <code>REPAIR TABLE</code>, and <code>ANALYZE TABLE</code> are now replicated
without any error code in the binary log. (Bug #5551)
<LI>

<code>LOAD DATA INFILE</code> now works with option replicate-rewrite-db.
(Bug #6353)
<LI>

Fixed a bug which caused a crash when only the slave I/O thread was
stopped and started. (Bug #6148)
<LI>

Changed semantics of <code>CREATE/ALTER/DROP DATABASE</code> statements so
that replication of <code>CREATE DATABASE</code> is possible when using
<code>--binlog-do-db</code> and <code>--binlog-ignore-db</code>. (Bug #6391)
<LI>

If a connection had an open transaction but had done no updates to
transactional tables (for example if had just done a <code>SELECT FOR UPDATE</code>
then executed a non-transactional update, that update automatically committed
the transaction (thus releasing InnoDB's row-level locks etc). (Bug #5714)
<LI>

If a connection was interrupted by a network error and did a rollback, the
network error code got stored into the <code>BEGIN</code> and <code>ROLLBACK</code> binary
log events; that caused superfluous slave stops. (Bug #6522)
<LI>

A sequence of <code>BEGIN</code> (or <code>SET AUTOCOMMIT=0</code>), <code>FLUSH TABLES
WITH READ LOCK</code>, transactional update, <code>COMMIT</code>, <code>FLUSH
TABLES WITH READ LOCK</code> could hang the connection forever and possibly the MySQL
server itself. This happened for example when running the <code>innobackup</code>
script several times. (Bug #6732)
<LI>

<code>mysqlbinlog</code> did not print <code>SET PSEUDO_THREAD_ID</code> statements in
front of <code>LOAD DATA INFILE</code> statements inserting into temporary tables,
thus causing potential problems when rolling forward these statements after
restoring a backup. (Bug #6671)
</UL>



<H3><A NAME="News-4.1.7" HREF="manual_toc.html#News-4.1.7">D.2.4  Changes in release 4.1.7 (23 Oct 2004: Production)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<code>MOD()</code> no longer rounds arguments with a fractional part to integers.
Now it returns exact remainder after division. (Bug #6138)
<LI>

InnoDB: Added a
startup option and settable system variable <code>innodb_table_locks</code>
for making <code>LOCK TABLE</code> acquire also <code>InnoDB</code> locks.
The default value is 1, which means that
<code>LOCK TABLES</code> causes also InnoDB internally to take a table lock.
In applications using <code>AUTOCOMMIT=1</code> and <code>LOCK TABLES</code>, InnoDB's
internal table locks that were added in 4.0.20 and 4.1.2
can cause deadlocks. You can set
<code>innodb_table_locks=0</code> in <tt>`my.cnf'</tt> to remove that problem.
(Bug #3299, Bug #5998)
<LI>

See section <A HREF="manual_InnoDB.html#InnoDB_restrictions">15.17  Restrictions on <code>InnoDB</code> Tables</A>.  (Bug #3299, Bug #5998)
InnoDB: <code>SHOW TABLE STATUS</code> now shows the creation time of the table
for InnoDB. Note that this timestamp might not be the correct time because,
e.g., <code>ALTER TABLE</code> changes this timestamp.
<LI>

InnoDB: If <code>innodb_thread_concurrency</code> would be exceeded, let a thread
sleep 10 ms before entering the FIFO queue; previously, the value was 50 ms.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed a bug with <code>FOUND_ROWS()</code> used together with <code>LIMIT</code> clause
in prepared statements. (Bug#6088)
<LI>

Fixed a bug with <code>NATURAL JOIN</code> in prepared statements. (Bug#6046).
<LI>

Fixed a bug in join of tables from different databases having columns with 
identical names (prepared statements). (Bug#6050)
<LI>

Now implicit access to system time zone description tables (which happens
when you set <code>time_zone</code> variable or use <code>CONVERT_TZ()</code> function)
does not require any privileges. (Bug #6116)
<LI>

Fixed a bug which caused the server to crash when the deprecated <code>libmysqlclient</code> 
function <code>mysql_create_db()</code> was called. (Bug #6081)
<LI>

Fixed <code>REVOKE ALL PRIVILEGES, GRANT OPTION FROM <var>user</var></code> so that all
privileges are revoked correctly. (Bug #5831).  This corrects a case that
the fix in 4.1.6 could miss.
<LI>

Fixed crash when selecting from a <code>HEAP</code> table with <code>key_column IS
NOT NULL</code>. This could also cause a crash if not all index parts where used.
(Bug #6082)
<LI>

Fixed a bug that could cause MyISAM index corruption when key values
start with character codes below <code>BLANK</code>. This was caused by the
new key sort order in 4.1. (Bug #6151)
<LI>

InnoDB: Fixed a bug in <code>LOAD DATA INFILE&hellip;REPLACE</code>
printing duplicate key error when executing the same
load query several times. (Bug #5835)
<LI>

Fixed a bug in the prepared statements protocol when wrong metadata 
was sent for <code>SELECT</code> statements not returning a result set (such
as <code>SELECT ... INTO OUTFILE</code>). (Bug #6059)
<LI>

Fixed bug which allowed one to circumvent missing UPDATE privilege if one had
INSERT and SELECT privileges for table with primary key. (Bug #6173)
<LI>

Fixed a bug in <code>libmysqlclient</code> with wrong conversion of negative time
values to strings. (Bug #6049).
<LI>

Fixed a bug in <code>libmysqlclient</code> with wrong conversion of zero date
values (<code>0000-00-00</code>) to strings. (Bug #6058)
<LI>

Fixed a bug that caused the server to crash on attempt to prepare 
a statement with <code>RAND(?)</code>. (Bug #5985)
<LI>

Fixed a bug with handling of <code>DATE</code>, <code>TIME</code>, and <code>DATETIME</code>
columns in the binary protocol. The problem is compiler-specific and could
have been observed on HP-UX, AIX, Solaris9, when compiling with native
compiler. (Bug #6025)
<LI>

Fixed a bug with handling of <code>TINYINT</code> columns in the binary protocol.
The problem is specific to platforms where the C compiler has the <code>char</code>
data type unsigned by default. (Bug #6024)
<LI>

InnoDB: Fixed problem introduced in MySQL 4.0.21 where a connection starting a
transaction, doing updates, then <code>FLUSH TABLES WITH READ LOCK</code>,
then <code>COMMIT</code>, would cause replication slaves to stop (complaining
about error 1223). Bug surfaced when using the InnoDB <code>innobackup</code>
script. (Bug #5949)
<LI>

InnoDB: Release the dictionary latch during a long cascaded <code>FOREIGN KEY</code>
operation, so that we do not starve other users doing <code>CREATE TABLE</code>
or other DDL operation. This caused a notorious 'Long semaphore wait' message
to be printed to the <tt>`.err'</tt> log. (Bug #5961)
</UL>



<H3><A NAME="News-4.1.6" HREF="manual_toc.html#News-4.1.6">D.2.5  Changes in release 4.1.6 (10 Oct 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Added option <code>--sigint-ignore</code> to the <code>mysql</code> command line client
to make it ignore <code>SIGINT</code> signals (typically the result of the user
pressing Control-C).
<LI>

InnoDB: Added the startup option and settable global variable
<code>innodb_max_purge_lag</code> for delaying <code>INSERT</code>, <code>UPDATE</code>
and <code>DELETE</code> operations when the purge operations are lagging.
The default value of this parameter is zero, meaning that there will
not be any delays. See section <A HREF="manual_InnoDB.html#InnoDB_Multi-Versioning">15.13  Implementation of Multi-Versioning</A>.
<LI>

InnoDB: The <code>innodb_autoextend_increment</code> startup option that was
introduced in release 4.1.5 was made a settable global variable. (Bug #5736)
<LI>

InnoDB: If <code>DROP TABLE</code> is invoked on an InnoDB table for which the
<code>.ibd</code> file is missing, print to error log that the table was removed
from the <code>InnoDB</code> data dictionary, and allow MySQL to delete the
<code>.frm</code> file.  Maybe <code>DROP TABLE</code> should issue a warning in this
case.
<LI>

<code>TIMESTAMP</code> columns now can store <code>NULL</code> values. To create such 
a column, you must explicitly specify the <code>NULL</code> attribute in the column
specification. (Unlike all other column types, <code>TIMESTAMP</code> columns
are <code>NOT NULL</code> by default.)
<LI>

Now if <code>ALTER TABLE</code> converts one <code>AUTO_INCREMENT</code> column to
another <code>AUTO_INCREMENT</code> column it will preserve zero values (this
includes the case that we don't change such column at all).
<LI>

Now if <code>ALTER TABLE</code> converts some column to <code>TIMESTAMP NOT NULL</code>
column it will convert <code>NULL</code> values to current timestamp value (One can
still get old behavior by setting system <code>TIMESTAMP</code> variable to zero).
<LI>

On Windows, the MySQL configuration files included in the package now
use <tt>`.ini'</tt> instead of <tt>`.cnf'</tt> as the file name suffix.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed a bug that caused the server to crash on attempt to execute 
a prepared statement with a subselect inside a boolean expression.
(Bug #5987)
<LI>

Fixed a bug that caused the server to sometimes choose non-optimal
execution plan for a prepared statement executed with changed placeholder
values. (Bug #6042)
<LI>

InnoDB: Make the check for excessive semaphore waits tolerate glitches
in the system clock (do not crash the server if the system time is
adjusted while InnoDB is under load.).  (Bug #5898)
<LI>

InnoDB: Fixed a bug in the InnoDB <code>FOREIGN KEY</code> parser that prevented
<code>ALTER TABLE</code> of tables containing <samp>`#'</samp> in their names.  (Bug #5856)
<LI>

InnoDB: Fixed a bug that prevented
<code>ALTER TABLE <var>t</var> DISCARD TABLESPACE</code> from working.  (Bug #5851)
<LI>

InnoDB: <code>SHOW CREATE TABLE</code> now obeys the <code>SET SQL_MODE=ANSI</code>
and <code>SET SQL_QUOTE_SHOW_CREATE=0</code> settings.  (Bug #5292)
<LI>

InnoDB: Fixed a bug that caused
<code>CREATE TEMPORARY TABLE ... ENGINE=InnoDB</code> to terminate
<code>mysqld</code> when running in <code>innodb_file_per_table</code> mode.
Per-table tablespaces for temporary tables will from now on be
created in the temporary directory of <code>mysqld</code>.  (Bug #5137)
<LI>

InnoDB: Fixed some (not all) UTF-8 bugs in column prefix indexes.  (Bug #5975)
<LI>

InnoDB: If one updated a column so that its size changed, or updated
it to an externally stored (<code>TEXT</code> or <code>BLOB</code>) value, then
ANOTHER externally stored column would show up as 512 bytes of good
data + 20 bytes of garbage in a consistent read that fetched the old
version of the row. (Bug #5960)
<LI>

InnoDB: Change error code to <code>HA_ERR_ROW_IS_REFERENCED</code> if we cannot
<code>DROP</code> a parent table referenced by a <code>FOREIGN KEY</code> constraint;
this error number is less misleading than the previous number
<code>HA_ERR_CANNOT_ADD_FOREIGN</code>, but misleading still.
<LI>

Fixed <code>REVOKE ALL PRIVILEGES, GRANT OPTION FROM <var>user</var></code>
so that all privileges are revoked correctly.  (Bug #5831)
<LI>

Fixed a bug that caused the server to crash when character set
conversion was implicitly used in prepared mode; for example, as in
<code>'abc' LIKE CONVERT('abc' as utf8)</code>. (Bug #5688)
<LI>

The <code>mysql_change_user()</code> C API function now frees all prepared statements
associated with the connection. (Bug #5315)
<LI>

Fixed a bug when inserting <code>NULL</code> into an <code>AUTO_INCREMENT</code> column
failed, when using prepared statements. (Bug #5510)
<LI>

Fixed slave SQL thread so that the <code>SET COLLATION_SERVER...</code> statements it
replicates don't advance its position (so that if it gets interrupted before
the actual update query, it will later redo the <code>SET</code>). (Bug #5705)
<LI>

Fixed that if the slave SQL thread found a syntax error in a query (which
should be rare, as the master parsed it successfully), it stops. (Bug #5711)
<LI>

Fixed that if a write to a <code>MyISAM</code> table fails because of a full disk or
an exceeded disk quota, it prints a message to the error log every 10 minutes,
and waits until disk space becomes available. (Bug #3248)
<LI>

Now MySQL will not prefer columns, which are mentioned in select list but
are renamed, over columns from other tables participating in <code>FROM</code> 
clause when it resolves <code>GROUP BY</code> clause (e.g. <code>SELECT t1.a AS
c FROM t1, t2 ORDER BY a</code> will produce an error if both <code>t1</code> and
<code>t2</code> tables contain <code>a</code> column). (Bug #4302)
<LI>

Behavior of <code>ALTER TABLE</code> converting column containing <code>NULL</code>
values to <code>AUTO_INCREMENT</code> column is no longer affected by
<code>NO_AUTO_VALUE_ON_ZERO</code> mode. (Bug #5915).
</UL>



<H3><A NAME="News-4.1.5" HREF="manual_toc.html#News-4.1.5">D.2.6  Changes in release 4.1.5 (16 Sep 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<code>InnoDB</code>: Added configuration option <code>innodb_autoextend_increment</code>
for setting the size in megabytes by which <code>InnoDB</code> tablespaces are
extended when they become full.  The default value is 8, corresponding to
the fixed increment of 8MB in previous versions of MySQL.
<LI>

<code>InnoDB</code>: The new Windows installation wizard of MySQL makes InnoDB as
the MySQL default table type on Windows, unless explicitly specified
otherwise. Note that it places the <tt>`my.ini'</tt> file in the
installation directory of the MySQL server.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed a bug which caused the server to crash on attempt to execute 
a prepared statement with <code>BETWEEN ? AND ?</code> and a datetime column.
(Bug #5748)
<LI>

Fixed name resolving of external fields of subqueries if subquery placed in
select list of query with grouping. (Bug #5326)
<LI>

Fixed detection of using same table for updating and selecting in
multi-update queries. (Bug #5455)
<LI>

The values of the <code>max_sort_length</code>, <code>sql_mode</code>, and
<code>group_concat_max_len</code> system variables now are stored in the query cache
with other query information to avoid returning an incorrect result from the
query cache. (Bug #5394)
(Bug #5515)
<LI>

Fixed syntax analyzer with <code>sql_mode=IGNORE_SPACE</code>. It happened
to take phrases like <code>default .07</code> as
<code>identifier.identifier</code>. (Bug #5318)
<LI>

Fixed illegal internal field length of user variables of integer type. 
This showed up when creating a table as <code>SELECT @<var>var_name</var></code>.
(Bug #4788)
<LI>

Fixed a buffer overflow in prepared statements API (libmysqlclient) when
a statement containing thousands of placeholders was executed. (Bug #5194)
<LI>

Fixed a bug in the server when after reaching a certain limit of
prepared statements per connection (97), statement ids began to overlap, 
so occasionally wrong statements were chosen for execution. (Bug #5399)
<LI>

Fixed a bug in prepared statements when <code>LIKE</code> used with arguments
in different character sets crashed server on first execute. (Bug #4368)
<LI>

Fixed a bug in prepared statements when providing '0000-00-00' date to
a parameter lead to server crash. (Bug #4231, Bug #4562)
<LI>

Fixed a bug in <code>OPTIMIZE TABLE</code> that could cause table corruption
on <code>FULLTEXT</code> indexes. (Bug #5327)
<LI>

InnoDB: Fixed a bug that InnoDB only allowed a maximum of 1000 connections
inside InnoDB at the same time. A higher number could cause an assertion
failure in sync0arr.c, line 384. Now we allow 1000, 10000, or 50000,
depending on the buffer pool size. (Bug #5414)
</UL>



<H3><A NAME="News-4.1.4" HREF="manual_toc.html#News-4.1.4">D.2.7  Changes in release 4.1.4 (26 Aug 2004: Gamma)</A></H3>

<P>
<strong>Note</strong>: To fix a compile problem on systems that do not have
<code>automake</code> 1.7 installed, an updated 4.1.4a source tarball has been
published.  In addition to resolving this <code>automake</code> dependency (Bug
#5319), it also fixes some reported <code>libedit</code> compile errors when using
a non-<code>gcc</code> compiler (Bug #5353).

</P>
<P>
Functionality added or changed:

<UL>
<LI>

Added the <code>CSV</code> storage engine.
<LI>

Made internal representation of <code>TIMESTAMP</code> values in <code>InnoDB</code> in
4.1 to be the same as in 4.0. This difference resulted in incorrect datetime
values in <code>TIMESTAMP</code> columns in <code>InnoDB</code> tables after an upgrade
from 4.0 to 4.1. (Bug #4492)
<strong>Warning: extra steps during upgrade required!</strong>
Unfortunately this means that if you are upgrading from 4.1.x,
where x &#60;= 3, to 4.1.4
you should use <code>mysqldump</code> for saving and then restoring your
<code>InnoDB</code> tables with <code>TIMESTAMP</code> columns.
<LI>

The <code>mysqld-opt</code> Windows server was renamed to <code>mysqld</code>.
This completes the Windows server renaming begun in MySQL 4.1.2.
See section <A HREF="manual_Installing.html#Windows_select_server">2.3.9  Selecting a MySQL Server type</A>.
<LI>

Added Latin language collations for the <code>ucs2</code> and <code>utf8</code> Unicode
character sets.  These are called <code>ucs2_roman_ci</code> and
<code>utf8_roman_ci</code>.
<LI>

Corrected the name of the Mac OS X StartupItem script (it must match the name
of the subdirectory, which was renamed to <code>MySQLCOM</code> in MySQL 4.1.2).
Thanks to Bryan McCormack for reporting this.
<LI>

Added <code>--start-datetime</code>, <code>--stop-datetime</code>, <code>--start-position</code>,
and <code>--stop-position</code> options to <code>mysqlbinlog</code>. These make
point-in-time recovery easier.
<LI>

Killing a <code>CHECK TABLE</code> statement does not result in the table being
marked as ``corrupted'' any more; the table remains as if <code>CHECK TABLE</code>
had not even started.
See section <A HREF="manual_SQL_Syntax.html#KILL">13.5.5.3  <code>KILL</code> Syntax</A>.
<LI>

Made the MySQL server ignore <code>SIGHUP</code> and <code>SIGQUIT</code> on Mac OS X 10.3.
This is needed because under this OS, the MySQL server receives lots of these
signals (reported as Bug #2030).
<LI>

Support of usage of column aliases qualified by table name or alias in 
<code>ORDER BY</code> and <code>GROUP BY</code> was dropped. For example the following
query <code>SELECT a AS b FROM t1 ORDER BY t1.b</code> is not allowed. One should
use <code>SELECT a AS b FROM t1 ORDER BY t1.a</code> or <code>SELECT a AS b FROM
t1 ORDER BY b</code> instead. This was non-standard (since aliases are defined on
query level not on table level) and caused problems with some queries.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed a bug that caused libmysql to crash when attempting to fetch a value of
<code>MEDIUMINT</code> column. (Bug #5126)
<LI>

Fixed a bug that caused the MySQL server to crash when attempting to execute
a prepared statement with <code>SELECT ... INTO @var</code> for a second time.
(Bug #5034)
<LI>

Fixed execution of optimized <code>IN</code> subqueries that use compound
indexes. (Bug #4435)
<LI>

Prohibited resolving of table fields in inner queries if fields do not take
part in grouping for queries with grouping (inside aggregate function
arguments, all table fields are still allowed). (Bug #4814)
<LI>

Fixed a crash after <code>SLAVE STOP</code> if the IO thread was in a special
state. (Bug #4629)
<LI>

Fixed an old bug in concurrent accesses to <code>MERGE</code> tables
(even one <code>MERGE</code> table and <code>MyISAM</code> tables), that could have
resulted in a crash or hang of the server. (Bug #2408)
<LI>

Fixed a bug that caused server crash on attempt to execute for a second
time a prepared statement with <code>NOT</code> in <code>WHERE</code> or <code>ON</code>
clauses. (Bug #4912)
<LI>

<code>MATCH ... AGAINST</code> now works in a subquery. (Bug #4769)
<LI>

Fixed a bug that omitted the <tt>`.err'</tt> extension of the error log
file (<code>--log-error</code>) when the hostname contained a domain name.
The domain name is now replaced by the extension. (Bug #4997)
<LI>

Fixed a crash in <code>myisamchk</code>. (Bug #4901)
<LI>

Fixed a bug which caused server crash if one used the <code>CONVERT_TZ()</code>
function with time zone described in database as parameter and this time
zone was not used before. (Bug #4508)
<LI>

Support for <code>%T, %r, %V, %v</code> and <code>%X, %x</code> format specifiers was
added to <code>STR_TO_DATE()</code> function. (Bug #4756)
<LI>

Fixed a bug (hang) in <code>NATURAL JOIN</code> where joined table had
no common column. (Bug #4807)
<LI>

Fixed a crash caused by <code>UNHEX(NULL)</code>. (Bug #4441)
<LI>

<code>mysql_fix_privilege_tables</code> didn't correctly handle the argument of its
<code>--password=#</code> option. (Bug #4240, Bug #4543)
<LI>

Fixed that <code>mysqlbinlog --read-from-remote-server</code> sometimes
couldn't accept 2 binary logs on command line. (Bug #4507)
<LI>

Fixed that <code>mysqlbinlog --position --read-from-remote-server</code>
had wrong <code># at</code> lines. (Bug #4506)
<LI>

If <code>CREATE TEMPORARY TABLE t SELECT</code> failed while loading the data, the
temporary table was not dropped. (Bug #4551)
<LI>

Fixed that when a multiple-table <code>DROP TABLE</code> failed to drop a table on
the master server, the error code was not written to the binary log.
(Bug #4553)
<LI>

When the slave SQL thread was replicating a <code>LOAD DATA INFILE</code>
statement, it didn't show the statement in the output of <code>SHOW
PROCESSLIST</code>. (Bug #4326)
<LI>

Fixed an assertion failure when reading the grant tables (Bug #4407)
<LI>

Fixed that <code>CREATE TABLE ... TYPE=HEAP ... AS SELECT...</code> caused
replication slave to stop. (Bug #4971)
<LI>

Fixed that <code>mysql_options(...,MYSQL_OPT_LOCAL_INFILE,...)</code> failed to
disable <code>LOAD DATA LOCAL INFILE</code>. (Bug #5038)
<LI>

Fixed that <code>disable-local-infile</code> option had no effect if client read it
from a configuration file using
<code>mysql_options(...,MYSQL_READ_DEFAULT,...)</code>. (Bug #5073)
<LI>

Fixed that <code>SET GLOBAL SYNC_BINLOG</code> did not work on some platforms (Mac OS
X). (Bug #5064)
<LI>

Fixed that <code>mysql-test-run</code> failed on the <code>rpl_trunc_binlog</code> test
if running test from the installed (the target of 'make install') directory.
(Bug #5050)
<LI>

Fixed that <code>mysql-test-run</code> failed on the <code>grant_cache</code> test when
run as Unix user 'root'. (Bug #4678)
<LI>

Fixed an unlikely deadlock which could happen when using <code>KILL</code>.
(Bug #4810)
<LI>

Fixed a crash when one connection got <code>KILL</code>ed while it was doing
<code>START SLAVE</code>. (Bug #4827)
<LI>

Made <code>FLUSH TABLES WITH READ LOCK</code> block <code>COMMIT</code> if server is
running with binary logging; this ensures that the binary log position is
trustable when doing a full backup of tables and the binary log. (Bug #4953)
<LI>

Fixed that the counter of an <code>auto_increment</code> column was not reset by
<code>TRUNCATE TABLE</code> if the table was a temporary table. (Bug #5033)
<LI>

Fixed bug which caused error to be reported when column from <code>ORDER BY</code>
clause was present in two tables participating in <code>SELECT</code> even if the
second instance of column in select list was renamed. (Bug #4302)
</UL>



<H3><A NAME="News-4.1.3" HREF="manual_toc.html#News-4.1.3">D.2.8  Changes in release 4.1.3 (28 Jun 2004: Beta)</A></H3>

<P>
<strong>Note</strong>: The initial release of MySQL 4.1.3 for Windows accidentally was
not compiled with support for the Spatial Extensions (OpenGIS). This was fixed
by rebuilding from the same 4.1 code snapshot with the missing option and
releasing those packages as version 4.1.3a.

</P>
<P>
To enable compiling the newly released PHP 5 against MySQL 4.1.3 on Windows, the
Windows packages had to be rebuilt once more to add a few missing symbols to
the MySQL client library. These packages were released as MySQL 4.1.3b.

</P>
<P>
Functionality added or changed:

<UL>
<LI>

Added the <code>ARCHIVE</code> storage engine.
<LI>

Added SQL syntax for prepared statements.
See section <A HREF="manual_SQL_Syntax.html#SQLPS">13.7  SQL Syntax for Prepared Statements</A>.
<LI>

Language-specific collations were added for the <code>ucs2</code> and <code>utf8</code>
Unicode character sets: Icelandic, Latvian, Romanian, Slovenian, Polish,
Estonian, Swedish, Turkish, Czech, Danish, Lithuanian, Slovak, Spanish,
Traditional Spanish.
<LI>

Support for per-connection time zones was added. Now you can set the current
time zone for a connection by setting the <code>@@time_zone</code> system
variable to a value such as <code>'+10:00'</code> or <code>'Europe/Moscow'</code> (where
<code>'Europe/Moscow'</code> is the name of one of the time zones described in the
system tables). Functions like <code>CURRENT_TIMESTAMP</code>,
<code>UNIX_TIMESTAMP</code>, and so forth honor this time zone. Values of
<code>TIMESTAMP</code> type are also interpreted as values in this time zone. So
now our <code>TIMESTAMP</code> type behaves similar to Oracle's <code>TIMESTAMP
WITH LOCAL TIME ZONE</code>. That is, values stored in such a column are
normalized towards UTC and converted back to the current connection time
zone when they are retrieved from such a column.
To set up the tables that store time zone information, see
section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.
<LI>

<strong>Warning: Incompatible change!</strong>
The <code>timezone</code> system variable has been removed and replaced by
<code>system_time_zone</code>.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_system_variables">5.2.3  Server System Variables</A>.
<LI>

Basic time zone conversion function <code>CONVERT_TZ()</code> was
added. It assumes that its first argument is a datetime value in the time zone
specified by its second argument and returns the equivalent datetime value in
the time zone specified by its third argument.
<LI>

<code>CHECK TABLE</code> now can be killed. It will then mark the table as corrupted.
See section <A HREF="manual_SQL_Syntax.html#KILL">13.5.5.3  <code>KILL</code> Syntax</A>.
<LI>

<strong>Warning: Incompatible change!</strong>
C API change: <code>mysql_shutdown()</code> now requires a second argument.
This is a source-level incompatibility that affects how you compile client
programs; it does not affect the ability of compiled clients to communicate
with older servers.
See section <A HREF="manual_MySQL_APIs.html#mysql_shutdown">21.2.3.52  <code>mysql_shutdown()</code></A>.
<LI>

<code>OPTIMIZE TABLE</code> for <code>InnoDB</code> tables is now mapped to <code>ALTER
TABLE</code> instead of <code>ANALYZE TABLE</code>.
<LI>

<code>sync_frm</code> is now a settable global variable (not only a startup option).
<LI>

Added the <code>sync_binlog=N</code> global variable and startup option, which makes
the MySQL server synchronize its binary log to disk (<code>fdatasync()</code>) after
every <var>N</var>th write to the binary log.
<LI>

Changed the slave SQL thread to print fewer useless error messages (no more
message duplication; no more messages when an error is skipped (because of
<code>slave-skip-errors</code>).
<LI>

<code>DROP DATABASE IF EXISTS</code>, <code>DROP TABLE IF EXISTS</code>, single-table
<code>DELETE</code> and single-table <code>UPDATE</code> are now written to the binary log
even if they changed nothing on the master (for example, even if the
<code>DELETE</code> matched no row). The old behavior sometimes caused bad surprises
in replication setups.
<LI>

Replication and <code>mysqlbinlog</code> now have better support for the case that
the session character set and collation variables are changed within a given
session.
See section <A HREF="manual_Replication.html#Replication_Features">6.7  Replication Features and Known Problems</A>.
<LI>

Added <code>--innodb-safe-binlog</code> server option, which adds consistency
guarantees between the content of <code>InnoDB</code> tables and the binary log.
See section <A HREF="manual_MySQL_Database_Administration.html#Binary_log">5.9.4  The Binary Log</A>.
<LI>

<code>LIKE</code> now supports the use of a prepared statement parameter or
delimited constant expression as the argument to <code>ESCAPE</code> (Bug #4200).
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed <code>CREATE DATABASE IF NOT EXISTS</code> for Win32 which caused an 
error if database existed. (Bug #4378)
<LI>

Added missing <code>root</code> account to Windows version of <code>mysqld</code>.
(Bug #4242)
<LI>

Fixed bug in prepared <code>EXPLAIN</code> statement which led to server crash.
(Bug #4271)
<LI>

Fixed a bug of using parameters in some prepared statements via SQL syntax.
(Bug #4280)
<LI>

Fixed a bug in <code>MERGE</code> tables created with <code>INSERT_METHOD=LAST</code>, that
were not able to report a key number that caused ``Duplicate entry''
error for <code>UNIQUE</code> key in <code>INSERT</code>. As a result, error message was
not precise enough (error 1022 instead of error 1062) and
<code>INSERT ... ON DUPLICATE KEY UPDATE</code> did not work.
(Bug #4008)
<LI>

Fixed a bug in <code>DELETE</code> from a table with <code>FULLTEXT</code> indexes
which under rare circumstances could result in a corrupted table, if words of
different lengths may be considered equal (which is possible in some
collations, for example, in <code>utf8_general_ci</code> or <code>latin1_german2_ci</code>.)
(Bug #3808)
<LI>

Fixed too-early unlocking of tables if we have subquery in <code>HAVING</code>
clause. (Bug #3984)
<LI>

Fixed a bug in <code>mysqldump</code> when it didn't return an error if 
the output device was filled (Bug #1851)
<LI>

Fixed a bug in client-side conversion of string column to <code>MYSQL_TIME</code>
application buffer (prepared statements API). (Bug #4030)
<LI>

Fixed a bug with server crash on attempt to execute a non-prepared 
statement. (Bug #4236)
<LI>

Fixed a bug with server crash on attempt to prepare a statement with 
character set introducer. (Bug #4105)
<LI>

Fixed bug which caused different number of warnings to be generated
when bad datetime as string or as number was inserted into <code>DATETIME</code>
or <code>TIMESTAMP</code> column. (Bug #2336)
<LI>

Fixed some byte order bugs with prepared statements on machines with
high-byte-first. (Bug #4173)
<LI>

Fixed unlikely bug in the range optimizer when using many <code>IN()</code> queries on
different key parts. (Bug #4157)
<LI>

Fixed problem with <code>NULL</code> and derived tables. (Bug #4097)
<LI>

Fixed wrong <code>UNION</code> results if display length of fields for numeric
types was set less then real length of values in them. (Bug #4067)
<LI>

Fixed a bug in <code>mysql_stmt_close()</code>, which hung up when attempting
to close statement after failed <code>mysql_stmt_fetch()</code>. (Bug #4079)
<LI>

Fixed bug of re-execution optimized <code>COUNT(*)</code>, <code>MAX()</code> and 
<code>MIN()</code> functions in prepared statements. (Bug #2687)
<LI>

Fixed a bug with <code>COUNT(DISTINCT)</code> performance degradation in cases
like <code>COUNT(DISTINCT a TEXT, b CHAR(1))</code> (no index used). (Bug #3904) 
<LI>

Fixed a bug in <code>MATCH ... AGAINST(... IN BOOLEAN MODE)</code> that
under rare circumstances could cause wrong results
if in the data's collation one byte could match many
(like in <code>utf8_general_ci</code> or <code>latin1_german2_ci</code>.)
(Bug #3964)
<LI>

Fixed a bug in prepared statements protocol, when microseconds part of
<code>MYSQL_TYPE_TIME</code>/<code>MYSQL_TYPE_DATETIME</code> columns was not sent to
the client. (Bug #4026) 
<LI>

Fixed a bug that using <code>--with-charset</code> with <code>configure</code> didn't
affect the MySQL client library. (Bug #3990)
<LI>

Fixed a bug in authentication code that allowed a malicious user
to bypass password verification with specially crafted packets
(using a modified client library).
<LI>

Fixed bug with wrong result of <code>CONCAT(?, <var>col_name</var>)</code> in prepared
statements. (Bug #3796)
<LI>

Fixed potential memory overrun in <code>mysql_real_connect()</code> (which
required a compromised DNS server and certain operating systems). (Bug #4017)
<LI>

During the installation process of the server RPM on Linux, <code>mysqld</code>
was run as the <code>root</code> system user, and if you had
<code>--log-bin=<var>file_name</var></code>, where the file was located somewhere
outside of the data directory, it created binary log files owned by
<code>root</code> in this directory that remained owned by <code>root</code> after the
installation. This is now fixed by starting <code>mysqld</code> as the
<code>mysql</code> system user instead. (Bug #4038)
<LI>

Made <code>DROP DATABASE</code> honor the value of
<code>lower_case_table_names</code>. (Bug #4066)
<LI>

The slave SQL thread refused to replicate <code>INSERT ... SELECT</code> if it
examined more than 4 billion rows. (Bug #3871)
<LI>

<code>mysqlbinlog</code> didn't escape the string content of user variables, and did
not deal well when these variables were in non-ASCII character sets; this is
now fixed by always printing the string content of user variables in
hexadecimal. The character set and collation of the string is now also
printed. (Bug #3875)
<LI>

Fixed incorrect destruction of expression which led to crash of server on
complex <code>AND</code>/<code>OR</code> expressions if query was ignored (either by a
replication server because of <code>--replicate-*-table</code> rules, or by any MySQL
server because of a syntax error). (Bug #3969, Bug #4494)
</UL>



<H3><A NAME="News-4.1.2" HREF="manual_toc.html#News-4.1.2">D.2.9  Changes in release 4.1.2 (28 May 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Added the <code>EXAMPLE</code> storage engine.
<LI>

The <code>mysqld</code> Windows server was renamed to <code>mysqld-debug</code>.
See section <A HREF="manual_Installing.html#Windows_select_server">2.3.9  Selecting a MySQL Server type</A>.
<LI>

Added <code>Handler_discover</code> status variable.
<LI>

Added support for character set conversion and <code>MYSQL_TYPE_BLOB</code> type
code in prepared statement protocol.
<LI>

Added explanation of hidden <code>SELECT</code> of <code>UNION</code> in output of
<code>EXPLAIN SELECT</code> statement.
<LI>

<code>mysql</code> command-line client now supports multiple <code>-e</code> options.
(Bug #591)
<LI>

New <code>myisam_data_pointer_size</code> system variable.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_system_variables">5.2.3  Server System Variables</A>.
<LI>

The <code>--log-warnings</code> server option now is enabled by default.
Disable with <code>--skip-log-warnings</code>.
<LI>

The <code>--defaults-file=<var>file_name</var></code> option now requires that the filename
must exist (safety fix). (Bug #3413)
<LI>

<code>mysqld_multi</code> now creates the log in the directory named by
<code>datadir</code> (from the <code>[mysqld]</code> section in <tt>`my.cnf'</tt> or
compiled in), not in <tt>`/tmp'</tt> (vulnerability ID CAN-2004-0388). Thanks to
Christian Hammers from Debian Security Team for reporting this.
<LI>

<strong>Warning: Incompatible change!</strong>
String comparison now works according to the SQL standard.  Because we have
that <code>'a' = 'a '</code> then from it must follow that <code>'a' &#62; 'a\t'</code>.
(The latter was not the case before MySQL 4.1.2.) To implement it, we had to
change how storage engines compare strings internally.  As a side effect, if
you have a table where a <code>CHAR</code> or <code>VARCHAR</code> column in some row
has a value with the last character less than <code>ASCII(32)</code>, you will have
to repair this table. <code>CHECK TABLES</code> will tell you if this problem
exists. (Bug #3152)
<LI>

Added support for <code>DEFAULT CURRENT_TIMESTAMP</code> and for <code>ON UPDATE
CURRENT_TIMESTAMP</code> specifications for <code>TIMESTAMP</code> columns. Now you can
explicitly say that a <code>TIMESTAMP</code> column should be set automatically
to the current timestamp for <code>INSERT</code> and/or <code>UPDATE</code> statements, or
even prevent the column from updating automatically. Only one column with such
an auto-set 
feature per table is supported. <code>TIMESTAMP</code> columns created with earlier 
versions of MySQL behave as before. Behavior of <code>TIMESTAMP</code> columns that 
were created without explicit specification of default/on as earlier
depends on its position in table: If it is the first <code>TIMESTAMP</code> column, it will
be treated as having been specified as <code>TIMESTAMP DEFAULT
CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP</code>.
In other cases, it would be treated as a <code>TIMESTAMP DEFAULT 0</code> column.
<code>NOW</code> is supported as an alias for <code>CURRENT_TIMESTAMP</code>.
<strong>Warning: Incompatible change!</strong> Unlike in previous versions, explicit
specification of default values for <code>TIMESTAMP</code> column is never ignored
and turns off the auto-set feature (unless you have <code>CURRENT_TIMESTAMP</code> as
the default).
<LI>

<strong>Warning: Incompatible change!</strong>
Renamed prepared statements C API functions:
<TABLE BORDER>
<TR><TD><strong>Old Name</strong> </TD><TD> <strong>New Name</strong>
</TD></TR>
<TR><TD><code>mysql_bind_param()</code> </TD><TD> <code>mysql_stmt_bind_param()</code>
</TD></TR>
<TR><TD><code>mysql_bind_result()</code> </TD><TD> <code>mysql_stmt_bind_result()</code>
</TD></TR>
<TR><TD><code>mysql_prepare()</code> </TD><TD> <code>mysql_stmt_prepare()</code>
</TD></TR>
<TR><TD><code>mysql_execute()</code> </TD><TD> <code>mysql_stmt_execute()</code>
</TD></TR>
<TR><TD><code>mysql_fetch()</code> </TD><TD> <code>mysql_stmt_fetch()</code>
</TD></TR>
<TR><TD><code>mysql_fetch_column()</code> </TD><TD> <code>mysql_stmt_fetch_column()</code>
</TD></TR>
<TR><TD><code>mysql_param_count()</code> </TD><TD> <code>mysql_stmt_param_count()</code>
</TD></TR>
<TR><TD><code>mysql_param_result()</code> </TD><TD> <code>mysql_stmt_param_metadata()</code>
</TD></TR>
<TR><TD><code>mysql_get_metadata()</code> </TD><TD> <code>mysql_stmt_result_metadata()</code>
</TD></TR>
<TR><TD><code>mysql_send_long_data()</code> </TD><TD> <code>mysql_stmt_send_long_data()</code>
</TD></TR>
</TABLE>

Now all functions that operate with a <code>MYSQL_STMT</code> structure begin with
the prefix <code>mysql_stmt_</code>.
<LI>

<strong>Warning: Incompatible change!</strong>
The signature of the <code>mysql_stmt_prepare()</code> function was changed to
<code>int mysql_stmt_prepare(MYSQL_STMT *stmt, const char *query,
unsigned long length)</code>.
To create a <code>MYSQL_STMT</code> handle, you 
should use the <code>mysql_stmt_init()</code> function, not
<code>mysql_stmt_prepare()</code>.
<LI>

<code>SHOW GRANTS</code> with no <code>FOR</code> clause or with <code>FOR
CURRENT_USER()</code> shows the privileges for the current session.
<LI>

The improved character set support introduced in MySQL 4.1.0 for the
<code>MyISAM</code> and <code>HEAP</code> storage engines is now available for
<code>InnoDB</code> as well.
<LI>

A name of ``Primary'' no longer can be specified as an index name.
(That name is reserved for the <code>PRIMARY KEY</code> if the table has one.)
(Bug #856)
<LI>

MySQL now issues a warning when a <code>SET</code> or <code>ENUM</code> column with
duplicate values in the list is created. (Bug #1427)
<LI>

Now <code>SQL_SELECT_LIMIT</code> variable has no influence on subqueries.
(Bug #2600)
<LI>

<code>UNHEX()</code> function implemented.
See section <A HREF="manual_Functions.html#String_functions">12.3  String Functions</A>.
<LI>

The <code>mysql</code> command-line client no longer stores in the history file
multiple copies of identical queries that are run consecutively.
<LI>

Multi-line statements in the <code>mysql</code> command-line client now are stored
in the history file as a single line. 
<LI>

<code>UUID()</code> function implemented. Note that it does not work with replication
yet.
See section <A HREF="manual_Functions.html#Miscellaneous_functions">12.8.4  Miscellaneous Functions</A>.
<LI>

Prepared statements with all types of subqueries fixed.
<LI>

MySQL now supports up to 64 indexes per table.
<LI>

<code>MyISAM</code> tables now support keys up to 1000 bytes long.
<LI>

<code>MyISAM</code> and <code>InnoDB</code> tables now support index prefix lengths up
to 1000 bytes long.
<LI>

If you try to create a key with a key part that is too long, and it is safe
to auto-truncate it to a smaller length, MySQL now does so.  A warning is
generated, rather than an error.
<LI>

The <code>ft_boolean_syntax</code> variable now can be changed while the server is
running.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_system_variables">5.2.3  Server System Variables</A>.
<LI>

<code>REVOKE ALL PRIVILEGES, GRANT FROM user_list</code>
is changed to a more consistent
<code>REVOKE ALL PRIVILEGES, GRANT OPTION FROM user_list</code>. (Bug #2642)
<LI>

Internal string-to-number conversion now supports only SQL:2003 compatible
syntax for numbers. In particular, <code>'0x10'+0</code> will not work anymore.
(Actually, it worked only on some systems before, such as Linux. It
did not work on others, such as FreeBSD or Solaris. Making these queries
OS-independent was the goal of this change.) Use <code>CONV()</code> to convert
hexadecimal numbers to decimal. E.g. <code>CONV(MID('0x10',3),16,10)+0</code>.
<LI>

<code>mysqlhotcopy</code> now works on NetWare.
<LI>

<code>ALTER TABLE DROP PRIMARY KEY</code> no longer drops the first <code>UNIQUE</code>
index if there is no primary index. (Bug #2361)
<LI>

Added <code>latin1_spanish_ci</code> (Modern Spanish) collation for the <code>latin1</code>
character set.
<LI>

Added the <code>ENGINE</code> table option as a synonym for the <code>TYPE</code> option
for <code>CREATE TABLE</code> and <code>ALTER TABLE</code>.
<LI>

Added the <code>--default-storage-engine</code> server option as a synonym for
<code>--default-table-type</code>.
<LI>

Added the <code>storage_engine</code> system variable as a synonym for
<code>table_type</code>.
<LI>

<strong>Warning: Incompatible change!</strong>
The <code>Type</code> output column for <code>SHOW TABLE STATUS</code> now is labeled
<code>Engine</code>.
<LI>

Added <code>init_connect</code> and <code>init_slave</code> system variables.
The values should be SQL statements to be executed when each client
connects or each time a slave's SQL thread starts, respectively.
<LI>

C API enhancement:
<code>SERVER_QUERY_NO_INDEX_USED</code> and
<code>SERVER_QUERY_NO_GOOD_INDEX_USED</code> flags are now set
in the <code>server_status</code> field of the <code>MYSQL</code> structure.
It is these flags that make the query to be logged as slow 
if <code>mysqld</code> was started with <code>--log-slow-queries
--log-queries-not-using-indexes</code>.
<LI>

For replication of <code>MEMORY</code> (<code>HEAP</code>) tables: Made the master
automatically write a <code>DELETE FROM</code> statement to its binary log when a
<code>MEMORY</code> table is opened for the first time since master's startup.
This is for the case where the slave has replicated a non-empty
<code>MEMORY</code> table, then the master is shut down and restarted: the table
is now empty on master; the <code>DELETE FROM</code> empties it on slave too. Note
that even with this fix, between the master's restart and the first use of
the table on master, the slave still has out-of-date data in the table. But
if you use the <code>init-file</code> option to populate the <code>MEMORY</code> table
on the master at startup, it ensures that the failing time interval is zero.
(Bug #2477)
<LI>

When a session having open temporary tables terminates, the statement
automatically written to the binary log is now <code>DROP TEMPORARY TABLE IF
EXISTS</code> instead of <code>DROP TEMPORARY TABLE</code>, for more robustness.
<LI>

The MySQL server now returns an error if <code>SET SQL_LOG_BIN</code> or <code>SET
SQL_LOG_UPDATE</code> is issued by a user without the <code>SUPER</code> privilege (in
previous versions it just silently ignored the statement in this case).
<LI>

Changed that when the MySQL server has binary logging disabled (that is,
no <code>--log-bin</code> option was used), then no transaction binary log cache
is allocated for connections. This should save <code>binlog_cache_size</code>
bytes of memory (32KB by default) for every connection.
<LI>

Added <code>Binlog_cache_use</code> and <code>Binlog_cache_disk_use</code> status
variables that count the number of transactions that used transaction binary
log and that had to flush this temporary binary log to disk instead of using
only the in-memory buffer. They can be used for tuning the
<code>binlog_cache_size</code> system variable.
<LI>

Added option <code>--replicate-same-server-id</code>.
<LI>

The Mac OS X Startup Item has been moved from the directory
<tt>`/Library/StartupItems/MySQL'</tt> to <tt>`/Library/StartupItems/MySQLCOM'</tt>
to avoid a file name collision with the MySQL Startup Item installed with
Mac OS X Server. See section <A HREF="manual_Installing.html#Mac_OS_X">2.12.2  Mac OS X Notes</A>.
<LI>

Added option <code>--to-last-log</code> to <code>mysqlbinlog</code>, for use in conjunction
with <code>--read-from-remote-server</code>.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed check of <code>EXPLAIN</code> of <code>UNION</code>. (Bug #3639)
<LI>

Fixed a bug in a query that used <code>DISTINCT</code> and <code>ORDER BY</code>
by column's real name, while the column had an alias, specified in
<code>SELECT</code> clause. (Bug #3681)
<LI>

<code>mysqld</code> could crash when a table was altered and used at the same time.
This was a 4.1.2-specific bug. (Bug #3643).
<LI>

Fixed bug when using impossible <code>WHERE</code> with <code>PROCEDURE ANALYSE()</code>.
(Bug #2238).
<LI>

Fixed security problem in new authentication where password was not checked
for changed <code>GRANT</code> accounts until <code>FLUSH PRIVILEGES</code> was executed.
(Bug #3404)
<LI>

Fixed crash of <code>GROUP_CONCAT()</code> on expression with <code>ORDER BY</code>
and external <code>ORDER BY</code> in a query. (Bug #3752)
<LI>

Fixed a bug in <code>ALL</code>/<code>SOME</code> subqueries in case of optimization (key
field present in subquery). (Bug #3646)
<LI>

Fixed a bug in <code>SHOW GRANTS</code> and <code>EXPLAIN SELECT</code> character
set conversion.  (Bug #3403)
<LI>

Prepare statements parameter do not cause error message as fields used in
select list but not included in <code>ORDER BY</code> list.
<LI>

<code>UNION</code> statements did not consult <code>SQL_SELECT_LIMIT</code> value when
set. This is now fixed properly, which means that this limit is applied
to the top level query, unless <code>LIMIT</code> for entire <code>UNION</code> is
used. 
<LI>

Fixed a bug in multiple-table <code>UPDATE</code> statements that resulted in an
error when one of the tables was not updated but was used in the nested query,
contained therein.
<LI>

Fixed <code>mysql_stmt_send_long_data()</code> behavior on second execution of 
prepared statement and in case when long data had zero length. (Bug #1664)
<LI>

Fixed crash on second execution of prepared statement with <code>UNION</code>.
(Bug #3577)
<LI>

Fixed incorrect results of aggregate functions in subquery with empty result
set. (Bug #3505)
<LI>

You can now call <code>mysql_stmt_attr_set(..., STMT_ATTR_UPDATE_MAX_LENGTH)</code>
to tell the client library to update <code>MYSQL_FIELD-&#62;max_length</code> when
doing <code>mysql_stmt_store_result()</code>. (Bug #1647).
<LI>

Added support for unsigned integer types to prepared statement API
(Bug #3035).
<LI>

Fixed crash in prepared statements when subquery in the <code>FROM</code>
clause with parameter used. (Bug #3020)
<LI>

Fixed unknown error when negative value bind to unsigned. (Bug #3223)
<LI>

Fixed aggregate function in prepared statements. (Bug #3360)
<LI>

Incorrect error message when wrong table used in multiple-table <code>DELETE</code>
statement in prepared statements. (Bug #3411)
<LI>

Requiring <code>UPDATE</code> privilege for tables which will not be updated in
multiple-table <code>UPDATE</code> statement in prepared statements.
<LI>

Fixed prepared statement support for <code>INSERT</code>, <code>REPLACE</code>,
<code>CREATE</code>, <code>DELETE</code>, <code>SELECT</code>, <code>DO</code>, <code>SET</code> and
<code>SHOW</code>. All other commands are prohibited via prepared statement
interface. (Bug #3398, Bug #3406, Bug #2811)
<LI>

Fixed a lot of bugs in <code>GROUP_CONCAT()</code>. (Bug #2695, Bug #3381, Bug #3319)
<LI>

Added optimization that allows for prepared statements using a large number of 
tables or tables with a large number of columns to be re-executed significantly 
faster. (Bug #2050)
<LI>

Fixed bug that caused execution of prepared statements to fail then table
that this statement were using left table cache. This bug showed up as if
this prepared statement used random garbage as column names or as server
crashes. (Bug #3307)
<LI>

Fixed a problem resulting from setting the <code>character_set_results</code>
variable to <code>NULL</code>.
(Bug #3296)
<LI>

Fixed query cache statistics.
<LI>

Fixed bug in <code>ANALYZE TABLE</code> on a <code>BDB</code> table inside a transaction
that hangs server thread. (Bug #2342)
<LI>

Fixed a symlink vulnerability in the <tt>`mysqlbug'</tt> script. (Bug #3284)
<LI>

Fixed a bug in parallel repair
(<code>myisamchk -p</code>, <code>myisam_repair_threads</code>);
sometimes the repair process failed to repair a table. (Bug #1334)
<LI>

A query that uses both <code>UNION [DISTINCT]</code> and <code>UNION ALL</code>
now works correctly. (Bug #1428)
<LI>

Table default character set affects <code>LONGBLOB</code> columns. (Bug #2821)
<LI>

<code>CONCAT_WS()</code> makes the server die in case of illegal mix of collations. (Bug #3087)
<LI>

UTF8 charset breaks joins with mixed column/string constant. (Bug #2959)
<LI>

Fixed <code>DROP DATABASE</code> to report number of tables deleted.
<LI>

Fixed memory leak in the client library when statement handle was freed 
on closed connection (call to <code>mysql_stmt_close</code> after
<code>mysql_close</code>). (Bug #3073)
<LI>

Fixed server segfaults when processing malformed prepared statements
commands. (Bug #2795, Bug #2274)
<LI>

Fixed using subqueries with <code>OR</code> and <code>AND</code> functions. (Bug #2838)
<LI>

Fixed comparison of tables/database names with 
<code>--lower_case_table_names</code> option. (Bug #2880)
<LI>

Removed try to check <code>NULL</code> if index built on column where <code>NULL</code>
is impossible in <code>IN</code> subquery optimization. (Bug #2393)
<LI>

Fixed incorrect parsing of subqueries in the <code>FROM</code> clause. (Bug #2421)
<LI>

Fixed processing of <code>RAND()</code> in subqueries with static tables. (bug #2645)
<LI>

Fixed bug with quoting of table names in <code>mysqldump</code> for 
various values of <code>sql_mode</code> of server. (Bug #2591)
<LI>

Fixed bug with storing values that are out of range for <code>DOUBLE</code> and
<code>FLOAT</code> columns.
(Bug #2082)
<LI>

Fixed bug with compiling <code>--with-pstack</code> with binutils 2.13.90. (Bug #1661)
<LI>

Fixed a bug in the <code>GRANT</code> system. When a password was assigned to an
account at the global level and then privileges were granted at the database
level (without specifying any password), the existing password was replaced
temporarily in memory until the next <code>FLUSH PRIVILEGES</code> operation or
the server was restarted. (Bug #2953)
<LI>

Fixed a bug in full-text search on multi-byte character set (such as UTF8)
that appeared when a search word was shorter than a matching word from
the index (for example, searching for ``Uppsala'' when table data contain
``Upps&aring;la''). (Bug #3011)
<LI>

Fixed a bug that made <code>Max_used_connections</code> to be less than
the actual maximum number of connections in use simultaneously.
<LI>

Fixed calculation of <code>Index_length</code> in <code>HEAP</code> table status for
<code>BTREE</code> indexes. (Bug #2719)
<LI>

Fixed <code>mysql_stmt_affected_rows()</code> call to always return number of rows 
affected by given statement. (Bug #2247)
<LI>

Fixed crash in <code>MATCH ... AGAINST()</code> on a phrase search operator with
a missing closing double quote. (Bug #2708)
<LI>

Fixed output of <code>mysqldump --tab</code>. (Bug #2705)
<LI>

Fix for a bug in <code>UNION</code> operations that prevented proper handling of
<code>NULL</code> columns. This happened only if a column in the first
<code>SELECT</code> node was <code>NOT NULL</code>. (Bug #2508)
<LI>

Fix for a bug in <code>UNION</code> operations with <code>InnoDB</code> storage engine,
when some columns from one table were used in one <code>SELECT</code> statement and
some were used in another <code>SELECT</code> statement. (Bug #2552)
<LI>

Fixed a few years old bug in the range optimizer that
caused a segmentation fault on some very rare queries. (Bug #2698)
<LI>

Fixed bug with <code>SHOW CREATE TABLE ...</code> which didn't properly double 
quotes. (Bug #2593)
<LI>

Queries with subqueries in <code>FROM</code> clause locks all tables at once for now.
This also fixed bugs in <code>EXPLAIN</code> of subqueries
in <code>FROM</code> output. (Bug #2120)
<LI>

Fixed bug with <code>mysqldump</code> not quoting ``tricky'' names correctly.
(Bug #2592)
<LI>

Fix for a bug that prevented table / column privileges from
being loaded on startup. (Bug #2546)
<LI>

Fixed bug in replication with <code>CREATE TABLE ... LIKE ...</code> that resulted
in a statement not being written to the binary log. (Bug #2557)
<LI>

Fixed memory leak in <code>INSERT ... ON DUPLICATE KEY UPDATE ...</code>. 
(Bug #2438)
<LI>

Fixed bug in the parser, making the syntax <code>CONVERT(<var>expr</var>,<var>type</var>)</code>
legal again.
<LI>

Fixed parsing of short-form IP addresses in <code>INET_ATON()</code>. (Bug #2310)
<LI>

Fixed a bug in <code>CREATE ... SELECT</code> that sometimes caused a
string column with a multi-byte character set (such as <code>utf8</code>) to have
insufficient length to hold the data.
<LI>

Fixed a rare table corruption on adding data (<code>INSERT</code>, <code>REPLACE</code>,
<code>UPDATE</code>, etc. but not <code>DELETE</code>) to a <code>FULLTEXT</code> index.
(Bug #2417)
<LI>

Compile the <code>MySQL-client</code> RPM package against <code>libreadline</code> instead
of <code>libedit</code>. (Bug #2289)
<LI>

Fix for a crashing bug that was caused by not setting
<code>vio_timeout()</code> virtual function for all protocols. This bug occurred on
Windows. (Bug #2025)
<LI>

Fix for a bug that caused <code>mysql</code> client program to erroneously
cache the value of the current database. (Bug #2025)
<LI>

Fix for a bug that caused client/server communication to be
broken when <code>mysql_set_server_option()</code> or
<code>mysql_get_server_option()</code> were invoked.
(Bug #2207)
<LI>

Fix for a bug that caused wong results when <code>CAST()</code> was
applied on <code>NULL</code> to signed or unsigned integer column.
(Bug #2219)
<LI>

Fix for a crashing bug that occurred in the <code>mysql</code> client program when
database name was longer then expected.
(Bug #2221)
<LI>

Fixed a bug in <code>CHECK TABLE</code> that sometimes
resulted in a spurious error <code>Found key at page ... that points to record
outside datafile</code> for a table with a <code>FULLTEXT</code> index. (Bug #2190)
<LI>

Fixed bug in <code>GRANT</code> with table-level privilege handling. (Bug #2178)
<LI>

Fixed bug in <code>ORDER BY</code> on a small column. (Bug #2147)
<LI>

Fixed a bug with the <code>INTERVAL()</code> function when 8 or more 
comparison arguments are provided. (Bug #1561)
<LI>

Packaging:
Fixed a bug in the Mac OS PKG <code>postinstall</code> script
(<code>mysql_install_db</code> was called with an obsolete argument).
<LI>

Packaging:
Added missing file <tt>`mysql_create_system_tables'</tt> to the server RPM
package. This bug was fixed for the 4.1.1 RPMs by updating the MySQL-server
RPM from <code>MySQL-server-4.1.1-0</code> to <code>MySQL-server-4.1.1-1</code>. The
other RPMs were not affected by this change.
<LI>

Fixed a bug in <code>myisamchk</code> and <code>CHECK TABLE</code> that sometimes
resulted in a spurious error <code>Found key at page ... that points to record
outside datafile</code> for a table with a <code>FULLTEXT</code> index. (Bug #1977)
<LI>

Fixed a hang in full-text indexing of strings in multi-byte (all besides
<code>utf8</code>) charsets. (Bug #2065)
<LI>

Fixed a crash in full-text indexing of UTF8 data. (Bug #2033)
<LI>

Replication:
a rare race condition in the slave SQL thread that could lead to an
incorrect complaint that the relay log is corrupted. (Bug #2011)
<LI>

Replication:
If a client connects to a slave server and issues an administrative
statement for a table (for example, <code>OPTIMIZE TABLE</code> or <code>REPAIR
TABLE</code>), this could sometimes stop the slave SQL thread. This does not lead
to any corruption, but you must use <code>START SLAVE</code> to get replication
going again. (Bug #1858)
<LI>

Replication:
in the slave SQL thread, a multiple-table <code>UPDATE</code> could produce an
incorrect complaint that some record was not found in one table, if the
<code>UPDATE</code> was preceded by a <code>INSERT ... SELECT</code>. (Bug #1701)
<LI>

Replication: sometimes the master gets a non-fatal error during the execution
of a statement but finally the statements succeeds (for example, a write to a
<code>MyISAM</code> table first receives "no space left on device" but is able to finally
complete, see section <A HREF="manual_Problems.html#Full_disk">A.4.3  How MySQL Handles a Full Disk</A>); the bug was that the master forgot to reset the
error code to 0 after success, so the error code got into its binary log, thus
making the slave giving false alarms like "did not get the same error as on
master". (Bug #2083)
<LI>

Removed a misleading "check permissions on master.info" from a replication
error message, because the cause of the problem could be different from
permissions. (Bug #2121)
<LI>

Fixed a crash when the replication slave was unable to create the first relay
log. (Bug #2145)
<LI>

<code>ALTER DATABASE</code> caused the client to hang if the database did not
exist. (Bug #2333)
<LI>

Multiple-table <code>DELETE</code> statements were never replicated by the slave if
there were any <code>--replicate-*-table</code> options. (Bug #2527)
<LI>

Fixed bug in <code>ALTER TABLE RENAME</code>, when rename to the table with
the same name in another database silently dropped destination table if
it existed. (Bug #2628)
<LI>

The MySQL server did not report any error if a statement (submitted through
<code>mysql_real_query()</code> or <code>mysql_stmt_prepare()</code>) was terminated
by garbage characters. This can happen if you pass a wrong <code>length</code>
parameter to these functions. The result was that the
garbage characters were written into the binary log. (Bug #2703)
<LI>

Fixed bug in client library that caused <code>mysql_stmt_fetch</code> and 
<code>mysql_stmt_store_result()</code> to hang if they were called without
prior call of <code>mysql_stmt_execute()</code>. Now they give an error instead. 
(Bug #2248)
<LI>

Made clearer the error message that one gets when an update is refused because
of the <code>--read-only</code> option. (Bug #2757)
<LI>

Fixed that <code>--replicate-wild-*-table</code> rules apply to <code>ALTER DATABASE</code>
when the table pattern is <code>%</code>, as is already the case for <code>CREATE
DATABASE</code> and <code>DROP DATABASE</code>. (Bug #3000)
<LI>

Fixed that when a <code>Rotate</code> event is found by the slave SQL thread in the
middle of a transaction, the value of <code>Relay_Log_Pos</code> in <code>SHOW SLAVE
STATUS</code> remains correct. (Bug #3017)
<LI>

Corrected the master's binary log position that <code>InnoDB</code> reports when it is doing a
crash recovery on a slave server. (Bug #3015)
<LI>

Changed the column <code>Seconds_Behind_Master</code> in <code>SHOW SLAVE STATUS</code> to
never show a value of -1. (Bug #2826)
<LI>

Changed that when a <code>DROP TEMPORARY TABLE</code> statement is automatically
written to the binary log when a session ends, the statement is recorded with an
error code of value zero (this ensures that killing a <code>SELECT</code> on the
master does not result in a superfluous error on the slave). (Bug #3063)
<LI>

Changed that when a thread handling <code>INSERT DELAYED</code> (also known as a
<code>delayed_insert</code> thread) is killed, its statements are recorded with an
error code of value zero (killing such a thread does not endanger
replication, so we thus avoid a superfluous error on the slave). (Bug #3081)
<LI>

Fixed deadlock when two <code>START SLAVE</code> commands were run at the same
time. (Bug #2921)
<LI>

Fixed that a statement never triggers a superfluous error on the slave, if it
must be excluded given the <code>--replicate-*</code> options. The bug was that if the
statement had been killed on the master, the slave would stop. (Bug #2983)
<LI>

The <code>--local-load</code> option of <code>mysqlbinlog</code> now requires an argument.
<LI>

Fixed a segmentation fault when running <code>LOAD DATA FROM MASTER</code> after
<code>RESET SLAVE</code>. (Bug #2922)
<LI>

<code>mysqlbinlog --read-from-remote-server</code> read all binary logs following the
one that was requested.  It now stops at the end of the requested file, the
same as it does when reading a local binary log. There is an option
<code>--to-last-log</code> to get the old behavior. (Bug #3204)
<LI>

Fixed <code>mysqlbinlog --read-from-remote-server</code> to print the exact
positions of events in the "at #" lines. (Bug #3214)
<LI>

Fixed a rare error condition that caused the slave SQL thread spuriously
to print the message <code>Binlog has bad magic number</code> and stop when it
was not necessary to do so.  (Bug #3401)
<LI>

Fixed the <code>Exec_master_log_pos</code> column and its disk image in the
<tt>`relay-log.info'</tt> file to be correct if the master had version 3.23. (The
value was too big by six bytes.) This bug does not exist in MySQL 5.0.
(Bug #3400)
<LI>

Fixed <code>mysqlbinlog</code> not to forget to print a <code>USE</code> statement
under rare circumstances where the binary log contained a <code>LOAD DATA
INFILE</code> statement. (Bug #3415)
<LI>

Fixed a memory corruption when replicating a <code>LOAD DATA INFILE</code> when the
master had version 3.23. Some smaller problems remain in this setup,
See section <A HREF="manual_Replication.html#Replication_Features">6.7  Replication Features and Known Problems</A>. (Bug #3422)
<LI>

Multiple-table <code>DELETE</code> statements were always replicated by the slave if
there were some <code>--replicate-*-ignore-table</code> options and no
<code>--replicate-*-do-table</code> options. (Bug #3461)
<LI>

Fixed a crash of the MySQL slave server when it was built with
<code>--with-debug</code> and replicating itself. (Bug #3568)
<LI>

Fixed that in some replication error messages, a very long query caused the rest
of the message to be invisible (truncated), by putting the query last in the
message. (Bug #3357)
<LI>

Fixed a bug in <code>REPAIR TABLE</code> that resulted sometimes in a corrupted
table, if the table contained <code>FULLTEXT</code> indexes and many words
of different lengths that are considered equal (which is possible in
certain collations, such as <code>latin1_german2_ci</code>
or <code>utf8_general_ci</code>).
(Bug #3835)
<LI>

Fixed a crash of <code>mysqld</code> that was started with binary
logging disabled, but with a non-zero value for the <code>expire_logs_days</code>
system variable.
(Bug #3807)
<LI>

If <code>server-id</code> was not set using startup options but with <code>SET
GLOBAL</code>, the replication slave still complained that it was not set. (Bug
#3829)
</UL>



<H3><A NAME="News-4.1.1" HREF="manual_toc.html#News-4.1.1">D.2.10  Changes in release 4.1.1 (01 Dec 2003)</A></H3>

<P>
This release includes all fixes in MySQL 4.0.16 and most of the fixes
in MySQL 4.0.17.

</P>
<P>
Functionality added or changed:

<UL>
<LI>

Table aliases are not case sensitive if <code>lower_case_table_names</code> is
non-zero.
<LI>

The <code>--old-protocol</code> option for <code>mysqld</code> is no longer supported
and has been removed.
<LI>

Renamed <code>bdb_version</code> system variable to <code>version_bdb</code>.
<LI>

New <code>CHECKSUM TABLE</code> statement for reporting table checksum values.
<LI>

Added <code>character_set_client</code>, <code>character_set_connection</code>,
<code>character_set_database</code>, <code>character_set_results</code>,
<code>character_set_server</code>, <code>character_set_system</code>,
<code>collation_connection</code>, <code>collation_database</code>, and
<code>collation_server</code> system variables to provide information about
character sets and collations.
<LI>

It is now possible to create multiple key caches, assign table indexes to
particular caches, and to preload indexes into caches.
See section <A HREF="manual_SQL_Syntax.html#CACHE_INDEX">13.5.5.1  <code>CACHE INDEX</code> Syntax</A>.
See section <A HREF="manual_SQL_Syntax.html#LOAD_INDEX">13.5.5.4  <code>LOAD INDEX INTO CACHE</code> Syntax</A>.
Structured system
variables are introduced as a means of grouping related key cache parameters.
See section <A HREF="manual_Language_Structure.html#Structured_System_Variables">9.4.1  Structured System Variables</A>.
<LI>

Added <code>preload_buffer_size</code> system variable.
<LI>

New <code>COERCIBILITY()</code> function to return the collation coercibility of a
string.
<LI>

The <code>--quote-names</code> option for <code>mysqldump</code> now is enabled
by default.
<LI>

<code>mysqldump</code> now includes a statement in the dump output to set
<code>FOREIGN_KEY_CHECKS</code> to 0 to avoid problems with tables having to be
reloaded in a particular order when the dump is reloaded. The existing
<code>FOREIGN_KEY_CHECKS</code> value is saved and restored.
<LI>

<strong>Important note:</strong> If you upgrade to <code>InnoDB</code>-4.1.1 or higher,
you cannot downgrade to a version lower than 4.1.1
any more! That is because earlier versions of <code>InnoDB</code> are not aware of
multiple tablespaces.
<LI>

One can revoke all privileges from a user with
<code>REVOKE ALL PRIVILEGES, GRANT FROM user_list</code>.
<LI>

Added <code>IGNORE</code> option for <code>DELETE</code> statement.
<LI>

The MySQL source distribution now also includes the MySQL Internals
Manual <tt>`internals.texi'</tt>.
<LI>

Added <code>mysql_set_server_option()</code> C API client function to allow multiple
statement handling in the server to be enabled or disabled.
<LI>

The <code>mysql_next_result()</code> C API function now returns <code>-1</code> if there
are no more result sets.
<LI>

Renamed <code>CLIENT_MULTI_QUERIES</code> connect option flag to
<code>CLIENT_MULTI_STATEMENTS</code>. To allow for a transition period, the old
option will continue to be recognized for a while.
<LI>

Require <code>DEFAULT</code> before table and database default character set.
This enables us to use <code>ALTER TABLE <var>tbl_name</var> ... CHARACTER SET=...</code>
to change the character set for all <code>CHAR</code>, <code>VARCHAR</code>, and
<code>TEXT</code> columns in a table.
<LI>

Added <code>MATCH ... AGAINST( ... WITH QUERY EXPANSION)</code> and the
<code>ft_query_expansion_limit</code> system variable.
<LI>

Removed unused <code>ft_max_word_len_for_sort</code> system variable.
<LI>

Removed unused <code>ft_max_word_len_for_sort</code> variable from <code>myisamchk</code>.
<LI>

Full-text search now supports multi-byte character sets and the Unicode
<code>utf8</code> character set. (The Unicode <code>ucs2</code> character set is not
yet supported.)
<LI>

Phrase search in <code>MATCH ... AGAINST ( ... IN BOOLEAN MODE)</code> no longer
matches partial words.
<LI>

Added aggregate function <code>BIT_XOR()</code> for bitwise XOR operations.
<LI>

Replication over SSL now works.
<LI>

The <code>START SLAVE</code> statement now supports an <code>UNTIL</code> clause for
specifying that the slave SQL thread should be started but run only until it
reaches a given position in the master's binary logs or in the slave's relay logs.
<LI>

Produce warnings even for single-row <code>INSERT</code> statements, not just for
multiple-row <code>INSERT</code> statements. Previously, it was necessary to set
<code>SQL_WARNINGS=1</code> to generate warnings for single-row statements.
<LI>

Added <code>delimiter</code> (<code>\d</code>) command to the <code>mysql</code> command-line
client for changing the statement delimiter (terminator).
The default delimiter is semicolon.
<LI>

<code>CHAR</code>, <code>VARCHAR</code>, and <code>TEXT</code> columns now have lengths measured
in characters rather than in bytes.
The character size depends on the column's character set.
This means, for example, that a <code>CHAR(<var>n</var>)</code> column
for a multi-byte character set will take more storage than before.
Similarly, index values on such columns are measured in characters, not bytes.
<LI>

<code>LIMIT</code> no longer accepts negative arguments
(they used to be treated as very big positive numbers before).
<LI>

The <code>DATABASE()</code> function now returns <code>NULL</code> rather than the empty
string if there is no database selected.
<LI>

Added <code>--sql-mode=NO_AUTO_VALUE_ON_ZERO</code> option to suppress the usual
behavior of generating the next sequence number when zero is stored in
an <code>AUTO_INCREMENT</code> column. With this mode enabled, zero is stored as
zero; only storing <code>NULL</code> generates a sequence number.
<LI>

<strong>Warning: Incompatible change!</strong>
Client authentication now is based on 41-byte passwords in the
<code>user</code> table, not 45-byte passwords as in 4.1.0.
Any 45-byte passwords created for 4.1.0 must be reset after running the
<code>mysql_fix_privilege_tables</code> script.
<LI>

Added <code>secure_auth</code> global server system variable and <code>--secure-auth</code>
server option that disallow authentication for accounts that have old
(pre-4.1.1) passwords.
<LI>

Added <code>--secure-auth</code> option to <code>mysql</code> command-line client. If this
option is set, the client refuses to send passwords in old (pre-4.1.1) format.
<LI>

<strong>Warning: Incompatible change!</strong>
Renamed the C API <code>mysql_prepare_result()</code> function to
<code>mysql_get_metadata()</code> as the old name was confusing.
<LI>

Added <code>DROP USER '<var>user_name</var>'@'<var>host_name</var>'</code> statement to drop an account
that has no privileges.
<LI>

The interface to aggregated UDF functions has changed a bit. You must now
declare a <code>xxx_clear()</code> function for each aggregate function <code>XXX()</code>.
<LI>

Added new <code>ADDTIME()</code>, <code>DATE()</code>, <code>DATEDIFF()</code>, <code>LAST_DAY()</code>,
<code>MAKEDATE()</code>, <code>MAKETIME()</code>, <code>MICROSECOND()</code>, <code>SUBTIME()</code>,
<code>TIME()</code>, <code>TIMEDIFF()</code>, <code>TIMESTAMP()</code>, <code>UTC_DATE()</code>,
<code>UTC_TIME()</code>, <code>UTC_TIMESTAMP()</code>, and <code>WEEKOFYEAR()</code>
functions.
<LI>

Added new syntax for <code>ADDDATE()</code> and <code>SUBDATE()</code>.
The second argument now may be a number representing the number of days to
be added to or subtracted from the first date argument.
<LI>

Added new <code>type</code> values <code>DAY_MICROSECOND</code>,
<code>HOUR_MICROSECOND</code>, <code>MINUTE_MICROSECOND</code>,
<code>SECOND_MICROSECOND</code>, and <code>MICROSECOND</code>
for <code>DATE_ADD()</code>, <code>DATE_SUB()</code>, and <code>EXTRACT()</code>.
<LI>

Added new <code>%f</code> microseconds format specifier for <code>DATE_FORMAT()</code> and
<code>TIME_FORMAT()</code>.
<LI>

All queries in which at least one <code>SELECT</code> does not use indexes properly
now are written to the slow query log when long log format is used.  
<LI>

It is now possible to create a <code>MERGE</code> table from <code>MyISAM</code> tables in
different databases. Formerly, all the <code>MyISAM</code> tables had to be in the
same database, and the <code>MERGE</code> table had to be created in that database
as well.
<LI>

Added new <code>COMPRESS()</code>, <code>UNCOMPRESS()</code>, and
<code>UNCOMPRESSED_LENGTH()</code> functions.
<LI>

When using <code>SET sql_mode='mode'</code> for a complex mode (like <code>ANSI</code>), we
now update the <code>sql_mode</code> variable to include all the individual options
implied by the complex mode.
<LI>

Added the OLAP (On-Line Analytical Processing) function <code>ROLLUP</code>, which
provides summary rows for each <code>GROUP BY</code> level.
<LI>

Added <code>SQLSTATE</code> codes for all server errors.
<LI>

Added <code>mysql_sqlstate()</code> and <code>mysql_stmt_sqlstate()</code> C API client
functions that return the <code>SQLSTATE</code> error code for the last error.
<LI>

<code>TIME</code> columns with hour values greater than 24 were returned incorrectly
to the client.
<LI>

<code>ANALYZE TABLE</code>, <code>OPTIMIZE TABLE</code>, <code>REPAIR TABLE</code>, and <code>FLUSH</code> statements
are now stored in the binary log and thus replicated to slaves.
This logging does not occur if the optional <code>NO_WRITE_TO_BINLOG</code> keyword 
(or its alias <code>LOCAL</code>) is given.  Exceptions are that
<code>FLUSH LOGS</code>, <code>FLUSH MASTER</code>, <code>FLUSH SLAVE</code>, and
<code>FLUSH TABLES WITH READ LOCK</code> are not logged in any case.
For a syntax example, see section <A HREF="manual_SQL_Syntax.html#FLUSH">13.5.5.2  <code>FLUSH</code> Syntax</A>.
<LI>

New global system variable <code>relay_log_purge</code> to enable or disable automatic
relay log purging.
<LI>

<code>LOAD DATA</code> now produces warnings that can be fetched with
<code>SHOW WARNINGS</code>.
<LI>

Added support for syntax <code>CREATE TABLE table2 (LIKE table1)</code>
that creates an empty table <code>table2</code> with a definition that is
exactly the same as <code>table1</code>, including any indexes.
<LI>

<code>CREATE TABLE <var>tbl_name</var> (...) TYPE=<var>storage_engine</var></code> now generates a
warning if the named storage engine is not available. The table is still
created as a <code>MyISAM</code> table, as before.
<LI>

Most subqueries are now much faster than before.
<LI>

Added <code>PURGE BINARY LOGS</code> as an alias for <code>PURGE MASTER LOGS</code>.
<LI>

Disabled the <code>PURGE LOGS</code> statement that was added in version 4.1.0.
The statement now should be issued as <code>PURGE MASTER LOGS</code> or
<code>PURGE BINARY LOGS</code>.
<LI>

Added <code>SHOW BDB LOGS</code> as an alias for <code>SHOW LOGS</code>.
<LI>

Added <code>SHOW MASTER LOGS</code> as an alias for <code>SHOW BINARY LOGS</code>.
(In 4.1.0, <code>SHOW MASTER LOGS</code> was renamed to <code>SHOW BINARY LOGS</code>.
Now you can use either one.)
<LI>

Added <code>Slave_IO_State</code> and <code>Seconds_Behind_Master</code> columns
to the output of <code>SHOW SLAVE STATUS</code>.
<code>Slave_IO_State</code> indicates the state of the slave I/O thread, and
<code>Seconds_Behind_Master</code> indicates the number of seconds by
which the slave is late compared to the master.
<LI>

The <code>--lower-case-table-names=1</code> server option now also makes aliases case
insensitive. (Bug #534)
<LI>

Changed that the relay log is flushed to disk by the slave I/O thread every
time it reads a relay log event. This reduces the risk of losing some part of
the relay log in case of brutal crash.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed <code>mysql</code> parser not to erroneously interpret <samp>`;'</samp> character
within <code>/* ... */</code> comment as statement terminator.
<LI>

Fixed merging types and length of result set columns for <code>UNION</code>
operations. The types and lengths now are determined taking into
account values for all <code>SELECT</code> statements in the <code>UNION</code>,
not just the first <code>SELECT</code>.
<LI>

Fixed a bug in privilege handling that caused connections from
certain IP addresses to be assigned incorrect database-level privileges.
A connection could be assigned the database privileges of the
previous successful authentication from one of those IP addresses,
even if the IP address username and database name were different. (Bug #1636)
<LI>

Error-handling functions were not called properly when an error resulted
from <code>[CREATE | REPLACE| INSERT] ... SELECT</code> statements.
<LI>

<code>HASH</code>, <code>BTREE</code>, <code>RTREE</code>, <code>ERRORS</code>, and
<code>WARNINGS</code> no longer are reserved words. (Bug #724)
<LI>

Fix for bug in <code>ROLLUP</code> when all tables were <code>const</code> tables.
(Bug #714)
<LI>

Fixed a bug in <code>UNION</code> that prohibited <code>NULL</code> values from being
inserted into result set columns where the first <code>SELECT</code> of the
<code>UNION</code> retrieved <code>NOT NULL</code> columns. The type and max_length
of the result column is now defined based on all <code>UNION</code> parts.
<LI>

Fixed name resolution of columns of reduced subqueries in unions. (Bug #745)
<LI>

Fixed memory overrun in subqueries in select list with <code>WHERE</code> clause
bigger than outer query <code>WHERE</code> clause. (Bug #726)
<LI>

Fixed a bug that caused <code>MyISAM</code> tables with <code>FULLTEXT</code> indexes
created in 4.0.x to be unreadable in 4.1.x.
<LI>

Fixed a data loss bug in <code>REPAIR TABLE ... USE_FRM</code> when used
with tables
that contained <code>TIMESTAMP</code> columns and were created in 4.0.x.
<LI>

Fixed reduced subquery processing in <code>ORDER BY</code>/<code>GROUP BY</code>
clauses. (Bug #442)
<LI>

Fixed name resolution of outer columns of subquery in
<code>INSERT</code>/<code>REPLACE</code> statements. (Bug #446)
<LI>

Fixed bug in marking columns of reduced subqueries. (Bug #679)
<LI>

Fixed a bug that made <code>CREATE FULLTEXT INDEX</code> syntax illegal.
<LI>

Fixed a crash when a <code>SELECT</code> that required a temporary table
(marked by <code>Using temporary</code> in <code>EXPLAIN</code> output)
was used as a derived table in <code>EXPLAIN</code> command. (Bug #251)
<LI>

Fixed a rare table corruption bug in <code>DELETE</code>
from a big table with
a <strong>new</strong> (created by MySQL-4.1) full-text index.
<LI>

<code>LAST_INSERT_ID()</code> now returns 0 if the last <code>INSERT</code> statement
didn't insert any rows.
<LI>

Fixed missing last character in function output. (Bug #447)
<LI>

Fixed a rare replication bug when a transaction spanned two or more
relay logs, and the slave was stopped while executing the part
of the transaction that was in the second or later relay log. Then
replication would resume at the beginning of the second or later
relay log, which was incorrect. (It should resume at <code>BEGIN</code>, in the
first relay log.) (Bug #53)
<LI>

<code>CONNECTION_ID()</code> now is properly replicated. (Bug #177)
<LI>

The new <code>PASSWORD()</code> function in 4.1 is now properly replicated.
(Bug #344)
<LI>

Fixed a bug with double freed memory.
<LI>

Fixed a crashing bug in <code>UNION</code> operations that involved temporary tables.
<LI>

Fixed a crashing bug in <code>DERIVED TABLES</code> when <code>EXPLAIN</code> is
used on a <code>DERIVED TABLES</code> with a join.
<LI>

Fixed a crashing bug in <code>DELETE</code> with <code>ORDER BY</code> and
<code>LIMIT</code> caused by an uninitialized array of reference pointers.
<LI>

Fixed a bug in the <code>USER()</code> function caused by an error in the size of
the allocated string.
<LI>

Fixed a crashing bug when attempting to create a table containing a spatial
(GIS) column with a storage engine that does not support spatial types. 
<LI>

Fixed a crashing bug in <code>UNION</code> caused by the empty select list and
a non-existent column being used in some of the individual <code>SELECT</code>
statements.
<LI>

Fixed a replication bug with a 3.23 master and a 4.0 slave: The
slave lost the replicated temporary tables if <code>FLUSH LOGS</code> was
issued on the master. (Bug #254)
<LI>

Fixed a security bug: A server compiled without SSL support still allowed
connections by users who had the <code>REQUIRE SSL</code> option specified for
their accounts.
<LI>

When an undefined user variable was used in a updating query on the
master (such as <code>INSERT INTO t VALUES(@a)</code>, where <code>@a</code> had never
been set by this connection before), the slave could replicate the
query incorrectly if a previous transaction on the master used a user
variable of the same name. (Bug #1331)
<LI>

Fixed bug with prepared statements: Using the <code>?</code> prepared statement
parameter as the argument to certain functions or statement clauses caused
a server crash when <code>mysql_prepare()</code> was invoked. (Bug #1500)
<LI>

Fixed bug with prepared statements: after call to mysql_prepare
placeholders became allowed in all consequent statements, even if they are 
not prepared (Bug #1946)
<LI>

<code>SLAVE START</code> (which is a deprecated syntax, <code>START SLAVE</code> should be
used instead) could crash the slave. (Bug #2516)
<LI>

Fixed bug in <code>ALTER TABLE RENAME</code>, when rename to the table with
the same name in another database silently dropped destination table if
it existed. (Bug #2628)
<LI>

When not specify hostname in <code>SET PASSWORD FOR user</code> it's now
defaulted to <code>%</code> instead of the current host.
</UL>



<H3><A NAME="News-4.1.0" HREF="manual_toc.html#News-4.1.0">D.2.11  Changes in release 4.1.0 (03 Apr 2003: Alpha)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Renamed <code>SHOW MASTER LOGS</code> statement to <code>SHOW BINARY LOGS</code>.
<LI>

Allow <code>DEFAULT(<var>col_name</var>)</code> in expressions; it produces the
column's default value.
<LI>

Added <code>--compatible</code> option to <code>mysqldump</code> for producing output that
is compatible with other database systems or with older MySQL servers.
<LI>

The <code>--opt</code> option for <code>mysqldump</code> now is enabled by default,
as are all the options implied by <code>--opt</code>.
<LI>

New <code>CHARSET()</code> and <code>COLLATION()</code> functions to return the character
set and collation of a string.
<LI>

Allow index type to be specified explicitly for some storage engines via
<code>USING type_name</code> syntax in index definition.
<LI>

New function <code>IS_USED_LOCK()</code> for determining the connection identifier
of the client that holds a given advisory lock.
<LI>

New more secure client authentication based on 45-byte passwords in the
<code>user</code> table.
<LI>

Added <code>old-password</code> command to <code>mysqladmin</code> for changing
password but storing it using the old password-hashing format.
<LI>

New <code>CRC32()</code> function to compute cyclic redundancy check value.
<LI>

On Windows, we are now using shared memory to communicate between server
and client when they are running on the same machine and you are
connecting to <code>localhost</code>.
<LI>

<code>REPAIR TABLE</code> of <code>MyISAM</code> tables now uses less temporary disk space when
sorting char columns.
<LI>

<code>DATE</code>/<code>DATETIME</code> checking is now a bit stricter to support the 
ability to automatically distinguish between date, datetime, and time
with microseconds. For example, dates of type <code>YYYYMMDD HHMMDD</code> are no 
longer supported; you must either have separators between each
<code>DATE</code>/<code>TIME</code> part or not at all.
<LI>

Server side help for all MySQL functions. One can now type <code>help
week</code> in the <code>mysql</code> client and get help for the <code>week()</code>
function.
<LI>

Added new <code>mysql_get_server_version()</code> C API client function.
<LI>

Fixed bug in <code>libmysqlclient</code> that fetched column defaults.
<LI>

Fixed bug in <tt>`mysql'</tt> command-line client in interpreting quotes
within comments.  (Bug #539)
<LI>

Added <code>record_in_range()</code> method to <code>MERGE</code> tables to be
able to choose the right index when there are many to choose from.
<LI>

Replication now works with <code>RAND()</code> and user variables <code>@var</code>.
<LI>

Allow one to change mode for <code>ANSI_QUOTES</code> on the fly.
<LI>

<code>EXPLAIN SELECT</code> now can be killed. See section <A HREF="manual_SQL_Syntax.html#KILL">13.5.5.3  <code>KILL</code> Syntax</A>.
<LI>

<code>REPAIR TABLE</code> and <code>OPTIMIZE TABLE</code>
now can be killed. See section <A HREF="manual_SQL_Syntax.html#KILL">13.5.5.3  <code>KILL</code> Syntax</A>.
<LI>

Allow empty index lists to be specified for <code>USE INDEX</code>,
<code>IGNORE INDEX</code>, and <code>FORCE INDEX</code>.
<LI>

<code>DROP TEMPORARY TABLE</code> now drops only temporary tables and doesn't
end transactions.
<LI>

Added support for <code>UNION</code> in derived tables.
<LI>

<strong>Warning: Incompatible change!</strong>
<code>TIMESTAMP</code> is now returned as a string of type
<code>'YYYY-MM-DD HH:MM:SS'</code> and different timestamp lengths are not supported.

This change was necessary for SQL standards compliance. In a future
version, a further change will be made (backward compatible with this
change), allowing the timestamp length to indicate the desired number
of digits of fractions of a second.
<LI>

New faster client/server protocol that supports prepared statements,
bound parameters, and bound result columns, binary transfer of data,
warnings.
<LI>

Added database and real table name (in case of alias) to the
<code>MYSQL_FIELD</code> structure.
<LI>

Multi-line queries: You can now issue several queries at once and
then read the results in one go.
<LI>

In <code>CREATE TABLE foo (a INT not null primary key)</code> the
<code>PRIMARY</code> word is now optional.
<LI>

In <code>CREATE TABLE</code> the attribute <code>SERIAL</code> is now an alias for
<code>BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE</code>.
<LI>

<code>SELECT ... FROM DUAL</code> is an alias for <code>SELECT ...</code>.
(To be compatible with some other databases).
<LI>

If one creates a too long <code>CHAR</code>/<code>VARCHAR</code> it's now
automatically changed to <code>TEXT</code> or <code>BLOB</code>; One will get a
warning in this case.
<LI>

One can specify the different <code>BLOB</code>/<code>TEXT</code> types with the
syntax <code>BLOB(length)</code> and <code>TEXT(length)</code>.  MySQL will
automatically change it to one of the internal <code>BLOB</code>/<code>TEXT</code>
types.
<LI>

<code>CHAR BYTE</code> is an alias for <code>CHAR BINARY</code>.
<LI>

<code>VARCHARACTER</code> is an alias for <code>VARCHAR</code>.
<LI>

New operators <code>integer MOD integer</code> and <code>integer DIV integer</code>.
<code>DIV</code> is now a reserved word.
<LI>

<code>SERIAL DEFAULT VALUE</code> added as an alias for <code>AUTO_INCREMENT</code>.
<LI>

<code>TRUE</code> and <code>FALSE</code> added as alias for 1 and 0, respectively.
<LI>

Aliases are now forced in derived tables, as per standard SQL.
<LI>

Fixed <code>SELECT .. LIMIT 0</code> to return proper row count for
<code>SQL_CALC_FOUND_ROWS</code>.
<LI>

One can specify many temporary directories to be used in a round-robin
fashion with:  <code>--tmpdir=dirname1:dirname2:dirname3</code>.
<LI>

Subqueries: <code>SELECT * from t1 where t1.a=(SELECT t2.b FROM t2)</code>.
<LI>

Derived tables:

<PRE>
SELECT a.col1, b.col2
       FROM (SELECT MAX(col1) AS col1 FROM root_table) a,
       other_table b
       WHERE a.col1=b.col1;
</PRE>

<LI>

Character sets to be defined per column, table and database.
<LI>

Unicode (UTF8) support.
<LI>

New <code>CONVERT(... USING ...)</code> syntax for converting string values between
character sets.
<LI>

<code>BTREE</code> index on <code>MEMORY</code> (<code>HEAP</code>) tables.
<LI>

Faster embedded server (new internal communication protocol).
<LI>

One can add a comment per column in <code>CREATE TABLE</code>.
<LI>

<code>SHOW FULL COLUMNS FROM <var>tbl_name</var></code> shows column comments.
<LI>

<code>ALTER DATABASE</code>.
<LI>

Support for GIS (Geometrical data).
See section <A HREF="manual_Spatial_extensions_in_MySQL.html#Spatial_extensions_in_MySQL">18  Spatial Extensions in MySQL</A>.
<LI>

<code>SHOW [COUNT(*)] WARNINGS</code> shows warnings from the last command.
<LI>

One can specify a column type for a column in <code>CREATE TABLE
... SELECT</code> by defining the column in the <code>CREATE</code> part.


<PRE>
CREATE TABLE foo (a TINYINT NOT NULL) SELECT b+1 AS a FROM bar;
</PRE>

<LI>

<code><var>expr</var> SOUNDS LIKE <var>expr</var></code> same as <code>SOUNDEX(<var>expr</var>)=SOUNDEX(<var>expr</var>)</code>.
<LI>

Added new <code>VARIANCE(<var>expr</var>)</code> function returns the variance of <var>expr</var>
<LI>

One can create a table from the existing table using <code>CREATE 
[TEMPORARY] TABLE [IF NOT EXISTS] <var>table</var> (LIKE <var>table</var>)</code>. The table can 
be either normal or temporary.
<LI>

New options <code>--reconnect</code> and <code>--skip-reconnect</code> for the
<code>mysql</code> client, to reconnect automatically or not if the
connection is lost.
<LI>

<code>START SLAVE</code> (<code>STOP SLAVE</code>) no longer returns an error
if the slave is already started (stopped); it returns a
warning instead.
<LI>

<code>SLAVE START</code> and <code>SLAVE STOP</code> are no longer accepted by the query
parser; use <code>START SLAVE</code> and <code>STOP SLAVE</code> instead.
</UL>



<H2><A NAME="News-4.0.x" HREF="manual_toc.html#News-4.0.x">D.3  Changes in release 4.0.x (Production)</A></H2>

<P>
<A NAME="IDX2384"></A>

</P>
<P>
Version 4.0 of the MySQL server includes many enhancements and new features:

</P>

<UL>
<LI>

The <code>InnoDB</code> storage engine is now included in the standard binaries,
adding transactions, row-level locking, and foreign keys.
See section <A HREF="manual_InnoDB.html#InnoDB">15  The <code>InnoDB</code> Storage Engine</A>.
<LI>

A query cache, offering vastly increased performance for many applications.
By caching complete result sets, later identical queries can return
instantly.
See section <A HREF="manual_MySQL_Database_Administration.html#Query_Cache">5.11  The MySQL Query Cache</A>.
<LI>

Improved full-text indexing with boolean mode, truncation, and phrase searching.
See section <A HREF="manual_Functions.html#Fulltext_Search">12.6  Full-Text Search Functions</A>.
<LI>

Enhanced <code>MERGE</code> tables, now supporting <code>INSERT</code> statements and
<code>AUTO_INCREMENT</code>.
See section <A HREF="manual_Storage_engines.html#MERGE_storage_engine">14.2  The <code>MERGE</code> Storage Engine</A>.
<LI>

<code>UNION</code> syntax in <code>SELECT</code>.
See section <A HREF="manual_SQL_Syntax.html#UNION">13.1.7.2  <code>UNION</code> Syntax</A>.
<LI>

Multiple-table <code>DELETE</code> statements.
See section <A HREF="manual_SQL_Syntax.html#DELETE">13.1.1  <code>DELETE</code> Syntax</A>.
<LI>

<code>libmysqld</code>, the embedded server library.
See section <A HREF="manual_MySQL_APIs.html#libmysqld">21.2.16  libmysqld, the Embedded MySQL Server Library</A>.
<LI>

Additional <code>GRANT</code> privilege options for even tighter control and
security.
See section <A HREF="manual_SQL_Syntax.html#GRANT">13.5.1.2  <code>GRANT</code> and <code>REVOKE</code> Syntax</A>.
<LI>

Management of user resources in the <code>GRANT</code> system, particularly
useful for ISPs and other hosting providers.
See section <A HREF="manual_MySQL_Database_Administration.html#User_resources">5.6.4  Limiting Account Resources</A>.
<LI>

Dynamic server variables, allowing configuration changes to be made
without having to stop and restart the server.
See section <A HREF="manual_SQL_Syntax.html#SET_OPTION">13.5.3  <code>SET</code> Syntax</A>.
<LI>

Improved replication code and features.
See section <A HREF="manual_Replication.html#Replication">6  Replication in MySQL</A>.
<LI>

Numerous new functions and options.
<LI>

Changes to existing code for enhanced performance and reliability.
</UL>

<P>
For a full list of changes, please refer to the changelog sections for
each individual 4.0.x release.

</P>



<H3><A NAME="News-4.0.24" HREF="manual_toc.html#News-4.0.24">D.3.1  Changes in release 4.0.24 (not released yet)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

InnoDB: Do not acquire an internal <code>InnoDB</code> table lock in <code>LOCK
TABLES</code> if <code>AUTOCOMMIT=1</code>. This helps in porting old <code>MyISAM</code>
applications to <code>InnoDB</code>. <code>InnoDB</code> table locks in that case
caused deadlocks very easily.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed a symlink vulnerability in the <code>mysqlaccess</code> script.
Reported by Javier Fernandez-Sanguino Pena
and <a HREF="http://www.debian.org/security/audit"> Debian Security Audit Team</a>.
(<a HREF="http://cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0004"> CAN-2005-0004</a>)
<LI>

Fixed support for C API function <code>mysql_list_fields()</code>, which was
accidentally broken in 4.0.22 (Bug#6761)
<LI>

Make <code>query_cache_wlock_invalidate</code> system variable visible in
<code>SHOW VARIABLES</code> output. (Bug #7594)
<LI>

Fixed a bug which caused <code>FROM_UNIXTIME()</code> function to return
<code>NULL</code> for zero argument instead of the Epoch. (Bug #7515)
<LI>

Now in datetime values two digit year is interpreted as year in 20th or 21st
century even with zero month and day. (Bug #7297)
<LI>

Fixed a bug in <code>QUOTE</code> function when used in conjunction with some 
other string functions. This lead to severe buffer overflow and server
crashing. (Bug #7495)
<LI>

InnoDB: Fixed a bug: 32-bit <code>mysqld</code> binaries built on HP-UX-11 did
not work with <code>InnoDB</code> files greater than 2 GB in size. (Bug #6189)
<LI>

Fixed that, when encountering a ``disk full'' or ``quota exceeded'' write
error, <code>MyISAM</code> sometimes didn't sleep and retry the write, thus
resulting in a corrupted table. (Bug #7714)
<LI>

Fixed that a slave could crash after replicating many <code>ANALYZE
TABLE</code>, <code>OPTIMIZE TABLE</code>, or <code>REPAIR TABLE</code> statements from the
master. (Bug #6461, Bug #7658)
</UL>



<H3><A NAME="News-4.0.23" HREF="manual_toc.html#News-4.0.23">D.3.2  Changes in release 4.0.23 (18 Dec 2004)</A></H3>

<P>
<strong>Note</strong>: Due to a libtool-related bug in the source distribution,
the creation of shared <code>libmysqlclient</code> libraries was not possible
(the resulting files were missing the <code>.so</code> file name extension).
The file <tt>`ltmain.sh'</tt> was updated to fix this problem and the resulting
source distribution was released as <tt>`mysql-4.0.23a.tar.gz'</tt>. This
modification did not affect the binary packages. (Bug #7401)

</P>
<P>
Functionality added or changed:

<UL>
<LI>

Added <code>--hex-blob</code> option to <code>mysqldump</code> for dumping binary
string columns using hexadecimal notation.
<LI>

Added <code>mysql_hex_string()</code> C API function that hex-encodes a string.
<LI>

InnoDB: Do not periodically write <code>SHOW INNODB STATUS</code> information
to a temporary file unless the configuration option
<code>innodb_status_file=1</code> is set.
<LI>

InnoDB: Made the foreign key parser better aware of quotes. (Bug #6340)
<LI>

<code>mysqlbinlog</code> now prints an informative commented line (thread id,
timestamp, server id, etc) before each <code>LOAD DATA INFILE</code>, like it already
does for other queries; unless <code>--short-form</code> is used.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Prevent adding <code>CREATE TABLE .. SELECT</code> query to the binary log when the
insertion of new records partially failed. (Bug #6682)
<LI>

Fixed bug which caused <code>FROM_UNIXTIME()</code> function to return wrong result
if the argument was too big. (Bug #6439)
<LI>

Fixed bug which caused MySQL server to store wrong values in <code>TIMESTAMP</code> 
columns and give wrong results for <code>UNIX_TIMESTAMP()</code> function if it
was run in time zone with leap seconds. (Bug #6387)
<LI>

InnoDB: Fixed a bug in <code>LOAD DATA INFILE&hellip;REPLACE</code>
printing duplicate key error when executing the same
load query several times. (Bug #5835)
<LI>

InnoDB: Refuse to open new-style tables created with MySQL 5.0.3 or later.
(Bug #7089)
<LI>

InnoDB: Do not call <code>rewind()</code> when displaying
<code>SHOW INNODB STATUS</code> information on <code>stderr</code>.
<LI>

InnoDB: If one used <code>INSERT IGNORE</code> to insert several rows at a time,
and the first inserts were ignored because of a duplicate key collision,
then InnoDB in a replication slave assigned <code>AUTO_INCREMENT</code> values 1
bigger than in the master. This broke the MySQL replication. (Bug #6287)
<LI>

InnoDB: Fix two hangs: <code>FOREIGN KEY</code> constraints treated table and
database names as case-insensitive. <code>RENAME TABLE t TO T</code> would hang
in an endless loop if <code>t</code> had a foreign key constraint defined on it.
Fix also a hang over the dictionary mutex that would occur if one tried
in <code>ALTER TABLE</code> or <code>RENAME TABLE</code> to create a foreign key
constraint name that collided with another existing name. (Bug #3478)
<LI>

InnoDB: Treat character <code>0xA0</code> as space in InnoDB's
<code>FOREIGN KEY</code> parser if MySQL treats it as space in
the default charset. EMS MySQL Manager inserts character
<code>0xA0</code> after the table name in an <code>ALTER</code>, which
confused InnoDB's parser.
<LI>

Fixed a bug which caused a crash when only the slave I/O thread was
stopped and restarted. (Bug #6148)
<LI>

If a connection had an open transaction but had done no updates to
transactional tables (for example if had just done a <code>SELECT FOR UPDATE</code>
then executed a non-transactional update, that update automatically committed
the transaction (thus releasing InnoDB's row-level locks etc). (Bug #5714)
<LI>

If a connection was interrupted by a network error and did a rollback, the
network error code got stored into the <code>BEGIN</code> and <code>ROLLBACK</code> binary
log events; that caused superfluous slave stops. (Bug #6522)
<LI>

A sequence of <code>BEGIN</code> (or <code>SET AUTOCOMMIT=0</code>), <code>FLUSH TABLES
WITH READ LOCK</code>, transactional update, <code>COMMIT</code>, <code>FLUSH
TABLES WITH READ LOCK</code> could hang the connection forever and possibly the MySQL
server itself. This happened for example when running the <code>innobackup</code>
script several times. (Bug #6732)
</UL>



<H3><A NAME="News-4.0.22" HREF="manual_toc.html#News-4.0.22">D.3.3  Changes in release 4.0.22 (27 Oct 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

The <code>--with-openssl</code> option for <code>configure</code> now accepts a path
prefix as an argument. <code>--with-openssl-includes</code> and 
<code>--with-openssl-libs</code> are still supported, but are needed only to 
override the default values. (Bug #5494)
<LI>

Added new <code>--without-man</code> option to <code>configure</code> to suppress
building/installing the manual pages. (Bug #5379)
<LI>

InnoDB: New <code>mysqld</code> option <code>--innodb-table-locks</code> and session
variable <code>innodb_table_locks</code> (on by default). 
In applications using <code>AUTOCOMMIT=1</code> and MySQL's <code>LOCK TABLES</code>
command, InnoDB's internal table locks that were added in 4.0.20
can cause deadlocks. You can set
<code>innodb_table_locks=0</code> in <tt>`my.cnf'</tt> to remove that problem.
See section <A HREF="manual_InnoDB.html#InnoDB_restrictions">15.17  Restrictions on <code>InnoDB</code> Tables</A>.
(Bug #3299, Bug #5998)
<LI>

InnoDB: Added the startup option and settable global variable
<code>innodb_max_purge_lag</code> for delaying <code>INSERT</code>, <code>UPDATE</code>
and <code>DELETE</code> operations when the purge operations are lagging.
The default value of this parameter is zero, meaning that there will
not be any delays.  See section <A HREF="manual_InnoDB.html#InnoDB_Multi-Versioning">15.13  Implementation of Multi-Versioning</A>.
<LI>

InnoDB: Change error code to <code>HA_ERR_ROW_IS_REFERENCED</code> if we cannot
<code>DROP</code> a parent table because it is referenced by a
<code>FOREIGN KEY</code> constraint.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed bug in server which caused connection stall when one of deprecated
<code>libmysqlclient</code> functions <code>mysql_create_db(), mysql_rm_db()</code>
were called and were going to return error. (Bug #6081)
<LI>

Fixed returning wrong query result from query cache if a temporary table was
hiding a real table after putting results to query cache. (Bug #6084)
<LI>

Fixed <code>ENABLE KEYS</code>, which failed if <code>tmpdir</code> ran out of
space. Now, a full repair is done in this case. (Bug #5625)
<LI>

Fixed an improper error message when trying to drop a table which is
referenced by a <code>FOREIGN KEY</code> constraint. (Bug #5784)
<LI>

Fixed a bug that allowed <code>FLUSH TABLE(S)</code> to close <code>HANDLER</code>
tables. <code>HANDLER</code> tables are now reopened after a <code>FLUSH
TABLE(S)</code> the next time they are used. However, they lose their file position
if this happens.  (Bug #4286)
<LI>

Fixed a bug that allowed <code>HANDLER</code> tables with the same alias to be
opened multiple times. <code>HANDLER</code> aliases must now be unique, even though
it is syntactically correct in versions below 4.1, to qualify them with their
base table's database name (e.g. test_db.handler_tbl, but this will now
conflict with e.g. another_db.handler_tbl). (Bug #4335)
<LI>

Fixed crash when using MySQL 4.0 with privilege tables from MySQL 5.0.
<LI>

<code>mysqlimport</code> now reads input files locally from the client host only
if the <code>--local</code> option is given.  Previously, it assumed incorrectly
in some cases that files were local even without <code>--local</code>.
(Bug #5829)
<LI>

InnoDB: Make the check for excessive semaphore waits to tolerate glitches
in the system clock (do not crash the server if the system time is
adjusted while InnoDB is under load.). (Bug #5898)
<LI>

InnoDB: Fixed a bug in the InnoDB <code>FOREIGN KEY</code> parser that prevented
<code>ALTER TABLE</code> of tables containing <samp>`#'</samp> in their names. (Bug #5856)
<LI>

InnoDB: Fixed problem introduced in 4.0.21 where a connection starting
a transaction,
doing updates, then <code>FLUSH TABLES WITH READ LOCK</code>, then <code>COMMIT</code>,
would cause replication slaves to stop (complaining about error 1223).
Bug surfaced
when using the InnoDB <code>innobackup</code> script. (Bug #5949)
<LI>

InnoDB: If one updated a column so that its size changed, or updated
it to an externally stored (<code>TEXT</code> or <code>BLOB</code>) value, then
ANOTHER externally stored column would show up as 512 bytes of good
data + 20 bytes of garbage in a consistent read that fetched the old
version of the row. (Bug #5960)
<LI>

InnoDB: Release the dictionary latch during a long cascaded <code>FOREIGN KEY</code>
operation, so that we do not starve other users doing <code>CREATE TABLE</code>
or other DDL operations. This caused a notorious 'Long semaphore wait' message
to be printed to the <tt>`.err'</tt> log. (Bug #5961)
<LI>

InnoDB: Let InnoDB remember row locking type (X or S) inside
<code>LOCK TABLES</code>,
also over plain consistent read <code>SELECT</code>s.
<LI>

InnoDB: Fixed a bug introduced in 4.0.21. An assertion failed if
one used <code>mysqldump</code> with the option <code>-l</code> or <code>--opt</code>,
or if one used <code>LOCK TABLES ... LOCAL</code>. (Workaround in 4.0.21: use
<code>--quick</code> and <code>--single-transaction</code>. (Bug #5538)
<LI>

InnoDB: Having a column prefix index in the primary key, and the same
column fully in a secondary key could cause an assertion failure in
row_build_row_ref(). (Bug #5180)
<LI>

Fixed a bug which resulted in an erroneously calculated number of examined
rows in <code>UNION</code>s. This value is printed in the slow query log.
(Bug #5879)
<LI>

Fixed bug with crash of server on some values of <code>read_rnd_buffer_size</code>
(Bug #5492)
<LI>

Fixed bug which caused truncation of values read from or into
<code>TIMESTAMP</code> fields if <code>--new</code> mode was enabled. (Bug #4131)
<LI>

<code>mysqladmin</code> now returns a status of 0 even when the server denies
access; such an error means the server is running. (Bug #3120)
<LI>

Fixed that if the slave SQL thread found a syntax error in a query (which
should be rare, as the master parsed it successfully), it stops. (Bug #5711)
<LI>

Fixed that if a write to a MyISAM table fails because of a full disk or an
exceeded disk quota, it prints a message to the error log every 10 minutes, and
waits until disk becomes free. (Bug #3248)
<LI>

Fixed problem with symlinked databases on Windows being shown with <code>SHOW 
DATABASES</code> even if the database name doesn't match the given wildcard (Bug #5539)
</UL>



<H3><A NAME="News-4.0.21" HREF="manual_toc.html#News-4.0.21">D.3.4  Changes in release 4.0.21 (06 Sep 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>Print <var>version_comment</var> (from <code>./configure --comment</code> during

compilation) when starting the server.  E.g.:
<code>Version: '4.0.21-debug'  socket: '/tmp/mysql.sock'  port: 0  Official MySQL Binary</code>
<LI>

Made the MySQL server not react to signals <code>SIGHUP</code> and <code>SIGQUIT</code> on
Mac OS X 10.3. This is needed because under this OS, the MySQL server receives
lots of these signals (reported as Bug #2030).
<LI>

On Windows, the <code>mysqld-nt</code> and <code>mysqld-max-nt</code> servers now
write error messages to the Windows event log in addition to the MySQL error
log.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed an old bug in concurrent accesses to <code>MERGE</code> tables
(even one <code>MERGE</code> table and <code>MyISAM</code> tables), that could've
resulted in a crash or hang of the server. (Bug #2408)
<LI>

Fixed a bug that caused incorrect results from <code>GROUP BY</code> queries
with expression in <code>HAVING</code> clause that refers to a <code>BLOB</code>
(<code>TEXT</code>, <code>TINYBLOB</code>, etc) fields. (Bug #4358)
<LI>

Fixed a bug when memory was not released when <code>HEAP</code> table is
dropped. 
It could only happen on Windows when a symlink file (.sym) is used and
if that symlink file contained double backslashes (\\). (Bug #4973)
<LI>

Fixed a bug which prevented <code>TIMESTAMP(19)</code> fields from being created.
(Bug #4491)
<LI>

Fixed a bug that caused wrong results in queries that were using index to
search for <code>NULL</code> values in <code>BLOB</code> (<code>TINYBLOB</code>, <code>TEXT</code>,
<code>TINYTEXT</code>, etc) columns of <code>MyISAM</code> tables. (Bug #4816)
<LI>

Fixed a bug in the function <code>ROUND()</code> reporting incorrect metadata
(number of digits after the decimal point). It can be seen, for example,
in <code>CREATE TABLE t1 SELECT ROUND(1, 34)</code>. (Bug #4393)
<LI>

Fixed precision loss bug in some mathematical functions such as
<code>SQRT()</code> and <code>LOG()</code>. (Bug #4356)
<LI>

Fixed a long-standing problem with <code>LOAD DATA</code> with the <code>LOCAL</code>
option. The problem occurs when an error happens during the <code>LOAD DATA</code>
operation. Previously, the connection was broken. Now the error message
is returned and connection stays open.  
<LI>

Optimizer now treats <code>col IN (val)</code> the same way it does 
for <code>col = val</code>.
<LI>

Fixed a problem with <code>net_buffer_length</code> when building the
<code>DBD::mysql</code> Perl module.  (Bug #4206)
<LI>

<code>lower_case_table_names=2</code> (keep case for table names) was not honored
with <code>ALTER TABLE</code> and <code>CREATE/DROP INDEX</code>. (Bug #3109)
<LI>

Fixed a crash on declaration of <code>DECIMAL(0,...)</code> column. (Bug #4046)
<LI>

Fixed a bug in <code>IF()</code> function incorrectly determining the result type
if aggregate functions were involved. (Bug #3987)
<LI>

Fixed bug in privilege checking where, under some conditions, one was able to
grant privileges on the database, he has no privileges on. (Bug #3933)
<LI>

Fixed crash in <code>MATCH ... AGAINST()</code> on a phrase search operator with
a missing closing double quote. (Bug #3870)
<LI>

Fixed a bug with truncation of big values (&#62; 4294967295) of 64-bit system
variables. (Bug #3754)
<LI>

If <code>server-id</code> was not set using startup options but with <code>SET
GLOBAL</code>, the replication slave still complained that it was not set.
(Bug #3829)
<LI>

Fixed potential memory overrun in <code>mysql_real_connect()</code> (which
required a compromised DNS server and certain operating systems). (Bug #4017)
<LI>

During the installation process of the server RPM on Linux, <code>mysqld</code>
was run as the <code>root</code> system user, and if you had
<code>--log-bin=&#60;somewhere_out_of_var_lib_mysql&#62;</code> it created binary log
files owned by <code>root</code> in this directory, which remained owned by
<code>root</code> after the installation. This is now fixed by starting
<code>mysqld</code> as the <code>mysql</code> system user instead. (Bug #4038)
<LI>

Made <code>DROP DATABASE</code> honor the value of
<code>lower_case_table_names</code>. (Bug #4066)
<LI>

The slave SQL thread refused to replicate <code>INSERT ... SELECT</code> if it
examined more than 4 billion rows. (Bug #3871)
<LI>

Fixed incorrect destruction of expression which led to crash of server on
complex <code>AND</code>/<code>OR</code> expressions if query was ignored (either by a
replication server because of <code>--replicate-*-table</code> rules, or by any MySQL
server because of a syntax error). (Bug #3969, Bug #4494)
<LI>

Fixed that <code>mysqlbinlog --position --read-from-remote-server</code>
had wrong <code># at</code> lines. (Bug #4506)
<LI>

If <code>CREATE TEMPORARY TABLE t SELECT</code> failed while loading the data, the
temporary table was not dropped. (Bug #4551)
<LI>

Fixed that when a multiple-table <code>DROP TABLE</code> failed to drop a table on
the master server, the error code was not written to the binary log.
(Bug #4553)
<LI>

When the slave SQL thread was replicating a <code>LOAD DATA INFILE</code>
statement, it didn't show the statement in the output of <code>SHOW
PROCESSLIST</code>. (Bug #4326)
<LI>

Fixed that <code>CREATE TABLE ... TYPE=HEAP ... AS SELECT...</code> caused
replication slave to stop. (Bug #4971)
<LI>

Fixed that <code>disable-local-infile</code> option had no effect if client read it
from a configuration file using
<code>mysql_options(...,MYSQL_READ_DEFAULT,...)</code>. (Bug #5073)
<LI>

Fixed that <code>mysql-test-run</code> failed on the <code>rpl_trunc_binlog</code> test if
running test from the installed (the target of 'make install') directory. (Bug
#5050)
<LI>

Fixed an unlikely deadlock which could happen when using <code>KILL</code>. (Bug
#4810)
<LI>

Fixed a crash when one connection got <code>KILL</code>ed while it was doing
<code>START SLAVE</code>. (Bug #4827)
<LI>

Made <code>FLUSH TABLES WITH READ LOCK</code> block <code>COMMIT</code> if server is
running with binary logging; this ensures that the binary log position is
trustable when doing a full backup of tables and the binary log. (Bug #4953)
<LI>

Fixed that the counter of an <code>auto_increment</code> column was not reset by
<code>TRUNCATE TABLE</code> is the table was a temporary one. (Bug #5033)
<LI>

Made database names to compare case-insensitively in fully
qualified column names (<code>database.table.column</code>) when
<code>lower_case_table_names=1</code>. (Bug #4792)
<LI>

Fixed that <code>SET CHARACTER SET</code> was not replicated correctly. MySQL 4.1
does not have that bug. (Bug #4500)
</UL>



<H3><A NAME="News-4.0.20" HREF="manual_toc.html#News-4.0.20">D.3.5  Changes in release 4.0.20 (17 May 2004)</A></H3>

<P>
<strong>Note</strong>: The windows packages had to be repackaged and re-released
several times to resolve packaging issues (such as missing files). This did not
affect the binaries included (they have not been recompiled), therefore the
installation packages are of version 4.0.20d, while the binaries included still
identify themselves as version 4.0.20b.

</P>
<P>
Functionality added or changed:

<UL>
<LI>

Phrase search in <code>MATCH ... AGAINST ( ... IN BOOLEAN MODE)</code> no longer
matches partial words.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

A crashing bug (race condition) was fixed in InnoDB diagnostic logging.
It was introduced in 4.0.19. (Bug #3596)
<LI>

Fixed a bug in division <code>/</code> reporting incorrect metadata
(number of digits after the decimal point). It can be seen, for example,
in <code>CREATE TABLE t1 SELECT "0.01"/"3"</code>. (Bug #3612)
<LI>

Fixed a problem with non-working <code>DROP DATABASE</code> on some configurations
(in particular, Linux 2.6.5 with ext3 are known to expose this bug).
(Bug #3594)
<LI>

Fixed that in some replication error messages, a very long query caused the rest
of the message to be invisible (truncated), by putting the query last in the
message. (Bug #3357)
</UL>



<H3><A NAME="News-4.0.19" HREF="manual_toc.html#News-4.0.19">D.3.6  Changes in release 4.0.19 (04 May 2004)</A></H3>

<P>
<strong>Note</strong>: The MySQL 4.0.19 binaries were uploaded to the download
mirrors on May, 10th. However, a potential crashing bug was found just
before the 4.0.19 release was publicly announced and published from the
4.0 download pages at <a HREF="http://dev.mysql.com/">http://dev.mysql.com/</a>.

</P>
<P>
A fix for the bug was pushed into the MySQL source tree shortly after it
could be reproduced and is included in MySQL 4.0.20. Users upgrading from
MySQL 4.0.18 should upgrade directly to MySQL 4.0.20 or later.

</P>
<P>
See (Bug #3596) for details (it was reported against MySQL-4.1, but was
confirmed to affect 4.0.19 as well).

</P>
<P>
Functionality added or changed:

<UL>
<LI>

If length of a timestamp field is defined as 19, the timestamp will be
displayed as <code>"YYYY-MM-DD HH:MM:SS</code>. This is done to make it easier
to use tables created in MySQL 4.1 to be used in MySQL 4.0.
<LI>

If you use <code>RAID_CHUNKS</code> with a value &#62; 255 it will be set to 255.
This was made to ensure that all raid directories are always 2 hex bytes.
(Bug #3182)
<LI>

Changed that the optimizer will now consider the index specified in 
<code>FORCE INDEX</code> clause as a candidate to resolve <code>ORDER BY</code>
as well.
<LI>

The <code>--log-warnings</code> server option now is enabled by default.
Disable with <code>--skip-log-warnings</code>.
<LI>

Until now, in <code>SELECT ... UNION SELECT ... ORDER BY ...</code>, it was possible
to qualify a column name in the <code>ORDER BY</code> clause with a table name. This
is no longer possible. Column names in <code>ORDER BY</code> should refer to names
established in the first <code>SELECT</code> of the <code>UNION</code>. (Bug #3064)
<LI>

Added <code>max_insert_delayed_threads</code> system variable as a synonym for
<code>max_delayed_threads</code>.
<LI>

Added <code>query_cache_wlock_invalidate</code> system variable. It allows
emulation of <code>MyISAM</code> table write-locking behavior, even for queries
in the query cache. (Bug #2693)
<LI>

The keyword <code>MASTER_SERVER_ID</code> is not reserved anymore.
<LI>

The following is relevant mainly for Mac OS X users who use a
case-insensitive filesystem.  This is not relevant for Windows users as
<code>InnoDB</code> in this case always stores filenames in lower case:

You can now force <code>lower_case_table_names</code> to 0 from the command
line or a configuration file. This is useful with case-insensitive filesystems
when you have previously not used
<code>lower_case_table_names=1</code> or <code>lower_case_table_names=2</code> and
you have already created <code>InnoDB</code> tables.  With
<code>lower_case_table_names=0</code>, <code>InnoDB</code> tables were stored in mixed case
while setting lower_case_table_names to a non-zero value now will force it to
lower case (to make the table names case insensitive).

Because it's possible to crash <code>MyISAM</code> tables by referring to them with
different case on a case-insensitive filesystem, we recommend that you
use <code>lower_case_table_names</code> or <code>lower_case_table_names=2</code> on
such filesystems.

The easiest way to convert to use <code>lower_case_table_names=2</code> is to
dump all your <code>InnoDB</code> tables with <code>mysqldump</code>, drop them and then
restore them.
<LI>

Changed that the relay log is flushed to disk by the slave I/O thread every
time it reads a relay log event. This reduces the risk of losing some part of
the relay log in case of brutal crash.
<LI>

When a session having open temporary tables terminates, the statement
automatically written to the binary log is now <code>DROP TEMPORARY TABLE IF
EXISTS</code> instead of <code>DROP TEMPORARY TABLE</code>, for more robustness.
<LI>

Added option <code>--replicate-same-server-id</code>.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Added missing full-text variable <code>ft_stopword_file</code> to <code>myisamchk</code>.
<LI>

Don't allow stray <code>','</code> at the end of field specifications. (Bug #3481)
<LI>

<code>INTERVAL</code> now can handle big values for seconds, minutes and hours.
(Bug #3498)
<LI>

Blank hostname did not work as documented for table and column privileges.
Now it's works the same way as <code>'%'</code>. (Bug #3473)
<LI>

Fixed a harmless buffer overflow in <tt>`replace'</tt> utility. (Bug# 3541)
<LI>

Fixed <code>SOUNDEX()</code> to ignore non-alphabetic characters also
in the beginning of the string. (Bug #3556)
<LI>

Fixed a bug in <code>MATCH ... AGAINST()</code> searches when another thread was
doing concurrent inserts into the <code>MyISAM</code> table in question.  The first
--- full-text search -- query could return incorrect results in this case
(for example, ``phantom'' rows or not all matching rows, even an empty result set).
The easiest way to check whether you are affected is to start <code>mysqld</code>
with <code>--skip-concurrent-insert</code> switch and see if it helps.
<LI>

Fixed bug when doing <code>DROP DATABASE</code> on a directory containing non-
MySQL files. Now a proper error message is returned. 
<LI>

Fixed bug in <code>ANALYZE TABLE</code> on a <code>BDB</code> table inside a transaction
that hangs server thread. (Bug #2342)
<LI>

Fixed a symlink vulnerability in the <tt>`mysqlbug'</tt> script. (Bug #3284)
<LI>

Fixed core dump bug in <code>SELECT DISTINCT</code> where all selected parts
where constants and there were hidden columns in the created temporary table.
(Bug #3203)
<LI>

Fixed core dump bug in <code>COUNT(DISTINCT)</code> when there was a lot of
values and one had a big value for <code>max_heap_table_size</code>.
<LI>

Fixed problem with multiple-table-update and BDB tables. (Bug: #3098)
<LI>

Fixed memory leak when dropping database with <code>RAID</code> tables. (Bug #2882)
<LI>

Fixed core dump crash in replication during relay-log switch when the
relay log went over <code>max_relay_log_size</code> and the slave thread did a
<code>flush_io_cache()</code> at the same time.
<LI>

Fixed hangup bug when issuing multiple <code>SLAVE START</code> from different
threads at the same time. (Bug #2921)
<LI>

Fixed bug when using <code>DROP DATABASE</code> with <code>lower_case_table_names=2</code>.
<LI>

Fixed wrong result in <code>UNION</code> when using <code>lower_case_table_names=2</code>.
(Bug #2858)
<LI>

One can now kill threads that is 'stuck' in the join optimizer (can
happen when there is MANY tables in the join in which case the optimizer
can take really long time). (Bug #2825)
<LI>

Rollback <code>DELETE</code> and <code>UPDATE</code> statements if thread is killed.
(Bug #2422)
<LI>

Ensure that all rows in an <code>INSERT DELAYED</code> statement is written at
once if binary logging is enabled. (Bug #2491).
<LI>

Fixed bug in query cache statistic, more accurate formula linked statistic
variables mentioned in the manual.
<LI>

Fixed a bug in parallel repair
(<code>myisamchk -p</code>, <code>myisam_repair_threads</code>) -
sometimes repair process failed to repair a table. (Bug #1334)
<LI>

Fixed bugs with names of tables, databases and columns that end to space 
(Bug #2985)
<LI>

Fixed a bug in multiple-table <code>UPDATE</code> statements involving at least one constant 
table. Bug was exhibited in allowing non matching row to be updated.
(Bug #2996).
<LI>

Fixed all bugs in scripts for creating/upgrading system database (Bug #2874)
Added tests which guarantee against such bugs in the future.
<LI>

Fixed bug in <tt>`mysql'</tt> command-line client in interpreting quotes
within comments. (Bug #539)
<LI>

<code>--set-character-set</code> and <code>--character-sets-dir</code> options in
<code>myisamchk</code> now work.
<LI>

Fixed a bug in <code>mysqlbinlog</code> that caused one pointer to be free'd twice
in some cases.
<LI>

Fixed a bug in boolean full-text search, that sometimes could lead to false
matches in queries with several levels of subexpressions using <code>+</code>
operator (for example,
<code>MATCH ... AGAINST('+(+(word1 word2)) +word3*' IN BOOLEAN MODE)</code>.
<LI>

Fixed Windows-specific portability bugs in <tt>`myisam_ftdump'</tt>.
<LI>

Fixed a bug in multiple-table <code>DELETE</code> that was caused by foreign key
constraints. If the order of the tables established by MySQL optimizer
did not match parent-child order, no rows were deleted and no error
message was provided. (Bug #2799)
<LI>

Fixed a few years old bug in the range optimizer that
caused a segmentation fault on some very rare queries. (Bug #2698)
<LI>

Replication:
If a client connects to a slave server and issues an administrative
statement for a table (for example, <code>OPTIMIZE TABLE</code> or <code>REPAIR
TABLE</code>), this could sometimes stop the slave SQL thread. This does not lead
to any corruption, but you must use <code>START SLAVE</code> to get replication
going again. (Bug #1858)
The bug was accidentally not fixed in 4.0.17 as it was unfortunately
earlier said.
<LI>

Fixed that when a <code>Rotate</code> event is found by the slave SQL thread in the
middle of a transaction, the value of <code>Relay_Log_Pos</code> in <code>SHOW SLAVE
STATUS</code> remains correct. (Bug #3017)
<LI>

Corrected the master's binary log position that <code>InnoDB</code> reports when it is doing a
crash recovery on a slave server. (Bug #3015)
<LI>

Changed that when a <code>DROP TEMPORARY TABLE</code> statement is automatically
written to the binary log when a session ends, the statement is recorded with an
error code of value zero (this ensures that killing a <code>SELECT</code> on the
master does not result in a superfluous error on the slave). (Bug #3063)
<LI>

Changed that when a thread handling <code>INSERT DELAYED</code> (also known as a
<code>delayed_insert</code> thread) is killed, its statements are recorded with an
error code of value zero (killing such a thread does not endanger
replication, so we thus avoid a superfluous error on the slave). (Bug #3081)
<LI>

Fixed deadlock when two <code>START SLAVE</code> commands were run at the same
time. (Bug #2921)
<LI>

Fixed that a statement never triggers a superfluous error on the slave, if it
must be excluded given the <code>--replicate-*</code> options. The bug was that if the
statement had been killed on the master, the slave would stop. (Bug #2983)
<LI>

The <code>--local-load</code> option of <code>mysqlbinlog</code> now requires an argument.
<LI>

Fixed a segmentation fault when running <code>LOAD DATA FROM MASTER</code> after
<code>RESET SLAVE</code>. (Bug #2922)
<LI>

Fixed a rare error condition that caused the slave SQL thread spuriously
to print the message <code>Binlog has bad magic number</code> and stop when it
was not necessary to do so.  (Bug #3401)
<LI>

Fixed the column <code>Exec_master_log_pos</code> (and its disk image in the
<code>relay-log.info</code> file) to be correct if the master had version 3.23 (it
was too big by 6 bytes). This bug does not exist in the 5.0 version.
(Bug #3400)
<LI>

Fixed that <code>mysqlbinlog</code> does not forget to print a <code>USE</code> command
under rare circumstances where the binary log contained a <code>LOAD DATA
INFILE</code> command. (Bug #3415)
<LI>

Fixed a memory corruption when replicating a <code>LOAD DATA INFILE</code> when the
master had version 3.23. Some smaller problems remain in this setup,
See section <A HREF="manual_Replication.html#Replication_Features">6.7  Replication Features and Known Problems</A>. (Bug #3422)
<LI>

Multiple-table <code>DELETE</code> statements were always replicated by the slave if
there were some <code>--replicate-*-ignore-table</code> options and no
<code>--replicate-*-do-table</code> options. (Bug #3461)
<LI>

Fixed a crash of the MySQL slave server when it was built with
<code>--with-debug</code> and replicating itself. (Bug #3568)
</UL>



<H3><A NAME="News-4.0.18" HREF="manual_toc.html#News-4.0.18">D.3.7  Changes in release 4.0.18 (12 Feb 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Fixed processing of <code>LOAD DATA</code> by <code>mysqlbinlog</code> in remote mode.
(Bug #1378)
<LI>

New utility program <tt>`myisam_ftdump'</tt> was added to binary
distributions.
<LI>

<code>ENGINE</code> is now a synonym for the <code>TYPE</code> option for
<code>CREATE TABLE</code> and <code>ALTER TABLE</code>.
<LI>

<code>lower_case_table_names</code> system variable now can take a value of
<code>2</code>, to store table names in mixed case on case-insensitive filesystems.
It's forced to 2 if the database directory is located on a case-insensitive
filesystem.
<LI>

For replication of <code>MEMORY</code> (<code>HEAP</code>) tables: Made the master
automatically write a <code>DELETE FROM</code> statement to its binary log when a
<code>MEMORY</code> table is opened for the first time since master's startup.
This is for the case where the slave has replicated a non-empty
<code>MEMORY</code> table, then the master is shut down and restarted: the table
is now empty on master; the <code>DELETE FROM</code> empties it on slave too. Note
that even with this fix, between the master's restart and the first use of
the table on master, the slave still has out-of-date data in the table. But
if you use the <code>init-file</code> option to populate the <code>MEMORY</code> table
on the master at startup, it ensures that the failing time interval is zero.
(Bug #2477)
<LI>

Optimizer is now better tuned for the case where the first used key part
(of many) is a constant.  (Bug #1679)
<LI>

Removed old non-working <code>--old-rpl-compat</code> server option, which was a
holdover from the very first 4.0.x versions. (Bug #2428)
<LI>

Added option <code>--sync-frm</code>. It's on by default, to
instruct MySQL to sync to disk each time <tt>`.frm'</tt> file is created.
Use <code>--disable-sync-frm</code> to disable.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

<code>mysqlhotcopy</code> now works on NetWare.
<LI>

<code>DROP DATABASE</code> could not drop databases with RAID tables that had
more than nine <code>RAID_CHUNKS</code>. (Bug #2627)
<LI>

Fixed bug in range optimizer when using overlapping ranges. (Bug #2448)
<LI>

Limit <code>wait_timeout</code> to 2147483 on Windows (OS limit). (Bug #2400)
<LI>

Fixed bug when <code>--init-file</code> crashes MySQL if it contains a large
<code>SELECT</code>. (Bug #2526)
<LI>

<code>SHOW KEYS</code> now shows <code>NULL</code> in the <code>Sub_part</code> column for
<code>FULLTEXT</code> indexes.
<LI>

The signal thread's stack size was increased to enable <code>mysqld</code>
to run on Debian/IA-64 with a TLS-enabled <code>glibc</code>. (Bug #2599)
<LI>

Now only the <code>SELECT</code> privilege is needed for tables that are only read in
multiple-table <code>UPDATE</code> statements. (Bug #2377)
<LI>

Give proper error message if one uses <code>LOCK TABLES ... ; INSERT
... SELECT</code> and one used the same table in the <code>INSERT</code> and <code>SELECT</code>
part. (Bug #2296)
<LI>

<code>SELECT INTO ... DUMPFILE</code> now deletes the generated file on error.
<LI>

Fixed foreign key reference handling to allow references to column names that
contain spaces. (Bug #1725)
<LI>

Fixed problem with index reads on character columns with <code>BDB</code> tables. The
symptom was that data could be returned in the wrong lettercase. (Bug #2509)
<LI>

Fixed a spurious table corruption problem that could sometimes appear on
tables with indexed <code>TEXT</code> columns if these columns happened to contain
values having trailing spaces.  This bug was introduced in 4.0.17.
<LI>

Fixed a problem where some queries could hang if a condition like
<code><var>indexed_TEXT_column</var> = <var>expr</var></code>
was present and the column contained values having trailing spaces.
This bug was introduced in 4.0.17.
<LI>

Fixed a bug that could cause incorrect results from a query
that involved range conditions on indexed <code>TEXT</code> columns
that happened to contain values having trailing spaces. This bug was
introduced in 4.0.17. (Bug #2295)
<LI>

Fixed incorrect path names in some of the manual pages.
(Bug #2270)
<LI>

Fixed spurious ``table corrupted'' errors in parallel repair operations.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_system_variables">5.2.3  Server System Variables</A>.
<LI>

Fixed a crashing bug in parallel repair operations.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_system_variables">5.2.3  Server System Variables</A>.
<LI>

Fixed bug in updating <code>MyISAM</code> tables for <code>BLOB</code> values longer
than 16MB. (Bug #2159)
<LI>

Fixed bug in <code>mysqld_safe</code> when running multiple instances of
MySQL. (Bug #2114)
<LI>

Fixed a bug in using <code>HANDLER</code> statement with tables not
from a current database. (Bug #2304)
<LI>

Fixed a crashing bug that occurred due to the fact that multiple-table
<code>UPDATE</code> statements did not check that there was only one table
to be updated. (Bug #2103)
<LI>

Fixed a crashing bug that occurred due to <code>BLOB</code> column
type index size being calculated incorrectly in <code>MIN()</code> and <code>MAX()</code>
optimizations.
(Bug #2189)
<LI>

Fixed a bug with incorrect syntax for <code>LOCK TABLES</code> in
<code>mysqldump</code>. (Bug #2242)
<LI>

Fixed a bug in <code>mysqld_safe</code> that caused <code>mysqld</code> to generate a
warning about duplicate <code>user=<var>xxx</var></code> options if this option was specified in
the <code>[mysqld]</code> or <code>[server]</code> sections of <tt>`my.cnf'</tt>.
(Bug #2163)
<LI>

<code>INSERT DELAYED ... SELECT ...</code> could cause table corruption because
tables were not locked properly.  This is now fixed by ignoring <code>DELAYED</code>
in this context. (Bug #1983)
<LI>

Replication: Sometimes the master gets a non-fatal error during the
execution of a statement that does not immediately succeed.  (For example,
a write to a <code>MyISAM</code> table may first receive ``no space left
on device,'' but later complete when disk space becomes available.
See section <A HREF="manual_Problems.html#Full_disk">A.4.3  How MySQL Handles a Full Disk</A>.)  The bug was that the master forgot to reset the error
code to 0 after success, so the error code got into its binary log, thus
causing the slave to issue false alarms such as ``did not get the same
error as on master.'' (Bug #2083)
<LI>

Removed a misleading ``check permissions on master.info'' from a replication
error message, because the cause of the problem could be something other than
permissions. (Bug #2121)
<LI>

Fixed a crash when the replication slave was unable to create the first relay
log. (Bug #2145)
<LI>

Replication of <code>LOAD DATA INFILE</code> for an empty file from a 3.23 master to a
4.0 slave caused the slave to print an error. (Bug #2452)
<LI>

When automatically forcing <code>lower_case_table_names</code> to 1 if the file
system was case insensitive, <code>mysqld</code> could crash. This bug existed only
in MySQL 4.0.17. (Bug #2481)
<LI>

Restored ability to specify default values for <code>TIMESTAMP</code> columns
that was erroneously disabled in previous release. (Bug #2539) Fixed
<code>SHOW CREATE TABLE</code> to reflect these values. (Bug #1885) Note
that because of the auto-update feature for the first <code>TIMESTAMP</code>
column in a table, it makes no sense to specify a default value for
the column. Any such default will be silently ignored (unless another
<code>TIMESTAMP</code> column is added before this one).  Also fixed the meaning
of the <code>DEFAULT</code> keyword when it is used to specify the value to be
inserted into a <code>TIMESTAMP</code> column other than the first. (Bug #2464)
<LI>

Fixed bug for out-of-range arguments on QNX platform that caused
<code>UNIX_TIMESTAMP()</code> to produce incorrect results or that caused
non-zero values to be inserted into <code>TIMESTAMP</code> columns.  (Bug #2523)
Also, current time zone now is taken into account when checking if datetime
values satisfy both range boundaries for <code>TIMESTAMP</code> columns. The
range allowed for a <code>TIMESTAMP</code> column is time zone-dependent and
equivalent to a range of <code>1970-01-01 00:00:01</code> UTC to <code>2037-12-31
23:59:59</code> UTC.
<LI>

Multiple-table <code>DELETE</code> statements were never replicated by the slave if
there were any <code>--replicate-*-table</code> options. (Bug #2527)
<LI>

Changes to session counterparts of variables <code>query_prealloc_size</code>,
<code>query_alloc_block_size</code>, <code>trans_prealloc_size</code>,
<code>trans_alloc_block_size</code> now 
have an effect. (Bug #1948)
<LI>

Fixed bug in <code>ALTER TABLE RENAME</code>, when rename to the table with
the same name in another database silently dropped destination table if
it existed. (Bug #2628)
</UL>



<H3><A NAME="News-4.0.17" HREF="manual_toc.html#News-4.0.17">D.3.8  Changes in release 4.0.17 (14 Dec 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<code>mysqldump</code> no longer dumps data for <code>MERGE</code> tables. (Bug #1846)
<LI>

<code>lower_case_table_names</code> is now forced to 1 if the database directory
is located on a case-insensitive filesystem. (Bug #1812)
<LI>

Symlink creation is now disabled on systems where <code>realpath()</code> doesn't
work. (Before one could use <code>CREATE TABLE .. DATA DIRECTORY=..</code> even if
<code>HAVE_BROKEN_REALPATH</code> was defined. This is now disabled to avoid
problems when running <code>ALTER TABLE</code>).
<LI>

Inserting a negative <code>AUTO_INCREMENT</code> value in a <code>MyISAM</code> table 
no longer updates the <code>AUTO_INCREMENT</code> counter to a big unsigned value.
(Bug #1366)
<LI>

Added four new modes to <code>WEEK(..., mode)</code> function.
See section <A HREF="manual_Functions.html#Date_and_time_functions">12.5  Date and Time Functions</A>.
(Bug #1178)
<LI>

Allow <code>UNION DISTINCT</code> syntax.
<LI>

MySQL now syncs to disk each time <tt>`.frm'</tt> file is created.
<LI>

<code>mysql_server_init()</code> now returns 1 if it can't initialize the
environment. (Previously <code>mysql_server_init()</code> called <code>exit(1)</code>
if it could not create a key with <code>pthread_key_create()</code>. (Bug #2062)
<LI>

Allow spaces in Windows service names.
<LI>

Changed the default Windows service name for <code>mysqld</code> from <code>MySql</code>
to <code>MySQL</code>.
This should not affect usage, because service names are not case sensitive.
<LI>

When you install <code>mysqld</code> as a service on Windows systems, <code>mysqld</code>
will read startup options in option files from the option group with the same
name as the service name.
(Except when the service name is <code>MySQL</code>).
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Sending <code>SIGHUP</code> to <code>mysqld</code> crashed the server if it was running with
<code>--log-bin</code>. (Bug #2045)
<LI>

One can now configure MySQL as a Windows service as a normal
user. (Bug #1802). Thanks to Richard Hansen for fixing this.
<LI>

Database names are now compared in lowercase in <code>ON</code> clauses
when <code>lower_case_table_names</code> is set. (Bug #1736)
<LI>

<code>IGNORE ... LINES</code> option to <code>LOAD DATA INFILE</code> didn't work
when used with fixed length rows. (Bug #1704)
<LI>

Fixed problem with <code>UNIX_TIMESTAMP()</code> for timestamps close to 0.
(Bug #1998)
<LI>

Fixed problem with character values greater than 128 in the <code>QUOTE()</code>
function. (Bug #1868)
<LI>

Fixed searching of <code>TEXT</code> with endspace. (Bug #1651)
<LI>

Fixed caching bug in multiple-table updates where same table was used twice.
(Bug #1711)
<LI>

Fixed directory permissions for the MySQL-server RPM documentation directory.
(Bug #1672)
<LI>

Fixed server crash when updating an <code>ENUM</code> column that is set to the
empty string (for example, with <code>REPLACE()</code>).  (Bug #2023)
<LI>

<code>mysql</code> client program now correctly prints connection identifier
returned by <code>mysql_thread_id()</code> as unsigned integer rather than as signed
integer.  (Bug #1951)
<LI>

<code>FOUND_ROWS()</code> could return incorrect number of rows after a query
with an impossible <code>WHERE</code> condition. (Bug #1468)
<LI>

<code>SHOW DATABASES</code> no longer shows <code>.sym</code> files (on Windows) that
do not point to a valid directory. (Bug #1385)
<LI>

Fixed a possible memory leak on Mac OS X when using the shared
<code>libmysql.so</code> library. (from <code>pthread_key_create()</code>). (Bug #2061)
<LI>

Fixed bug in <code>UNION</code> statement with alias <code>*</code>. (Bug #1249)
<LI>

Fixed a bug in <code>DELETE ... ORDER BY ... LIMIT</code> where the rows where not
deleted in the proper order. (Bug #1024, Bug #1697).
<LI>

Fixed serious problem with multi-threaded programs on Windows that used the
embedded MySQL libraries. (Locks of tables were not handled correctly between
different threads).
<LI>

Code cleanup: Fixed a few code defects (potential memory leaks, null pointer
dereferences, uninitialized variables). Thanks to Reasoning Inc. for
informing us about these findings.
<LI>

Fixed a buffer overflow error that occurred with prepended <samp>`0'</samp> characters
in some columns of type <code>DECIMAL</code>. (Bug #2128)
<LI>

Filesort was never shown in <code>EXPLAIN</code> if query contained an
<code>ORDER BY NULL</code> clause. (Bug #1335)
<LI>

Fixed invalidation of whole query cache on <code>DROP DATABASE</code>. (Bug #1898)
<LI>

Fixed bug in range optimizer that caused wrong results for some unlikely
<code>AND</code>/<code>OR</code> queries. (Bug #1828)
<LI>

Fixed a crash in <code>ORDER BY</code> when ordering by expression and identifier.
(Bug #1945)
<LI>

Fixed a crash in an open <code>HANDLER</code> when an <code>ALTER TABLE</code> was
executed in a different connection. (Bug #1826)
<LI>

Fixed a bug in <code>trunc*</code> operator of full-text search which
sometimes caused MySQL not to find all matched rows.
<LI>

Fixed bug in prepending <samp>`0'</samp> characters to <code>DECIMAL</code> column values.
<LI>

Fixed optimizer bug, introduced in 4.0.16, when <code>REF</code> access plan was
preferred to more efficient <code>RANGE</code> on another column.
<LI>

Fixed problem when installing a MySQL server as a Windows service using a
command of the form <code>mysqld --install mysql --defaults-file=<var>path-to-file</var>.</code>
(Bug #1643)
<LI>

Fixed an incorrect result from a query that uses only <code>const</code> tables
(such as one-row tables) and non-constant expression
(such as <code>RAND()</code>). (Bug #1271)
<LI>

Fixed bug when the optimizer did not take <code>SQL_CALC_FOUND_ROWS</code> into
account if <code>LIMIT</code> clause was present. (Bug #1274)
<LI>

<code>mysqlbinlog</code> now asks for a password at the console when the <code>-p</code>
or <code>--password</code> option is used with no argument. This is consistent with
the way that other clients such <code>mysqladmin</code> and <code>mysqldump</code>
already behave. <strong>Note</strong>: A consequence of this change is that it is no
longer possible to invoke <code>mysqlbinlog</code> as <code>mysqlbinlog -p
pass_val</code> (with a space between the <code>-p</code> option and the following
password value).
(Bug #1595)
<LI>

Fixed bug accidentally introduced in 4.0.16 where the slave SQL thread
deleted its replicated temporary tables when <code>STOP SLAVE</code> was
issued.
<LI>

In a ``chain'' replication setup <code>A-&#62;B-&#62;C</code>, if 2 sessions on A
updated temporary tables of the same name at the same time, the binary log
of <code>B</code> became incorrect, resulting in <code>C</code> becoming confused.
(Bug #1686)
<LI>

In a ``chain'' replication setup <code>A-&#62;B-&#62;C</code>, if <code>STOP SLAVE</code>
was issued on <code>B</code> while it was replicating a temporary table from
<code>A</code>, then when <code>START SLAVE</code> was issued on <code>B</code>, the binary log
of <code>B</code> became incorrect, resulting in <code>C</code> becoming confused.
(Bug #1240)
<LI>

When <code>MASTER_LOG_FILE</code> and <code>MASTER_LOG_POS</code> were not
specified, <code>CHANGE MASTER</code> used the coordinates of the slave I/O
thread to set up replication, which broke replication if the slave SQL
thread lagged behind the slave I/O thread. This caused the slave
SQL thread to lose some events. The new behavior is to use the
coordinates of the slave SQL thread instead.
See section <A HREF="manual_SQL_Syntax.html#CHANGE_MASTER_TO">13.6.2.1  <code>CHANGE MASTER TO</code> Syntax</A>.
(Bug #1870)
<LI>

Now if integer is stored or converted to <code>TIMESTAMP</code> or
<code>DATETIME</code> value checks of year, month, day, hour, minute
and second ranges are performed and numbers representing illegal
timestamps are converted to 0 value. This behavior is consistent 
with manual and with behavior of string to 
<code>TIMESTAMP</code>/<code>DATETIME</code> conversion. (Bug #1448)
<LI>

Fixed bug when <code>BIT_AND()</code> and <code>BIT_OR()</code> group functions 
returned incorrect value if <code>SELECT</code> used a temporary table and
no rows were found. (Bug #1790).
<LI>

<code>BIT_AND()</code> is now unsigned in all contexts. This means that it will
now return 18446744073709551615 (= 0xffffffffffffffff) instead of -1 if
there were no rows in the result.
<LI>

Fixed bug with <code>BIT_AND()</code> still returning signed value for an
empty set in some cases. (Bug #1972)
<LI>

Fixed bug with <code>^</code> (XOR) and <code>&#62;&#62;</code> (bit shift) still returning
signed value in some cases. (Bug #1993)
<LI>

Replication:
a rare race condition in the slave SQL thread, which could lead to a
wrong complain that the relay log is corrupted. (Bug #2011)
<LI>

Replication:
in the slave SQL thread, a multiple-table <code>UPDATE</code> could produce a
wrong complain that some record was not found in one table, if the
<code>UPDATE</code> was preceded by a <code>INSERT ... SELECT</code>. (Bug #1701)
<LI>

Fixed deficiency in MySQL code which is responsible for scanning 
directories. This deficiency caused <code>SHOW TABLE STATUS</code> to be 
very slow when a database contained a large number of tables, even if a single 
particular table were specified. (Bug #1952)
</UL>



<H3><A NAME="News-4.0.16" HREF="manual_toc.html#News-4.0.16">D.3.9  Changes in release 4.0.16 (17 Oct 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Option values in option files now may be quoted. This is useful for values that
contain whitespace or comment characters.
<LI>

Write memory allocation information to error log when doing
<code>mysqladmin debug</code>.  This works only on systems that support the
<code>mallinfo()</code> call (like newer Linux systems).
<LI>

Added the following new system variables to allow more precise memory
allocation: <code>range_alloc_block_size</code>, <code>query_alloc_block_size</code>,
<code>query_prealloc_size</code>, <code>transaction_alloc_block_size</code>, and
<code>transaction_prealloc_size</code>.
<LI>

<code>mysqlbinlog</code> now reads option files. To make this work, you must now
specify <code>--read-from-remote-server</code> when reading binary logs from
a MySQL server. (Note that using a remote server is deprecated and may
disappear in future <code>mysqlbinlog</code> versions).
<LI>

Block <code>SIGPIPE</code> signals also for non-threaded programs. The blocking is moved
from <code>mysql_init()</code> to <code>mysql_server_init()</code>, which is
automatically called on the first call to <code>mysql_init()</code>.
<LI>

Added <code>--libs_r</code> and <code>--include</code> options to <code>mysql_config</code>.
<LI>

New <code>`&#62;</code> prompt for <code>mysql</code>. This prompt is similar to the
<code>'&#62;</code> and <code>"&#62;</code> prompts, but indicates that an identifier
quoted with backticks was begun on an earlier line and the closing backtick
has not yet been seen.
<LI>

Updated <code>mysql_install_db</code> to be able to use the local machine's IP
address instead of the hostname when building the initial grant tables if
<code>skip-name-resolve</code> has been specified. This
option can be helpful on FreeBSD to avoid thread-safety problems with the
FreeBSD resolver libraries. (Thanks to Jeremy Zawodny for the patch.)
<LI>

A documentation change: Added a note that when backing up a slave, it is
necessary also to back up the <tt>`master.info'</tt> and <tt>`relay-log.info'</tt>
files, as well as any <tt>`SQL_LOAD-*'</tt> files located in the directory
specified by the <code>--slave-load-tmpdir</code> option.  All these files are
needed when the slave resumes replication after you restore the slave's data.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed a spurious error <code>ERROR 14: Can't change size of file (Errcode: 2)</code>
on Windows in <code>DELETE FROM <var>tbl_name</var></code> without a <code>WHERE</code> clause or
<code>TRUNCATE TABLE <var>tbl_name</var></code>, when <var>tbl_name</var> is a <code>MyISAM</code>
table. (Bug #1397)
<LI>

Fixed a bug that resulted in <code>thr_alarm queue is full</code> warnings after
increasing the <code>max_connections</code> variable with <code>SET GLOBAL</code>.
(Bug #1435)
<LI>

Made <code>LOCK TABLES</code> to work when <code>Lock_tables_priv</code> is granted on the
database level and <code>Select_priv</code> is granted on the table level.
<LI>

Fixed crash of <code>FLUSH QUERY CACHE</code> on queries that use same table
several times (Bug #988).
<LI>

Fixed core dump bug when setting an enum system variable (such as
<code>SQL_WARNINGS</code>) to <code>NULL</code>.
<LI>

Extended the default timeout value for Windows clients from 30 seconds
to 1 year.  (The timeout that was added in MySQL 4.0.15 was way too
short).  This fixes a bug that caused <code>ERROR 2013: Lost connection
to MySQL server during query</code> for queries that lasted longer than 30 seconds,
if the client didn't specify a limit with <code>mysql_options()</code>. Users of
4.0.15 on Windows should upgrade to avoid this problem.
<LI>

More ``out of memory'' checking in range optimizer.
<LI>

Fixed and documented a problem when setting and using a user variable within the
same <code>SELECT</code> statement. (Bug #1194).
<LI>

Fixed bug in overrun check for <code>BLOB</code> values with compressed tables.
This was a bug introduced in 4.0.14.  It caused MySQL to regard some
correct tables containing <code>BLOB</code> values as corrupted.
(Bug #770, Bug #1304, and maybe Bug #1295)
<LI>

<code>SHOW GRANTS</code> showed <code>USAGE</code> instead of the real column-level
privileges when no table-level privileges were given.
<LI>

When copying a database from the master, <code>LOAD DATA FROM
MASTER</code> dropped the corresponding database on the slave, thus erroneously
dropping tables that had no counterpart on the master and tables that
may have been excluded from replication using <code>--replicate-*-table</code>
rules. Now <code>LOAD DATA FROM MASTER</code> no longer drops the database.
Instead, it drops only the tables that have a counterpart on the master
and that match the <code>--replicate-*-table</code>
rules. <code>--replicate-*-db</code> rules can still be used to include or exclude a
database as a whole from <code>LOAD DATA FROM MASTER</code>. A database will
also be included or excluded as a whole if there are some rules like
<code>--replicate-wild-do-table=db1.%</code> or
<code>--replicate-wild-ignore-table=db1.%</code>, as is already the case for
<code>CREATE DATABASE</code> and <code>DROP DATABASE</code> in replication. (Bug
#1248)
<LI>

Fixed a bug where
<code>mysqlbinlog</code> crashed with a segmentation fault when used with the
<code>-h</code> or <code>--host</code> option. (Bug #1258)
<LI>

Fixed a bug where <code>mysqlbinlog</code> crashed with a segmentation fault
when used on a binary log containing only final events for <code>LOAD
DATA</code>. (Bug #1340)
<LI>

<code>mysqlbinlog</code> will not reuse temporary filenames from previous runs.
Previously <code>mysqlbinlog</code> failed if was used several times on the same
binary log file that contained a <code>LOAD DATA</code> command.
<LI>

Fixed compilation problem when compiling with OpenSSL 0.9.7 with
disabled old DES support (If <code>OPENSSL_DISABLE_OLD_DES_SUPPORT</code> 
option was enabled).
<LI>

Fixed a bug when two (or more) MySQL servers were running on the same machine,
and they were both slaves, and at least one of them was replicating some
<code>LOAD DATA INFILE</code> command from its master.
The bug was that one slave MySQL server sometimes
deleted the <tt>`SQL_LOAD-*'</tt> files (used for replication of
<code>LOAD DATA INFILE</code> and located in the <code>slave-load-tmpdir</code> directory,
which defaults to <code>tmpdir</code>) belonging to the other slave MySQL server of
this machine, if these slaves had the same <code>slave-load-tmpdir</code> directory.
When that happened, the other slave could not replicate
<code>LOAD DATA INFILE</code> and complained about not being able to open some
<code>SQL_LOAD-*</code> file. (Bug #1357)
<LI>

If <code>LOAD DATA INFILE</code> failed for a small file, the master forgot to
write a marker (a <code>Delete_file</code> event) in its binary log, so the slave
could not delete 2 files (<tt>`SQL_LOAD-*.info'</tt> and
<tt>`SQL_LOAD-*.data'</tt> from its <code>tmpdir</code>. (Bug #1391)
<LI>

On Windows, the slave forgot to delete a <code>SQL_LOAD-*.info</code>
file from <code>tmpdir</code> after successfully replicating a <code>LOAD DATA
INFILE</code> command. (Bug #1392)
<LI>

When a connection terminates, MySQL writes <code>DROP TEMPORARY TABLE</code>
statements to the binary log for all temporary tables which the
connection had not explicitly dropped. MySQL forgot to use backticks to quote
the database and table names in the statement. (Bug #1345)
<LI>

On some 64-bit machines (some HP-UX and Solaris machines), a slave
installed with the 64-bit MySQL binary could not connect to its master
(it connected to itself instead). (Bug #1256, Bug #1381)
<LI>

Code was introduced in MySQL 4.0.15 for the slave to detect that the master
had died while writing a transaction to its binary log. This code reported an
error in a legal situation: When the slave I/O thread was stopped while
copying a transaction to the relay log, the slave SQL thread would later
pretend that it found an unfinished transaction. (Bug #1475)
</UL>



<H3><A NAME="News-4.0.15" HREF="manual_toc.html#News-4.0.15">D.3.10  Changes in release 4.0.15 (03 Sep 2003)</A></H3>

<P>
<strong>IMPORTANT</strong>:

</P>
<P>
If you are using this release on Windows, you should upgrade at least your
clients (any program that uses <code>libmysql.lib</code>) to 4.0.16 or above.  This
is because the 4.0.15 release had a bug in the Windows client library that
causes Windows clients using the library to die with a <code>Lost connection
to MySQL server during query</code> error for queries that take more than 30
seconds.  This problem is specific to Windows; clients on other platforms are
unaffected.

</P>
<P>
Functionality added or changed:

<UL>
<LI>

<code>mysqldump</code> now correctly quotes all identifiers when communicating
with the server. This assures that during the dump process, <code>mysqldump</code>
will never send queries to the server that result in a syntax error.
This problem is <strong>not</strong> related to the
<code>mysqldump</code> program's output, which was not changed. (Bug #1148)
<LI>

Change result set metadata information so that <code>MIN()</code> and <code>MAX()</code>
report that they can return <code>NULL</code> (this is true because an
empty set will return <code>NULL</code>). (Bug #324)
<LI>

Produce an error message on Windows if a second <code>mysqld</code> server is
started on the same TCP/IP port as an already running <code>mysqld</code> server.
<LI>

The <code>mysqld</code> system variables <code>wait_timeout</code>,
<code>net_read_timeout</code>, and <code>net_write_timeout</code> now work on Windows.
One can now also set timeouts for read and writes in Windows clients with
<code>mysql_options()</code>.
<LI>

Added option <code>--sql-mode=NO_DIR_IN_CREATE</code> to make it possible for
slaves to ignore <code>INDEX DIRECTORY</code> and
<code>DATA DIRECTORY</code> options given to <code>CREATE TABLE</code>.
When this is mode is on, <code>SHOW CREATE TABLE</code> will not show the
given directories.
<LI>

<code>SHOW CREATE TABLE</code> now shows the <code>INDEX DIRECTORY</code> and
<code>DATA DIRECTORY</code> options, if they were specified when the table was
created.
<LI>

The <code>open_files_limit</code> system variable now shows the real open files limit.
<LI>

<code>MATCH ... AGAINST()</code> in natural language mode
now treats words that are present
in more than 2,000,000 rows as stopwords.
<LI>

The Mac OS X installation disk images now include an additional
<tt>`MySQLStartupItem.pkg'</tt> package that enables the automatic
startup of MySQL on system startup.
See section <A HREF="manual_Installing.html#Mac_OS_X_installation">2.5  Installing MySQL on Mac OS X</A>.
<LI>

Most of the documentation included in the binary tarball distributions
(<code>.tar.gz</code>) has been moved into a subdirectory <code>docs</code>.
See section <A HREF="manual_Installing.html#Installation_layouts">2.1.5  Installation Layouts</A>.
<LI>

The manual is now included as an additional <code>info</code> file in the binary
distributions. (Bug #1019)
<LI>

The binary distributions now include the embedded server library 
(<code>libmysqld.a</code>) by default. Due to a linking problem with non-gcc
compilers, it was not included in all packages of the initial 4.0.15
release. The affected packages were rebuilt and released as 4.0.15a.
See section <A HREF="manual_Introduction.html#Nutshell_Embedded_MySQL">1.3.1.2  The Embedded MySQL Server</A>.
<LI>

MySQL can now use range optimization for <code>BETWEEN</code> with
non-constant limits. (Bug #991)
<LI>

Replication error messages now include the default database, so that
users can check which database the failing query was run for.
<LI>

A documentation change: Added a paragraph about how the
<code>binlog-do-db</code> and <code>binlog-ignore-db</code> options are tested
against the database on the master (see section <A HREF="manual_MySQL_Database_Administration.html#Binary_log">5.9.4  The Binary Log</A>), and a
paragraph about how <code>--replicate-do-db</code>, <code>--replicate-do-table</code>
and analogous options are tested against the database and tables on the
slave (see section <A HREF="manual_Replication.html#Replication_Options">6.8  Replication Startup Options</A>).
<LI>

Now the slave does not replicate <code>SET PASSWORD</code>
if it is configured to exclude the <code>mysql</code> database from
replication (using for example
<code>--replicate-wild-ignore-table=mysql.%</code>). This was already the
case for <code>GRANT</code> and <code>REVOKE</code> since version 4.0.13 (although
there was Bug #980 in 4.0.13 &#38; 4.0.14, which has been fixed in
4.0.15).
<LI>

Rewrote the information shown in the <code>State</code> column of <code>SHOW
PROCESSLIST</code> for replication threads and for <code>MASTER_POS_WAIT()</code>
and added the most common states for these threads to the
documentation, see section <A HREF="manual_Replication.html#Replication_Implementation_Details">6.3  Replication Implementation Details</A>.
<LI>

Added a test in replication to detect the case where the master died
in the middle of writing a transaction to the binary log; such unfinished
transactions now trigger an error message on the slave.
<LI>

A <code>GRANT</code> command that creates an anonymous user
(that is, an account with an empty username) no longer requires
<code>FLUSH PRIVILEGES</code> for the account to be recognized by the server.
(Bug #473)
<LI>

<code>CHANGE MASTER</code> now flushes <tt>`relay-log.info'</tt>. Previously
this was deferred to the next run of <code>START SLAVE</code>, so if
<code>mysqld</code> was shutdown on the slave after <code>CHANGE MASTER</code>
without having run <code>START SLAVE</code>, the relay log's name and
position were lost. At restart they were reloaded from
<tt>`relay-log.info'</tt>, thus reverting to their old (incorrect) values from
before <code>CHANGE MASTER</code> and leading to error messages 
(as the old relay log did not exist any more) and the slave threads
refusing to start. (Bug #858)
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed buffer overflow in password handling which could potentially be
exploited by MySQL users with <code>ALTER</code> privilege on the
<code>mysql.user</code> table to execute random code or to gain shell access with
the UID of the <code>mysqld</code> process (thanks to Jedi/Sector One for spotting and
reporting this bug).
<LI>

Fixed server crash on <code>FORCE INDEX</code> in a query that contained
"Range checked for each record" in the <code>EXPLAIN</code> output. (Bug #1172)
<LI>

Fixed table/column grant handling: The proper sort order (from most specific
to less specific, see section <A HREF="manual_MySQL_Database_Administration.html#Request_access">5.5.6  Access Control, Stage 2: Request Verification</A>) was not honored. (Bug #928)
<LI>

Fixed rare bug in <code>MYISAM</code> introduced in 4.0.3 where the index file header
was not updated directly after an <code>UPDATE</code> of split dynamic rows.
The symptom was that the table had a corrupted delete-link if <code>mysqld</code>
was shut down or the table was checked directly after the update.
<LI>

Fixed <code>Can't unlock file</code> error when running
<code>myisamchk --sort-index</code> on Windows. (Bug #1119)
<LI>

Fixed possible deadlock when changing <code>key_buffer_size</code> while
the key cache was actively used. (Bug #1088)
<LI>

Fixed overflow bug in <code>MyISAM</code> and <code>ISAM</code> when a row is updated
in a table with a large number of columns and at least one <code>BLOB/TEXT</code>
column.
<LI>

Fixed incorrect result when doing <code>UNION</code> and <code>LIMIT #,#</code> when
braces were not used around the <code>SELECT</code> parts.
<LI>

Fixed incorrect result when doing <code>UNION</code> and <code>ORDER BY .. LIMIT #</code>
when one didn't use braces around the <code>SELECT</code> parts.
<LI>

Fixed problem with <code>SELECT SQL_CALC_FOUND_ROWS ... UNION ALL ... LIMIT #</code>
where <code>FOUND_ROWS()</code> returned incorrect number of rows.
<LI>

Fixed unlikely stack bug when having a BIG expression of
type <code>1+1-1+1-1...</code> in certain combinations. (Bug #871)
<LI>

Fixed the bug that sometimes prevented a table with a <code>FULLTEXT</code> index
from being marked as "analyzed".
<LI>

Fixed MySQL so that the column length (in C API) for the second column in
<code>SHOW CREATE TABLE</code> is always larger than the data length.
The only known application that was affected by the old behavior was
Borland dbExpress, which truncated the output from the command.
(Bug #1064)
<LI>

Fixed crash in comparisons of strings using the <code>tis620</code> character
set. (Bug #1116)
<LI>

Fixed <code>ISAM</code> bug in <code>MAX()</code> optimization.
<LI>

<code>myisamchk --sort-records=N</code> no longer marks table as crashed if
sorting failed because of an inappropriate key. (Bug #892)
<LI>

Fixed a minor bug in <code>MyISAM</code> compressed table handling that sometimes
made it impossible to repair compressed table in "Repair by sort" mode.
"Repair with keycache" (<code>myisamchk --safe-recover</code>) worked, though.
(Bug #1015)
<LI>

Fixed bug in propagating the version number to the manual included in
the distribution files. (Bug #1020)
<LI>

Fixed key sorting problem (a <code>PRIMARY</code> key declared for a column
that is not explicitly marked <code>NOT NULL</code> was sorted after a
<code>UNIQUE</code> key for a <code>NOT NULL</code> column).
<LI>

Fixed the result of <code>INTERVAL</code> when applied to a <code>DATE</code> value.
(Bug #792)
<LI>

Fixed compiling of the embedded server library in the RPM spec file.
(Bug #959)
<LI>

Added some missing files to the RPM spec file and fixed some RPM building
errors that occurred on Red Hat Linux 9. (Bug #998)
<LI>

Fixed incorrect <code>XOR</code> evaluation in <code>WHERE</code> clause. (Bug #992)
<LI>

Fixed bug with processing in query cache merged tables constructed
from more then 255 tables. (Bug #930) 
<LI>

Fixed incorrect results from outer join query (for example, <code>LEFT JOIN</code>)
when <code>ON</code> condition is always false, and range search in used.  
(Bug #926)
<LI>

Fixed a bug causing incorrect results from <code>MATCH ... AGAINST()</code> in some
joins. (Bug #942)
<LI>

<code>MERGE</code> tables do not ignore <code>Using index</code> (from <code>EXPLAIN</code> output)
anymore.
<LI>

Fixed a bug that prevented an empty table from being marked as "analyzed".
(Bug #937)
<LI>

Fixed <code>myisamchk --sort-records</code> crash when used on compressed table.
<LI>

Fixed slow (as compared to 3.23)
<code>ALTER TABLE</code> and related commands such as <code>CREATE INDEX</code>.
(Bug #712)
<LI>

Fixed segmentation fault resulting from <code>LOAD DATA FROM MASTER</code> when
the master was running without the <code>--log-bin</code> option. (Bug #934)
<LI>

Fixed a security bug: A server compiled without SSL support still allowed
connections by users who had the <code>REQUIRE SSL</code> option specified for
their accounts.
<LI>

Fixed a random bug: Sometimes the slave would replicate <code>GRANT</code>
or <code>REVOKE</code> queries even if it was configured to exclude the
<code>mysql</code> database from replication (for example, using
<code>--replicate-wild-ignore-table=mysql.%</code>). (Bug #980)
<LI>

The <code>Last_Errno</code> and <code>Last_Error</code> fields in the output of
<code>SHOW SLAVE STATUS</code> are now cleared by <code>CHANGE MASTER</code> and
when the slave SQL thread starts. (Bug #986)
<LI>

A documentation mistake: It said that <code>RESET SLAVE</code> does not change
connection information  (master host, port, user, and
password), whereas it does. The statement resets these to the startup options
(<code>master-host</code> etc) if there were some. (Bug #985)
<LI>

<code>SHOW SLAVE STATUS</code> now shows correct information (master host,
port, user, and password) after <code>RESET SLAVE</code>
(that is, it shows the new values, which are copied from the startup
options if there were some). (Bug #985)
<LI>

Disabled propagation of the original master's log position for events because
this caused unexpected values for <code>Exec_Master_Log_Pos</code> and problems
with <code>MASTER_POS_WAIT()</code> in A-&#62;B-&#62;C replication setup. (Bug #1086)
<LI>

Fixed a segfault in <code>mysqlbinlog</code> when
<code>--position=x</code> was used with <code>x</code> being between a
<code>Create_file</code> event and its fellow <code>Append_block</code>,
<code>Exec_load</code> or <code>Delete_file</code> events. (Bug #1091)
<LI>

<code>mysqlbinlog</code> printed superfluous warnings when using
<code>--database</code>, which caused syntax errors when piped to
<code>mysql</code>. (Bug #1092)
<LI>

Made <code>mysqlbinlog --database</code> filter <code>LOAD DATA INFILE</code> too
(previously, it filtered all queries except <code>LOAD DATA
INFILE</code>). (Bug #1093)
<LI>

<code>mysqlbinlog</code> in some cases forgot to put a leading <code>'#'</code> in
front of the original <code>LOAD DATA INFILE</code> (this command is
displayed only for information, not to be run; it is later reworked to
<code>LOAD DATA LOCAL</code> with a different filename, for execution by
<code>mysql</code>). (Bug #1096)
<LI>

<code>binlog-do-db</code> and <code>binlog-ignore-db</code> incorrectly filtered
<code>LOAD DATA INFILE</code> (it was half-written to the binary log). This
resulted in a corrupted binary log, which could cause the slave to
stop with an error. (Bug #1100)
<LI>

When, in a transaction, a transactional table (such as an <code>InnoDB</code> table)
was updated, and later in the same transaction a
non-transactional table (such as a <code>MyISAM</code> table) was
updated using the updated content of the transactional table
(with <code>INSERT ... SELECT</code> for example), the queries were written
to the binary log in an incorrect order. (Bug #873)
<LI>

When, in a transaction, <code>INSERT ... SELECT</code> updated a
non-transactional table, and <code>ROLLBACK</code> was issued, no error was
returned to the client. Now the client is warned that some changes
could not be rolled back, as this was already the case for normal
<code>INSERT</code>. (Bug #1113)
<LI>

Fixed a potential bug: When <code>STOP SLAVE</code> was run while the slave
SQL thread was in the middle of a transaction, and then <code>CHANGE
MASTER</code> was used to point the slave to some non-transactional
statement, the slave SQL thread could get confused (because it would
still think, from the past, that it was in a transaction).
</UL>



<H3><A NAME="News-4.0.14" HREF="manual_toc.html#News-4.0.14">D.3.11  Changes in release 4.0.14 (18 Jul 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Added <code>default_week_format</code> system variable. The value is used as the
default mode for the <code>WEEK()</code> function.
<LI>

<code>mysqld</code> now reads an additional option file group having a name
corresponding to the server's release series:
<code>[mysqld-4.0]</code> for 4.0.x servers, <code>[mysqld-4.1]</code> for 4.1.x servers,
and so forth. This allows options to be specified on a series-specific basis.
<LI>

The <code>CONCAT_WS()</code> function no longer skips empty strings. (Bug #586).
<LI>

<code>InnoDB</code> now supports indexing a prefix of a column. This means, in
particular, that <code>BLOB</code> and <code>TEXT</code> columns can be indexed in
<code>InnoDB</code> tables, which was not possible before.
<LI>

A documentation change: Function <code>INTERVAL(NULL, ...)</code> returns <code>-1</code>.
<LI>

Enabled <code>INSERT</code> from <code>SELECT</code> when the table into which the records
are inserted is also a table listed in the <code>SELECT</code>.
<LI>

Allow <code>CREATE TABLE</code> and <code>INSERT</code> from any <code>UNION</code>.
<LI>

The <code>SQL_CALC_FOUND_ROWS</code> option now always returns the total number 
of rows for any <code>UNION</code>.
<LI>

Removed <code>--table</code> option from <code>mysqlbinlog</code> 
to avoid repeating <code>mysqldump</code> functionality.
<LI>

Comment lines in option files can now start from the middle of a line, too
(like <code>basedir=c:\mysql # installation directory</code>).
<LI>

Changed optimizer slightly to prefer index lookups over full table scans
in some boundary cases.
<LI>

Added thread-specific <code>max_seeks_for_key</code> variable that can
be used to force the optimizer to use keys instead of table scans
even if the cardinality of the index is low.
<LI>

Added optimization that converts <code>LEFT JOIN</code> to normal join in
some cases.
<LI>

A documentation change: added a paragraph about failover in
replication (how to use a surviving slave as the new master, how to
resume to the original setup). See section <A HREF="manual_Replication.html#Replication_FAQ">6.9  Replication FAQ</A>.
<LI>

A documentation change: added warning notes about safe use of the
<code>CHANGE MASTER</code> command. See section <A HREF="manual_SQL_Syntax.html#CHANGE_MASTER_TO">13.6.2.1  <code>CHANGE MASTER TO</code> Syntax</A>.
<LI>

MySQL now issues a warning (not an error, as in 4.0.13)
when it opens a table that was created with MySQL 4.1.
<LI>

Added <code>--nice</code> option to <code>mysqld_safe</code> to allow setting the
niceness of the <code>mysqld</code> process. (Thanks to Christian Hammers for
providing the initial patch.) (Bug #627)
<LI>

Added <code>--read-only</code> option to cause <code>mysqld</code> to allow no updates
except from slave threads or from users with the <code>SUPER</code> privilege.
(Original patch from Markus Benning).
<LI>

<code>SHOW BINLOG EVENTS FROM x</code> where <code>x</code> is less than 4 now
silently converts <code>x</code> to 4 instead of printing an error. The same change
was done for <code>CHANGE MASTER TO MASTER_LOG_POS=x</code> and 
<code>CHANGE MASTER TO RELAY_LOG_POS=x</code>.
<LI>

<code>mysqld</code> now only adds an interrupt handler for the <code>SIGINT</code> signal
if you start it with the new <code>--gdb</code> option.  This is because some
MySQL users encountered strange problems when they accidentally sent <code>SIGINT</code> to
<code>mysqld</code> threads.
<LI>

<code>RESET SLAVE</code> now clears the <code>Last_Errno</code> and
<code>Last_Error</code> fields in the output of <code>SHOW SLAVE STATUS</code>.
<LI>

Added <code>max_relay_log_size</code> variable; the relay log will be rotated
automatically when its size exceeds <code>max_relay_log_size</code>. But if
<code>max_relay_log_size</code> is 0 (the default), <code>max_binlog_size</code>
will be used (as in older versions). <code>max_binlog_size</code> still
applies to binary logs in any case.
<LI>

<code>FLUSH LOGS</code> now rotates relay logs in addition to the other types of
logs it already rotated.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Comparison/sorting for <code>latin1_de</code> character set was rewritten.
The old algorithm could not handle cases like <code>"s&auml;" &#62; "&szlig;a"</code>.
See section <A HREF="manual_MySQL_Database_Administration.html#German_character_set">5.8.1.1  Using the German Character Set</A>. In rare cases it resulted in table
corruption.
<LI>

Fixed a problem with the password prompt on Windows. (Bug #683)
<LI>

<code>ALTER TABLE ... UNION=(...)</code> for <code>MERGE</code> table is now allowed
even if some underlying <code>MyISAM</code> tables are read-only. (Bug #702)
<LI>

Fixed a problem with <code>CREATE TABLE t1 SELECT x'41'</code>. (Bug #801)
<LI>

Removed some incorrect lock warnings from the error log.
<LI>

Fixed memory overrun when doing <code>REPAIR TABLE</code> on a table with a
multiple-part auto_increment key where one part was a packed <code>CHAR</code>.
<LI>

Fixed a probable race condition in the replication code that could
potentially lead to <code>INSERT</code> statements not being replicated in the
event of a <code>FLUSH LOGS</code> command or when the binary log exceeds
<code>max_binlog_size</code>. (Bug #791)
<LI>

Fixed a crashing bug in <code>INTERVAL</code> and <code>GROUP BY</code> or 
<code>DISTINCT</code>. (Bug #807)
<LI>

Fixed bug in <code>mysqlhotcopy</code> so it actually aborts for unsuccessful
table copying operations.  Fixed another bug so that it succeeds
when there are thousands of tables to copy. (Bug #812)
<LI>

Fixed problem with <code>mysqlhotcopy</code> failing to read options from option
files. (Bug #808)
<LI>

Fixed bugs in optimizer that sometimes prevented MySQL from using
<code>FULLTEXT</code> indexes even though it was possible (for example, in
<code>SELECT * FROM t1 WHERE MATCH a,b AGAINST("index") &#62; 0</code>).
<LI>

Fixed a bug with ``table is full'' in <code>UNION</code> operations.
<LI>

Fixed a security problem that enabled users with no privileges to obtain
information on the list of existing databases by using <code>SHOW TABLES</code> and
similar commands.
<LI>

Fixed a stack problem on UnixWare/OpenUnix.
<LI>

Fixed a configuration problem on UnixWare/OpenUNIX and OpenServer.
<LI>

Fixed a stack overflow problem in password verification.
<LI>

Fixed a problem with <code>max_user_connections</code>.
<LI>

<code>HANDLER</code> without an index now works properly when a table has deleted 
rows. (Bug #787)
<LI>

Fixed a bug with <code>LOAD DATA</code> in <code>mysqlbinlog</code>. (Bug #670)
<LI>

Fixed that <code>SET CHARACTER SET DEFAULT</code> works. (Bug #462)
<LI>

Fixed <code>MERGE</code> table behavior in <code>ORDER BY ... DESC</code> queries.
(Bug #515)
<LI>

Fixed server crash on <code>PURGE MASTER LOGS</code> or <code>SHOW MASTER LOGS</code>
when the binary log is off. (Bug #733)
<LI>

Fixed password-checking problem on Windows. (Bug #464)
<LI>

Fixed the bug in comparison of a <code>DATETIME</code> column and an integer
constant.  (Bug #504)
<LI>

Fixed remote mode of <code>mysqlbinlog</code>. (Bug #672)
<LI>

Fixed <code>ERROR 1105: Unknown error</code> that occurred for some <code>SELECT</code>
queries, where a column that was declared as <code>NOT NULL</code> was compared
with an expression that took <code>NULL</code> value.
<LI>

Changed timeout in <code>mysql_real_connect()</code> to use <code>poll()</code> instead of
<code>select()</code> to work around problem with many open files in the client.
<LI>

Fixed incorrect results from <code>MATCH ... AGAINST</code> used with a
<code>LEFT JOIN</code> query.
<LI>

Fixed a bug that limited the maximum value for <code>mysqld</code> variables
to 4294967295 when they are specified on the command line.
<LI>

Fixed a bug that sometimes caused spurious ``Access denied'' errors
in <code>HANDLER ... READ</code> statements, when a table is referenced
via an alias.
<LI>

Fixed portability problem with <code>safe_malloc</code>, which caused MySQL to
give "Freeing wrong aligned pointer" errors on SCO 3.2.
<LI>

<code>ALTER TABLE ... ENABLE/DISABLE KEYS</code> could cause a core dump when
done after an <code>INSERT DELAYED</code> statement on the same table.
<LI>

Fixed problem with conversion of localtime to GMT where some times resulted in
different (but correct) timestamps. Now MySQL should use the smallest
possible timestamp value in this case.  (Bug #316)
<LI>

Very small query cache sizes could crash <code>mysqld</code>. (Bug #549)
<LI>

Fixed a bug (accidentally introduced by us but present only in version 4.0.13)
that made <code>INSERT ... SELECT</code> into an <code>AUTO_INCREMENT</code> column
not replicate well. This bug is in the master, not in the slave.
(Bug #490)
<LI>

Fixed a bug: When an <code>INSERT ... SELECT</code> statement inserted rows into a
non-transactional table, but failed at some point (for example, due to
a ``Duplicate key'' error), the query was not written to the binary log.
Now it is written to the binary log, with its error code, as all other
queries are. About the <code>slave-skip-errors</code> option for how to
handle partially completed queries in the slave, see section <A HREF="manual_Replication.html#Replication_Options">6.8  Replication Startup Options</A>. (Bug #491)
<LI>

<code>SET FOREIGN_KEY_CHECKS=0</code> was not replicated properly.
The fix probably will not be backported to 3.23.
<LI>

On a slave, <code>LOAD DATA INFILE</code> which had no <code>IGNORE</code> or
<code>REPLACE</code> clause on the master, was replicated with <code>IGNORE</code>.
While this is not a problem if the master and slave data are identical
(a <code>LOAD</code> that produces no duplicate conflicts on the master will
produce none on the slave anyway), which is true in normal operation, it
is better for debugging not to silently add the <code>IGNORE</code>. That way,
you can get an error message on the slave and discover that for some
reason, the data on master and slave are different and investigate why.
(Bug #571)
<LI>

On a slave, <code>LOAD DATA INFILE</code> printed an incomplete ``Duplicate entry
'%-.64s' for key %d''' message (the key name and value were not mentioned)
in case of duplicate conflict (which does not happen in normal operation).
(Bug #573)
<LI>

When using a slave compiled with <code>--debug</code>, <code>CHANGE MASTER
TO RELAY_LOG_POS</code> could cause a debug assertion failure. (Bug #576)
<LI>

When doing a <code>LOCK TABLES WRITE</code> on an <code>InnoDB</code> table, commit could
not happen, if the query was not written to the binary log (for example, if
<code>--log-bin</code> was not used, or <code>binlog-ignore-db</code> was
used). (Bug #578)
<LI>

If a 3.23 master had open
temporary tables that had been replicated to a 4.0 slave, and
the binary log got rotated, these temporary tables were immediately 
dropped by the slave (which caused problems if the master used them
subsequently). This bug had been fixed in 4.0.13, but in a manner
which caused an unlikely inconvenience: If the 3.23 master died
brutally (power failure), without having enough time to automatically
write <code>DROP TABLE</code> statements to its binary log, then the 4.0.13
slave would not notice the temporary tables have to be dropped, until the
slave <code>mysqld</code> server is restarted. This minor inconvenience is
fixed in 3.23.57 and 4.0.14 (meaning the master must be upgraded to
3.23.57 and the slave to 4.0.14 to remove the inconvenience). (Bug #254)
<LI>

If <code>MASTER_POS_WAIT()</code> was waiting, and the slave was idle, and
the slave SQL thread terminated, <code>MASTER_POS_WAIT()</code> would wait
forever. Now when the slave SQL thread terminates,
<code>MASTER_POS_WAIT()</code> immediately returns <code>NULL</code> (``slave
stopped''). (Bug #651)
<LI>

After <code>RESET SLAVE; START SLAVE;</code>, the <code>Relay_Log_Space</code> value
displayed by <code>SHOW SLAVE STATUS</code> was too big by four bytes. (Bug #763)
<LI>

If a query was ignored on the slave (because of
<code>--replicate-ignore-table</code> and other similar rules), the slave
still checked if the query got the same error code (0, no error) as on
the master. So if the master had an error on the query (for example,
``Duplicate entry'' in a multiple-row insert), then the slave stopped
and warned that the error codes didn't match. (Bug #797)
</UL>



<H3><A NAME="News-4.0.13" HREF="manual_toc.html#News-4.0.13">D.3.12  Changes in release 4.0.13 (16 May 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<code>PRIMARY KEY</code> now implies <code>NOT NULL</code>. (Bug #390)
<LI>

The Windows binary packages are now compiled with
<code>--enable-local-infile</code> to match the Unix build configuration.
<LI>

Removed timing of tests from <code>mysql-test-run</code>. <code>time</code> does not
accept all required parameters on many platforms (for example, QNX) and timing
the tests is not really required (it's not a benchmark anyway).
<LI>

<code>SHOW MASTER STATUS</code> and <code>SHOW SLAVE STATUS</code> required the
<code>SUPER</code> privilege; now they accept <code>REPLICATION CLIENT</code> as well.
(Bug #343)
<LI>

Added multi-threaded <code>MyISAM</code> repair optimization and
<code>myisam_repair_threads</code> variable to enable it.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_system_variables">5.2.3  Server System Variables</A>.
<LI>

Added <code>innodb_max_dirty_pages_pct</code> variable which controls amount of
dirty pages allowed in <code>InnoDB</code> buffer pool.
<LI>

<code>CURRENT_USER()</code> and <code>Access denied</code> error messages now report the
hostname exactly as it was specified in the <code>GRANT</code> command.
<LI>

Removed benchmark results from the source and binary distributions. They
are still available in the BK source tree, though.
<LI>

<code>InnoDB</code> tables now support <code>ANALYZE TABLE</code>.
<LI>

MySQL now issues an error when it opens a table that was created with
MySQL 4.1.
<LI>

Option <code>--new</code> now changes binary items (<code>0xFFDF</code>) to be
treated as binary strings instead of numbers by default. This fixes some
problems with character sets where it's convenient to input the string
as a binary item.  After this change you have to convert the binary
string to <code>INTEGER</code> with a <code>CAST</code> if you want to compare two
binary items with each other and know which one is bigger than the other.
<code>SELECT CAST(0xfeff AS UNSIGNED) &#60; CAST(0xff AS UNSIGNED)</code>.
This will be the default behavior in MySQL 4.1. (Bug #152)
<LI>

Enabled <code>delayed_insert_timeout</code> on Linux (most modern <code>glibc</code>
libraries have a fixed <code>pthread_cond_timedwait()</code>). (Bug #211)
<LI>

Don't create more insert delayed threads than given by
<code>max_delayed_threads</code>. (Bug #211)
<LI>

Changed <code>UPDATE ... LIMIT</code> to apply the limit to rows that were matched,
whether or not they actually were changed. Previously the limit was applied
as a restriction on the number of rows changed.
<LI>

Tuned optimizer to favor clustered index over table scan.
<LI>

<code>BIT_AND()</code> and <code>BIT_OR()</code> now return an unsigned 64-bit value.
<LI>

Added warnings to error log of why a secure connection failed (when
running with <code>--log-warnings</code>).
<LI>

Deprecated options <code>--skip-symlink</code> and <code>--use-symbolic-links</code> and
replaced these with <code>--symbolic-links</code>.
<LI>

The default option for <code>innodb_flush_log_at_trx_commit</code> was changed
from 0 to 1 to make <code>InnoDB</code> tables ACID by default.
See section <A HREF="manual_InnoDB.html#InnoDB_start">15.5  <code>InnoDB</code> Startup Options</A>.
<LI>

Added a feature to <code>SHOW KEYS</code> to display keys that are disabled by 
<code>ALTER TABLE DISABLE KEYS</code> command.
<LI>

When using a non-existing table type with <code>CREATE TABLE</code>, first
try if the default table type exists before falling back to <code>MyISAM</code>.
<LI>

Added <code>MEMORY</code> as an alias for <code>HEAP</code>.
<LI>

Renamed function <code>rnd</code> to <code>my_rnd</code> as the name was too generic
and is an exported symbol in <code>libmysqlclient</code> (thanks to Dennis Haney
for the initial patch).
<LI>

Portability fix: renamed <tt>`include/dbug.h'</tt> to
<tt>`include/my_dbug.h'</tt>.
<LI>

<code>mysqldump</code> no longer silently deletes the binary logs when invoked with
the <code>--master-data</code> or <code>--first-slave</code> option;
while this behavior was convenient for some
users, others may suffer from it. Now you must explicitly ask for binary
logs to be deleted by using the new <code>--delete-master-logs</code> option.
<LI>

If the slave is configured (using for example
<code>--replicate-wild-ignore-table=mysql.%</code>)
to exclude <code>mysql.user</code>, <code>mysql.host</code>, <code>mysql.db</code>,
<code>mysql.tables_priv</code> and <code>mysql.columns_priv</code> from
replication, then <code>GRANT</code> and <code>REVOKE</code> will not be replicated.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Logged <code>Access denied</code> error message had incorrect <code>Using password</code>
value. (Bug #398)
<LI>

Fixed bug with <code>NATURAL LEFT JOIN</code>, <code>NATURAL RIGHT JOIN</code> and
<code>RIGHT JOIN</code> when using many joined tables.  The problem was that
the <code>JOIN</code> method was not always associated with the tables
surrounding the <code>JOIN</code> method.  If you have a query that uses many
<code>RIGHT JOIN</code> or <code>NATURAL ... JOINS</code> you should verify that they
work as you expected after upgrading MySQL to this version. (Bug #291)
<LI>

Fixed <code>mysql</code> parser not to erroneously interpret <samp>`''</samp> or <samp>`"'</samp>
characters within <code>/* ... */</code> comment as beginning a quoted string.
<LI>

<code>mysql</code> command-line client no longer looks for <code>\*</code> commands
inside backtick-quoted strings.
<LI>

Fixed <code>Unknown error</code> when using <code>UPDATE ... LIMIT</code>. (Bug #373)
<LI>

Fixed problem with ANSI mode and <code>GROUP BY</code> with constants. (Bug #387)
<LI>

Fixed bug with <code>UNION</code> and <code>OUTER JOIN</code>. (Bug #386)
<LI>

Fixed bug if one used a multiple-table <code>UPDATE</code> and the query required a
temporary table bigger than <code>tmp_table_size</code>. (Bug #286)
<LI>

Run <code>mysql_install_db</code> with the <code>-IN-RPM</code> option for the Mac OS X
installation to not fail on systems with improperly configured hostname
configurations.
<LI>

<code>LOAD DATA INFILE</code> will now read <code>000000</code> as a zero date instead as
<code>"2000-00-00"</code>.
<LI>

Fixed bug that caused <code>DELETE FROM table WHERE const_expression</code>
always to delete the whole table (even if expression result was false).
(Bug #355)
<LI>

Fixed core dump bug when using <code>FORMAT('nan',#)</code>. (Bug #284)
<LI>

Fixed name resolution bug with <code>HAVING ... COUNT(DISTINCT ...)</code>.
<LI>

Fixed incorrect result from truncation operator (<code>*</code>) in
<code>MATCH ... AGAINST()</code> in some complex joins.
<LI>

Fixed a crash in <code>REPAIR ... USE_FRM</code> command, when used on read-only,
nonexisting table or a table with a crashed index file.
<LI>

Fixed a crashing bug in <code>mysql</code> monitor program.  It occurred if
program was started with <code>--no-defaults</code>, with a prompt that contained
the hostname and a connection to a non-existent database was requested.
<LI>

Fixed problem when comparing a key for a multi-byte character set. (Bug #152)
<LI>

Fixed bug in <code>LEFT</code>, <code>RIGHT</code> and <code>MID</code> when used with
multi-byte character sets and some <code>GROUP BY</code> queries. (Bug #314)
<LI>

Fix problem with <code>ORDER BY</code> being discarded for some
<code>DISTINCT</code> queries. (Bug #275)
<LI>

Fixed that <code>SET SQL_BIG_SELECTS=1</code> works as documented (This corrects
a new bug introduced in 4.0)
<LI>

Fixed some serious bugs in <code>UPDATE ... ORDER BY</code>. (Bug #241)
<LI>

Fixed unlikely problem in optimizing <code>WHERE</code> clause with constant
expression like in <code>WHERE 1 AND (a=1 AND b=1)</code>.
<LI>

Fixed that <code>SET SQL_BIG_SELECTS=1</code> works again.
<LI>

Introduced proper backtick quoting for db.table in <code>SHOW GRANTS</code>.
<LI>

<code>FULLTEXT</code> index stopped working after <code>ALTER TABLE</code>
that converts <code>TEXT</code> column to <code>CHAR</code>. (Bug #283)
<LI>

Fixed a security problem with <code>SELECT</code> and wildcarded select list,
when user only had partial column <code>SELECT</code> privileges on the table.
<LI>

Mark a <code>MyISAM</code> table as "analyzed" only when all the keys are indeed
analyzed.
<LI>

Only ignore world-writable <tt>`my.cnf'</tt> files that are regular files
(and not, for example, named pipes or character devices).
<LI>

Fixed few smaller issues with <code>SET PASSWORD</code>.
<LI>

Fixed error message which contained deprecated text.
<LI>

Fixed a bug with two <code>NATURAL JOIN</code>s in the query.
<LI>

<code>SUM()</code> didn't return <code>NULL</code> when there was no rows in result
or when all values was <code>NULL</code>.
<LI>

On Unix symbolic links handling was not enabled by default and there was
no way to turn this on.
<LI>

Added missing dashes to parameter <code>--open-files-limit</code> in
<code>mysqld_safe</code>. (Bug #264)
<LI>

Fixed incorrect hostname for TCP/IP connections displayed in
<code>SHOW PROCESSLIST</code>.
<LI>

Fixed a bug with <code>NAN</code> in <code>FORMAT(...)</code> function ...
<LI>

Fixed a bug with improperly cached database privileges.
<LI>

Fixed a bug in <code>ALTER TABLE ENABLE / DISABLE KEYS</code> which failed to
force a refresh of table data in the cache.
<LI>

Fixed bugs in replication of <code>LOAD DATA INFILE</code> for custom parameters 
(<code>ENCLOSED</code>,  <code>TERMINATED</code> and so on) and temporary tables.
(Bug #183, Bug #222)
<LI>

Fixed a replication bug when the master is 3.23 and the slave 4.0: the
slave lost the replicated temporary tables if <code>FLUSH LOGS</code> was
issued on the master. (Bug #254)
<LI>

Fixed a bug when doing <code>LOAD DATA INFILE IGNORE</code>: When reading
the binary log, <code>mysqlbinlog</code> and the replication code read <code>REPLACE</code>
instead of <code>IGNORE</code>. This could make the slave's table
become different from the master's table. (Bug #218)
<LI>

Fixed a deadlock when <code>relay_log_space_limit</code> was set to a too
small value. (Bug #79)
<LI>

Fixed a bug in HAVING clause when an alias is used from the
<strong>select list</strong>. 
<LI>

Fixed overflow bug in <code>MyISAM</code> when a row is inserted into a table with a 
large number of columns and at least one <code>BLOB/TEXT</code> column. Bug was caused
by incorrect calculation of the needed buffer to pack data.
<LI>

Fixed a bug when <code>SELECT</code> <strong>@nonexistent_variable</strong> caused the
error in client - server protocol due to net_printf() being sent to
the client twice.
<LI>

Fixed a bug in setting <code>SQL_BIG_SELECTS</code> option.
<LI>

Fixed a bug in <code>SHOW PROCESSLIST</code> which only displayed a localhost
in the <code>"Host"</code> column. This was caused by a glitch that used only
current thread information instead of information from the linked list of threads.
<LI>

Removed unnecessary Mac OS X helper files from server RPM. (Bug #144)
<LI>

Allow optimization of multiple-table update for <code>InnoDB</code> tables as well.
<LI>

Fixed a bug in multiple-table updates that caused some rows to be
updated several times.
<LI>

Fixed a bug in <code>mysqldump</code> when it was called with
<code>--master-data</code>: the <code>CHANGE MASTER TO</code> commands appended to
the SQL dump had incorrect coordinates. (Bug #159)
<LI>

Fixed a bug when an updating query using <code>USER()</code> was replicated
on the slave; this caused segfault on the slave. (Bug #178).
<code>USER()</code> is still badly replicated on the slave (it is
replicated to <code>""</code>).
</UL>



<H3><A NAME="News-4.0.12" HREF="manual_toc.html#News-4.0.12">D.3.13  Changes in release 4.0.12 (15 Mar 2003: Production)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<code>mysqld</code> no longer reads options from world-writable config files.
<LI>

Integer values between 9223372036854775807 and 9999999999999999999 are now
regarded as unsigned longlongs, not as floats. This makes these values work
similar to values between 10000000000000000000 and 18446744073709551615.
<LI>

<code>SHOW PROCESSLIST</code> will now include the client TCP port after the
hostname to make it easier to know from which client the request
originated.
<LI>

The <code>--new</code> option can be used to make a 4.0 server return
<code>TIMESTAMP</code> as a string in <code>'YYYY-MM-DD HH:MM:SS'</code>
format, the way that 4.1 servers do.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed <code>mysqld</code> crash on extremely small values of
<code>sort_buffer</code> variable.
<LI>

<code>INSERT INTO u SELECT ... FROM t</code> was written too late to the
binary log if t was very frequently updated during the execution of 
this query. This could cause a problem with <code>mysqlbinlog</code> or
replication. The master must be upgraded, not the slave. (Bug #136)
<LI>

Fixed checking of random part of <code>WHERE</code> clause. (Bug #142)
<LI>

Fixed a bug with multiple-table updates with <code>InnoDB</code>
tables. This bug occurred as, in many cases, <code>InnoDB</code> tables cannot
be updated ``on the fly,'' but offsets to the records have to be stored in
a temporary table. 
<LI>

Added missing file <code>mysql_secure_installation</code> to the <code>server</code>
RPM subpackage. (Bug #141)
<LI>

Fixed MySQL (and <code>myisamchk</code>) crash on artificially
corrupted <code>.MYI</code> files.
<LI>

Don't allow <code>BACKUP TABLE</code> to overwrite existing files.
<LI>

Fixed a bug with multiple-table <code>UPDATE</code> statements when user had all privileges
on the database where tables are located and there were any entries in
<code>tables_priv</code> table, that is, <code>grant_option</code> was true.
<LI>

Fixed a bug that allowed a user with table or column grants on some table,
<code>TRUNCATE</code> any table in the same database.
<LI>

Fixed deadlock when doing <code>LOCK TABLE</code> followed by <code>DROP
TABLE</code> in the same thread.  In this case one could still kill the thread
with <code>KILL</code>.
<LI>

<code>LOAD DATA LOCAL INFILE</code> was not properly written to the binary
log (hence not properly replicated). (Bug #82)
<LI>

<code>RAND()</code> entries were not read correctly by <code>mysqlbinlog</code> from
the binary log which caused problems when restoring a table that was
inserted with <code>RAND()</code>. <code>INSERT INTO t1 VALUES(RAND())</code>. In
replication this worked okay.
<LI>

<code>SET SQL_LOG_BIN=0</code> was ignored for <code>INSERT DELAYED</code>
queries. (Bug #104)
<LI>

<code>SHOW SLAVE STATUS</code> reported too old positions
(columns <code>Relay_Master_Log_File</code> and <code>Exec_Master_Log_Pos</code>)
for the last executed statement from the master, if this statement
was the <code>COMMIT</code> of a transaction. The master must be upgraded for that,
not the slave. (Bug #52)
<LI>

<code>LOAD DATA INFILE</code> was not replicated by the slave if
<code>replicate_*_table</code> was set on the slave. (Bug #86)
<LI>

After <code>RESET SLAVE</code>, the coordinates displayed by <code>SHOW
SLAVE STATUS</code> looked un-reset (although they were, but only
internally). (Bug #70)
<LI>

Fixed query cache invalidation on <code>LOAD DATA</code>.
<LI>

Fixed memory leak on <code>ANALYZE</code> procedure with error.
<LI>

Fixed a bug in handling <code>CHAR(0)</code> columns that could cause incorrect
results from the query.
<LI>

Fixed rare bug with incorrect initialization of <code>AUTO_INCREMENT</code> column,
as a secondary column in a multi-column key (see section <A HREF="manual_Tutorial.html#example-AUTO_INCREMENT">3.6.9  Using <code>AUTO_INCREMENT</code></A>), when
data was inserted with <code>INSERT ... SELECT</code> or <code>LOAD DATA</code> into
an empty table.
<LI>

On Windows, <code>STOP SLAVE</code> didn't stop the slave until the slave
got one new command from the master (this bug has been fixed for MySQL 4.0.11
by releasing updated 4.0.11a Windows packages, which include this individual
fix on top of the 4.0.11 sources). (Bug #69)
<LI>

Fixed a crash when no database was selected and <code>LOAD DATA</code> command
was issued with full table name specified, including database prefix.
<LI>

Fixed a crash when shutting down replication on some platforms
(for example, Mac OS X).
<LI>

Fixed a portability bug with <code>pthread_attr_getstacksize</code> on
HP-UX 10.20 (Patch was also included in 4.0.11a sources).
<LI>

Fixed the <code>bigint</code> test to not fail on some platforms (for example, HP-UX and
Tru64) due to different return values of the <code>atof()</code> function.
<LI>

Fixed the <code>rpl_rotate_logs</code> test to not fail on certain platforms (such as
Mac OS X) due to a too-long file name (changed <code>slave-master-info.opt</code>
to <code>.slave-mi</code>).
</UL>



<H3><A NAME="News-4.0.11" HREF="manual_toc.html#News-4.0.11">D.3.14  Changes in release 4.0.11 (20 Feb 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<code>NULL</code> is now sorted <strong>LAST</strong> if you use <code>ORDER BY ... DESC</code>
(as it was before MySQL 4.0.2).  This change was required to comply
with the SQL standard.  (The original change was made because we thought
that standard SQL required <code>NULL</code> to be always sorted at the same position,
but this was incorrect).
<LI>

Added <code>START TRANSACTION</code> (standard SQL syntax) as alias for <code>BEGIN</code>.
This is recommended to use instead of <code>BEGIN</code> to start a transaction.
<LI>

Added <code>OLD_PASSWORD()</code> as a synonym for <code>PASSWORD()</code>.
<LI>

Allow keyword <code>ALL</code> in group functions.
<LI>

Added support for some new <code>INNER JOIN</code> and <code>JOIN</code> syntaxes.
For example, <code>SELECT * FROM t1 INNER JOIN t2</code> didn't work before.
<LI>

Novell NetWare 6.0 porting effort completed, Novell patches merged into
the main source tree.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed problem with multiple-table delete and <code>InnoDB</code> tables.
<LI>

Fixed a problem with <code>BLOB NOT NULL</code> columns used with <code>IS NULL</code>.
<LI>

Re-added missing pre- and post(un)install scripts to the Linux RPM packages
(they were missing after the renaming of the server subpackage).
<LI>

Fixed that table locks are not released with multiple-table updates and 
deletes with <code>InnoDB</code> storage engine.
<LI>

Fixed bug in updating <code>BLOB</code> columns with long strings.
<LI>

Fixed integer-wraparound when giving big integer (&#62;= 10 digits) to
function that requires an unsigned argument, like <code>CREATE TABLE (...) 
AUTO_INCREMENT=#</code>.
<LI>

<code>MIN(key_column)</code> could in some cases return <code>NULL</code> on a column
with <code>NULL</code> and other values.
<LI>

<code>MIN(key_column)</code> and <code>MAX(key_column)</code> could in some cases
return incorrect values when used in <code>OUTER JOIN</code>.
<LI>

<code>MIN(key_column)</code> and <code>MAX(key_column)</code> could return incorrect
values if one of the tables was empty.
<LI>

Fixed rare crash in compressed <code>MyISAM</code> tables with blobs.
<LI>

Fixed bug in using aggregate functions as argument for <code>INTERVAL</code>,
<code>CASE</code>, <code>FIELD</code>, <code>CONCAT_WS</code>, <code>ELT</code> and
<code>MAKE_SET</code> functions.
<LI>

When running with <code>--lower-case-table-names</code> (default on Windows)
and you had tables or databases with mixed case on disk, then
executing <code>SHOW TABLE STATUS</code> followed with <code>DROP DATABASE</code>
or <code>DROP TABLE</code> could fail with <code>Errcode 13</code>.
</UL>



<H3><A NAME="News-4.0.10" HREF="manual_toc.html#News-4.0.10">D.3.15  Changes in release 4.0.10 (29 Jan 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Added option <code>--log-error[=<var>file_name</var>]</code> to <code>mysqld_safe</code> and
<code>mysqld</code>. This option will force all error messages to be put in a
log file if the option <code>--console</code> is not given. On Windows
<code>--log-error</code> is enabled as default, with a default name of
<tt>`<var>host_name</var>.err'</tt> if the name is not specified.
<LI>

Changed some things from <code>Warning:</code> to <code>Note:</code> in the log files.
<LI>

The <code>mysqld</code> server should now compile on NetWare.
<LI>

Added optimization that if one does <code>GROUP BY ... ORDER BY NULL</code>
then result is not sorted.
<LI>

New <code>--ft-stopword-file</code> command-line option for <code>mysqld</code> to
replace/disable the built-in stopword list that is used in full-text searches.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_system_variables">5.2.3  Server System Variables</A>.
<LI>

Changed default stack size from 64KB to 192KB; This fixes a core dump
problem on Red Hat 8.0 and other systems with a <code>glibc</code> that requires a
stack size larger than 128K
for <code>gethostbyaddr()</code> to resolve a hostname. You can fix
this for earlier MySQL versions by starting <code>mysqld</code> with
<code>--thread-stack=192K</code>.
<LI>

Added <code>mysql_waitpid</code> to the binary distribution and the
<code>MySQL-client</code> RPM subpackage (required for <code>mysql-test-run</code>).
<LI>

Renamed the main <code>MySQL</code> RPM package to <code>MySQL-server</code>. When
updating from an older version, <code>MySQL-server.rpm</code> will simply replace
<code>MySQL.rpm</code>.
<LI>

If a slave is configured with <code>replicate_wild_do_table=db.%</code> or
<code>replicate_wild_ignore_table=db.%</code>, these rules will be applied to
<code>CREATE/DROP DATABASE</code>, too.
<LI>

Added timeout value for <code>MASTER_POS_WAIT()</code>.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed initialization of the random seed for newly created threads to
give a better <code>rand()</code> distribution from the first call.
<LI>

Fixed a bug that caused <code>mysqld</code> to hang when a
table was opened with the <code>HANDLER</code> command and then
dropped without being closed.
<LI>

Fixed bug in logging to binary log (which affects replication) a query
that inserts a <code>NULL</code> in an <code>AUTO_INCREMENT</code> column and also
uses <code>LAST_INSERT_ID()</code>.
<LI>

Fixed an unlikely bug that could cause a memory overrun when using
<code>ORDER BY constant_expression</code>.
<LI>

Fixed a table corruption in <code>myisamchk</code> parallel repair mode.
<LI>

Fixed bug in query cache invalidation on simple table renaming.
<LI>

Fixed bug in <code>mysqladmin --relative</code>.
<LI>

On some 64-bit systems, <code>show status</code> reported a strange number for
<code>Open_files</code> and <code>Open_streams</code>.
<LI>

Fixed incorrect number of columns in <code>EXPLAIN</code> on empty table.
<LI>

Fixed bug in <code>LEFT JOIN</code> that caused zero rows to be returned in
the case the <code>WHERE</code> condition was evaluated as <code>FALSE</code> after
reading <code>const</code> tables. (Unlikely condition).
<LI>

<code>FLUSH PRIVILEGES</code> didn't correctly flush table/column privileges
when <code>mysql.tables_priv</code> is empty.
<LI>

Fixed bug in replication when using <code>LOAD DATA INFILE</code> one a file
that updated an <code>AUTO_INCREMENT</code> column with <code>NULL</code> or <code>0</code>. This
bug only affected MySQL 4.0 masters (not slaves or MySQL 3.23 masters).
<strong>Note</strong>: If you have a slave that has replicated a file with
generated <code>AUTO_INCREMENT</code> columns then the slave data is corrupted and you
should reinitialize the affected tables from the master.
<LI>

Fixed possible memory overrun when sending a <code>BLOB</code> value larger than 16M
to the client.
<LI>

Fixed incorrect error message when setting a <code>NOT NULL</code> column to an
expression that returned <code>NULL</code>.
<LI>

Fixed core dump bug in <code><var>str</var> LIKE "%<var>other_str</var>%"</code> where <var>str</var> or
<var>other_str</var> contained characters &#62;= 128.
<LI>

Fixed bug: When executing on master <code>LOAD DATA</code> and <code>InnoDB</code> failed
with <code>table full</code> error the binary log was corrupted.
</UL>



<H3><A NAME="News-4.0.9" HREF="manual_toc.html#News-4.0.9">D.3.16  Changes in release 4.0.9 (09 Jan 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<code>OPTIMIZE TABLE</code> will for <code>MyISAM</code> tables treat all <code>NULL</code>
values as different when calculating cardinality.  This helps in
optimizing joins between tables where one of the tables has a lot of
<code>NULL</code> values in a indexed column:

<PRE>
SELECT * from t1, t2 where t1.a=t2.key_with_a_lot_of_null;
</PRE>

<LI>

Added join operator <code>FORCE INDEX (key_list)</code>. This acts likes
<code>USE INDEX (key_list)</code> but with the addition that a table scan is
assumed to be VERY expensive.  One bad thing with this is that it makes
<code>FORCE</code> a reserved word.
<LI>

Reset internal row buffer in <code>MyISAM</code> after each query. This will reduce
memory in the case you have a lot of big blobs in a table.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

A security patch in 4.0.8 causes the <code>mysqld</code> server to die if the remote
hostname can't be resolved. This is now fixed.
<LI>

Fixed crash when replication big <code>LOAD DATA INFILE</code> statement that
caused log rotation.
</UL>



<H3><A NAME="News-4.0.8" HREF="manual_toc.html#News-4.0.8">D.3.17  Changes in release 4.0.8 (07 Jan 2003)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Default <code>max_packet_length</code> for <tt>`libmysqld.c'</tt> is now 1024*1024*1024.
<LI>

You can now specify <code>max_allowed_packet</code> in a file read by
<code>mysql_options(MYSQL_READ_DEFAULT_FILE)</code>.
for clients.
<LI>

When sending a too big packet to the server with the not compressed
protocol, the client now gets an error message instead of a lost
connection.
<LI>

We now send big queries/result rows in bigger hunks, which should give a
small speed improvement.
<LI>

Fixed some bugs with the compressed protocol for rows &#62; 16MB.
<LI>

<code>InnoDB</code> tables now also support <code>ON UPDATE CASCADE</code> in
<code>FOREIGN KEY</code> constraints. See the <code>InnoDB</code> section in the manual
for the <code>InnoDB</code> changelog.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed bug in <code>ALTER TABLE</code> with <code>BDB</code> tables.
<LI>

Fixed core dump bug in <code>QUOTE()</code> function.
<LI>

Fixed a bug in handling communication packets bigger than
16MB. Unfortunately this required a protocol change; If you upgrade the
server to 4.0.8 and above and have clients that uses packets &#62;=
255*255*255 bytes (=16581375) you must also upgrade your clients to at
least 4.0.8.  If you don't upgrade, the clients will hang when sending a
big packet.
<LI>

Fixed bug when sending blobs longer than 16MB to client.
<LI>

Fixed bug in <code>GROUP BY</code> when used on BLOB column with <code>NULL</code> values.
<LI>

Fixed a bug in handling <code>NULL</code> values in <code>CASE</code> ... WHEN ...
</UL>



<H3><A NAME="News-4.0.7" HREF="manual_toc.html#News-4.0.7">D.3.18  Changes in release 4.0.7 (20 Dec 2002)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

<code>mysqlbug</code> now also reports the compiler version used for building
the binaries (if the compiler supports the option <code>--version</code>).
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Fixed compilation problems on OpenUnix and HPUX 10.20.
<LI>

Fixed some optimization problems when compiling MySQL with <code>-DBIG_TABLES</code>
on a 32-bit system.
<LI>

<code>mysql_drop_db()</code> didn't check permissions properly so anyone could
drop another users database.  <code>DROP DATABASE</code> is checked properly.
</UL>



<H3><A NAME="News-4.0.6" HREF="manual_toc.html#News-4.0.6">D.3.19  Changes in release 4.0.6 (14 Dec 2002: Gamma)</A></H3>

<P>
Functionality added or changed:

</P>

<UL>
<LI>

Added syntax support for <code>CHARACTER SET <var>xxx</var></code> and <code>CHARSET=<var>xxx</var></code>
table options (to be able to read table dumps from 4.1).
<LI>

Fixed replication bug that caused the slave to loose its position in
some cases when the replication log was rotated.
<LI>

Fixed that a slave will restart from the start of a transaction if
it's killed in the middle of one.
<LI>

Moved the manual pages from <tt>`man'</tt> to <tt>`man/man1'</tt> in the
binary distributions.
<LI>

The default type returned by <code>IFNULL(A,B)</code> is now set to be the
more 'general' of the types of <code>A</code> and <code>B</code>. (The order is
<code>STRING</code>, <code>REAL</code> or <code>INTEGER</code>).
<LI>

Moved the <code>mysql.server</code> startup script in the RPM packages from
<tt>`/etc/rc.d/init.d/mysql'</tt> to <tt>`/etc/init.d/mysql'</tt>
(which almost all current Linux distributions support for LSB compliance).
<LI>

Added <code>Qcache_lowmem_prunes</code> status variable (number of queries that were
deleted from the cache because of low memory).
<LI>

Fixed <code>mysqlcheck</code> so it can deal with table names containing dashes.
<LI>

Bulk insert optimization
(see section <A HREF="manual_MySQL_Database_Administration.html#Server_system_variables">5.2.3  Server System Variables</A>)
is no longer used when inserting small (less than 100) number of rows.
<LI>

Optimization added for queries like
<code>SELECT ... FROM merge_table WHERE indexed_column=constant_expr</code>.
<LI>

Added functions <code>LOCALTIME</code> and <code>LOCALTIMESTAMP</code> as synonyms for
<code>NOW()</code>.
<LI>

<code>CEIL</code> is now an alias for <code>CEILING</code>.
<LI>

The <code>CURRENT_USER()</code> function can be used to get a <code>user@host</code>
value as it was matched in the <code>GRANT</code> system.
See section <A HREF="manual_Functions.html#Information_functions">12.8.3  Information Functions</A>.
<LI>

Fixed <code>CHECK</code> constraints to be compatible with standard SQL. This made
<code>CHECK</code> a reserved word. (Checking of <code>CHECK</code> constraints is
still not implemented).
<LI>

Added <code>CAST(... as CHAR)</code>.
<LI>

Added PostgreSQL compatible <code>LIMIT</code> syntax:
<code>SELECT ... LIMIT <var>row_count</var> OFFSET <var>offset</var></code>
<LI>

<code>mysql_change_user()</code> will now reset the connection to the state
of a fresh connect (Ie, <code>ROLLBACK</code> any active transaction, close
all temporary tables, reset all user variables etc..)
<LI>

<code>CHANGE MASTER</code> and <code>RESET SLAVE</code> now require that slave
threads be both already stopped; these commands will return an error
if at least one of these two threads is running.
</UL>

<P>
Bugs fixed:

</P>

<UL>
<LI>

Fixed number of found rows returned in <code>multi table updates</code>
<LI>

Make <code>--lower-case-table-names</code> default on Mac OS X as the default
filesystem (HFS+) is case insensitive.
See section <A HREF="manual_Language_Structure.html#Name_case_sensitivity">9.2.2  Identifier Case Sensitivity</A>.
<LI>

Transactions in <code>AUTOCOMMIT=0</code> mode didn't rotate binary log.
<LI>

A fix for the bug in a <code>SELECT</code> with joined tables with
<code>ORDER BY</code> and <code>LIMIT</code> clause when <code>filesort</code> had to be used.
In that case <code>LIMIT</code> was applied to <code>filesort</code> of one of the tables,
although it could not be.
This fix also solved problems with <code>LEFT JOIN</code>.
<LI>

<code>mysql_server_init()</code> now makes a copy of all arguments. This fixes
a problem when using the embedded server in C# program.
<LI>

Fixed buffer overrun in <code>libmysqlclient</code> library
that allowed a malicious MySQL server to crash the client
application.
<LI>

Fixed security-related bug in <code>mysql_change_user()</code> handling.
All users are strongly recommended to upgrade to version 4.0.6.
<LI>

Fixed bug that prevented <code>--chroot</code> command-line option of
<code>mysqld</code> from working.
<LI>

Fixed bug in phrase operator <code>"..."</code> in boolean full-text search.
<LI>

Fixed bug that caused <code>OPTIMIZE TABLE</code> to corrupt the table
under some rare circumstances.
<LI>

Part rewrite of multiple-table-update to optimize it, make it safer and
more bug-free.
<LI>

<code>LOCK TABLES</code> now works together with multiple-table-update and
multiple-table-delete.
<LI>

<code>--replicate-do=<var>xxx</var></code> didn't work for <code>UPDATE</code> commands.
(Bug introduced in 4.0.0)
<LI>

Fixed shutdown problem on Mac OS X.
<LI>Major <code>InnoDB</code> bugs in <code>REPLACE, AUTO_INCREMENT,

INSERT INTO ... SELECT ...</code> were fixed. See the <code>InnoDB</code> changelog
in the <code>InnoDB</code> section of the manual.
<LI>

<code>RESET SLAVE</code> caused a crash if the slave threads were running.
</UL>



<H3><A NAME="News-4.0.5" HREF="manual_toc.html#News-4.0.5">D.3.20  Changes in release 4.0.5 (13 Nov 2002)</A></H3>

<P>
Functionality added or changed:

</P>

<UL>
<LI>

Port number was added to hostname (if it is known) in <code>SHOW PROCESSLIST</code>
command
<LI>

Changed handling of last argument in <code>WEEK()</code> so that you can get
week number according to the ISO 8601 specification.
(Old code should still work).
<LI>

Fixed that <code>INSERT DELAYED</code> threads don't hang on <code>Waiting for
INSERT</code> when one sends a <code>SIGHUP</code> to <code>mysqld</code>.
<LI>

Change that <code>AND</code> works according to standard SQL when it comes to
<code>NULL</code> handling. In practice, this affects only queries where you
do something like <code>WHERE ... NOT (NULL AND 0)</code>.
<LI>

<code>mysqld</code> will now resolve <code>basedir</code> to its full path (with
<code>realpath()</code>). This enables one to use relative symlinks to the
MySQL installation directory.  This will however cause <code>show
variables</code> to report different directories on systems where there is
a symbolic link in the path.
<LI>

Fixed that MySQL will not use index scan on index disabled with
<code>IGNORE INDEX</code> or <code>USE INDEX</code>.
to be ignored.
<LI>

Added <code>--use-frm</code> option to <code>mysqlcheck</code>. When used with
<code>REPAIR TABLE</code>, it gets the table structure from the <tt>`.frm'</tt> file, so the
table can be repaired even if the <code>.MYI</code> header is corrupted.
<LI>

Fixed bug in <code>MAX()</code> optimization when used with <code>JOIN</code> and
<code>ON</code> expressions.
<LI>

Added support for reading of MySQL 4.1 table definition files.
<LI>

<code>BETWEEN</code> behavior changed (see section <A HREF="manual_Functions.html#Comparison_Operators">12.1.3  Comparison Functions and Operators</A>).
Now <code>datetime_col BETWEEN timestamp AND timestamp</code> should work
as expected.
<LI>

One can create <code>TEMPORARY</code> <code>MERGE</code> tables now.
<LI>

<code>DELETE FROM myisam_table</code> now shrinks not only the <tt>`.MYD'</tt> file but
also the <tt>`.MYI'</tt> file.
<LI>

When one uses the <code>--open-files-limit=#</code> option to <code>mysqld_safe</code>
it's now passed on to <code>mysqld</code>.
<LI>

Changed output from <code>EXPLAIN</code> from <code>'where used'</code> to
<code>'Using where'</code> to make it more in line with other output.
<LI>

Removed variable <code>safe_show_database</code> as it was no longer used.
<LI>

Updated source tree to be built using <code>automake</code> 1.5 and 
<code>libtool</code> 1.4.
<LI>

Fixed an inadvertently changed option (<code>--ignore-space</code>) back to the
original <code>--ignore-spaces</code> in <code>mysqlclient</code>. (Both syntaxes will
work).
<LI>

Don't require <code>UPDATE</code> privilege when using <code>REPLACE</code>.
<LI>

Added support for <code>DROP TEMPORARY TABLE ...</code>, to be used to make
replication safer.
<LI>

When transactions are enabled, all commands that update temporary tables
inside a <code>BEGIN/COMMIT</code> are now stored in the binary log on
<code>COMMIT</code> and not stored if one does <code>ROLLBACK</code>.  This fixes
some problems with non-transactional temporary tables used inside
transactions.
<LI>

Allow braces in joins in all positions. Formerly, things like
<code>SELECT * FROM (t2 LEFT JOIN t3 USING (a)), t1</code> worked, but
not <code>SELECT * FROM t1, (t2 LEFT JOIN t3 USING (a))</code>. Note that
braces are simply removed, they do not change the way the join is
executed.
<LI>

<code>InnoDB</code> now supports also isolation levels
<code>READ UNCOMMITTED</code> and <code>READ COMMITTED</code>.
For a detailed <code>InnoDB</code> changelog, see section <A HREF="manual_News.html#InnoDB_change_history">D.9  <code>InnoDB</code> Change History</A>
in this manual. 
</UL>

<P>
Bugs fixed:

</P>

<UL>
<LI>

Fixed bug in <code>MAX()</code> optimization when used with <code>JOIN</code> and
<code>ON</code> expressions.
<LI>

Fixed that <code>INSERT DELAY</code> threads don't hang on <code>Waiting for
INSERT</code> when one sends a <code>SIGHUP</code> to <code>mysqld</code>.
<LI>

Fixed that MySQL will not use an index scan on an index that has been
disabled with <code>IGNORE INDEX</code> or <code>USE INDEX</code>.
<LI>

Corrected test for <code>root</code> user in <code>mysqld_safe</code>.
<LI>

Fixed error message issued when storage engine cannot do <code>CHECK TABLE</code>
or <code>REPAIR TABLE</code>.
<LI>

Fixed rare core dump problem in complicated <code>GROUP BY</code> queries that
didn't return any result.
<LI>

Fixed <code>mysqlshow</code> to work properly with wildcarded database names and
with database names that contain underscores.
<LI>

Portability fixes to get MySQL to compile cleanly with Sun Forte 5.0.
<LI>

Fixed <code>MyISAM</code> crash when using dynamic-row tables with huge numbers of
packed columns.
<LI>

Fixed query cache behavior with <code>BDB</code> transactions.
<LI>

Fixed possible floating point exception in <code>MATCH</code>
relevance calculations.
<LI>

Fixed bug in full-text search <code>IN BOOLEAN MODE</code> that made <code>MATCH</code>
to return incorrect relevance value in some complex joins.
<LI>

Fixed a bug that limited <code>MyISAM</code> key length to a value
slightly less that 500. It is exactly 500 now.
<LI>

Fixed that <code>GROUP BY</code> on columns that may have a <code>NULL</code> value
doesn't always use disk based temporary tables.
<LI>

The filename argument for the <code>--des-key-file</code> argument to <code>mysqld</code>
is interpreted relative to the data directory if given as a relative pathname.
<LI>

Removed a condition that temp table with index on column that can be
<code>NULL</code> has to be <code>MyISAM</code>. This was okay for 3.23, but not
needed in 4.*. This resulted in slowdown in many queries since 4.0.2.
<LI>

Small code improvement in multiple-table updates.
<LI>

Fixed a newly introduced bug that caused <code>ORDER BY ... LIMIT <var>row_count</var></code>
to not return all rows.
<LI>

Fixed a bug in multiple-table deletes when outer join is used on an empty
table, which gets first to be deleted.
<LI>

Fixed a bug in multiple-table updates when a single table is updated.
<LI>

Fixed bug that caused <code>REPAIR TABLE</code> and <code>myisamchk</code>
to corrupt <code>FULLTEXT</code> indexes.
<LI>

Fixed bug with caching the <code>mysql</code> grant table database. Now queries
in this database are not cached in the query cache.
<LI>

Small fix in <code>mysqld_safe</code> for some shells.
<LI>

Give error if a <code>MyISAM</code> <code>MERGE</code> table has more than 2 ^ 32 rows and
MySQL was not compiled with <code>-DBIG_TABLES</code>.
<LI>

Fixed some <code>ORDER BY ... DESC</code> problems with <code>InnoDB</code> tables.
</UL>



<H3><A NAME="News-4.0.4" HREF="manual_toc.html#News-4.0.4">D.3.21  Changes in release 4.0.4 (29 Sep 2002)</A></H3>


<UL>
<LI>

Fixed bug where <code>GRANT</code>/<code>REVOKE</code> failed if hostname was given in
non-matching case.
<LI>

Don't give warning in <code>LOAD DATA INFILE</code> when setting a
<code>timestamp</code> to a string value of <code>'0'</code>.
<LI>

Fixed bug in <code>myisamchk -R</code> mode.
<LI>

Fixed bug that caused <code>mysqld</code> to crash on <code>REVOKE</code>.
<LI>

Fixed bug in <code>ORDER BY</code> when there is a constant in the <code>SELECT</code>
statement.
<LI>

One didn't get an error message if <code>mysqld</code> couldn't open the
privilege tables.
<LI>

<code>SET PASSWORD FOR ...</code> closed the connection in case of errors (bug
from 4.0.3).
<LI>

Increased maximum possible <code>max_allowed_packet</code> in <code>mysqld</code> to 1GB.
<LI>

Fixed bug when doing a multiple-row <code>INSERT</code> on a table with an
<code>AUTO_INCREMENT</code> key which was not in the first part of the key.
<LI>

Changed <code>LOAD DATA INFILE</code> to not re-create index if the table had
rows from before.
<LI>

Fixed overrun bug when calling <code>AES_DECRYPT()</code> with incorrect arguments.
<LI>

<code>--skip-ssl</code> can now be used to disable SSL in the MySQL clients,
even if one is using other SSL options in an option file or previously
on the command line.
<LI>

Fixed bug in <code>MATCH ... AGAINST( ... IN BOOLEAN MODE)</code>
used with <code>ORDER BY</code>.
<LI>

Added <code>LOCK TABLES</code> and <code>CREATE TEMPORARY TABLES</code> privilege on
the database level.  You must run the <code>mysql_fix_privilege_tables</code>
script on old installations to activate these.
<LI>

In <code>SHOW TABLE ... STATUS</code>, compressed tables sometimes showed up as
<code>dynamic</code>.
<LI>

<code>SELECT @@[global|session].<var>var_name</var></code> didn't report
<code>global | session</code> in the result column name.
<LI>

Fixed problem in replication that <code>FLUSH LOGS</code> in a circular
replication setup created an infinite number of binary log files.
Now a <code>rotate-binary-log</code> command in the binary log will not cause slaves
to rotate logs.
<LI>

Removed <code>STOP EVENT</code> from binary log when doing <code>FLUSH LOGS</code>.
<LI>

Disable the use of <code>SHOW NEW MASTER FOR SLAVE</code> as this needs to be
completely reworked in a future release.
<LI>

Fixed a bug with constant expression (for example, column of a one-row table,
or column
from a table, referenced by a <code>UNIQUE</code> key) appeared in <code>ORDER BY</code>
part of <code>SELECT DISTINCT</code>.
<LI>

<code>--log-binary=a.b.c</code> now properly strips off <code>.b.c</code>.
<LI>

<code>FLUSH LOGS</code> removed numerical extension for all future update logs.
<LI>

<code>GRANT ... REQUIRE</code> didn't store the SSL information in the
<code>mysql.user</code> table if SSL was not enabled in the server.
<LI>

<code>GRANT ... REQUIRE NONE</code> can now be used to remove SSL information.
<LI>

<code>AND</code> is now optional between <code>REQUIRE</code> options.
<LI>

<code>REQUIRE</code> option was not properly saved, which could cause strange
output in <code>SHOW GRANTS</code>.
<LI>

Fixed that <code>mysqld --help</code> reports correct values for <code>--datadir</code>
and <code>--bind-address</code>.
<LI>

Fixed that one can drop UDFs that didn't exist when <code>mysqld</code> was started.
<LI>

Fixed core dump problem with <code>SHOW VARIABLES</code> on some 64-bit systems
(like Solaris SPARC).
<LI>

Fixed a bug in <code>my_getopt()</code>; <code>--set-variable</code> syntax didn't work for
those options that didn't have a valid variable in the <code>my_option</code> struct.
This affected at least the <code>default-table-type</code> option.
<LI>

Fixed a bug from 4.0.2 that caused <code>REPAIR TABLE</code> and
<code>myisamchk --recover</code> to fail on tables with duplicates in a unique
key.
<LI>

Fixed a bug from 4.0.3 in calculating the default data type for some
functions. This affected queries of type <code>CREATE TABLE <var>tbl_name</var>
SELECT <var>expression</var>(),...</code>
<LI>

Fixed bug in queries of type
<code>SELECT * FROM table-list GROUP BY ...</code> and
<code>SELECT DISTINCT * FROM ...</code>.
<LI>

Fixed bug with the <code>--slow-log</code> when logging an administrator command
(like <code>FLUSH TABLES</code>).
<LI>

Fixed a bug that <code>OPTIMIZE TABLE</code> of locked and modified table,
reported table corruption.
<LI>

Fixed a bug in <code>my_getopt()</code> in handling of special prefixes
(<code>--skip-</code>, <code>--enable-</code>). <code>--skip-external-locking</code> didn't
work and the bug may have affected other similar options.
<LI>

Fixed bug in checking for output file name of the <code>tee</code> option.
<LI>

Added some more optimization to use index for
<code>SELECT ... FROM many_tables .. ORDER BY key limit #</code>
<LI>

Fixed problem in <code>SHOW OPEN TABLES</code> when a user didn't have access
permissions to one of the opened tables.
</UL>



<H3><A NAME="News-4.0.3" HREF="manual_toc.html#News-4.0.3">D.3.22  Changes in release 4.0.3 (26 Aug 2002: Beta)</A></H3>


<UL>
<LI>

Fixed problem with types of user variables. (Bug #551)
<LI>

Fixed problem with <code>configure ... --localstatedir=...</code>.
<LI>

Cleaned up <code>mysql.server</code> script.
<LI>

Fixed a bug in <code>mysqladmin shutdown</code> when pid file was modified
while <code>mysqladmin</code> was still waiting for the previous one to
disappear. This could happen during a very quick restart and caused
<code>mysqladmin</code> to hang until <code>shutdown_timeout</code> seconds had
passed.
<LI>

Don't increment warnings when setting <code>AUTO_INCREMENT</code> columns to
<code>NULL</code> in <code>LOAD DATA INFILE</code>.
<LI>

Fixed all boolean type variables/options to work with the old syntax,
for example, all of these work: <code>--lower-case-table-names</code>,
<code>--lower-case-table-names=1</code>,
<code>-O lower-case-table-names=1</code>,
<code>--set-variable=lower-case-table-names=1</code>
<LI>

Fixed shutdown problem (SIGTERM signal handling) on Solaris. (Bug from 4.0.2).
<LI>

<code>SHOW MASTER STATUS</code> now returns an empty set if binary log is not
enabled.
<LI>

<code>SHOW SLAVE STATUS</code> now returns an empty set if slave is not initialized.
<LI>

Don't update <code>MyISAM</code> index file on update if not strictly necessary.
<LI>

Fixed bug in <code>SELECT DISTINCT ... FROM many_tables ORDER BY
not-used-column</code>.
<LI>

Fixed a bug with <code>BIGINT</code> values and quoted strings.
<LI>

Added <code>QUOTE()</code> function that performs SQL quoting to produce values
that can be used as data values in queries.
<LI>

Changed variable <code>DELAY_KEY_WRITE</code> to an enumeration to allow it to be
set for all tables without taking down the server.
<LI>

Changed behavior of <code>IF(condition,column,NULL)</code> so that it returns
the value of the column type.
<LI>

Made <code>safe_mysqld</code> a symlink to <code>mysqld_safe</code> in binary distribution.
<LI>

Fixed security bug when having an empty database name in the <code>user.db</code>
table.
<LI>

Fixed some problems with <code>CREATE TABLE ... SELECT function()</code>.
<LI>

<code>mysqld</code> now has the option <code>--temp-pool</code> enabled by default as this
gives better performance with some operating systems.
<LI>

Fixed problem with too many allocated alarms on slave when connecting to
master many times (normally not a very critical error).
<LI>

Fixed hang in <code>CHANGE MASTER TO</code> if the slave thread died very quickly.
<LI>

Big cleanup in replication code (less logging, better error messages, etc..)
<LI>

If the <code>--code-file</code> option is specified, the server calls
<code>setrlimit()</code> to set the maximum allowed core file size to unlimited,
so core files can be generated.
<LI>

Fixed bug in query cache after temporary table creation.
<LI>

Added <code>--count=<var>N</var></code> (<code>-c</code>) option to <code>mysqladmin</code>, to make the
program do only <var>N</var> iterations. To be used with <code>--sleep</code> (<code>-i</code>).
Useful in scripts.
<LI>

Fixed bug in multiple-table <code>UPDATE</code>: when updating a table,
<code>do_select()</code> became confused about reading records from a cache.
<LI>

Fixed bug in multiple-table <code>UPDATE</code> when several columns were referenced
from a single table
<LI>

Fixed bug in truncating nonexisting table.
<LI>

Fixed bug in <code>REVOKE</code> that caused user resources to be randomly set.
<LI>

Fixed bug in <code>GRANT</code> for the new <code>CREATE TEMPORARY TABLE</code> privilege.
<LI>

Fixed bug in multiple-table <code>DELETE</code> when tables are re-ordered in the
table initialization method and ref_lengths are of different sizes.
<LI>

Fixed two bugs in <code>SELECT DISTINCT</code> with large tables.
<LI>

Fixed bug in query cache initialization with very small query cache size.
<LI>

Allow <code>DEFAULT</code> with <code>INSERT</code> statement.
<LI>

The startup parameters <code>myisam_max_sort_file_size</code> and
<code>myisam_max_extra_sort_file_size</code> are now given in bytes, not megabytes.
<LI>

External system locking of <code>MyISAM</code>/<code>ISAM</code> files is now turned
off by default.  One can turn this on with <code>--external-locking</code>.
(For most users this is never needed).
<LI>

Fixed core dump bug with <code>INSERT ... SET <var>db_name.tbl_name.col_name</var>=''</code>.
<LI>

Fixed client hangup bug when using some SQL commands with incorrect syntax.
<LI>

Fixed a timing bug in <code>DROP DATABASE</code>
<LI>

New <code>SET [GLOBAL | SESSION]</code> syntax to change thread-specific and global
system variables at runtime.
<LI>

Added variable <code>slave_compressed_protocol</code>.
<LI>

Renamed variable <code>query_cache_startup_type</code> to <code>query_cache_type</code>,
<code>myisam_bulk_insert_tree_size</code> to <code>bulk_insert_buffer_size</code>,
<code>record_buffer</code> to <code>read_buffer_size</code> and
<code>record_rnd_buffer</code> to <code>read_rnd_buffer_size</code>.
<LI>

Renamed some SQL variables, but old names will still work until 5.0.
See section <A HREF="manual_Installing.html#Upgrading-from-3.23">2.10.3  Upgrading from Version 3.23 to 4.0</A>.
<LI>

Renamed <code>--skip-locking</code> to <code>--skip-external-locking</code>.
<LI>

Removed unused variable <code>query_buffer_size</code>.
<LI>

Fixed a bug that made the pager option in the <code>mysql</code> client
non-functional.
<LI>

Added full <code>AUTO_INCREMENT</code> support to <code>MERGE</code> tables.
<LI>

Extended <code>LOG()</code> function to accept an optional arbitrary base
parameter.
See section <A HREF="manual_Functions.html#Mathematical_functions">12.4.2  Mathematical Functions</A>.
<LI>

Added <code>LOG2()</code> function (useful for finding out how many bits
a number would require for storage).
<LI>

Added <code>LN()</code> natural logarithm function for compatibility with
other databases. It is synonymous with <code>LOG(<var>X</var>)</code>.
</UL>



<H3><A NAME="News-4.0.2" HREF="manual_toc.html#News-4.0.2">D.3.23  Changes in release 4.0.2 (01 Jul 2002)</A></H3>


<UL>
<LI>

Cleaned up <code>NULL</code> handling for default values in <code>DESCRIBE
tbl_name</code>.
<LI>

Fixed <code>TRUNCATE()</code> to round up negative values to the nearest integer.
<LI>

Changed <code>--chroot=path</code> option to execute <code>chroot()</code> immediately
after all options have been parsed.
<LI>

Don't allow database names that contain <samp>`\'</samp>.
<LI>

<code>lower_case_table_names</code> now also applies to database names.
<LI>

Added <code>XOR</code> operator (logical and bitwise <code>XOR</code>) with <code>^</code>
as a synonym for bitwise <code>XOR</code>.
<LI>

Added function <code>IS_FREE_LOCK("lock_name")</code>.
Based on code contributed by Hartmut Holzgraefe <a HREF="mailto:hartmut@six.de">hartmut@six.de</a>.
<LI>

Removed <code>mysql_ssl_clear()</code> from C API, as it was not needed.
<LI>

<code>DECIMAL</code> and <code>NUMERIC</code> types can now read exponential numbers.
<LI>

Added <code>SHA1()</code> function to calculate 160 bit hash value as described
in RFC 3174 (Secure Hash Algorithm). This function can be considered a
cryptographically more secure equivalent of <code>MD5()</code>.
See section <A HREF="manual_Functions.html#Encryption_functions">12.8.2  Encryption Functions</A>.
<LI>

Added <code>AES_ENCRYPT()</code> and <code>AES_DECRYPT()</code> functions to perform
encryption according to AES standard (Rijndael).
See section <A HREF="manual_Functions.html#Encryption_functions">12.8.2  Encryption Functions</A>.
<LI>

Added <code>--single-transaction</code> option to <code>mysqldump</code>, allowing a
consistent dump of <code>InnoDB</code> tables.
See section <A HREF="manual_Client-Side_Scripts.html#mysqldump">8.8  The <code>mysqldump</code> Database Backup Program</A>.
<LI>

Fixed bug in <code>innodb_log_group_home_dir</code> in <code>SHOW VARIABLES</code>.
<LI>

Fixed a bug in optimizer with merge tables when non-unique values are 
used in summing up (causing crashes).
<LI>

Fixed a bug in optimizer when a range specified makes index grouping
impossible (causing crashes).
<LI>

Fixed a rare bug when <code>FULLTEXT</code> index is present and no tables are used.
<LI>

Added privileges <code>CREATE TEMPORARY TABLES</code>, <code>EXECUTE</code>,
<code>LOCK TABLES</code>, <code>REPLICATION CLIENT</code>, <code>REPLICATION SLAVE</code>,
<code>SHOW DATABASES</code> and <code>SUPER</code>. To use these, you must have
run the <code>mysql_fix_privilege_tables</code> script after upgrading.
<LI>

Fixed query cache align data bug.
<LI>

Fixed mutex bug in replication when reading from master fails.
<LI>

Added missing mutex in <code>TRUNCATE TABLE</code>;  This fixes some core
dump/hangup problems when using <code>TRUNCATE TABLE</code>.
<LI>

Fixed bug in multiple-table <code>DELETE</code> when optimizer uses only indexes.
<LI>

Fixed that <code>ALTER TABLE <var>tbl_name</var> RENAME <var>new_tbl_name</var></code> is as fast
as <code>RENAME TABLE</code>.
<LI>

Fixed bug in <code>GROUP BY</code> with two or more columns, where at least one
column can contain <code>NULL</code> values.
<LI>

Use <code>Turbo Boyer-Moore</code> algorithm to speed up <code>LIKE "%keyword%"</code>
searches.
<LI>

Fixed bug in <code>DROP DATABASE</code> with symlink.
<LI>

Fixed crash in <code>REPAIR ... USE_FRM</code>.
<LI>

Fixed bug in <code>EXPLAIN</code> with <code>LIMIT offset != 0</code>.
<LI>

Fixed bug in phrase operator <code>"..."</code> in boolean full-text search.
<LI>

Fixed bug that caused duplicated rows when using truncation operator
<code>*</code> in boolean full-text search.
<LI>

Fixed bug in truncation operator of boolean full-text search (incorrect results
when there are only <code>+word*</code>s in the query).
<LI>

Fixed bug in boolean full-text search that caused a crash when an identical
<code>MATCH</code> expression that did not use an index appeared twice.
<LI>

Query cache is now automatically disabled in <code>mysqldump</code>.
<LI>

Fixed problem on Windows 98 that made sending of results very slow.
<LI>

Boolean full-text search weighting scheme changed to something more reasonable.
<LI>

Fixed bug in boolean full-text search that caused MySQL to ignore queries of
<code>ft_min_word_len</code> characters.
<LI>

Boolean full-text search now supports ``phrase searches.''
<LI>

New configure option <code>--without-query-cache</code>. 
<LI>

Memory allocation strategy for ``root memory'' changed. Block size now grows 
with number of allocated blocks.
<LI>

<code>INET_NTOA()</code> now returns <code>NULL</code> if you give it an argument that
is too large (greater than the value corresponding to <code>255.255.255.255</code>).
<LI>

Fix <code>SQL_CALC_FOUND_ROWS</code> to work with <code>UNION</code>. It will work only
if the first <code>SELECT</code> has this option and if there is global <code>LIMIT</code>
for the entire statement. For the moment, this requires using parentheses for
individual <code>SELECT</code> queries within the statement.
<LI>

Fixed bug in <code>SQL_CALC_FOUND_ROWS</code> and <code>LIMIT</code>.
<LI>

Don't give an error for <code>CREATE TABLE ...(... VARCHAR(0))</code>.
<LI>

Fixed <code>SIGINT</code> and <code>SIGQUIT</code> problems in <tt>`mysql.cc'</tt> on Linux
with some <code>glibc</code> versions.
<LI>

Fixed bug in <tt>`convert.cc'</tt>, which is caused by having an incorrect
<code>net_store_length()</code> linked in the <code>CONVERT::store()</code> method.
<LI>

<code>DOUBLE</code> and <code>FLOAT</code> columns now honor the <code>UNSIGNED</code> flag
on storage.
<LI>

<code>InnoDB</code> now retains foreign key constraints through <code>ALTER TABLE</code>
and <code>CREATE/DROP INDEX</code>.
<LI>

<code>InnoDB</code> now allows foreign key constraints to be added through the
<code>ALTER TABLE</code> syntax.
<LI>

<code>InnoDB</code> tables can now be set to automatically grow in size (autoextend).
<LI>

Added <code>--ignore-lines=n</code> option to <code>mysqlimport</code>.  This has the
same effect as the <code>IGNORE n LINES</code> clause for <code>LOAD DATA</code>.
<LI>

Fixed bug in <code>UNION</code> with last offset being transposed to total result
set.
<LI>

<code>REPAIR ... USE_FRM</code> added.
<LI>

Fixed that <code>DEFAULT_SELECT_LIMIT</code> is always imposed on <code>UNION</code>
result set.
<LI>

Fixed that some <code>SELECT</code> options can appear only in the first
<code>SELECT</code>.
<LI>

Fixed bug with <code>LIMIT</code> with <code>UNION</code>, where last select is in
the braces.
<LI>

Fixed that full-text works fine with <code>UNION</code> operations.
<LI>

Fixed bug with indexless boolean full-text search.
<LI>

Fixed bug that sometimes appeared when full-text search was used
with <code>const</code> tables.
<LI>

Fixed incorrect error value when doing a <code>SELECT</code> with an empty
<code>HEAP</code> table.
<LI>

Use <code>ORDER BY column DESC</code> now sorts <code>NULL</code> values first.
(In other words, <code>NULL</code> values sort first in all cases, whether or
not <code>DESC</code> is specified.)  This is changed back in 4.0.10.
<LI>

Fixed bug in <code>WHERE key_name='constant' ORDER BY key_name DESC</code>.
<LI>

Fixed bug in <code>SELECT DISTINCT ... ORDER BY DESC</code> optimization.
<LI>

Fixed bug in <code>... HAVING 'GROUP_FUNCTION'(<var>xxx</var>) IS [NOT] NULL</code>.
<LI>

Fixed bug in truncation operator for boolean full-text search.
<LI>

Allow value of <code>--user=#</code> option for <code>mysqld</code> to be specified
as a numeric user ID.
<LI>

Fixed a bug where <code>SQL_CALC_ROWS</code> returned an incorrect value when used
with one table and <code>ORDER BY</code> and with <code>InnoDB</code> tables.
<LI>

Fixed that <code>SELECT 0 LIMIT 0</code> doesn't hang thread.
<LI>

Fixed some problems with <code>USE/IGNORE INDEX</code> when using
many keys with the same start column.
<LI>

Don't use table scan with <code>BerkeleyDB</code> and <code>InnoDB</code> tables when
we can use an index that covers the whole row.
<LI>

Optimized <code>InnoDB</code> sort-buffer handling to take less memory.
<LI>

Fixed bug in multiple-table <code>DELETE</code> and <code>InnoDB</code> tables.
<LI>

Fixed problem with <code>TRUNCATE</code> and <code>InnoDB</code> tables that produced the
error <code>Can't execute the given command because you have active locked
tables or an active transaction</code>.
<LI>

Added <code>NO_UNSIGNED_SUBTRACTION</code> to the set of flags that may be
specified with the <code>--sql-mode</code> option for <code>mysqld</code>.  It disables
unsigned arithmetic rules when it comes to subtraction. (This will make
MySQL 4.0 behave more like 3.23 with <code>UNSIGNED</code> columns).
<LI>

The result returned for all bit functions (<code>|</code>, <code>&#60;&#60;</code>, ...) is now of
type <code>unsigned integer</code>.
<LI>

Added detection of <code>nan</code> values in <code>MyISAM</code> to make it possible to
repair tables with <code>nan</code> in float or double columns.
<LI>

Fixed new bug in <code>myisamchk</code> where it didn't correctly update number of
``parts'' in the <code>MyISAM</code> index file.
<LI>

Changed to use <code>autoconf</code> 2.52 (from <code>autoconf</code> 2.13).
<LI>

Fixed optimization problem where the MySQL Server was in ``preparing'' state
for a long time when selecting from an empty table which had contained
a lot of rows.
<LI>

Fixed bug in complicated join with <code>const</code> tables. This fix also
improves performance a bit when referring to another table from a
<code>const</code> table.
<LI>

First pre-version of multiple-table <code>UPDATE</code> statement.
<LI>

Fixed bug in multiple-table <code>DELETE</code>.
<LI>

Fixed bug in <code>SELECT CONCAT(argument_list) ... GROUP BY 1</code>.
<LI>

<code>INSERT ... SELECT</code> did a full rollback in case of an error. Fixed
so that we only roll back the last statement in the current transaction.
<LI>

Fixed bug with empty expression for boolean full-text search.
<LI>

Fixed core dump bug in updating full-text key from/to <code>NULL</code>.
<LI>

ODBC compatibility: Added <code>BIT_LENGTH()</code> function.
<LI>

Fixed core dump bug in <code>GROUP BY BINARY column</code>.
<LI>

Added support for <code>NULL</code> keys in <code>HEAP</code> tables.
<LI>

Use index for <code>ORDER BY</code> in queries of type:
<code>SELECT * FROM t WHERE key_part1=1 ORDER BY key_part1 DESC, key_part2 DESC</code>
<LI>

Fixed bug in <code>FLUSH QUERY CACHE</code>.
<LI>

Added <code>CAST()</code> and <code>CONVERT()</code> functions. The <code>CAST</code> and
<code>CONVERT</code> functions are nearly identical and mainly useful when you
want to create a column with a specific type in a <code>CREATE ... SELECT</code>
statement.  For more information, read section <A HREF="manual_Functions.html#Cast_Functions">12.7  Cast Functions and Operators</A>.
<LI>

<code>CREATE ... SELECT</code> on <code>DATE</code> and <code>TIME</code> functions now
create columns of the expected type.
<LI>

Changed order in which keys are created in tables.
<LI>

Added new columns <code>Null</code> and <code>Index_type</code> to <code>SHOW INDEX</code>
output.
<LI>

Added <code>--no-beep</code> and <code>--prompt</code> options to <code>mysql</code> command-line client.
<LI>

New feature: management of user resources.

<PRE>
GRANT ... WITH MAX_QUERIES_PER_HOUR N1
               MAX_UPDATES_PER_HOUR N2
               MAX_CONNECTIONS_PER_HOUR N3;
</PRE>

See section <A HREF="manual_MySQL_Database_Administration.html#User_resources">5.6.4  Limiting Account Resources</A>.

<LI>

Added <code>mysql_secure_installation</code> to the <tt>`scripts/'</tt> directory.
</UL>



<H3><A NAME="News-4.0.1" HREF="manual_toc.html#News-4.0.1">D.3.24  Changes in release 4.0.1 (23 Dec 2001)</A></H3>


<UL>
<LI>

Added <code>system</code> command to <code>mysql</code>.
<LI>

Fixed bug when <code>HANDLER</code> was used with some unsupported table type.
<LI>

<code>mysqldump</code> now puts <code>ALTER TABLE <var>tbl_name</var> DISABLE KEYS</code> and
<code>ALTER TABLE <var>tbl_name</var> ENABLE KEYS</code> in the sql dump.
<LI>

Added <code>mysql_fix_extensions</code> script.
<LI>

Fixed stack overrun problem with <code>LOAD DATA FROM MASTER</code> on OSF/1.
<LI>

Fixed shutdown problem on HP-UX.
<LI>

Added <code>DES_ENCRYPT()</code> and <code>DES_DECRYPT()</code> functions.
<LI>

Added <code>FLUSH DES_KEY_FILE</code> statement.
<LI>

Added <code>--des-key-file</code> option to <code>mysqld</code>.
<LI>

<code>HEX(<var>str</var>)</code> now returns the characters in <var>str</var> converted to
hexadecimal.
<LI>

Fixed problem with <code>GRANT</code> when using <code>lower_case_table_names=1</code>.
<LI>

Changed <code>SELECT ... IN SHARE MODE</code> to
<code>SELECT ... LOCK IN SHARE MODE</code> (as in MySQL 3.23).
<LI>

A new query cache to cache results from identical <code>SELECT</code> queries.
<LI>

Fixed core dump bug on 64-bit machines when it got an incorrect communication
packet.
<LI>

<code>MATCH ... AGAINST(... IN BOOLEAN MODE)</code> can now work
without <code>FULLTEXT</code> index.
<LI>

Fixed slave to replicate from 3.23 master.
<LI>

Miscellaneous replication fixes/cleanup.
<LI>

Got shutdown to work on Mac OS X.
<LI>

Added <code>myisam/ft_dump</code> utility for low-level inspection
of <code>FULLTEXT</code> indexes.
<LI>

Fixed bug in <code>DELETE ... WHERE ... MATCH ...</code>.
<LI>

Added support for <code>MATCH ... AGAINST(... IN BOOLEAN MODE)</code>.
<strong>Note</strong>: You must rebuild your tables with
<code>ALTER TABLE <var>tbl_name</var> TYPE=MyISAM</code> to be
able to use boolean full-text search.
<LI>

<code>LOCATE()</code> and <code>INSTR()</code> are now case sensitive if either
argument is a binary string.
<LI>

Changed <code>RAND()</code> initialization so that <code>RAND(N)</code> and
<code>RAND(N+1)</code> are more distinct.
<LI>

Fixed core dump bug in <code>UPDATE ... ORDER BY</code>.
<LI>

In 3.23, <code>INSERT INTO ... SELECT</code> always had <code>IGNORE</code> enabled.
Now MySQL will stop (and possibly roll back) by default in case of an error
unless you specify <code>IGNORE</code>.
<LI>

Ignore <code>DATA DIRECTORY</code> and <code>INDEX DIRECTORY</code> directives on Windows.
<LI>

Added boolean full-text search code. It should be considered early alpha.
<LI>

Extended <code>MODIFY</code> and <code>CHANGE</code> in <code>ALTER TABLE</code> to accept
the <code>FIRST</code> and <code>AFTER</code> keywords.
<LI>

Indexes are now used with <code>ORDER BY</code> on a whole <code>InnoDB</code> table.
</UL>



<H3><A NAME="News-4.0.0" HREF="manual_toc.html#News-4.0.0">D.3.25  Changes in release 4.0.0 (Oct 2001: Alpha)</A></H3>


<UL>
<LI>

Added <code>--xml</code> option to <code>mysql</code> for producing XML output.
<LI>

Added full-text variables <code>ft_min_word_len</code>, <code>ft_max_word_len</code>, and
<code>ft_max_word_len_for_sort</code> system variables.
<LI>

Added full-text variables <code>ft_min_word_len</code>, <code>ft_max_word_len</code>, and
<code>ft_max_word_len_for_sort</code> variables to <code>myisamchk</code>.
<LI>

Added documentation for <code>libmysqld</code>, the embedded MySQL server
library.  Also added example programs (a <code>mysql</code> client and
<code>mysqltest</code> test program) which use <code>libmysqld</code>.
<LI>

Removed all Gemini hooks from MySQL server.
<LI>

Removed <code>my_thread_init()</code> and <code>my_thread_end()</code>
from <tt>`mysql_com.h'</tt>, and added <code>mysql_thread_init()</code> and
<code>mysql_thread_end()</code> to <tt>`mysql.h'</tt>.
<LI>

Support for communication packets &#62; 16MB.  In 4.0.1 we will extend
<code>MyISAM</code> to be able to handle these.
<LI>

Secure connections (with SSL).
<LI>

Unsigned <code>BIGINT</code> constants now work. <code>MIN()</code> and <code>MAX()</code>
now handle signed and unsigned <code>BIGINT</code> numbers correctly.
<LI>

New character set <code>latin1_de</code> which provides correct German sorting.
<LI>

<code>STRCMP()</code> now uses the current character set when doing comparisons,
which means that the default comparison behavior now is case insensitive.
<LI>

<code>TRUNCATE TABLE</code> and <code>DELETE FROM <var>tbl_name</var></code> are now separate
functions. One bonus is that <code>DELETE FROM <var>tbl_name</var></code> now returns
the number of deleted rows, rather than zero.
<LI>

<code>DROP DATABASE</code> now executes a <code>DROP TABLE</code> on all tables in
the database, which fixes a problem with <code>InnoDB</code> tables.
<LI>

Added support for <code>UNION</code>.
<LI>

Added support for multiple-table <code>DELETE</code> operations.
<LI>

A new <code>HANDLER</code> interface to <code>MyISAM</code> tables.
<LI>

Added support for <code>INSERT</code> on <code>MERGE</code> tables. Patch from
Benjamin Pflugmann.
<LI>

Changed <code>WEEK(date,0)</code> to match the calendar in the USA.
<LI>

<code>COUNT(DISTINCT)</code> is about 30% faster.
<LI>

Speed up all internal list handling.
<LI>

Speed up <code>IS NULL</code>, <code>ISNULL()</code> and some other internal primitives.
<LI>

Full-text index creation now is much faster.
<LI>

Tree-like cache to speed up bulk inserts and
<code>myisam_bulk_insert_tree_size</code> variable.
<LI>

Searching on packed (<code>CHAR</code>/<code>VARCHAR</code>) keys is now much faster.
<LI>

Optimized queries of type:
<code>SELECT DISTINCT * FROM <var>tbl_name</var> ORDER by <var>key_part1</var> LIMIT <var>row_count</var></code>.
<LI>

<code>SHOW CREATE TABLE</code> now shows all table attributes.
<LI>

<code>ORDER BY ... DESC</code> can now use keys.
<LI>

<code>LOAD DATA FROM MASTER</code> ``automatically'' sets up a slave.
<LI>

Renamed <code>safe_mysqld</code> to <code>mysqld_safe</code> to make this name more
in line with other MySQL scripts/commands.
<LI>

Added support for symbolic links to <code>MyISAM</code> tables. Symlink handling is
now enabled by default for Windows.
<LI>

Added <code>SQL_CALC_FOUND_ROWS</code> and <code>FOUND_ROWS()</code>. This makes it
possible to know how many rows a query would have returned
without a <code>LIMIT</code> clause.
<LI>

Changed output format of <code>SHOW OPEN TABLES</code>.
<LI>

Allow <code>SELECT expression LIMIT ...</code>.
<LI>

Added <code>ORDER BY</code> syntax to <code>UPDATE</code> and <code>DELETE</code>.
<LI>

<code>SHOW INDEXES</code> is now a synonym for <code>SHOW INDEX</code>.
<LI>

Added <code>ALTER TABLE <var>tbl_name</var> DISABLE KEYS</code> and
<code>ALTER TABLE <var>tbl_name</var> ENABLE KEYS</code> commands.
<LI>

Allow use of <code>IN</code> as a synonym for <code>FROM</code> in <code>SHOW</code> commands.
<LI>

Implemented ``repair by sort'' for <code>FULLTEXT</code> indexes.
<code>REPAIR TABLE</code>, <code>ALTER TABLE</code>, and <code>OPTIMIZE TABLE</code>
for tables with <code>FULLTEXT</code> indexes are now up to 100 times faster.
<LI>

Allow standard SQL syntax <code>X'<var>hexadecimal-number</var>'</code>.
<LI>

Cleaned up global lock handling for <code>FLUSH TABLES WITH READ LOCK</code>.
<LI>

Fixed problem with <code>DATETIME = constant</code> in <code>WHERE</code> optimization.
<LI>

Added <code>--master-data</code> and <code>--no-autocommit</code> options to
<code>mysqldump</code>. (Thanks to Brian Aker for this.)
<LI>

Added script <code>mysql_explain_log.sh</code> to distribution.
(Thanks to mobile.de).
</UL>



<H2><A NAME="News-3.23.x" HREF="manual_toc.html#News-3.23.x">D.4  Changes in release 3.23.x (Recent; still supported)</A></H2>

<P>
<A NAME="IDX2385"></A>

</P>
<P>
Please note that since release 4.0 is now production level, only critical
fixes are done in the 3.23 release series. You are recommended to upgrade
when possible, to take advantage of all speed and feature improvements in
4.0. See section <A HREF="manual_Installing.html#Upgrading-from-3.23">2.10.3  Upgrading from Version 3.23 to 4.0</A>.

</P>
<P>
The 3.23 release has several major features that are not
present in previous versions.  We have added three new
table types:

</P>
<DL COMPACT>

<DT><code>MyISAM</code>
<DD>
A new <code>ISAM</code> library which is tuned for SQL and supports large files.
<DT><code>InnoDB</code>
<DD>
A transaction-safe storage engine that supports row level locking, and many
Oracle-like features.
<DT><code>BerkeleyDB</code> or <code>BDB</code>
<DD>
Uses the Berkeley DB library from Sleepycat Software to implement
transaction-safe tables.
</DL>

<P>
Note that only <code>MyISAM</code> is available in the standard binary distribution.

</P>
<P>
The 3.23 release also includes support for database replication between
a master and many slaves, full-text indexing, and much more.

</P>
<P>
All new features are being developed in the 4.x version.  Only
bugfixes and minor enhancements to existing features will be
added to 3.23.

</P>
<P>
The replication code and BerkeleyDB code is still not as tested and as
the rest of the code, so we will probably need to do a couple of future
releases of 3.23 with small fixes for this part of the code. As long as
you don't use these features, you should be quite safe with
MySQL 3.23!

</P>
<P>
Note that the preceding remarks don't mean that replication or Berkeley DB don't
work.  We have done a lot of testing of all code, including replication
and <code>BDB</code> without finding any problems.  It only means that not as many
users use this code as the rest of the code and because of this we are
not yet 100% confident in this code.

</P>



<H3><A NAME="News-3.23.59" HREF="manual_toc.html#News-3.23.59">D.4.1  Changes in release 3.23.59 (not released yet)</A></H3>


<UL>
<LI>

Fixed an old bug in concurrent accesses to <code>MERGE</code> tables
(even one <code>MERGE</code> table and <code>MyISAM</code> tables), that could've
resulted in a crash or hang of the server. (Bug #2408)
<LI>

Fixed incorrect destruction of expression which led to crash of server on
complex <code>AND</code>/<code>OR</code> expressions if query was ignored (either by a
replication server because of <code>--replicate-*-table</code> rules, or by any MySQL
server because of a syntax error). (Bug #3969, Bug #4494)
<LI>

Fixed problem with parsing complex queries on 64-bit architectures.
(Bug #4204)
<LI>

Fixed a symlink vulnerability in the <tt>`mysqlbug'</tt> script
(vulnerability ID CAN-2004-0381). (Bug #3284)
<LI>

Fixed bug in privilege checking of <code>ALTER TABLE RENAME</code>. (Bug #3270)
<LI>

Fixed bugs in <code>ACOS()</code>, <code>ASIN()</code> (Bug #2338) 
and in <code>FLOOR()</code> (Bug #3051).
The cause of the problem is an overly strong optimization done by <code>gcc</code>
in this case.
<LI>

Fixed bug in <code>INSERT ... SELECT</code> statements where, if a <code>NOT NULL</code>
column is assigned a value of <code>NULL</code>, the following columns in the row
might be assigned a value of zero.  (Bug #2012)
<LI>

If a query was ignored on the slave (because of
<code>--replicate-ignore-table</code> and other similar rules), the slave
still checked if the query got the same error code (0, no error) as on
the master. So if the master had an error on the query (for example,
``Duplicate entry'' in a multiple-row insert), then the slave stopped
and warned that the error codes didn't match. This is a backport of the
fix for MySQL 4.0. (Bug #797)
<LI>

<code>mysqlbinlog</code> now asks for a password at console when the
<code>-p/--password</code> option is used with no argument. This is how the
other clients (<code>mysqladmin</code>, <code>mysqldump</code>..) already
behave. Note that one now has to use <code>mysqlbinlog -p&#60;my_password&#62;</code>;
<code>mysqlbinlog -p &#60;my_password&#62;</code> will not work anymore (in other
words, put no space after <code>-p</code>). (Bug #1595)
<LI>

On some 64-bit machines (some HP-UX and Solaris machines), a slave
installed with the 64-bit MySQL binary could not connect to its master
(it connected to itself instead). (Bug #1256, Bug #1381)
<LI>

Fixed a Windows-specific bug present since MySQL 3.23.57 and
3.23.58 that caused Windows slaves to crash when they started
replication if a <tt>`master.info'</tt> file existed. (Bug #1720)
<LI>

Fixed bug in <code>ALTER TABLE RENAME</code>, when rename to the table with
the same name in another database silently dropped destination table if
it existed. (Bug #2628)
<LI>

Fixed potential memory overrun in <code>mysql_real_connect()</code> (which
required a compromised DNS server and certain operating systems). (Bug #4017)
</UL>



<H3><A NAME="News-3.23.58" HREF="manual_toc.html#News-3.23.58">D.4.2  Changes in release 3.23.58 (11 Sep 2003)</A></H3>


<UL>
<LI>

Fixed buffer overflow in password handling which could potentially be
exploited by MySQL users with <code>ALTER</code> privilege on the
<code>mysql.user</code> table to execute random code or to gain shell access with
the UID of the <code>mysqld</code> process (thanks to Jedi/Sector One for spotting and
reporting this bug).
<LI>

<code>mysqldump</code> now correctly quotes all identifiers when communicating
with the server. This assures that during the dump process, <code>mysqldump</code>
will never send queries to the server that result in a syntax error. This
problem is <strong>not</strong> related to the <code>mysqldump</code> program's output,
which was not changed. (Bug #1148)
<LI>

Fixed table/column grant handling: The proper sort order (from most specific
to less specific, see section <A HREF="manual_MySQL_Database_Administration.html#Request_access">5.5.6  Access Control, Stage 2: Request Verification</A>) was not honored. (Bug #928)
<LI>

Fixed overflow bug in <code>MyISAM</code> and <code>ISAM</code> when a row is updated
in a table with a large number of columns and at least one <code>BLOB/TEXT</code>
column.
<LI>

Fixed MySQL so that field length (in C API) for the second column in
<code>SHOW CREATE TABLE</code> is always larger than the data length.
The only known application that was affected by the old behavior was
Borland dbExpress, which truncated the output from the command.
(Bug #1064)
<LI>

Fixed <code>ISAM</code> bug in <code>MAX()</code> optimization.
<LI>

Fixed <code>Unknown error</code> when doing <code>ORDER BY</code> on reference table which
was used with <code>NULL</code> value on <code>NOT NULL</code> column. (Bug #479)
</UL>



<H3><A NAME="News-3.23.57" HREF="manual_toc.html#News-3.23.57">D.4.3  Changes in release 3.23.57 (06 Jun 2003)</A></H3>


<UL>
<LI>

Fixed problem in alarm handling that could cause problems when getting a
packet that is too large.
<LI>

Fixed problem when installing MySQL as a service on Windows when two
arguments were specified to <code>mysqld</code> (option file group name and
service name).
<LI>

Fixed <code>kill pid-of-mysqld</code> to work on Mac OS X.
<LI>

<code>SHOW TABLE STATUS</code> displayed incorrect <code>Row_format</code> value for
tables that have been compressed with <code>myisampack</code>.
(Bug #427)
<LI>

<code>SHOW VARIABLES LIKE 'innodb_data_file_path'</code> displayed only the
name of the first data file. (Bug #468)
<LI>

Fixed security problem where <code>mysqld</code> didn't allow one to <code>UPDATE</code>
rows in a table even if one had a global <code>UPDATE</code> privilege and a
database <code>SELECT</code> privilege.
<LI>

Fixed a security problem with <code>SELECT</code> and wildcarded select list,
when user only had partial column <code>SELECT</code> privileges on the table.
<LI>

Fixed unlikely problem in optimizing <code>WHERE</code> clause with a constant
expression such as in <code>WHERE 1 AND (a=1 AND b=1)</code>.
<LI>

Fixed problem on IA-64 with timestamps that caused <code>mysqlbinlog</code> to fail.
<LI>

The default option for <code>innodb_flush_log_at_trx_commit</code> was changed
from 0 to 1 to make <code>InnoDB</code> tables ACID by default.
See section <A HREF="manual_InnoDB.html#InnoDB_start">15.5  <code>InnoDB</code> Startup Options</A>.
<LI>

Fixed problem with too many allocated alarms on slave when connecting to
master many times (normally not a very critical error).
<LI>

Fixed a bug in replication of temporary tables. (Bug #183)
<LI>

Fixed 64-bit bug that affected at least AMD hammer systems.
<LI>

Fixed a bug when doing <code>LOAD DATA INFILE IGNORE</code>: When reading
the binary log, <code>mysqlbinlog</code> and the replication code read <code>REPLACE</code>
instead of <code>IGNORE</code>. This could make the slave's table
become different from the master's table. (Bug #218)
<LI>

Fixed overflow bug in <code>MyISAM</code> when a row is inserted into a table with a 
large number of columns and at least one <code>BLOB/TEXT</code> column. Bug was caused
by incorrect calculation of the needed buffer to pack data.
<LI>

The binary log was not locked during <code>TRUNCATE <var>tbl_name</var></code> or
<code>DELETE FROM <var>tbl_name</var></code> statements, which could cause an <code>INSERT</code> to
<var>tbl_name</var> to be written to the log before the
<code>TRUNCATE</code> or <code>DELETE</code> statements.
<LI>

Fixed rare bug in <code>UPDATE</code> of <code>InnoDB</code> tables where one row could be
updated multiple times.
<LI>

Produce an error for empty table and column names.
<LI>

Changed <code>PROCEDURE ANALYSE()</code> to report <code>DATE</code> instead of
<code>NEWDATE</code>.
<LI>

Changed <code>PROCEDURE ANALYSE(#)</code> to restrict the number of values in an
<code>ENUM</code> column to <code>#</code> also for string values.
<LI>

<code>mysqldump</code> no longer silently deletes the binary logs when invoked with
the <code>--master-data</code> or <code>--first-slave</code> option;
while this behavior was convenient for some
users, others may suffer from it. Now you must explicitly ask for binary
logs to be deleted by using the new <code>--delete-master-logs</code> option.
<LI>

Fixed a bug in <code>mysqldump</code> when it was invoked with the
<code>--master-data</code> option: The <code>CHANGE MASTER TO</code> statements that were
appended to the SQL dump had incorrect coordinates. (Bug #159)
</UL>



<H3><A NAME="News-3.23.56" HREF="manual_toc.html#News-3.23.56">D.4.4  Changes in release 3.23.56 (13 Mar 2003)</A></H3>

<UL>
<LI>

Fixed <code>mysqld</code> crash on extremely small values of
<code>sort_buffer</code> variable.
<LI>

Fixed a bug in privilege system for <code>GRANT UPDATE</code> on the column level.
<LI>

Fixed a rare bug when using a date in <code>HAVING</code> with <code>GROUP BY</code>.
<LI>

Fixed checking of random part of <code>WHERE</code> clause. (Bug #142)
<LI>

Fixed MySQL (and <code>myisamchk</code>) crash on artificially
corrupted <tt>`.MYI'</tt> files.
<LI>

Security enhancement:
<code>mysqld</code> no longer reads options from world-writable config files.
<LI>

Security enhancement:
<code>mysqld</code> and <code>safe_mysqld</code> now use only the first <code>--user</code>
option specified on the command line. (Normally this comes from
<tt>`/etc/my.cnf'</tt>)
<LI>

Security enhancement:
Don't allow <code>BACKUP TABLE</code> to overwrite existing files.
<LI>

Fixed unlikely deadlock bug when one thread did a <code>LOCK TABLE</code> and
another thread did a <code>DROP TABLE</code>.  In this case one could do
a <code>KILL</code> on one of the threads to resolve the deadlock.
<LI>

<code>LOAD DATA INFILE</code> was not replicated by slave if
<code>replicate_*_table</code> was set on the slave.
<LI>

Fixed a bug in handling <code>CHAR(0)</code> columns that could cause incorrect
results from the query.
<LI>

Fixed a bug in <code>SHOW VARIABLES</code> on 64-bit platforms. The bug was
caused by incorrect declaration of variable <code>server_id</code>.
<LI>

The Comment column in <code>SHOW TABLE STATUS</code> now reports that it can
contain <code>NULL</code> values (which is the case for a crashed <tt>`.frm'</tt> file).
<LI>

Fixed the <code>rpl_rotate_logs</code> test to not fail on certain platforms (such as
Mac OS X) due to a too-long file name (changed <code>slave-master-info.opt</code>
to <code>.slave-mi</code>).
<LI>

Fixed a problem with <code>BLOB NOT NULL</code> columns used with <code>IS NULL</code>.
<LI>

Fixed bug in <code>MAX()</code> optimization in <code>MERGE</code> tables.
<LI>

Better <code>RAND()</code> initialization for new connections.
<LI>

Fixed bug with connect timeout. This bug was manifested on OS's with 
<code>poll()</code> system call, which resulted in timeout the value specified as
it was executed in both <code>select()</code> and <code>poll()</code>.
<LI>

Fixed bug in
<code>SELECT * FROM table WHERE datetime1 IS NULL OR datetime2 IS NULL</code>.
<LI>

Fixed bug in using aggregate functions as argument for <code>INTERVAL</code>,
<code>CASE</code>, <code>FIELD</code>, <code>CONCAT_WS</code>, <code>ELT</code> and
<code>MAKE_SET</code> functions.
<LI>

When running with <code>--lower-case-table-names=1</code> (default on Windows)
and you had tables or databases with mixed case on disk, then
executing <code>SHOW TABLE STATUS</code> followed with <code>DROP DATABASE</code>
or <code>DROP TABLE</code> could fail with <code>Errcode 13</code>.
<LI>

Fixed bug in logging to binary log (which affects replication) a query
that inserts a <code>NULL</code> in an <code>auto_increment</code> field and also
uses <code>LAST_INSERT_ID()</code>.
<LI>

Fixed bug in <code>mysqladmin --relative</code>.
<LI>

On some 64-bit systems, <code>show status</code> reported a strange number for
<code>Open_files</code> and <code>Open_streams</code>.
</UL>



<H3><A NAME="News-3.23.55" HREF="manual_toc.html#News-3.23.55">D.4.5  Changes in release 3.23.55 (23 Jan 2003)</A></H3>

<UL>
<LI>

Fixed double <code>free</code>'d pointer bug in <code>mysql_change_user()</code>
handling, that enabled a specially hacked version of MySQL client
to crash <code>mysqld</code>. <strong>Note</strong> that you must log in to the server
by using a valid user account to be able to exploit this bug.
<LI>

Fixed bug with the <code>--slow-log</code> when logging an administrator command
(like <code>FLUSH TABLES</code>).
<LI>

Fixed bug in <code>GROUP BY</code> when used on BLOB column with <code>NULL</code> values.
<LI>

Fixed a bug in handling <code>NULL</code> values in <code>CASE ... WHEN ...</code>.
<LI>

Bugfix for <code>--chroot</code> (see section <A HREF="manual_News.html#News-3.23.54">D.4.6  Changes in release 3.23.54 (05 Dec 2002)</A>)
is reverted. Unfortunately, there is no way to make it to work, without
introducing backward-incompatible changes in <tt>`my.cnf'</tt>.
Those who need <code>--chroot</code> functionality, should upgrade to MySQL 4.0.
(The fix in the 4.0 branch did not break backward-compatibility).
<LI>

Make <code>--lower-case-table-names</code> default on Mac OS X as the default
filesystem (HFS+) is case insensitive.
<LI>

Fixed a bug in <tt>`scripts/mysqld_safe.sh'</tt> in <code>NOHUP_NICENESS</code>
testing.
<LI>

Transactions in <code>AUTOCOMMIT=0</code> mode didn't rotate binary log.
<LI>

Fixed a bug in <code>scripts/make_binary_distribution</code> that resulted in
a remaining <code>@HOSTNAME@</code> variable instead of replacing it with the
correct path to the <code>hostname</code> binary.
<LI>

Fixed a very unlikely bug that could cause <code>SHOW PROCESSLIST</code> to core
dump in pthread_mutex_unlock() if a new thread was connecting.
<LI>

Forbid <code>SLAVE STOP</code> if the thread executing the query has locked
tables.  This removes a possible deadlock situation.
</UL>



<H3><A NAME="News-3.23.54" HREF="manual_toc.html#News-3.23.54">D.4.6  Changes in release 3.23.54 (05 Dec 2002)</A></H3>

<UL>
<LI>

Fixed a bug, that allowed to crash <code>mysqld</code>
with a specially crafted packet.
<LI>

Fixed a rare crash (double <code>free</code>'d pointer) when altering a
temporary table.
<LI>

Fixed buffer overrun in <code>libmysqlclient</code> library
that allowed malicious MySQL server to crash the client
application.
<LI>

Fixed security-related bug in <code>mysql_change_user()</code> handling.
All users are strongly recommended to upgrade to the version 3.23.54.
<LI>

Fixed bug that prevented <code>--chroot</code> command-line option of <code>mysqld</code>
from working.
<LI>

Fixed bug that made <code>OPTIMIZE TABLE</code> to corrupt the table
under some rare circumstances.
<LI>

Fixed <code>mysqlcheck</code> so it can deal with table names containing dashes.
<LI>

Fixed shutdown problem on Mac OS X.
<LI>

Fixed bug with comparing an indexed <code>NULL</code> field with <code>&#60;=&#62; NULL</code>.
<LI>

Fixed bug that caused <code>IGNORE INDEX</code> and <code>USE INDEX</code> sometimes
to be ignored.
<LI>

Fixed rare core dump problem in complicated <code>GROUP BY</code> queries that
didn't return any result.
<LI>

Fixed a bug where <code>MATCH ... AGAINST () &#62;=0</code> was treated as if it was
<code>&#62;</code>.
<LI>

Fixed core dump in <code>SHOW PROCESSLIST</code> when running with an
active slave (unlikely timing bug).
<LI>

Make it possible to use  multiple MySQL servers on Windows (code backported
from 4.0.2).
<LI>

One can create <code>TEMPORARY</code> <code>MERGE</code> tables now.
<LI>

Fixed that <code>--core-file</code> works on Linux (at least on kernel 2.4.18).
<LI>

Fixed a problem with <code>BDB</code> and <code>ALTER TABLE</code>.
<LI>

Fixed reference to freed memory when doing complicated <code>GROUP BY
... ORDER BY</code> queries.  Symptom was that <code>mysqld</code> died in function
<code>send_fields</code>.
<LI>

Allocate heap rows in smaller blocks to get better memory usage.
<LI>

Fixed memory allocation bug when storing <code>BLOB</code> values in internal
temporary tables used for some (unlikely) <code>GROUP BY</code> queries.
<LI>

Fixed a bug in key optimizing handling where the expression
<code>WHERE <var>col_name</var> = <var>key_col_name</var></code> was calculated as true
for <code>NULL</code> values.
<LI>

Fixed core dump bug when doing <code>LEFT JOIN ... WHERE <var>key_column</var>=NULL</code>.
<LI>

Fixed <code>MyISAM</code> crash when using dynamic-row tables with huge numbers of
packed fields.
<LI>

Updated source tree to be built using <code>automake</code> 1.5 and 
<code>libtool</code> 1.4.
</UL>



<H3><A NAME="News-3.23.53" HREF="manual_toc.html#News-3.23.53">D.4.7  Changes in release 3.23.53 (09 Oct 2002)</A></H3>

<UL>
<LI>

Fixed crash when <code>SHOW INNODB STATUS</code> was used and <code>skip-innodb</code>
was defined.
<LI>

Fixed possible memory corruption bug in binary log file handling when
slave rotated the logs (only affected 3.23, not 4.0).
<LI>

Fixed problem in <code>LOCK TABLES</code> on Windows when one connects to a
database that contains uppercase letters.
<LI>

Fixed that <code>--skip-show-database</code> doesn't reset the <code>--port</code> option.
<LI>

Small fix in <code>safe_mysqld</code> for some shells.
<LI>

Fixed that <code>FLUSH STATUS</code> doesn't reset <code>delayed_insert_threads</code>.
<LI>

Fixed core dump bug when using the <code>BINARY</code> cast on a <code>NULL</code> value.
<LI>

Fixed race condition when someone did a <code>GRANT</code> at the same time a new
user logged in or did a <code>USE database</code>.
<LI>

Fixed bug in <code>ALTER TABLE</code> and <code>RENAME TABLE</code> when running with
<code>-O lower_case_table_names=1</code> (typically on Windows) when giving the
table name in uppercase.
<LI>

Fixed that <code>-O lower_case_table_names=1</code> also converts database
names to lowercase.
<LI>

Fixed unlikely core dump with <code>SELECT ... ORDER BY ... LIMIT</code>.
<LI>

Changed <code>AND/OR</code> to report that they can return NULL. This fixes a
bug in <code>GROUP BY</code> on <code>AND/OR</code> expressions that return
<code>NULL</code>.
<LI>

Fixed a bug that <code>OPTIMIZE TABLE</code> of locked and modified <code>MyISAM</code> table,
reported table corruption.
<LI>

Fixed a <code>BDB</code>-related <code>ALTER TABLE</code> bug with dropping a column
and shutting down immediately thereafter.
<LI>

Fixed problem with <code>configure ... --localstatedir=...</code>.
<LI>

Fixed problem with <code>UNSIGNED BIGINT</code> on AIX (again).
<LI>

Fixed bug in pthread_mutex_trylock() on HPUX 11.0.
<LI>

Multi-threaded stress tests for <code>InnoDB</code>.
</UL>



<H3><A NAME="News-3.23.52" HREF="manual_toc.html#News-3.23.52">D.4.8  Changes in release 3.23.52 (14 Aug 2002)</A></H3>

<UL>
<LI>

Wrap <code>BEGIN</code>/<code>COMMIT</code> around transaction in the binary log.
This makes replication honor transactions.
<LI>

Fixed security bug when having an empty database name in the <code>user.db</code>
table.
<LI>

Changed initialization of <code>RAND()</code> to make it less predicatable.
<LI>

Fixed problem with <code>GROUP BY</code> on result with expression that created a
<code>BLOB</code> field.
<LI>

Fixed problem with <code>GROUP BY</code> on columns that have <code>NULL</code> values.
To solve this we now create an <code>MyISAM</code> temporary table when doing a
<code>GROUP BY</code> on a possible <code>NULL</code> item.
From MySQL 4.0.5 we can use in memory <code>HEAP</code> tables for this case.
<LI>

Fixed problem with privilege tables when downgrading from 4.0.2 to 3.23.
<LI>

Fixed thread bug in <code>SLAVE START</code>, <code>SLAVE STOP</code> and automatic repair
of <code>MyISAM</code> tables that could cause table cache to be corrupted.
<LI>

Fixed possible thread related key-cache-corruption problem with
<code>OPTIMIZE TABLE</code> and <code>REPAIR TABLE</code>.
<LI>

Added name of 'administrator command' logs.
<LI>

Fixed bug with creating an auto-increment value on second part of a
<code>UNIQUE()</code> key where first part could contain <code>NULL</code> values.
<LI>

Don't write slave-timeout reconnects to the error log.
<LI>

Fixed bug with slave net read timeouting
<LI>

Fixed a core-dump bug with <code>MERGE</code> tables and <code>MAX()</code> function.
<LI>

Fixed bug in <code>ALTER TABLE</code> with <code>BDB</code> tables.
<LI>

Fixed bug when logging <code>LOAD DATA INFILE</code> to binary log with no 
active database.
<LI>

Fixed a bug in range optimizer (causing crashes).
<LI>

Fixed possible problem in replication when doing <code>DROP DATABASE</code> on a
database with <code>InnoDB</code> tables.
<LI>

Fixed <code>mysql_info()</code> to return 0 for <code>Duplicates</code> value when using
<code>INSERT DELAYED IGNORE</code>.
<LI>

Added <code>-DHAVE_BROKEN_REALPATH</code> to the Mac OS X (darwin) compile
options in <tt>`configure.in'</tt> to fix a failure under high load.
</UL>



<H3><A NAME="News-3.23.51" HREF="manual_toc.html#News-3.23.51">D.4.9  Changes in release 3.23.51 (31 May 2002)</A></H3>


<UL>
<LI>

Fix bug with closing tags missing slash for <code>mysqldump</code> XML output.
<LI>

Remove endspace from <code>ENUM</code> values. (This fixed a problem with
<code>SHOW CREATE TABLE</code>.)
<LI>

Fixed bug in <code>CONCAT_WS()</code> that cut the result.
<LI>

Changed name of server variables <code>Com_show_master_stat</code> to
<code>Com_show_master_status</code> and <code>Com_show_slave_stat</code> to
<code>Com_show_slave_status</code>.
<LI>

Changed handling of <code>gethostbyname()</code> to make the client library
thread-safe even if <code>gethostbyname_r</code> doesn't exist.
<LI>

Fixed core-dump problem when giving a wrong password string to <code>GRANT</code>.
<LI>

Fixed bug in <code>DROP DATABASE</code> with symlinked directory.
<LI>

Fixed optimization problem with <code>DATETIME</code> and value outside
<code>DATETIME</code> range.
<LI>

Removed Sleepycat's <code>BDB</code> doc files from the source tree, as they're not
needed (MySQL covers <code>BDB</code> in its own documentation).
<LI>

Fixed MIT-pthreads to compile with <code>glibc</code> 2.2 (needed for
<code>make dist</code>).
<LI>

Fixed the <code>FLOAT(X+1,X)</code> is not converted to <code>FLOAT(X+2,X)</code>.
(This also affected <code>DECIMAL</code>, <code>DOUBLE</code> and <code>REAL</code> types)
<LI>

Fixed the result from <code>IF()</code> is case in-sensitive if the second and
third arguments are case sensitive.
<LI>

Fixed core dump problem on OSF/1 in <code>gethostbyname_r</code>.
<LI>

Fixed that underflowed decimal fields are not zero filled.
<LI>

If we get an overflow when inserting <code>'+11111'</code> for
<code>DECIMAL(5,0) UNSIGNED</code> columns, we will just drop the sign.
<LI>

Fixed optimization bug with <code>ISNULL(<var>expression_which_cannot_be_null</var>)</code> and
<code>ISNULL(<var>constant_expression</var>)</code>.
<LI>

Fixed host lookup bug in the <code>glibc</code> library that we used with the 3.23.50
Linux-x86 binaries.
</UL>



<H3><A NAME="News-3.23.50" HREF="manual_toc.html#News-3.23.50">D.4.10  Changes in release 3.23.50 (21 Apr 2002)</A></H3>


<UL>
<LI>

Fixed buffer overflow problem if someone specified a too-long <code>datadir</code>
parameter to <code>mysqld</code>.
<LI>

Add missing <code>&#60;row&#62;</code> tags for <code>mysqldump</code> XML output.
<LI>

Fixed problem with <code>crash-me</code> and <code>gcc</code> 3.0.4.
<LI>

Fixed that <code>@@unknown_variable</code> doesn't hang server.
<LI>

Added <code>@@VERSION</code> as a synonym for <code>VERSION()</code>.
<LI>

<code>SHOW VARIABLES LIKE '<var>xxx</var>'</code> is now case-insensitive.
<LI>

Fixed timeout for <code>GET_LOCK()</code> on HP-UX with DCE threads.
<LI>

Fixed memory allocation bug in the glibc library used to build Linux
binaries, which caused <code>mysqld</code> to die in <code>free()</code>.
<LI>

Fixed <code>SIGINT</code> and <code>SIGQUIT</code> problems in <code>mysql</code>.
<LI>

Fixed bug in character table converts when used with big (larger than 64KB)
strings.
<LI>

<code>InnoDB</code> now retains foreign key constraints through <code>ALTER TABLE</code>
and <code>CREATE/DROP INDEX</code>.
<LI>

<code>InnoDB</code> now allows foreign key constraints to be added through the
<code>ALTER TABLE</code> syntax.
<LI>

<code>InnoDB</code> tables can now be set to automatically grow in size (autoextend).
<LI>

Our Linux RPMS and binaries are now compiled with <code>gcc</code> 3.0.4, which
should make them a bit faster.
<LI>

Fixed some buffer overflow problems when reading startup parameters.
<LI>

Because of problems on shutdown we have now disabled named pipes on
Windows by default.  One can enable named pipes by starting <code>mysqld</code> with
<code>--enable-named-pipe</code>.
<LI>

Fixed bug when using <code>WHERE key_column = 'J' or key_column='j'</code>.
<LI>

Fixed core-dump bug when using <code>--log-bin</code> with <code>LOAD DATA
INFILE</code> without an active database.
<LI>

Fixed bug in <code>RENAME TABLE</code> when used with
<code>lower_case_table_names=1</code> (default on Windows).
<LI>

Fixed unlikely core-dump bug when using <code>DROP TABLE</code> on a table
that was in use by a thread that also used queries on only temporary tables.
<LI>

Fixed problem with <code>SHOW CREATE TABLE</code> and <code>PRIMARY KEY</code> when using
32 indexes.
<LI>

Fixed that one can use <code>SET PASSWORD</code> for the anonymous user.
<LI>

Fixed core dump bug when reading client groups from option files using
<code>mysql_options()</code>.
<LI>

Memory leak (16 bytes per every <strong>corrupted</strong> table) closed.
<LI>

Fixed binary builds to use <code>--enable-local-infile</code>.
<LI>

Update source to work with new version of <code>bison</code>.
<LI>

Updated shell scripts to now agree with new POSIX standard.
<LI>

Fixed bug where <code>DATE_FORMAT()</code> returned empty string when used
with <code>GROUP BY</code>.
</UL>



<H3><A NAME="News-3.23.49" HREF="manual_toc.html#News-3.23.49">D.4.11  Changes in release 3.23.49 (14 Feb 2002)</A></H3>


<UL>
<LI>

For a <code>MERGE</code> table, <code>DELETE FROM merge_table</code> used without a
<code>WHERE</code> clause no longer clears the mapping for the table by emptying
the <tt>`.MRG'</tt> file. Instead, it deletes records from the mapped tables.
<LI>

Don't give warning for a statement that is only a comment; this is needed for
<code>mysqldump --disable-keys</code> to work.
<LI>

Fixed unlikely caching bug when doing a join without keys. In this case,
the last used field for a table always returned <code>NULL</code>.
<LI>

Added options to make <code>LOAD DATA LOCAL INFILE</code> more secure.
<LI>

MySQL binary release 3.23.48 for Linux contained a new <code>glibc</code> library,
which has serious problems under high load and Red Hat 7.2.  The 3.23.49 binary
release doesn't have this problem.
<LI>

Fixed shutdown problem on NT.
</UL>



<H3><A NAME="News-3.23.48" HREF="manual_toc.html#News-3.23.48">D.4.12  Changes in release 3.23.48 (07 Feb 2002)</A></H3>


<UL>
<LI>

Added <code>--xml</code> option to <code>mysqldump</code> for producing XML output.
<LI>

Changed to use <code>autoconf</code> 2.52 (from <code>autoconf</code> 2.13)
<LI>

Fixed bug in complicated join with <code>const</code> tables.
<LI>

Added internal safety checks for <code>InnoDB</code>.
<LI>

Some <code>InnoDB</code> variables were always shown in <code>SHOW VARIABLES</code> as
<code>OFF</code> on high-byte-first systems (like SPARC).
<LI>

Fixed problem with one thread using an <code>InnoDB</code> table and another
thread doing an <code>ALTER TABLE</code> on the same table. Before that,
<code>mysqld</code> could crash with an assertion failure in <tt>`row0row.c'</tt>,
line 474.
<LI>

Tuned the <code>InnoDB</code> SQL optimizer to favor index searches more often
over table scans.
<LI>

Fixed a performance problem with <code>InnoDB</code> tables when several large
<code>SELECT</code> queries are run concurrently on a multiprocessor Linux
computer.  Large CPU-bound <code>SELECT</code> queries will now also generally
run faster on all platforms.
<LI>

If MySQL binary logging is used, <code>InnoDB</code> now prints after crash recovery the
latest MySQL binary log name and the offset <code>InnoDB</code> was able to recover
to. This is useful, for example, when resynchronizing a master and a
slave database in replication.
<LI>

Added better error messages to help in installation problems of <code>InnoDB</code>
tables.
<LI>

It is now possible to recover MySQL temporary tables that have become
orphaned inside the <code>InnoDB</code> tablespace.
<LI>

<code>InnoDB</code> now prevents a <code>FOREIGN KEY</code> declaration where the
signedness is not the same in the referencing and referenced integer columns.
<LI>

Calling <code>SHOW CREATE TABLE</code> or <code>SHOW TABLE STATUS</code> could cause
memory corruption and make <code>mysqld</code> crash.  Especially at risk was
<code>mysqldump</code>, because it frequently calls <code>SHOW CREATE TABLE</code>.
<LI>

If inserts to several tables containing an <code>AUTO_INCREMENT</code> column were
wrapped inside one <code>LOCK TABLES</code>, <code>InnoDB</code> asserted in
<tt>`lock0lock.c'</tt>.
<LI>

In 3.23.47 we allowed several <code>NULL</code> values in a <code>UNIQUE</code> secondary
index for an <code>InnoDB</code> table.  But <code>CHECK TABLE</code> was not relaxed: it
reports the table as corrupt.  <code>CHECK TABLE</code> no longer complains in
this situation.
<LI>

<code>SHOW GRANTS</code> now shows <code>REFERENCES</code> instead of <code>REFERENCE</code>.
</UL>



<H3><A NAME="News-3.23.47" HREF="manual_toc.html#News-3.23.47">D.4.13  Changes in release 3.23.47 (27 Dec 2001)</A></H3>


<UL>
<LI>

Fixed bug when using the following construct:
<code>SELECT ... WHERE <var>key</var>=@<var>var_name</var> OR <var>key</var>=@<var>var_name2</var></code>
<LI>

Restrict <code>InnoDB</code> keys to 500 bytes.
<LI>

<code>InnoDB</code> now supports <code>NULL</code> in keys.
<LI>

Fixed shutdown problem on HP-UX. (Introduced in 3.23.46)
<LI>

Fixed core dump bug in replication when using <code>SELECT RELEASE_LOCK()</code>.
<LI>

Added new statement: <code>DO <var>expr</var>[,<var>expr</var>]...</code>
<LI>

Added <code>slave-skip-errors</code> option.
<LI>

Added statistics variables for all MySQL commands. (<code>SHOW STATUS</code> is
now much longer.)
<LI>

Fixed default values for <code>InnoDB</code> tables.
<LI>

Fixed that <code>GROUP BY <var>expr</var> DESC</code> works.
<LI>

Fixed bug when using <code>t1 LEFT JOIN t2 ON t2.key=constant</code>.
<LI>

<code>mysql_config</code> now also works with binary (relocated) distributions.
</UL>



<H3><A NAME="News-3.23.46" HREF="manual_toc.html#News-3.23.46">D.4.14  Changes in release 3.23.46 (29 Nov 2001)</A></H3>


<UL>
<LI>

Fixed problem with aliased temporary table replication.
<LI>

<code>InnoDB</code> and <code>BDB</code> tables will now use index when doing an
<code>ORDER BY</code> on the whole table.
<LI>

Fixed bug where one got an empty set instead of a DEADLOCK error when using
<code>BDB</code> tables.
<LI>

One can now kill <code>ANALYZE TABLE</code>, <code>REPAIR TABLE</code>, and <code>OPTIMIZE TABLE</code> when
the thread is waiting to get a lock on the table.
<LI>

Fixed race condition in <code>ANALYZE TABLE</code>.
<LI>

Fixed bug when joining with caching (unlikely to happen).
<LI>

Fixed race condition when using the binary log and <code>INSERT DELAYED</code>
which could cause the binary log to have rows that were not yet written
to <code>MyISAM</code> tables.
<LI>

Changed caching of binary log to make replication slightly faster.
<LI>

Fixed bug in replication on Mac OS X.
</UL>



<H3><A NAME="News-3.23.45" HREF="manual_toc.html#News-3.23.45">D.4.15  Changes in release 3.23.45 (22 Nov 2001)</A></H3>


<UL>
<LI>

<code>(UPDATE|DELETE) ...WHERE MATCH</code> bugfix.
<LI>

shutdown should now work on Darwin (Mac OS X).
<LI>

Fixed core dump when repairing corrupted packed <code>MyISAM</code> files.
<LI>

<code>--core-file</code> now works on Solaris.
<LI>

Fix a bug which could cause <code>InnoDB</code> to complain if it cannot find
free blocks from the buffer cache during recovery.
<LI>

Fixed bug in <code>InnoDB</code> insert buffer B-tree handling that could cause
crashes.
<LI>

Fixed bug in <code>InnoDB</code> lock timeout handling.
<LI>

Fixed core dump bug in <code>ALTER TABLE</code> on a <code>TEMPORARY</code> <code>InnoDB</code>
table.
<LI>

Fixed bug in <code>OPTIMIZE TABLE</code> that reset index cardinality if it
was up to date.
<LI>

Fixed problem with <code>t1 LEFT_JOIN t2 ... WHERE t2.date_column IS NULL</code> when
date_column was declared as <code>NOT NULL</code>.
<LI>

Fixed bug with <code>BDB</code> tables and keys on <code>BLOB</code> columns.
<LI>

Fixed bug in <code>MERGE</code> tables on OS with 32-bit file pointers.
<LI>

Fixed bug in <code>TIME_TO_SEC()</code> when using negative values.
</UL>



<H3><A NAME="News-3.23.44" HREF="manual_toc.html#News-3.23.44">D.4.16  Changes in release 3.23.44 (31 Oct 2001)</A></H3>


<UL>
<LI>

Fixed <code>Rows_examined</code> count in slow query log.
<LI>

Fixed bug when using a reference to an <code>AVG()</code> column in <code>HAVING</code>.
<LI>

Fixed that date functions that require correct dates, like
<code>DAYOFYEAR(column)</code>, will return <code>NULL</code> for <code>0000-00-00</code> dates.
<LI>

Fixed bug in const-propagation when comparing columns of different
types. (<code>SELECT * FROM date_col="2001-01-01" and date_col=time_col</code>)
<LI>

Fixed bug that caused error message <code>Can't write, because of unique
constraint</code> with some <code>GROUP BY</code> queries.
<LI>

Fixed problem with <code>sjis</code> character strings used within quoted table
names.
<LI>

Fixed core dump when using <code>CREATE ... FULLTEXT</code> keys with other
storage engines than <code>MyISAM</code>.
<LI>

Don't use <code>signal()</code> on Windows because this appears to not be
100% reliable.
<LI>

Fixed bug when doing <code>WHERE col_name=NULL</code> on an indexed column
that had <code>NULL</code> values.
<LI>

Fixed bug when doing <code>LEFT JOIN ...  ON (col_name = constant) WHERE col_name = constant</code>.
<LI>

When using replications, aborted queries that contained <code>%</code> could cause
a core dump.
<LI>

<code>TCP_NODELAY</code> was not used on some systems. (Speed problem.)
<LI>

Applied portability fixes for OS/2. (Patch by Yuri Dario.)
</UL>

<P>
The following changes are for <code>InnoDB</code> tables:

</P>

<UL>
<LI>

Add missing <code>InnoDB</code> variables to <code>SHOW VARIABLES</code>.
<LI>

Foreign key checking is now done for <code>InnoDB</code> tables.
<LI>

<code>DROP DATABASE</code> now works also for <code>InnoDB</code> tables.
<LI>

<code>InnoDB</code> now supports data files and raw disk partitions bigger
than 4GB on those operating systems that have big files.
<LI>

<code>InnoDB</code> calculates better table cardinality estimates for the
MySQL optimizer.
<LI>

Accent characters in the default character set <code>latin1</code> are ordered
according to the MySQL ordering.

Note: If you are using <code>latin1</code> and have inserted characters whose
code is greater than 127 into an indexed <code>CHAR</code> column, you should
run <code>CHECK TABLE</code> on your table when you upgrade to 3.23.44, and
drop and reimport the table if <code>CHECK TABLE</code> reports an error!
<LI>

A new <tt>`my.cnf'</tt> parameter, <code>innodb_thread_concurrency</code>, helps in
performance tuning in heavily concurrent environments.
<LI>

A new <tt>`my.cnf'</tt> parameter, <code>innodb_fast_shutdown</code>, speeds up
server shutdown.
<LI>

A new <tt>`my.cnf'</tt> parameter, <code>innodb_force_recovery</code>, helps to save
your data in case the disk image of the database becomes corrupt.
<LI>

<code>innodb_monitor</code> has been improved and a new
<code>innodb_table_monitor</code> added.
<LI>

Increased maximum key length from 500 to 7000 bytes.
<LI>

Fixed a bug in replication of <code>AUTO_INCREMENT</code> columns with
multiple-line inserts.
<LI>

Fixed a bug when the case of letters changes in an update of an indexed
secondary column.
<LI>

Fixed a hang when there are more than 24 data files.
<LI>

Fixed a crash when <code>MAX(col)</code> is selected from an empty table, and
<code>col</code> is not the first column in a multi-column index.
<LI>

Fixed a bug in purge which could cause crashes.
</UL>



<H3><A NAME="News-3.23.43" HREF="manual_toc.html#News-3.23.43">D.4.17  Changes in release 3.23.43 (04 Oct 2001)</A></H3>


<UL>
<LI>

Fixed a bug in <code>INSERT DELAYED</code> and <code>FLUSH TABLES</code> introduced
in 3.23.42.
<LI>

Fixed unlikely bug, which returned non-matching rows, in <code>SELECT</code> with
many tables and multi-column indexes and 'range' type.
<LI>

Fixed an unlikely core dump bug when doing <code>EXPLAIN SELECT</code> when using
many tables and <code>ORDER BY</code>.
<LI>

Fixed bug in <code>LOAD DATA FROM MASTER</code> when using table with
<code>CHECKSUM=1</code>.
<LI>

Added unique error message when a DEADLOCK occurs during a transaction with
<code>BDB</code> tables.
<LI>

Fixed problem with <code>BDB</code> tables and <code>UNIQUE</code> columns defined
as <code>NULL</code>.
<LI>

Fixed problem with <code>myisampack</code> when using pre-space filled <code>CHAR</code>
columns.
<LI>

Applied patch from Yuri Dario for OS/2.
<LI>

Fixed bug in <code>--safe-user-create</code>.
</UL>



<H3><A NAME="News-3.23.42" HREF="manual_toc.html#News-3.23.42">D.4.18  Changes in release 3.23.42 (08 Sep 2001)</A></H3>


<UL>
<LI>

Fixed problem when using <code>LOCK TABLES</code> and <code>BDB</code> tables.
<LI>

Fixed problem with <code>REPAIR TABLE</code> on <code>MyISAM</code> tables with row
lengths in the range from 65517 to 65520 bytes.
<LI>

Fixed rare hang when doing <code>mysqladmin shutdown</code> when there was
a lot of activity in other threads.
<LI>

Fixed problem with <code>INSERT DELAYED</code> where delayed thread could be
hanging on <code>upgrading locks</code> for no apparent reason.
<LI>

Fixed problem with <code>myisampack</code> and <code>BLOB</code>.
<LI>

Fixed problem when one edited <tt>`.MRG'</tt> tables by hand.
(Patch from Benjamin Pflugmann).
<LI>

Enforce that all tables in a <code>MERGE</code> table come from the same
database.
<LI>

Fixed bug with <code>LOAD DATA INFILE</code> and transactional tables.
<LI>

Fix bug when using <code>INSERT DELAYED</code> with wrong column definition.
<LI>

Fixed core dump during <code>REPAIR TABLE</code> of some particularly broken tables.
<LI>

Fixed bug in <code>InnoDB</code> and <code>AUTO_INCREMENT</code> columns.
<LI>

Fixed bug in <code>InnoDB</code> and <code>RENAME TABLE</code> columns.
<LI>

Fixed critical bug in <code>InnoDB</code> and <code>BLOB</code> columns.  If you have
used <code>BLOB</code> columns larger than 8000 bytes in an <code>InnoDB</code>
table, it is necessary to dump the table with <code>mysqldump</code>, drop it and
restore it from the dump.
<LI>

Applied large patch for OS/2 from Yuri Dario.
<LI>

Fixed problem with <code>InnoDB</code> when one could get the error <code>Can't
execute the given command...</code> even when no transaction was active.
<LI>

Applied some minor fixes that concern Gemini.
<LI>

Use real arithmetic operations even in integer context if not
all arguments are integers. (Fixes uncommon bug in some integer
contexts).
<LI>

Don't force everything to lowercase on Windows. (To fix problem
with Windows and <code>ALTER TABLE</code>.)  Now <code>--lower_case_table_names</code>
also works on Unix.
<LI>

Fixed that automatic rollback is done when thread end doesn't lock
other threads.
</UL>



<H3><A NAME="News-3.23.41" HREF="manual_toc.html#News-3.23.41">D.4.19  Changes in release 3.23.41 (11 Aug 2001)</A></H3>


<UL>
<LI>

Added <code>--sql-mode=<var>value</var>[,<var>value</var>[,<var>value</var>]]</code> option to <code>mysqld</code>.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_options">5.2.1  <code>mysqld</code> Command-Line Options</A>.
<LI>

Fixed possible problem with <code>shutdown</code> on Solaris where the
<tt>`.pid'</tt> file wasn't deleted.
<LI>

<code>InnoDB</code> now supports &#60; 4GB rows. The former limit was 8000 bytes.
<LI>

The <code>doublewrite</code> file flush method is used in <code>InnoDB</code>.
It reduces the need for Unix <code>fsync()</code> calls to a fraction and
improves performance on most Unix flavors.
<LI>

You can now use the <code>InnoDB</code> Monitor to print a lot of <code>InnoDB</code> state
information, including locks, to the standard output.  This is useful in
performance tuning.
<LI>

Several bugs which could cause hangs in <code>InnoDB</code> have been fixed.
<LI>

Split <code>record_buffer</code> to <code>record_buffer</code> and
<code>record_rnd_buffer</code>.  To make things compatible to previous MySQL
versions, if <code>record_rnd_buffer</code> is not set, then it takes the
value of <code>record_buffer</code>.
<LI>

Fixed optimizing bug in <code>ORDER BY</code> where some <code>ORDER BY</code> parts
where wrongly removed.
<LI>

Fixed overflow bug with <code>ALTER TABLE</code> and <code>MERGE</code> tables.
<LI>

Added prototypes for <code>my_thread_init()</code> and <code>my_thread_end()</code> to
<tt>`mysql_com.h'</tt>
<LI>

Added <code>--safe-user-create</code> option to <code>mysqld</code>.
<LI>

Fixed bug in <code>SELECT DISTINCT ... HAVING</code> that caused error message
<code>Can't find record in #...</code>
</UL>



<H3><A NAME="News-3.23.40" HREF="manual_toc.html#News-3.23.40">D.4.20  Changes in release 3.23.40 (18 Jul 2001)</A></H3>


<UL>
<LI>

Fixed problem with <code>--low-priority-updates</code> and <code>INSERT</code> statements.
<LI>

Fixed bug in slave thread when under some rare circumstances it could
get 22 bytes ahead on the offset in the master.
<LI>

Added <code>slave_net_timeout</code> for replication.
<LI>

Fixed problem with <code>UPDATE</code> and <code>BDB</code> tables.
<LI>

Fixed hard bug in <code>BDB</code> tables when using key parts.
<LI>

Fixed problem when using <code>GRANT FILE ON database.* ...</code>; previously
we added the <code>DROP</code> privilege for the database.
<LI>

Fixed <code>DELETE FROM <var>tbl_name</var> ... LIMIT 0</code> and
<code>UPDATE FROM <var>tbl_name</var> ... LIMIT 0</code>, which acted as though the
<code>LIMIT</code> clause was not present (they deleted or updated all selected
rows).
<LI>

<code>CHECK TABLE</code> now checks whether an <code>AUTO_INCREMENT</code> column contains
the value 0.
<LI>

Sending a <code>SIGHUP</code> to <code>mysqld</code> will now only flush the logs,
not reset the replication.
<LI>

Fixed parser to allow floats of type <code>1.0e1</code> (no sign after <code>e</code>).
<LI>

Option <code>--force</code> to <code>myisamchk</code> now also updates states.
<LI>

Added option <code>--warnings</code> to <code>mysqld</code>. Now <code>mysqld</code>
prints the error <code>Aborted connection</code> only if this option is used.
<LI>

Fixed problem with <code>SHOW CREATE TABLE</code> when you didn't have a
<code>PRIMARY KEY</code>.
<LI>

Properly fixed the rename of <code>innodb_unix_file_flush_method</code> variable to
<code>innodb_flush_method</code>.
<LI>

Fixed bug when converting <code>BIGINT UNSIGNED</code> to <code>DOUBLE</code>. This caused
a problem when doing comparisons with <code>BIGINT</code> values outside of the
signed range.
<LI>

Fixed bug in <code>BDB</code> tables when querying empty tables.
<LI>

Fixed a bug when using <code>COUNT(DISTINCT)</code> with <code>LEFT JOIN</code> and
there weren't any matching rows.
<LI>

Removed all documentation referring to the <code>GEMINI</code> table
type. <code>GEMINI</code> is not released under an Open Source license.
</UL>



<H3><A NAME="News-3.23.39" HREF="manual_toc.html#News-3.23.39">D.4.21  Changes in release 3.23.39 (12 Jun 2001)</A></H3>


<UL>
<LI>

The <code>AUTO_INCREMENT</code> sequence wasn't reset when dropping
and adding an <code>AUTO_INCREMENT</code> column.
<LI>

<code>CREATE ... SELECT</code> now creates non-unique indexes delayed.
<LI>

Fixed problem where <code>LOCK TABLES <var>tbl_name</var> READ</code> followed by
<code>FLUSH TABLES</code> put an exclusive lock on the table.
<LI>

<code>REAL @variable</code> values were represented with only 2 digits when
converted to strings.
<LI>

Fixed problem that client ``hung'' when <code>LOAD TABLE FROM MASTER</code> failed.
<LI>

<code>myisamchk --fast --force</code> will no longer repair tables
that only had the open count wrong.
<LI>

Added functions to handle symbolic links to make life easier in 4.0.
<LI>

We are now using the <code>-lcma</code> thread library on HP-UX 10.20 so
that MySQL will be more stable on HP-UX.
<LI>

Fixed problem with <code>IF()</code> and number of decimals in the result.
<LI>

Fixed date-part extraction functions to work with dates where day
and/or month is 0.
<LI>

Extended argument length in option files from 256 to 512 chars.
<LI>

Fixed problem with shutdown when <code>INSERT DELAYED</code> was waiting for
a <code>LOCK TABLE</code>.
<LI>

Fixed core dump bug in <code>InnoDB</code> when tablespace was full.
<LI>

Fixed problem with <code>MERGE</code> tables and big tables (larger than 4GB)
when using <code>ORDER BY</code>.
</UL>



<H3><A NAME="News-3.23.38" HREF="manual_toc.html#News-3.23.38">D.4.22  Changes in release 3.23.38 (09 May 2001)</A></H3>


<UL>
<LI>

Fixed a bug when <code>SELECT</code> from <code>MERGE</code> table
sometimes results in incorrectly ordered rows.
<LI>

Fixed a bug in <code>REPLACE()</code> when using the <code>ujis</code> character set.
<LI>

Applied Sleepycat <code>BDB</code> patches 3.2.9.1 and 3.2.9.2.
<LI>

Added <code>--skip-stack-trace</code> option to <code>mysqld</code>.
<LI>

<code>CREATE TEMPORARY</code> now works with <code>InnoDB</code> tables.
<LI>

<code>InnoDB</code> now promotes sub keys to whole keys.
<LI>

Added option <code>CONCURRENT</code> to <code>LOAD DATA</code>.
<LI>

Better error message when slave <code>max_allowed_packet</code> is too low to
read a very long log event from the master.
<LI>

Fixed bug when too many rows where removed when using
<code>SELECT DISTINCT ... HAVING</code>.
<LI>

<code>SHOW CREATE TABLE</code> now returns <code>TEMPORARY</code> for temporary tables.
<LI>

Added <code>Rows_examined</code> to slow query log.
<LI>

Fixed problems with function returning empty string when used together with
a group function and a <code>WHERE</code> that didn't match any rows.
<LI>

New program <code>mysqlcheck</code>.
<LI>

Added database name to output for administrative commands like <code>CHECK
TABLE</code>, <code>REPAIR TABLE</code>, <code>OPTIMIZE TABLE</code>.
<LI>

Lots of portability fixes for <code>InnoDB</code>.
<LI>

Changed optimizer so that queries like
<code>SELECT * FROM <var>tbl_name</var>, <var>tbl_name2</var> ... ORDER BY <var>key_part1</var> LIMIT <var>row_count</var></code>
will use an index on <var>key_part1</var> instead of <code>filesort</code>.
<LI>

Fixed bug when doing
<code>LOCK TABLE <var>to_table</var> WRITE,...; INSERT INTO <var>to_table</var>... SELECT ...</code>
when <var>to_table</var> was empty.
<LI>

Fixed bug with <code>LOCK TABLE</code> and <code>BDB</code> tables.
</UL>



<H3><A NAME="News-3.23.37" HREF="manual_toc.html#News-3.23.37">D.4.23  Changes in release 3.23.37 (17 Apr 2001)</A></H3>


<UL>
<LI>

Fixed a bug when using <code>MATCH()</code> in <code>HAVING</code> clause.
<LI>

Fixed a bug when using <code>HEAP</code> tables with <code>LIKE</code>.
<LI>

Added <code>--mysql-version</code> option to <code>safe_mysqld</code>
<LI>

Changed <code>INNOBASE</code> to <code>InnoDB</code> (because the <code>INNOBASE</code>
name was already used). All <code>configure</code> options and <code>mysqld</code>
start options now use <code>innodb</code> instead of <code>innobase</code>. This
means that before upgrading to this version, you have to change any
configuration files where you have used <code>innobase</code> options!
<LI>

Fixed bug when using indexes on <code>CHAR(255) NULL</code> columns.
<LI>

Slave thread will now be started even if <code>master-host</code> is not set, as
long as <code>server-id</code> is set and valid <tt>`master.info'</tt> is present.
<LI>

Partial updates (terminated with kill) are now logged with a special error
code to the binary log. Slave will refuse to execute them if the error code
indicates the update was terminated abnormally, and will have to be recovered
with <code>SET SQL_SLAVE_SKIP_COUNTER=1; SLAVE START</code> after a manual sanity
check/correction of data integrity.
<LI>

Fixed bug that erroneously logged a drop of internal temporary table
on thread termination to the binary log -- this bug affected replication.
<LI>

Fixed a bug in <code>REGEXP</code> on 64-bit machines.
<LI>

<code>UPDATE</code> and <code>DELETE</code> with <code>WHERE unique_key_part IS NULL</code>
didn't update/delete all rows.
<LI>

Disabled <code>INSERT DELAYED</code> for tables that support transactions.
<LI>

Fixed bug when using date functions on <code>TEXT</code>/<code>BLOB</code> column
with wrong date format.
<LI>

UDFs now also work on Windows. (Patch by Ralph Mason.)
<LI>

Fixed bug in <code>ALTER TABLE</code> and <code>LOAD DATA INFILE</code> that disabled
key-sorting. These commands should now be faster in most cases.
<LI>

Fixed performance bug where reopened tables (tables that had been
waiting for <code>FLUSH</code> or <code>REPAIR TABLE</code>) would not use indexes for the
next query.
<LI>

Fixed problem with <code>ALTER TABLE</code> to <code>InnoDB</code> tables on FreeBSD.
<LI>

Added <code>mysqld</code> variables <code>myisam_max_sort_file_size</code> and
<code>myisam_max_extra_sort_file_size</code>.
<LI>

Initialize signals early to avoid problem with signals in <code>InnoDB</code>.
<LI>

Applied patch for the <code>tis620</code> character set to make comparisons
case-independent and to fix a bug in <code>LIKE</code> for this character set.
<strong>Note</strong>: All tables that uses the <code>tis620</code> character set must be
fixed with  <code>myisamchk -r</code> or <code>REPAIR TABLE</code> !
<LI>

Added <code>--skip-safemalloc</code> option to <code>mysqld</code>.
</UL>



<H3><A NAME="News-3.23.36" HREF="manual_toc.html#News-3.23.36">D.4.24  Changes in release 3.23.36 (27 Mar 2001)</A></H3>


<UL>
<LI>

Fixed a bug that allowed use of database names containing a <samp>`.'</samp>
character.  This fixes a serious security issue when <code>mysqld</code> is run
as root.
<LI>

Fixed bug when thread creation failed (could happen when doing a <strong>lot</strong>
of connections in a short time).
<LI>

Fixed some problems with <code>FLUSH TABLES</code> and <code>TEMPORARY</code> tables.
(Problem with freeing the key cache and error <code>Can't reopen table...</code>.)
<LI>

Fixed a problem in <code>InnoDB</code> with other character sets than <code>latin1</code>
and another problem when using many columns.
<LI>

Fixed bug that caused a core dump when using a very complex query involving
<code>DISTINCT</code> and summary functions.
<LI>

Added <code>SET TRANSACTION ISOLATION LEVEL ...</code>
<LI>

Added <code>SELECT ... FOR UPDATE</code>.
<LI>

Fixed bug where the number of affected rows was not returned when MySQL
was compiled without transaction support.
<LI>

Fixed a bug in <code>UPDATE</code> where keys weren't always used to find the
rows to be updated.
<LI>

Fixed a bug in <code>CONCAT_WS()</code> where it returned incorrect results.
<LI>

Changed <code>CREATE ... SELECT</code> and <code>INSERT ... SELECT</code> to not
allow concurrent inserts as this could make the binary log hard to repeat.
(Concurrent inserts are enabled if you are not using the binary or update log.)
<LI>

Changed some macros to be able to use fast mutex with <code>glibc</code> 2.2.
</UL>



<H3><A NAME="News-3.23.35" HREF="manual_toc.html#News-3.23.35">D.4.25  Changes in release 3.23.35 (15 Mar 2001)</A></H3>


<UL>
<LI>

Fixed newly introduced bug in <code>ORDER BY</code>.
<LI>

Fixed wrong define <code>CLIENT_TRANSACTIONS</code>.
<LI>

Fixed bug in <code>SHOW VARIABLES</code> when using <code>INNOBASE</code> tables.
<LI>

Setting and using user variables in <code>SELECT DISTINCT</code> didn't work.
<LI>

Tuned <code>SHOW ANALYZE</code> for small tables.
<LI>

Fixed handling of arguments in the benchmark script <code>run-all-tests</code>.
</UL>



<H3><A NAME="News-3.23.34a" HREF="manual_toc.html#News-3.23.34a">D.4.26  Changes in release 3.23.34a (11 Mar 2001)</A></H3>


<UL>
<LI>

Added extra files to the distribution to allow <code>INNOBASE</code> support
to be compiled.
</UL>



<H3><A NAME="News-3.23.34" HREF="manual_toc.html#News-3.23.34">D.4.27  Changes in release 3.23.34 (10 Mar 2001)</A></H3>


<UL>
<LI>

Added the <code>INNOBASE</code> storage engine and the <code>BDB</code> storage engine
to the MySQL source distribution.
<LI>

Updated the documentation about <code>GEMINI</code> tables.
<LI>

Fixed a bug in <code>INSERT DELAYED</code> that caused threads to hang when
inserting <code>NULL</code> into an <code>AUTO_INCREMENT</code> column.
<LI>

Fixed a bug in <code>CHECK TABLE</code> / <code>REPAIR TABLE</code> that could cause
a thread to hang.
<LI>

Fixed problem that <code>REPLACE</code> would not replace a row that conflicts
with an <code>AUTO_INCREMENT</code> generated key.
<LI>

<code>mysqld</code> now only sets <code>CLIENT_TRANSACTIONS</code> in
<code>mysql-&#62;server_capabilities</code> if the server supports a
transaction-safe storage engine.
<LI>

Fixed <code>LOAD DATA INFILE</code> to allow numeric values to be read into
<code>ENUM</code> and <code>SET</code> columns.
<LI>

Improved error diagnostic for slave thread exit.
<LI>

Fixed bug in <code>ALTER TABLE ... ORDER BY</code>.
<LI>

Added <code>max_user_connections</code> variable to <code>mysqld</code>.
<LI>

Limit query length for replication by <code>max_allowed_packet</code>, not the
arbitrary limit of 4MB.
<LI>

Allow space around <code>=</code> in argument to <code>--set-variable</code>.
<LI>

Fixed problem in automatic repair that could leave some threads in state
<code>Waiting for table</code>.
<LI>

<code>SHOW CREATE TABLE</code> now displays the <code>UNION=()</code> for <code>MERGE</code>
tables.
<LI>

<code>ALTER TABLE</code> now remembers the old <code>UNION=()</code> definition.
<LI>

Fixed bug when replicating timestamps.
<LI>

Fixed bug in bidirectional replication.
<LI>

Fixed bug in the <code>BDB</code> storage engine that occurred when using an index
on multiple-part key where a key part may be <code>NULL</code>.
<LI>

Fixed <code>MAX()</code> optimization on sub-key for <code>BDB</code> tables.
<LI>

Fixed problem where garbage results were returned when using <code>BDB</code>
tables and <code>BLOB</code> or <code>TEXT</code> fields when joining many tables.
<LI>

Fixed a problem with <code>BDB</code> tables and <code>TEXT</code> columns.
<LI>

Fixed bug when using a <code>BLOB</code> key where a const row wasn't found.
<LI>

Fixed that <code>mysqlbinlog</code> writes the timestamp value for each query.
This ensures that one gets same values for date functions like <code>NOW()</code>
when using <code>mysqlbinlog</code> to pipe the queries to another server.
<LI>

Allow <code>--skip-gemini</code>, <code>--skip-bdb</code>, and <code>--skip-innodb</code>
options to be specified when invoking <code>mysqld</code>, even if these storage
engines are not compiled in to <code>mysqld</code>.
<LI>

You can now use <code>ASC</code> and <code>DESC</code> with <code>GROUP BY</code> columns
to specify a sort order.
<LI>

Fixed a deadlock in the <code>SET</code> code, when one ran <code>SET @foo=bar</code>,
where <code>bar</code> is a column reference, an error was not properly generated.
</UL>



<H3><A NAME="News-3.23.33" HREF="manual_toc.html#News-3.23.33">D.4.28  Changes in release 3.23.33 (09 Feb 2001)</A></H3>


<UL>
<LI>

Fixed DNS lookups not to use the same mutex as the hostname
cache.  This will enable known hosts to be quickly resolved even if a
DNS lookup takes a long time.
<LI>

Added <code>--character-sets-dir</code> option to <code>myisampack</code>.
<LI>

Removed warnings when running <code>REPAIR TABLE ... EXTENDED</code>.
<LI>

Fixed a bug that caused a core dump when using <code>GROUP BY</code> on an alias,
where the alias was the same as an existing column name.
<LI>

Added <code>SEQUENCE()</code> as an example UDF function.
<LI>

Changed <code>mysql_install_db</code> to use <code>BINARY</code> for <code>CHAR</code>
columns in the privilege tables.
<LI>

Changed <code>TRUNCATE <var>tbl_name</var></code> to <code>TRUNCATE TABLE <var>tbl_name</var></code>
to use the same syntax as Oracle.  Until 4.0 we will also allow
<code>TRUNCATE <var>tbl_name</var></code> to not crash old code.
<LI>

Fixed ``no found rows'' bug in <code>MyISAM</code> tables when a <code>BLOB</code> was
first part of a multiple-part key.
<LI>

Fixed bug where <code>CASE</code> didn't work with <code>GROUP BY</code>.
<LI>

Added <code>--sort-recover</code> option to <code>myisamchk</code>.
<LI>

<code>myisamchk -S</code> and <code>OPTIMIZE TABLE</code> now work on Windows.
<LI>

Fixed bug when using <code>DISTINCT</code> on results from functions that referred
to a group function, like:

<PRE>
SELECT a, DISTINCT SEC_TO_TIME(SUM(a))
FROM <var>tbl_name</var> GROUP BY a, b;
</PRE>

<LI>

Fixed buffer overrun in <code>libmysqlclient</code> library.
Fixed bug in handling <code>STOP</code> event after <code>ROTATE</code> event in
replication.
<LI>

Fixed another buffer overrun in <code>DROP DATABASE</code>.
<LI>

Added <code>Table_locks_immediate</code> and <code>Table_locks_waited</code> status
variables.
<LI>

Fixed bug in replication that broke slave server start with existing
<tt>`master.info'</tt>. This fixes a bug introduced in 3.23.32.
<LI>

Added <code>SET SQL_SLAVE_SKIP_COUNTER=n</code> command to recover from
replication glitches without a full database copy.
<LI>

Added <code>max_binlog_size</code> variable; the binary log will be rotated
automatically when the size crosses the limit.
<LI>

Added <code>Last_Error</code>, <code>Last_Errno</code>, and <code>Slave_skip_counter</code>
variables to <code>SHOW SLAVE STATUS</code>.
<LI>

Fixed bug in <code>MASTER_POS_WAIT()</code> function.
<LI>

Execute core dump handler on <code>SIGILL</code>, and <code>SIGBUS</code> in addition to
<code>SIGSEGV</code>.
<LI>

On x86 Linux, print the current query and thread (connection) id, if
available, in the core dump handler.
<LI>

Fixed several timing bugs in the test suite.
<LI>

Extended <code>mysqltest</code> to take care of the timing issues in the test
suite.
<LI>

<code>ALTER TABLE</code> can now be used to change the definition for a
<code>MERGE</code> table.
<LI>

Fixed creation of <code>MERGE</code> tables on Windows.
<LI>

Portability fixes for OpenBSD and OS/2.
<LI>

Added <code>--temp-pool</code> option to <code>mysqld</code>.  Using this option
will cause most temporary files created to use a small set of names,
rather than a unique name for each new file.  This is to work around a
problem in the Linux kernel dealing with creating a bunch of new files
with different names.  With the old behavior, Linux seems to "leak"
memory, as it's being allocated to the directory entry cache instead of
the disk cache.
</UL>



<H3><A NAME="News-3.23.32" HREF="manual_toc.html#News-3.23.32">D.4.29  Changes in release 3.23.32 (22 Jan 2001)</A></H3>


<UL>
<LI>

Changed code to get around compiler bug in Compaq C++ on OSF/1, that broke
<code>BACKUP TABLE</code>, <code>RESTORE TABLE</code>, <code>CHECK TABLE</code>, <code>REPAIR TABLE</code>, and
<code>ANALYZE TABLE</code>.
<LI>

Added option <code>FULL</code> to <code>SHOW COLUMNS</code>. Now we show the
privilege list for the columns only if this option is given.
<LI>

Fixed bug in <code>SHOW LOGS</code> when there weren't any <code>BDB</code> logs.
<LI>

Fixed a timing problem in replication that could delay sending an update
to the client until a new update was done.
<LI>

Don't convert field names when using <code>mysql_list_fields()</code>.  This is
to keep this code compatible with <code>SHOW FIELDS</code>.
<LI>

<code>MERGE</code> tables didn't work on Windows.
<LI>

Fixed problem with <code>SET PASSWORD=...</code> on Windows.
<LI>

Added missing <tt>`my_config.h'</tt> to RPM distribution.
<LI>

<code>TRIM("foo" from "foo")</code> didn't return an empty string.
<LI>

Added <code>--with-version-suffix</code> option to <code>configure</code>.
<LI>

Fixed core dump when client aborted connection without <code>mysql_close()</code>.
<LI>

Fixed a bug in <code>RESTORE TABLE</code> when trying to restore from a non-existent
directory.
<LI>

Fixed a bug which caused a core dump on the slave when replicating
<code>SET PASSWORD</code>.
<LI>

Added <code>MASTER_POS_WAIT()</code> function.
</UL>



<H3><A NAME="News-3.23.31" HREF="manual_toc.html#News-3.23.31">D.4.30  Changes in release 3.23.31 (17 Jan 2001: Production)</A></H3>


<UL>
<LI>

The test suite now tests all reachable <code>BDB</code> interface code.  During
testing we found and fixed many errors in the interface code.
<LI>

Using <code>HAVING</code> on an empty table could produce one result row when
it shouldn't.
<LI>

Fixed the MySQL RPM so it no longer depends on Perl5.
<LI>

Fixed some problems with <code>HEAP</code> tables on Windows.
<LI>

<code>SHOW TABLE STATUS</code> didn't show correct average row length for tables
larger than 4GB.
<LI>

<code>CHECK TABLE ... EXTENDED</code> didn't check row links for fixed size tables.
<LI>

Added option <code>MEDIUM</code> to <code>CHECK TABLE</code>.
<LI>

Fixed problem when using <code>DECIMAL()</code> keys on negative numbers.
<LI>

<code>HOUR()</code> (and some other <code>TIME</code> functions) on a <code>CHAR</code> column
always returned <code>NULL</code>.
<LI>

Fixed security bug in something (please upgrade if you are using an earlier
MySQL 3.23 version).
<LI>

Fixed buffer overflow bug when writing a certain error message.
<LI>

Added usage of <code>setrlimit()</code> on Linux to get
<code>-O --open_files_limit=#</code> to work on Linux.
<LI>

Added <code>bdb_version</code> variable to <code>mysqld</code>.
<LI>

Fixed bug when using expression of type:

<PRE>
SELECT ... FROM t1 LEFT JOIN t2 ON (t1.a=t2.a) WHERE t1.a=t2.a
</PRE>

In this case the test in the <code>WHERE</code> clause was wrongly optimized away.
<LI>

Fixed bug in <code>MyISAM</code> when deleting keys with possible <code>NULL</code>
values, but the first key-column was not a prefix-compressed text column.
<LI>

Fixed <code>mysql.server</code> to read the <code>[mysql.server]</code> option file group
rather than the <code>[mysql_server]</code> group.
<LI>

Fixed <code>safe_mysqld</code> and <code>mysql.server</code> to also read the
<code>server</code> option section.
<LI>

Added <code>Threads_created</code> status variable to <code>mysqld</code>.
</UL>



<H3><A NAME="News-3.23.30" HREF="manual_toc.html#News-3.23.30">D.4.31  Changes in release 3.23.30 (04 Jan 2001)</A></H3>


<UL>
<LI>

Added <code>SHOW OPEN TABLES</code> command.
<LI>

Fixed that <code>myisamdump</code> works against old <code>mysqld</code> servers.
<LI>

Fixed <code>myisamchk -k#</code> so that it works again.
<LI>

Fixed a problem with replication when the binary log file went over 2G
on 32-bit systems.
<LI>

<code>LOCK TABLES</code> will now automatically start a new transaction.
<LI>

Changed <code>BDB</code> tables to not use internal subtransactions and reuse
open files to get more speed.
<LI>

Added <code>--mysqld=#</code> option to <code>safe_mysqld</code>.
<LI>

Allow hex constants in the <code>--fields-*-by</code> and
<code>--lines-terminated-by</code> options to <code>mysqldump</code> and
<code>mysqlimport</code>. By Paul DuBois.
<LI>

Added <code>--safe-show-database</code> option to <code>mysqld</code>.
<LI>

Added <code>have_bdb</code>, <code>have_gemini</code>, <code>have_innobase</code>,
<code>have_raid</code> and <code>have_openssl</code> to <code>SHOW VARIABLES</code> to make it
easy to test for supported extensions.
<LI>

Added <code>--open-files-limit</code> option to <code>mysqld</code>.
<LI>

Changed <code>--open-files</code> option to <code>--open-files-limit</code> in
<code>safe_mysqld</code>.
<LI>

Fixed a bug where some rows were not found with <code>HEAP</code> tables
that had many keys.
<LI>

Fixed that <code>--bdb-no-sync</code> works.
<LI>

Changed <code>--bdb-recover</code> to <code>--bdb-no-recover</code> as recover should
be on by default.
<LI>

Changed the default number of <code>BDB</code> locks to 10000.
<LI>

Fixed a bug from 3.23.29 when allocating the shared structure needed
for <code>BDB</code> tables.
<LI>

Changed <code>mysqld_multi.sh</code> to use configure variables. Patch by
Christopher McCrory.
<LI>

Added fixing of include files for Solaris 2.8.
<LI>

Fixed bug with <code>--skip-networking</code> on Debian Linux.
<LI>

Fixed problem that some temporary files where reported as having the
name <code>UNOPENED</code> in error messages.
<LI>

Fixed bug when running two simultaneous <code>SHOW LOGS</code> queries.
</UL>



<H3><A NAME="News-3.23.29" HREF="manual_toc.html#News-3.23.29">D.4.32  Changes in release 3.23.29 (16 Dec 2000)</A></H3>


<UL>
<LI>

Configure updates for Tru64, large file support, and better TCP wrapper
support. By Albert Chin-A-Young.
<LI>

Fixed bug in <code>&#60;=&#62;</code> operator.
<LI>

Fixed bug in <code>REPLACE</code> with <code>BDB</code> tables.
<LI>

<code>LPAD()</code> and <code>RPAD()</code> will shorten the result string if it's longer
than the length argument.
<LI>

Added <code>SHOW LOGS</code> command.
<LI>

Remove unused <code>BDB</code> logs on shutdown.
<LI>

When creating a table, put <code>PRIMARY</code> keys first, followed by
<code>UNIQUE</code> keys.
<LI>

Fixed a bug in <code>UPDATE</code> involving multiple-part keys where you
specified all key parts both in the update and the <code>WHERE</code> part. In
this case MySQL could try to update a record that didn't match
the whole <code>WHERE</code> part.
<LI>

Changed drop table to first drop the tables and then the <tt>`.frm'</tt> file.
<LI>

Fixed a bug in the hostname cache which caused <code>mysqld</code> to report the
hostname as <code>''</code> in some error messages.
<LI>

Fixed a bug with <code>HEAP</code> type tables; the variable
<code>max_heap_table_size</code> wasn't used. Now either <code>MAX_ROWS</code> or
<code>max_heap_table_size</code> can be used to limit the size of a <code>HEAP</code>
type table.
<LI>

Changed the default <code>server-id</code> value to 1 for masters and 2 for slaves
to make it easier to use the binary log.
<LI>

Renamed <code>bdb_lock_max</code> variable to <code>bdb_max_lock</code>.
<LI>

Added support for <code>AUTO_INCREMENT</code> on sub-fields for <code>BDB</code> tables.
<LI>

Added <code>ANALYZE TABLE</code> of <code>BDB</code> tables.
<LI>

In <code>BDB</code> tables, we now store the number of rows; this helps to optimize
queries when we need an approximation of the number of rows.
<LI>

If we get an error in a multiple-row statement, we now only roll back the
last statement, not the entire transaction.
<LI>

If you do a <code>ROLLBACK</code> when you have updated a non-transactional table
you will get an error as a warning.
<LI>

Added <code>--bdb-shared-data</code> option to <code>mysqld</code>.
<LI>

Added <code>Slave_open_temp_tables</code> status variable to <code>mysqld</code>
<LI>

Added <code>binlog_cache_size</code> and <code>max_binlog_cache_size</code> variables to
<code>mysqld</code>.
<LI>

<code>DROP TABLE</code>, <code>RENAME TABLE</code>, <code>CREATE INDEX</code> and
<code>DROP INDEX</code> are now transaction endpoints.
<LI>

If you do a <code>DROP DATABASE</code> on a symbolically linked database, both
the link and the original database are deleted.
<LI>

Fixed <code>DROP DATABASE</code> to work on OS/2.
<LI>

Fixed bug when doing a <code>SELECT DISTINCT ... table1 LEFT JOIN
table2 ...</code> when <code>table2</code> was empty.
<LI>

Added <code>--abort-slave-event-count</code> and
<code>--disconnect-slave-event-count</code> options to <code>mysqld</code> for
debugging and testing of replication.
<LI>

Fixed replication of temporary tables. Handles everything except
slave server restart.
<LI>

<code>SHOW KEYS</code> now shows whether key is <code>FULLTEXT</code>.
<LI>

New script <code>mysqld_multi</code>. See section <A HREF="manual_MySQL_Database_Administration.html#mysqld_multi">5.1.5  The <code>mysqld_multi</code> Program for Managing Multiple MySQL Servers</A>.
<LI>

Added new script, <code>mysql-multi.server.sh</code>.  Thanks to
Tim Bunce <a HREF="mailto:Tim.Bunce@ig.co.uk">Tim.Bunce@ig.co.uk</a> for modifying <code>mysql.server</code> to
easily handle hosts running many <code>mysqld</code> processes.
<LI>

<code>safe_mysqld</code>, <code>mysql.server</code>, and <code>mysql_install_db</code> have
been modified to use <code>mysql_print_defaults</code> instead of various hacks
to read the <tt>`my.cnf'</tt> files.  In addition, the handling of various
paths has been made more consistent with how <code>mysqld</code> handles them
by default.
<LI>

Automatically remove Berkeley DB transaction logs that no longer are in
use.
<LI>

Fixed bug with several <code>FULLTEXT</code> indexes in one table.
<LI>

Added a warning if number of rows changes on <code>REPAIR
TABLE</code>/<code>OPTIMIZE TABLE</code>.
<LI>

Applied patches for OS/2 by <code>Yuri Dario</code>.
<LI>

<code>FLUSH TABLES <var>tbl_name</var></code> didn't always flush the index tree
to disk properly.
<LI>

<code>--bootstrap</code> is now run in a separate thread. This fixes a problem
that caused <code>mysql_install_db</code> to core dump on some Linux machines.
<LI>

Changed <code>mi_create()</code> to use less stack space.
<LI>

Fixed bug with optimizer trying to over-optimize <code>MATCH()</code> when used
with <code>UNIQUE</code> key.
<LI>

Changed <code>crash-me</code> and the MySQL benchmarks to also work
with FrontBase.
<LI>

Allow <code>RESTRICT</code> and <code>CASCADE</code> after <code>DROP TABLE</code> to make
porting easier.
<LI>

Reset status variable which could cause problem if one used <code>--slow-log</code>.
<LI>

Added <code>connect_timeout</code> variable to <code>mysql</code> and <code>mysqladmin</code>.
<LI>

Added <code>connect-timeout</code> as an alias for <code>timeout</code> for option files
read by <code>mysql_options()</code>.
</UL>



<H3><A NAME="News-3.23.28" HREF="manual_toc.html#News-3.23.28">D.4.33  Changes in release 3.23.28 (22 Nov 2000: Gamma)</A></H3>


<UL>
<LI>

Added new options <code>--pager[=...]</code>, <code>--no-pager</code>,
<code>--tee=...</code> and <code>--no-tee</code> to the <code>mysql</code> client.  The
new corresponding interactive commands are <code>pager</code>, <code>nopager</code>,
<code>tee</code> and <code>notee</code>. See section <A HREF="manual_Client-Side_Scripts.html#mysql">8.3  <code>mysql</code>, the Command-Line Tool</A>, <code>mysql --help</code>
and the interactive help for more information.
<LI>

Fixed crash when automatic repair of <code>MyISAM</code> table failed.
<LI>

Fixed a major performance bug in the table locking code when a lot
of <code>SELECT</code>, <code>UPDATE</code> and <code>INSERT</code> statements
constantly were running. The symptom was that the <code>UPDATE</code> and
<code>INSERT</code> queries were locked for a long time while new <code>SELECT</code>
statements were executed before the updates.
<LI>

When reading <code>options_files</code> with <code>mysql_options()</code> the
<code>return-found-rows</code> option was ignored.
<LI>

You can now specify <code>interactive-timeout</code> in the option file that
is read by <code>mysql_options()</code>. This makes it possible to force
programs that run for a long time (like <code>mysqlhotcopy</code>) to use the
<code>interactive_timeout</code> time instead of the <code>wait_timeout</code> time.
<LI>

Added to the slow query log the time and the username for each logged
query. If you are using <code>--log-long-format</code> then also queries that
do not use an index are logged, even if the query takes less than
<code>long_query_time</code> seconds.
<LI>

Fixed a problem in <code>LEFT JOIN</code> which caused all columns in a reference
table to be <code>NULL</code>.
<LI>

Fixed a problem when using <code>NATURAL JOIN</code> without keys.
<LI>

Fixed a bug when using a multiple-part keys where the first part was of type
<code>TEXT</code> or <code>BLOB</code>.
<LI>

<code>DROP</code> of temporary tables wasn't stored in the update/binary log.
<LI>

Fixed a bug where <code>SELECT DISTINCT * ... LIMIT <var>row_count</var></code> only returned one row.
<LI>

Fixed a bug in the assembler code in <code>strstr()</code> for SPARC and cleaned up
the <tt>`global.h'</tt> header file to avoid a problem with bad aliasing with
the compiler submitted with Red Hat 7.0. (Reported by Trond Eivind Glomsr&oslash;d)
<LI>

The <code>--skip-networking</code> option now works properly on NT.
<LI>

Fixed a long outstanding bug in the <code>ISAM</code> tables when a row with a length
of more than 65KB was shortened by a single byte.
<LI>

Fixed a bug in <code>MyISAM</code> when running multiple updating processes on
the same table.
<LI>

Allow one to use <code>FLUSH TABLE <var>tbl_name</var></code>.
<LI>

Added <code>--replicate-ignore-table</code>, <code>--replicate-do-table</code>,
<code>--replicate-wild-ignore-table</code>, and <code>--replicate-wild-do-table</code>
options to <code>mysqld</code>.
<LI>

Changed all log files to use our own <code>IO_CACHE</code> mechanism instead of
<code>FILE</code> to avoid OS problems when there are many files open.
<LI>

Added <code>--open-files</code> and <code>--timezone</code> options to <code>safe_mysqld</code>.
<LI>

Fixed a fatal bug in <code>CREATE TEMPORARY TABLE ... SELECT ...</code>.
<LI>

Fixed a problem with <code>CREATE TABLE ... SELECT NULL</code>.
<LI>

Added variables <code>large_file_support</code>,<code>net_read_timeout</code>,
<code>net_write_timeout</code> and <code>query_buffer_size</code> to <code>SHOW VARIABLES</code>.
<LI>

Added status variables <code>Created_tmp_files</code> and <code>Sort_merge_passes</code>
to <code>SHOW STATUS</code>.
<LI>

Fixed a bug where we didn't allow an index name after the
<code>FOREIGN KEY</code> definition.
<LI>

Added <code>TRUNCATE <var>tbl_name</var></code> as a synonym for
<code>DELETE FROM <var>tbl_name</var></code>.
<LI>

Fixed a bug in a <code>BDB</code> key compare function when comparing part keys.
<LI>

Added <code>bdb_lock_max</code> variable to <code>mysqld</code>.
<LI>

Added more tests to the benchmark suite.
<LI>

Fixed an overflow bug in the client code when using overly long database names.
<LI>

<code>mysql_connect()</code> now aborts on Linux if the server doesn't answer in
<code>timeout</code> seconds.
<LI>

<code>SLAVE START</code> did not work if you started with
<code>--skip-slave-start</code> and had not explicitly run <code>CHANGE MASTER TO</code>.
<LI>

Fixed the output of <code>SHOW MASTER STATUS</code> to be consistent with
<code>SHOW SLAVE STATUS</code>. (It now has no directory in the log name.)
<LI>

Added <code>PURGE MASTER LOGS TO</code>.
<LI>

Added <code>SHOW MASTER LOGS</code> statement to display a list of binary log files.
<LI>

Added <code>--safemalloc-mem-limit</code> option to <code>mysqld</code> to simulate memory
shortage when compiled with the <code>--with-debug=full</code> option.
<LI>

Fixed several core dumps in out-of-memory conditions.
<LI>

<code>SHOW SLAVE STATUS</code> was using an uninitialized mutex if the slave had
not been started yet.
<LI>

Fixed bug in <code>ELT()</code> and <code>MAKE_SET()</code> when the query used
a temporary table.
<LI>

<code>CHANGE MASTER TO</code> without specifying <code>MASTER_LOG_POS</code> would
set it to 0 instead of 4 and hit the magic number in the master binary log.
<LI>

<code>ALTER TABLE ... ORDER BY ...</code> syntax added.  This will create the
new table with the rows in a specific order.
</UL>



<H3><A NAME="News-3.23.27" HREF="manual_toc.html#News-3.23.27">D.4.34  Changes in release 3.23.27 (24 Oct 2000)</A></H3>


<UL>
<LI>

Fixed a bug where the automatic repair of <code>MyISAM</code> tables sometimes failed
when the data file was corrupt.
<LI>

Fixed a bug in <code>SHOW CREATE</code> when using <code>AUTO_INCREMENT</code> columns.
<LI>

Changed <code>BDB</code> tables to use new compare function in Berkeley DB 3.2.3.
<LI>

You can now use Unix socket files with MIT-pthreads.
<LI>

Added the <code>latin5</code> (turkish) character set.
<LI>

Small portability fixes.
</UL>



<H3><A NAME="News-3.23.26" HREF="manual_toc.html#News-3.23.26">D.4.35  Changes in release 3.23.26 (18 Oct 2000)</A></H3>


<UL>
<LI>

Renamed <code>FLUSH MASTER</code> and <code>FLUSH SLAVE</code> to <code>RESET MASTER</code>
and <code>RESET SLAVE</code>.
<LI>

Fixed <code>&#60;&#62;</code> to work properly with <code>NULL</code>.
<LI>

Fixed a problem with <code>SUBSTRING_INDEX()</code> and <code>REPLACE()</code>.
(Patch by Alexander Igonitchev)
<LI>

Fix <code>CREATE TEMPORARY TABLE IF NOT EXISTS</code> not to produce an error
if the table exists.
<LI>

If you don't create a <code>PRIMARY KEY</code> in a <code>BDB</code> table, a hidden
<code>PRIMARY KEY</code> will be created.
<LI>

Added read-only-key optimization to <code>BDB</code> tables.
<LI>

<code>LEFT JOIN</code> in some cases preferred a full table scan when there was
no <code>WHERE</code> clause.
<LI>

When using <code>--log-slow-queries</code>, don't count the time waiting for a lock.
<LI>

Fixed bug in lock code on Windows which could cause the key cache
to report that the key file was crashed even if it was okay.
<LI>

Automatic repair of <code>MyISAM</code> tables if you start <code>mysqld</code> with
<code>--myisam-recover</code>.
<LI>

Removed the <code>TYPE=</code> keyword from <code>CHECK TABLE</code> and
<code>REPAIR TABLE</code>. Allow <code>CHECK TABLE</code> options to be combined. (You can still
use <code>TYPE=</code>, but this usage is deprecated.)
<LI>

Fixed mutex bug in the binary replication log -- long update queries could
be read only in part by the slave if it did it at the wrong time, which
was not fatal, but resulted in a performance-degrading reconnect and
a scary message in the error log.
<LI>

Changed the format of the binary log -- added magic number, server
version, binary log version. Added the server ID and query error code for each
query event.
<LI>

Replication thread from the slave now will kill all the stale threads
from the same server.
<LI>

Long replication usernames were not being handled properly.
<LI>

Added <code>--replicate-rewrite-db</code> option to <code>mysqld</code>.
<LI>

Added <code>--skip-slave-start</code> option to <code>mysqld</code>.
<LI>

Updates that generated an error code (such as <code>INSERT INTO foo(some_key)
values (1),(1)</code>) erroneously terminated the slave thread.
<LI>

Added optimization of queries where <code>DISTINCT</code> is used only on columns
from some of the tables.
<LI>

Allow floating-point numbers where there is no sign after the exponent
(like <code>1e1</code>).
<LI>

<code>SHOW GRANTS</code> didn't always show all column grants.
<LI>

Added <code>--default-extra-file=#</code> option to all MySQL clients.
<LI>

Columns referenced in <code>INSERT</code> statements now are initialized properly.
<LI>

<code>UPDATE</code> didn't always work when used with a range on a timestamp that
was part of the key that was used to find rows.
<LI>

Fixed a bug in <code>FULLTEXT</code> index when inserting a <code>NULL</code> column.
<LI>

Changed to use <code>mkstemp()</code> instead of <code>tempnam()</code>. Based
on a patch from John Jones.
</UL>



<H3><A NAME="News-3.23.25" HREF="manual_toc.html#News-3.23.25">D.4.36  Changes in release 3.23.25 (29 Sep 2000)</A></H3>


<UL>
<LI>

Fixed that <code>databasename</code> works as second argument to <code>mysqlhotcopy</code>.
<LI>

The values for the <code>UMASK</code> and <code>UMASK_DIR</code> environment variables
now can be specified in octal by beginning the value with a zero.
<LI>

Added <code>RIGHT JOIN</code>. This makes <code>RIGHT</code> a reserved word.
<LI>

Added <code>@@IDENTITY</code> as a synonym for <code>LAST_INSERT_ID()</code>.
(This is for MSSQL compatibility.)
<LI>

Fixed a bug in <code>myisamchk</code> and <code>REPAIR TABLE</code> when using <code>FULLTEXT</code>
index.
<LI>

<code>LOAD DATA INFILE</code> now works with FIFOs.
(Patch by Toni L. Harbaugh-Blackford.)
<LI>

<code>FLUSH LOGS</code> broke replication if you specified a log name with an
explicit extension as the value of the <code>log-bin</code> option.
<LI>

Fixed a bug in <code>MyISAM</code> with packed multiple-part keys.
<LI>

Fixed crash when using <code>CHECK TABLE</code> on Windows.
<LI>

Fixed a bug where <code>FULLTEXT</code> index always used the <code>koi8_ukr</code>
character set.
<LI>

Fixed privilege checking for <code>CHECK TABLE</code>.
<LI>

The <code>MyISAM</code> repair/reindex code didn't use the <code>--tmpdir</code>
option for its temporary files.
<LI>

Added <code>BACKUP TABLE</code> and <code>RESTORE TABLE</code>.
<LI>

Fixed core dump on <code>CHANGE MASTER TO</code> when the slave did not have
the master to start with.
<LI>

Fixed incorrect <code>Time</code> in the processlist for <code>Connect</code> of
the slave thread.
<LI>

The slave now logs when it connects to the master.
<LI>

Fixed a core dump bug when doing <code>FLUSH MASTER</code> if you didn't specify
a filename argument to <code>--log-bin</code>.
<LI>

Added missing <tt>`ha_berkeley.x'</tt> files to the MySQL Windows distribution.
<LI>

Fixed some mutex bugs in the log code that could cause thread blocks if new
log files couldn't be created.
<LI>

Added lock time and number of selected processed rows to slow query log.
<LI>

Added <code>--memlock</code> option to <code>mysqld</code> to lock <code>mysqld</code>
in memory on systems with the <code>mlockall()</code> call (as in Solaris).
<LI>

<code>HEAP</code> tables didn't use keys properly. (Bug from 3.23.23.)
<LI>

Added better support for <code>MERGE</code> tables (keys, mapping, creation,
documentation...). See section <A HREF="manual_Storage_engines.html#MERGE_storage_engine">14.2  The <code>MERGE</code> Storage Engine</A>.
<LI>

Fixed bug in <code>mysqldump</code> from 3.23 which caused some <code>CHAR</code> columns
not to be quoted.
<LI>

Merged <code>analyze</code>, <code>check</code>, <code>optimize</code> and repair code.
<LI>

<code>OPTIMIZE TABLE</code> is now mapped to <code>REPAIR TABLE</code> with statistics and
sorting of the index tree.  This means that for the moment it only
works on <code>MyISAM</code> tables.
<LI>

Added a pre-alloced block to root_malloc to get fewer mallocs.
<LI>

Added a lot of new statistics variables.
<LI>

Fixed <code>ORDER BY</code> bug with <code>BDB</code> tables.
<LI>

Removed warning that <code>mysqld</code> couldn't remove the <tt>`.pid'</tt> file
under Windows.
<LI>

Changed <code>--log-isam</code> to log <code>MyISAM</code> tables instead of isam
tables.
<LI>

Fixed <code>CHECK TABLE</code> to work on Windows.
<LI>

Added file mutexes to make <code>pwrite()</code> safe on Windows.
</UL>



<H3><A NAME="News-3.23.24" HREF="manual_toc.html#News-3.23.24">D.4.37  Changes in release 3.23.24 (08 Sep 2000)</A></H3>


<UL>
<LI>

Added <code>Created_tmp_disk_tables</code> variable to <code>mysqld</code>.
<LI>

To make it possible to reliably dump and restore tables with
<code>TIMESTAMP(<var>X</var>)</code> columns, MySQL now reports columns with <var>X</var>
other than 14 or 8 to be strings.
<LI>

Changed sort order for <code>latin1</code> as it was before MySQL 3.23.23.
Any table that was created or modified with 3.23.22 must be repaired if it has
<code>CHAR</code> columns that may contain characters with ASCII values greater than
128!
<LI>

Fixed small memory leak introduced from 3.23.22 when creating a
temporary table.
<LI>

Fixed problem with <code>BDB</code> tables and reading on a unique (not primary) key.
<LI>

Restored the <code>win1251</code> character set (it's now only marked deprecated).
</UL>



<H3><A NAME="News-3.23.23" HREF="manual_toc.html#News-3.23.23">D.4.38  Changes in release 3.23.23 (01 Sep 2000)</A></H3>


<UL>
<LI>

Changed sort order for 'German'; all tables created with 'German' sortorder
must be repaired with <code>REPAIR TABLE</code> or <code>myisamchk</code> before use!
<LI>

Added <code>--core-file</code> option to <code>mysqld</code> to get a core file on
Linux if <code>mysqld</code> dies on the <code>SIGSEGV</code> signal.
<LI>

MySQL client <code>mysql</code> now starts with option
<code>--no-named-commands</code> (<code>-g</code>) by default. This option can be
disabled with <code>--enable-named-commands</code> (<code>-G</code>). This may cause
incompatibility problems in some cases, for example, in SQL scripts that
use named commands without a semicolon, etc.!  Long format commands
still work from the first line.
<LI>

Fixed a problem when using many pending <code>DROP TABLE</code> statements at
the same time.
<LI>

Optimizer didn't use keys properly when using <code>LEFT JOIN</code> on an
empty table.
<LI>

Added shorter help text when invoking <code>mysqld</code> with incorrect options.
<LI>

Fixed non-fatal <code>free()</code> bug in <code>mysqlimport</code>.
<LI>

Fixed bug in <code>MyISAM</code> index handling of
<code>DECIMAL</code>/<code>NUMERIC</code> keys.
<LI>

Fixed a bug in concurrent insert in <code>MyISAM</code> tables.  In some contexts,
usage of <code>MIN(key_part)</code> or <code>MAX(key_part)</code> returned an empty set.
<LI>

Updated <code>mysqlhotcopy</code> to use the new <code>FLUSH TABLES table_list</code>
syntax. Only tables which are being backed up are flushed now.
<LI>

Changed behavior of <code>--enable-thread-safe-client</code> so
that both non-threaded (<code>-lmysqlclient</code>) and threaded
(<code>-lmysqlclient_r</code>) libraries are built.  Users who linked
against a threaded <code>-lmysqlclient</code> will need to link against
<code>-lmysqlclient_r</code> now.
<LI>

Added atomic <code>RENAME TABLE</code> command.
<LI>

Don't count <code>NULL</code> values in <code>COUNT(DISTINCT ...)</code>.
<LI>

Changed <code>ALTER TABLE</code>, <code>LOAD DATA INFILE</code> on empty tables and
<code>INSERT ... SELECT ...</code> on empty tables to create non-unique indexes
in a separate batch with sorting. This will make these statements much
faster when you have many indexes.
<LI>

<code>ALTER TABLE</code> now logs the first used insert_id correctly.
<LI>

Fixed crash when adding a default value to a <code>BLOB</code> column.
<LI>

Fixed a bug with <code>DATE_ADD/DATE_SUB</code> where it returned a datetime instead
of a date.
<LI>

Fixed a problem with the thread cache which made some threads show up as
<code>***DEAD***</code> in <code>SHOW PROCESSLIST</code>.
<LI>

Fixed a lock in our thr_rwlock code, which could make selects that run
at the same time as concurrent inserts crash. This affects only systems
that don't have the <code>pthread_rwlock_rdlock</code> code.
<LI>

When deleting rows with a non-unique key in a <code>HEAP</code> table, all rows
weren't always deleted.
<LI>

Fixed bug in range optimizer for <code>HEAP</code> tables for searches on a part
index.
<LI>

Fixed <code>SELECT</code> on part keys to work with <code>BDB</code> tables.
<LI>

Fixed <code>INSERT INTO bdb_table ... SELECT</code> to work with <code>BDB</code> tables.
<LI>

<code>CHECK TABLE</code> now updates key statistics for the table.
<LI>

<code>ANALYZE TABLE</code> will now only update tables that have been changed
since the last <code>ANALYZE TABLE</code>. Note that this is a new feature and tables
will not be marked to be analyzed until they are updated in any way with
3.23.23 or newer.  For older tables, you have to do <code>CHECK TABLE</code>
to update the key distribution.
<LI>

Fixed some minor privilege problems with <code>CHECK TABLE</code>, <code>ANALYZE
TABLE</code>,
<code>REPAIR TABLE</code> and <code>SHOW CREATE</code> commands.
<LI>

Added <code>CHANGE MASTER TO</code> statement.
<LI>

Added <code>FAST</code>, <code>QUICK</code> <code>EXTENDED</code> check types to
<code>CHECK TABLES</code>.
<LI>

Changed <code>myisamchk</code> so that <code>--fast</code> and
<code>--check-only-changed</code> are also honored with <code>--sort-index</code> and
<code>--analyze</code>.
<LI>

Fixed fatal bug in <code>LOAD TABLE FROM MASTER</code> that did not lock the
table during index re-build.
<LI>

<code>LOAD DATA INFILE</code> broke replication if the database was excluded
from replication.
<LI>

More variables in <code>SHOW SLAVE STATUS</code> and <code>SHOW MASTER STATUS</code>.
<LI>

<code>SLAVE STOP</code> now will not return until the slave thread actually exits.
<LI>

Full-text search via the <code>MATCH()</code> function and <code>FULLTEXT</code> index type
(for <code>MyISAM</code> files).  This makes <code>FULLTEXT</code> a reserved word.
</UL>



<H3><A NAME="News-3.23.22" HREF="manual_toc.html#News-3.23.22">D.4.39  Changes in release 3.23.22 (31 Jul 2000)</A></H3>


<UL>
<LI>

Fixed that <code>lex_hash.h</code> is created properly for each MySQL
distribution.
<LI>

Fixed that <code>MASTER</code> and <code>COLLECTION</code> are not reserved words.
<LI>

The log generated by <code>--slow-query-log</code> didn't contain the whole queries.
<LI>

Fixed that open transactions in <code>BDB</code> tables are rolled back if the
connection is closed unexpectedly.
<LI>

Added workaround for a bug in <code>gcc</code> 2.96 (intel) and <code>gcc</code> 2.9
(IA-64) in <code>gen_lex_hash.c</code>.
<LI>

Fixed memory leak in the client library when using <code>host=</code> in the
<tt>`my.cnf'</tt> file.
<LI>

Optimized functions that manipulate the hours/minutes/seconds.
<LI>

Fixed bug when comparing the result of <code>DATE_ADD()</code>/<code>DATE_SUB()</code>
against a number.
<LI>

Changed the meaning of <code>-F, --fast</code> for <code>myisamchk</code>. Added
<code>-C, --check-only-changed</code> option to <code>myisamchk</code>.
<LI>

Added <code>ANALYZE <var>tbl_name</var></code> to update key statistics for tables.
<LI>

Changed binary items <code>0x...</code> to be regarded as integers by default.
<LI>

Fix for SCO and <code>SHOW PROCESSLIST</code>.
<LI>

Added <code>auto-rehash</code> on reconnect for the <code>mysql</code> client.
<LI>

Fixed a newly introduced bug in <code>MyISAM</code>, where the index file couldn't
get bigger than 64MB.
<LI>

Added <code>SHOW MASTER STATUS</code> and <code>SHOW SLAVE STATUS</code>.
</UL>



<H3><A NAME="News-3.23.21" HREF="manual_toc.html#News-3.23.21">D.4.40  Changes in release 3.23.21 (04 Jul 2000)</A></H3>


<UL>
<LI>

Added <code>mysql_character_set_name()</code> function to the
MySQL C API.
<LI>

Made the update log ASCII 0 safe.
<LI>

Added the <code>mysql_config</code> script.
<LI>

Fixed problem when using <code>&#60;</code> or <code>&#62;</code> with a char column that was only
partly indexed.
<LI>

One would get a core dump if the log file was not readable by the MySQL user.
<LI>

Changed <code>mysqladmin</code> to use <code>CREATE DATABASE</code> and <code>DROP
DATABASE</code> statements instead of the old deprecated API calls.
<LI>

Fixed <code>chown</code> warning in <code>safe_mysqld</code>.
<LI>

Fixed a bug in <code>ORDER BY</code> that was introduced in 3.23.19.
<LI>

Only optimize the <code>DELETE FROM <var>tbl_name</var></code> to do a drop+create of
the table if we are in <code>AUTOCOMMIT</code> mode (needed for <code>BDB</code> tables).
<LI>

Added extra checks to avoid index corruption when the <code>ISAM</code>/<code>MyISAM</code>
index files get full during an <code>INSERT</code>/<code>UPDATE</code>.
<LI>

<code>myisamchk</code> didn't correctly update row checksum when used with
<code>-ro</code> (this only gave a warning in subsequent runs).
<LI>

Fixed bug in <code>REPAIR TABLE</code> so that it works with tables without indexes.
<LI>

Fixed buffer overrun in <code>DROP DATABASE</code>.
<LI>

<code>LOAD TABLE FROM MASTER</code> is sufficiently bug-free to announce it as
a feature.
<LI>

<code>MATCH</code> and <code>AGAINST</code> are now reserved words.
</UL>



<H3><A NAME="News-3.23.20" HREF="manual_toc.html#News-3.23.20">D.4.41  Changes in release 3.23.20 (28 Jun 2000: Beta)</A></H3>


<UL>
<LI>

Fixed bug in 3.23.19; <code>DELETE FROM <var>tbl_name</var></code> removed the <tt>`.frm'</tt> file.
<LI>

Added <code>SHOW CREATE TABLE</code>.
</UL>



<H3><A NAME="News-3.23.19" HREF="manual_toc.html#News-3.23.19">D.4.42  Changes in release 3.23.19</A></H3>


<UL>
<LI>

Changed copyright for all files to GPL for the server code and utilities and
to LGPL for the client libraries.
See <a HREF="http://www.fsf.org/licenses/">http://www.fsf.org/licenses/</a>.
<LI>

Fixed bug where all rows matching weren't updated on a <code>MyISAM</code> table
when doing update based on key on a table with many keys and some key changed
values.
<LI>

The Linux MySQL RPMs and binaries are now statically linked with
a linuxthread version that has faster mutex handling when used with
MySQL.
<LI>

<code>ORDER BY</code> can now use <code>REF</code> keys to find subsets of the rows
that need to be sorted.
<LI>

Changed name of <code>print_defaults</code> program to <code>my_print_defaults</code>
to avoid name confusion.
<LI>

Fixed <code>NULLIF()</code> to work as required by standard SQL.
<LI>

Added <code>net_read_timeout</code> and <code>net_write_timeout</code> as startup
parameters to <code>mysqld</code>.
<LI>

Fixed bug that destroyed index when doing <code>myisamchk --sort-records</code>
on a table with prefix compressed index.
<LI>

Added <code>pack_isam</code> and <code>myisampack</code> to the standard MySQL
distribution.
<LI>

Added the syntax <code>BEGIN WORK</code> (the same as <code>BEGIN</code>).
<LI>

Fixed core dump bug when using <code>ORDER BY</code> on a <code>CONV()</code> expression.
<LI>

Added <code>LOAD TABLE FROM MASTER</code>.
<LI>

Added <code>FLUSH MASTER</code> and <code>FLUSH SLAVE</code>.
<LI>

Fixed big/little endian problem in the replication.
</UL>



<H3><A NAME="News-3.23.18" HREF="manual_toc.html#News-3.23.18">D.4.43  Changes in release 3.23.18 (11 Jun 2000)</A></H3>


<UL>
<LI>

Fixed a problem from 3.23.17 when choosing character set on the client side.
<LI>

Added <code>FLUSH TABLES WITH READ LOCK</code> to make a global lock suitable for
making a copy of MySQL data files.
<LI>

<code>CREATE TABLE ... SELECT ... PROCEDURE</code> now works.
<LI>

Internal temporary tables will now use compressed index when using
<code>GROUP BY</code> on <code>VARCHAR/CHAR</code> columns.
<LI>

Fixed a problem when locking the same table with both a <code>READ</code> and a
<code>WRITE</code> lock.
<LI>

Fixed problem with <code>myisamchk</code> and <code>RAID</code> tables.
</UL>



<H3><A NAME="News-3.23.17" HREF="manual_toc.html#News-3.23.17">D.4.44  Changes in release 3.23.17 (07 Jun 2000)</A></H3>


<UL>
<LI>

Fixed a bug in <code>FIND_IN_SET()</code> when the first argument was <code>NULL</code>.
<LI>

Added table locks to Berkeley DB.
<LI>

Fixed a bug with <code>LEFT JOIN</code> and <code>ORDER BY</code> where the first
table had only one matching row.
<LI>

Added 4 sample <tt>`my.cnf'</tt> example files in the <tt>`support-files'</tt>
directory.
<LI>

Fixed <code>duplicated key</code> problem when doing big <code>GROUP BY</code> operations.
(This bug was probably introduced in 3.23.15.)
<LI>

Changed syntax for <code>INNER JOIN</code> to match standard SQL.
<LI>

Added <code>NATURAL JOIN</code> syntax.
<LI>

A lot of fixes in the <code>BDB</code> interface.
<LI>

Added handling of <code>--no-defaults</code> and <code>--defaults-file</code> to
<code>safe_mysqld.sh</code> and <code>mysql_install_db.sh</code>.
<LI>

Fixed bug in reading compressed tables with many threads.
<LI>

Fixed that <code>USE INDEX</code> works with <code>PRIMARY</code> keys.
<LI>

Added <code>BEGIN</code> statement to start a transaction in <code>AUTOCOMMIT</code> mode.
<LI>

Added support for symbolic links for Windows.
<LI>

Changed protocol to let client know if the server is in <code>AUTOCOMMIT</code> mode
and if there is a pending transaction.  If there is a pending transaction,
the client library will give an error before reconnecting to the server to
let the client know that the server did a rollback.
The protocol is still backward-compatible with old clients.
<LI>

<code>KILL</code> now works on a thread that is locked on a 'write' to a dead client.
<LI>

Fixed memory leak in the replication slave thread.
<LI>

Added new <code>log-slave-updates</code> option to <code>mysqld</code>, to allow
daisy-chaining the slaves.
<LI>

Fixed compile error on FreeBSD and other systems where <code>pthread_t</code>
is not the same as <code>int</code>.
<LI>

Fixed master shutdown aborting the slave thread.
<LI>

Fixed a race condition in <code>INSERT DELAYED</code> code when doing
<code>ALTER TABLE</code>.
<LI>

Added deadlock detection sanity checks to <code>INSERT DELAYED</code>.
</UL>



<H3><A NAME="News-3.23.16" HREF="manual_toc.html#News-3.23.16">D.4.45  Changes in release 3.23.16 (16 May 2000)</A></H3>


<UL>
<LI>

Added <code>SLAVE START</code> and <code>SLAVE STOP</code> statements.
<LI>

Added <code>TYPE=QUICK</code> option to <code>CHECK TABLE</code> and to <code>REPAIR TABLE</code>.
<LI>

Fixed bug in <code>REPAIR TABLE</code> when the table was in use by other threads.
<LI>

Added a thread cache to make it possible to debug MySQL with
<code>gdb</code> when one does a lot of reconnects. This will also improve
systems where you can't use persistent connections.
<LI>

Lots of fixes in the Berkeley DB interface.
<LI>

<code>UPDATE IGNORE</code> will not abort if an update results in a
<code>DUPLICATE_KEY</code> error.
<LI>

Put <code>CREATE TEMPORARY TABLE</code> commands in the update log.
<LI>

Fixed bug in handling of masked IP numbers in the privilege tables.
<LI>

Fixed bug with <code>delay_key_write</code> tables and <code>CHECK TABLE</code>.
<LI>

Added <code>--replicate-do-db</code> and <code>--replicate-ignore-db</code> options to
<code>mysqld</code>, to restrict which databases get replicated.
<LI>

Added <code>SQL_LOG_BIN</code> option.
</UL>



<H3><A NAME="News-3.23.15" HREF="manual_toc.html#News-3.23.15">D.4.46  Changes in release 3.23.15 (08 May 2000)</A></H3>


<UL>
<LI>

To start <code>mysqld</code> as <code>root</code>, you must now use the <code>--user=root</code> option.
<LI>

Added interface to Berkeley DB. (This is not yet functional; play with it at
your own risk!)
<LI>

Replication between master and slaves.
<LI>

Fixed bug that other threads could steal a lock when a thread had
a lock on a table and did a <code>FLUSH TABLES</code> command.
<LI>

Added the <code>slow_launch_time</code> variable and the <code>Slow_launch_threads</code>
status variable to <code>mysqld</code>.  These can be examined with
<code>mysqladmin variables</code> and <code>mysqladmin extended-status</code>.
<LI>

Added functions <code>INET_NTOA()</code> and <code>INET_ATON()</code>.
<LI>

The default type of <code>IF()</code> now depends on the second and
third arguments and not only on the second argument.
<LI>

Fixed case when <code>myisamchk</code> could go into a loop when trying to
repair a crashed table.
<LI>

Don't write <code>INSERT DELAYED</code> to update log if <code>SQL_LOG_UPDATE=0</code>.
<LI>

Fixed problem with <code>REPLACE</code> on <code>HEAP</code> tables.
<LI>

Added possible character sets and time zone to <code>SHOW VARIABLES</code> output.
<LI>

Fixed bug in locking code that could result in locking problems with
concurrent inserts under high load.
<LI>

Fixed a problem with <code>DELETE</code> of many rows on a table with
compressed keys where MySQL scanned the index to find the rows.
<LI>

Fixed problem with <code>CHECK TABLE</code> on table with deleted keyblocks.
<LI>

Fixed a bug in reconnect (at the client side) where it didn't free memory
properly in some contexts.
<LI>

Fixed problems in update log when using <code>LAST_INSERT_ID()</code> to update
a table with an <code>AUTO_INCREMENT</code> key.
<LI>

Added <code>NULLIF()</code> function.
<LI>

Fixed bug when using <code>LOAD DATA INFILE</code> on a table with
<code>BLOB/TEXT</code> columns.
<LI>

Optimized <code>MyISAM</code> to be faster when inserting keys in sorted order.
<LI>

<code>EXPLAIN SELECT ...</code> now also prints out whether MySQL needs to
create a temporary table or use file sorting when resolving the <code>SELECT</code>.
<LI>

Added optimization to skip <code>ORDER BY</code> parts where the part is a
constant expression in the <code>WHERE</code> part.  Indexes can now be used
even if the <code>ORDER BY</code> doesn't match the index exactly, as long as
all the unused index parts and all the extra <code>ORDER BY</code>
columns are constants in the <code>WHERE</code> clause.  See section <A HREF="manual_MySQL_Optimization.html#MySQL_indexes">7.4.5  How MySQL Uses Indexes</A>.
<LI>

<code>UPDATE</code> and <code>DELETE</code> on a whole unique key in the <code>WHERE</code> part
are now faster than before.
<LI>

Changed <code>RAID_CHUNKSIZE</code> to be in 1024-byte increments.
<LI>

Fixed core dump in <code>LOAD_FILE(NULL)</code>.
</UL>



<H3><A NAME="News-3.23.14" HREF="manual_toc.html#News-3.23.14">D.4.47  Changes in release 3.23.14 (09 Apr 2000)</A></H3>


<UL>
<LI>

Added <code>mysqlbinlog</code> program for displaying binary log files in text
format.
<LI>

Added <code>mysql_real_escape_string()</code> function to the MySQL C API.
<LI>

Fixed a bug in <code>CONCAT()</code> where one of the arguments was a function
that returned a modified argument.
<LI>

Fixed a critical bug in <code>myisamchk</code>, where it updated the header in
the index file when one only checked the table.  This confused the
<code>mysqld</code> daemon if it updated the same table at the same time. Now
the status in the index file is only updated if one uses
<code>--update-state</code>.  With older <code>myisamchk</code> versions you should
use <code>--read-only</code> when only checking tables, if there is the
slightest chance that the <code>mysqld</code> server is working on the table at the
same time!
<LI>

Fixed that <code>DROP TABLE</code> is logged in the update log.
<LI>

Fixed problem when searching on <code>DECIMAL()</code> key field
where the column data contained leading zeros.
<LI>

Fix bug in <code>myisamchk</code> when the <code>AUTO_INCREMENT</code> column isn't
the first key.
<LI>

Allow <code>DATETIME</code> in ISO8601 format: 2000-03-12T12:00:00
<LI>

Dynamic character sets.  A <code>mysqld</code> binary can now handle many different
character sets (you can choose which when starting <code>mysqld</code>).
<LI>

Added <code>REPAIR TABLE</code> statement.
<LI>

Added <code>mysql_thread_safe()</code> function to the MySQL C API.
<LI>

Added the <code>UMASK_DIR</code> environment variable.
<LI>

Added <code>CONNECTION_ID()</code> function to return the client connection thread
ID.
<LI>

When using <code>=</code> on <code>BLOB</code> or <code>VARCHAR BINARY</code> keys, where
only a part of the column was indexed, the whole column of the result
row wasn't compared.
<LI>

Fix for <code>sjis</code> character set and <code>ORDER BY</code>.
<LI>

When running in ANSI mode, don't allow columns to be used that aren't in
the <code>GROUP BY</code> part.
</UL>



<H3><A NAME="News-3.23.13" HREF="manual_toc.html#News-3.23.13">D.4.48  Changes in release 3.23.13 (14 Mar 2000)</A></H3>


<UL>
<LI>

Fixed problem when doing locks on the same table more than 2 times in
the same <code>LOCK TABLE</code> command; this fixed the problem one got when running
the test-ATIS test with <code>--fast</code> or <code>--check-only-changed</code>.
<LI>

Added <code>SQL_BUFFER_RESULT</code> option to <code>SELECT</code>.
<LI>

Removed endspace from double/float numbers in results from temporary
tables.
<LI>

Added <code>CHECK TABLE</code> command.
<LI>

Added changes for <code>MyISAM</code> in 3.23.12 that didn't get into the source
distribution because of CVS problems.
<LI>

Fixed bug so that <code>mysqladmin shutdown</code> will wait for the local server
to close down.
<LI>

Fixed a possible endless loop when calculating timestamp.
<LI>

Added <code>print_defaults</code> program to the <tt>`.rpm'</tt> files. Removed
<code>mysqlbug</code> from the client <tt>`.rpm'</tt> file.
</UL>



<H3><A NAME="News-3.23.12" HREF="manual_toc.html#News-3.23.12">D.4.49  Changes in release 3.23.12 (07 Mar 2000)</A></H3>


<UL>
<LI>

Fixed bug in <code>MyISAM</code> involving <code>REPLACE ... SELECT ...</code> which could
give a corrupted table.
<LI>

Fixed bug in <code>myisamchk</code> where it incorrectly reset the
<code>AUTO_INCREMENT</code> value.
<LI>

LOTS of patches for Linux Alpha. MySQL now appears to be relatively
stable on Alpha.
<LI>

Changed <code>DISTINCT</code> on <code>HEAP</code> temporary tables to use hashed
keys to quickly find duplicated rows. This mostly concerns queries of
type <code>SELECT DISTINCT ... GROUP BY ...</code>.  This fixes a problem where
not all duplicates were removed in queries of the above type.  In
addition, the new code is MUCH faster.
<LI>

Added patches to make MySQL compile on Mac OS X.
<LI>

Added <code>IF NOT EXISTS</code> clause to <code>CREATE DATABASE</code>.
<LI>

Added <code>--all-databases</code> and <code>--databases</code> options to <code>mysqldump</code>
to allow dumping of many databases at the same time.
<LI>

Fixed bug in compressed <code>DECIMAL()</code> index in <code>MyISAM</code> tables.
<LI>

Fixed bug when storing 0 into a timestamp.
<LI>

When doing <code>mysqladmin shutdown</code> on a local connection, <code>mysqladmin</code>
now waits until the PID file is gone before terminating.
<LI>

Fixed core dump with some <code>COUNT(DISTINCT ...)</code> queries.
<LI>

Fixed that <code>myisamchk</code> works properly with RAID tables.
<LI>

Fixed problem with <code>LEFT JOIN</code> and <code><var>key_col</var> IS NULL</code>.
<LI>

Fixed bug in <code>net_clear()</code> which could give the error <code>Aborted
connection</code> in the MySQL clients.
<LI>

Added options <code>USE INDEX (<var>key_list</var>)</code> and <code>IGNORE INDEX (<var>key_list</var>)</code> as
parameters in <code>SELECT</code>.
<LI>

<code>DELETE</code> and <code>RENAME</code> should now work on <code>RAID</code> tables.
</UL>



<H3><A NAME="News-3.23.11" HREF="manual_toc.html#News-3.23.11">D.4.50  Changes in release 3.23.11 (16 Feb 2000)</A></H3>


<UL>
<LI>

Added <code>HIGH_PRIORITY</code> option to <code>INSERT</code>. This overrides the
effect of the <code>--low-priority-updates</code> server option and will not
perform concurrent inserts.
<LI>

Allow the <code>ALTER TABLE <var>tbl_name</var> ADD (field_list)</code> syntax.
<LI>

Fixed problem with optimizer that could sometimes use incorrect keys.
<LI>

Fixed that <code>GRANT/REVOKE ALL PRIVILEGES</code> doesn't affect
<code>GRANT OPTION</code>.
<LI>

Removed extra <samp>`)'</samp> from the output of <code>SHOW GRANTS</code>.
<LI>

Fixed problem when storing numbers in timestamps.
<LI>

Fix problem with time zones that have half hour offsets.
<LI>

Allow the syntax <code>UNIQUE INDEX</code> in <code>CREATE</code> statements.
<LI>

<code>mysqlhotcopy</code> - fast online hot-backup utility for local
MySQL databases. By Tim Bunce.
<LI>

New more secure <code>mysqlaccess</code>. Thanks to Steve Harvey for this.
<LI>

Added <code>--i-am-a-dummy</code> and <code>--safe-updates</code> options to <code>mysql</code>.
<LI>

Added <code>select_limit</code> and <code>max_join_size</code> variables to <code>mysql</code>.
<LI>

Added <code>SQL_MAX_JOIN_SIZE</code> and <code>SQL_SAFE_UPDATES</code> options.
<LI>

Added <code>READ LOCAL</code> lock that doesn't lock the table for concurrent
inserts. (This is used by <code>mysqldump</code>.)
<LI>

Changed that <code>LOCK TABLES ... READ</code> no longer allows concurrent
inserts.
<LI>

Added <code>--skip-delay-key-write</code> option to <code>mysqld</code>.
<LI>

Fixed security problem in the protocol regarding password checking.
<LI>

<code>_rowid</code> can now be used as an alias for an integer type unique indexed
column.
<LI>

Added back blocking of <code>SIGPIPE</code> when compiling with <code>--thread-safe-clients</code>
to make things safe for old clients.
</UL>



<H3><A NAME="News-3.23.10" HREF="manual_toc.html#News-3.23.10">D.4.51  Changes in release 3.23.10 (30 Jan 2000)</A></H3>


<UL>
<LI>

Fixed bug in 3.23.9 where memory wasn't properly freed when using
<code>LOCK TABLES</code>.
</UL>



<H3><A NAME="News-3.23.9" HREF="manual_toc.html#News-3.23.9">D.4.52  Changes in release 3.23.9 (29 Jan 2000)</A></H3>


<UL>
<LI>

Fixed problem that affected queries that did arithmetic on group functions.
<LI>

Fixed problem with timestamps and <code>INSERT DELAYED</code>.
<LI>

Fixed that <code>date_col BETWEEN const_date AND const_date</code> works.
<LI>

Fixed problem when only changing a 0 to <code>NULL</code> in a table with
<code>BLOB/TEXT</code> columns.
<LI>

Fixed bug in range optimizer when using many key parts and or on the middle
key parts:  <code>WHERE K1=1 and K3=2 and (K2=2 and K4=4 or K2=3 and K4=5)</code>
<LI>

Added <code>source</code> command to <code>mysql</code> to allow reading of batch files
inside the <code>mysql</code> client.  Original patch by Matthew Vanecek.
<LI>

Fixed critical problem with the <code>WITH GRANT OPTION</code> option.
<LI>

Don't give an unnecessary <code>GRANT</code> error when using tables from many
databases in the same query.
<LI>

Added VIO wrapper (needed for SSL support; by Andrei Errapart and
T&otilde;nu Samuel).
<LI>

Fixed optimizer problem on <code>SELECT</code> when using many overlapping indexes.
MySQL should now be able to choose keys even better when there
are many keys to choose from.
<LI>

Changed optimizer to prefer a range key instead of a ref key when the
range key can uses more columns than the ref key (which only can use
columns with <code>=</code>).  For example, the following type of queries should now
be faster: <code>SELECT * from key_part_1=const and key_part_2 &#62; const2</code>
<LI>

Fixed bug that a change of all <code>VARCHAR</code> columns to <code>CHAR</code> columns
didn't change row type from dynamic to fixed.
<LI>

Disabled floating-point exceptions for FreeBSD to fix core dump when
doing <code>SELECT FLOOR(POW(2,63))</code>.
<LI>

Renamed <code>mysqld</code> startup option from <code>--delay-key-write</code> to
<code>--delay-key-write-for-all-tables</code>.
<LI>

Added <code>read-next-on-key</code> to <code>HEAP</code> tables.  This should fix all
problems with <code>HEAP</code> tables when using non-<code>UNIQUE</code> keys.
<LI>

Added option to print default arguments to all clients.
<LI>

Added <code>--log-slow-queries</code> option to <code>mysqld</code> to log all queries
that take a long time to a separate log file with a time indicating how
long the query took.
<LI>

Fixed core dump when doing <code>WHERE <var>key_col</var>=RAND(...)</code>.
<LI>

Fixed optimization bug in <code>SELECT ... LEFT JOIN ... <var>key_col</var> IS NULL</code>,
when <var>key_col</var> could contain <code>NULL</code> values.
<LI>

Fixed problem with 8-bit characters as separators in <code>LOAD DATA INFILE</code>.
</UL>



<H3><A NAME="News-3.23.8" HREF="manual_toc.html#News-3.23.8">D.4.53  Changes in release 3.23.8 (02 Jan 2000)</A></H3>


<UL>
<LI>

Fixed problem when handling indexfiles larger than 8GB.
<LI>

Added latest patches to MIT-pthreads for NetBSD.
<LI>

Fixed problem with time zones that are &#60; GMT - 11.
<LI>

Fixed a bug when deleting packed keys in <code>NISAM</code>.
<LI>

Fixed problem with <code>ISAM</code> when doing some <code>ORDER BY ... DESC</code> queries.
<LI>

Fixed bug when doing a join on a text key which didn't cover the whole key.
<LI>

Option <code>--delay-key-write</code> didn't enable delayed key writing.
<LI>

Fixed update of <code>TEXT</code> column which involved only case changes.
<LI>

Fixed that <code>INSERT DELAYED</code> doesn't update timestamps that are given.
<LI>

Added function <code>YEARWEEK()</code> and options <code>x</code>, <code>X</code>, <code>v</code> and
<code>V</code> to <code>DATE_FORMAT()</code>.
<LI>

Fixed problem with <code>MAX(indexed_column)</code> and <code>HEAP</code> tables.
<LI>

Fixed problem with <code>BLOB NULL</code> keys and <code>LIKE "prefix%"</code>.
<LI>

Fixed problem with <code>MyISAM</code> and fixed-length rows &#60; 5 bytes.
<LI>

Fixed problem that could cause MySQL to touch freed memory when
doing very complicated <code>GROUP BY</code> queries.
<LI>

Fixed core dump if you got a crashed table where an <code>ENUM</code> field value
was too big.
</UL>



<H3><A NAME="News-3.23.7" HREF="manual_toc.html#News-3.23.7">D.4.54  Changes in release 3.23.7 (10 Dec 1999)</A></H3>


<UL>
<LI>

Fixed workaround under Linux to avoid problems with
<code>pthread_mutex_timedwait()</code>,
which is used with <code>INSERT DELAYED</code>. See section <A HREF="manual_Installing.html#Linux">2.12.1  Linux Notes</A>.
<LI>

Fixed that one will get a 'disk full' error message if one gets disk full
when doing sorting (instead of waiting until we got more disk space).
<LI>

Fixed a bug in <code>MyISAM</code> with keys &#62; 250 characters.
<LI>

In <code>MyISAM</code> one can now do an <code>INSERT</code> at the same time as other
threads are reading from the table.
<LI>

Added <code>max_write_lock_count</code> variable to <code>mysqld</code> to force a
<code>READ</code> lock after a certain number of <code>WRITE</code> locks.
<LI>

Inverted flag <code>delay_key_write</code> on <code>show variables</code>.
<LI>

Renamed <code>concurrency</code> variable to <code>thread_concurrency</code>.
<LI>

The following functions are now multi-byte-safe:
<code>LOCATE(<var>substr</var>,<var>str</var>)</code>, <code>POSITION(<var>substr</var> IN <var>str</var>)</code>,
<code>LOCATE(<var>substr</var>,<var>str</var>,<var>pos</var>)</code>, <code>INSTR(<var>str</var>,<var>substr</var>)</code>,
<code>LEFT(<var>str</var>,<var>len</var>)</code>, <code>RIGHT(<var>str</var>,<var>len</var>)</code>,
<code>SUBSTRING(<var>str</var>,<var>pos</var>,<var>len</var>)</code>, <code>SUBSTRING(<var>str</var> FROM <var>pos</var> FOR <var>len</var>)</code>,
<code>MID(<var>str</var>,<var>pos</var>,<var>len</var>)</code>, <code>SUBSTRING(<var>str</var>,<var>pos</var>)</code>, <code>SUBSTRING(<var>str</var>
FROM <var>pos</var>)</code>, <code>SUBSTRING_INDEX(<var>str</var>,<var>delim</var>,<var>count</var>)</code>, <code>RTRIM(<var>str</var>)</code>,
<code>TRIM([[BOTH | TRAILING] [<var>remstr</var>] FROM] <var>str</var>)</code>,
<code>REPLACE(<var>str</var>,<var>from_str</var>,<var>to_str</var>)</code>, <code>REVERSE(<var>str</var>)</code>,
<code>INSERT(<var>str</var>,<var>pos</var>,<var>len</var>,<var>newstr</var>)</code>, <code>LCASE(<var>str</var>)</code>, <code>LOWER(<var>str</var>)</code>,
<code>UCASE(<var>str</var>)</code> and <code>UPPER(<var>str</var>)</code>; patch by Wei He.
<LI>

Fix core dump when releasing a lock from a non-existent table.
<LI>

Remove locks on tables before starting to remove duplicates.
<LI>

Added option <code>FULL</code> to <code>SHOW PROCESSLIST</code>.
<LI>

Added option <code>--verbose</code> to <code>mysqladmin</code>.
<LI>

Fixed problem when automatically converting <code>HEAP</code> to <code>MyISAM</code>.
<LI>

Fixed bug in <code>HEAP</code> tables when doing insert + delete + insert + scan the
table.
<LI>

Fixed bugs on Alpha with <code>REPLACE()</code> and <code>LOAD DATA INFILE</code>.
<LI>

Added <code>interactive_timeout</code> variable to <code>mysqld</code>.
<LI>

Changed the argument to <code>mysql_data_seek()</code> from <code>ulong</code> to
<code>ulonglong</code>.
</UL>



<H3><A NAME="News-3.23.6" HREF="manual_toc.html#News-3.23.6">D.4.55  Changes in release 3.23.6 (15 Nov 1999)</A></H3>


<UL>
<LI>

Added <code>-O lower_case_table_names={0|1}</code> option to <code>mysqld</code> to allow
users to force table names to lowercase.
<LI>

Added <code>SELECT ... INTO DUMPFILE</code>.
<LI>

Added <code>--ansi</code> option to <code>mysqld</code> to make some functions
standard SQL compatible.
<LI>

Temporary table names now start with <code>#sql</code>.
<LI>

Added quoting of identifiers with <code>`</code> (<code>"</code> in <code>--ansi</code> mode).
<LI>

Changed to use <code>snprintf()</code> when printing floats to avoid some buffer
overflows on FreeBSD.
<LI>

Made <code>FLOOR()</code> overflow safe on FreeBSD.
<LI>

Added <code>--quote-names</code> option to <code>mysqldump</code>.
<LI>

Fixed bug that one could make a part of a <code>PRIMARY KEY NOT NULL</code>.
<LI>

Fixed <code>encrypt()</code> to be thread-safe and not reuse buffer.
<LI>

Added <code>mysql_odbc_escape_string()</code> function to support big5 characters in
MyODBC.
<LI>

Rewrote the storage engine to use classes.  This introduces a lot of new code,
but will make table handling faster and better.
<LI>

Added patch by Sasha for user-defined variables.
<LI>

Changed that <code>FLOAT</code> and <code>DOUBLE</code> (without any length modifiers)
no longer are fixed decimal point numbers.
<LI>

Changed the meaning of <code>FLOAT(<var>X</var>)</code>: Now this is the same as <code>FLOAT</code> if
<var>X</var> &#60;= 24 and a <code>DOUBLE</code> if 24 &#60; <var>X</var> &#60;= 53.
<LI>

<code>DECIMAL(<var>X</var>)</code> is now an alias for <code>DECIMAL(<var>X</var>,0)</code> and <code>DECIMAL</code>
is now an alias for <code>DECIMAL(10,0)</code>.  The same goes for <code>NUMERIC</code>.
<LI>

Added option <code>ROW_FORMAT={DEFAULT | DYNAMIC | FIXED | COMPRESSED}</code> to
<code>CREATE_TABLE</code>.
<LI>

<code>DELETE FROM <var>tbl_name</var></code> didn't work on temporary tables.
<LI>

Changed function <code>CHAR_LENGTH()</code> to be multi-byte character safe.
<LI>

Added function <code>ORD(string)</code>.
</UL>



<H3><A NAME="News-3.23.5" HREF="manual_toc.html#News-3.23.5">D.4.56  Changes in release 3.23.5 (20 Oct 1999)</A></H3>


<UL>
<LI>

Fixed some Y2K problems in the new date handling in 3.23.
<LI>

Fixed problem with <code>SELECT DISTINCT ... ORDER BY RAND()</code>.
<LI>

Added patches by Sergei A. Golubchik for text searching on the <code>MyISAM</code>
level.
<LI>

Fixed cache overflow problem when using full joins without keys.
<LI>

Fixed some configure issues.
<LI>

Some small changes to make parsing faster.
<LI>

Adding a column after the last field with <code>ALTER TABLE</code> didn't work.
<LI>

Fixed problem when using an <code>AUTO_INCREMENT</code> column in two keys
<LI>

With <code>MyISAM</code>, you now can have an <code>AUTO_INCREMENT</code> column as a key
sub part:
<code>CREATE TABLE foo (a INT NOT NULL AUTO_INCREMENT, b CHAR(5), PRIMARY KEY (b,a))</code>
<LI>

Fixed bug in <code>MyISAM</code> with packed char keys that could be <code>NULL</code>.
<LI>

<code>AS</code> on field name with <code>CREATE TABLE <var>tbl_name</var> SELECT ...</code> didn't
work.
<LI>

Allow use of <code>NATIONAL</code> and <code>NCHAR</code> when defining character columns.
This is the same as not using <code>BINARY</code>.
<LI>

Don't allow <code>NULL</code> columns in a <code>PRIMARY KEY</code> (only in <code>UNIQUE</code>
keys).
<LI>

Clear <code>LAST_INSERT_ID()</code> if one uses this in ODBC:
<code>WHERE auto_increment_column IS NULL</code>.  This seems to fix some problems
with Access.
<LI>

<code>SET SQL_AUTO_IS_NULL=0|1</code> now turns on/off the handling of
searching for the last inserted row with <code>WHERE
auto_increment_column IS NULL</code>.
<LI>

Added new variable <code>concurrency</code> to <code>mysqld</code> for Solaris.
<LI>

Added <code>--relative</code> option to <code>mysqladmin</code> to make
<code>extended-status</code> more useful to monitor changes.
<LI>

Fixed bug when using <code>COUNT(DISTINCT ...)</code> on an empty table.
<LI>

Added support for the Chinese character set GBK.
<LI>

Fixed problem with <code>LOAD DATA INFILE</code> and <code>BLOB</code> columns.
<LI>

Added bit operator <code>~</code> (negation).
<LI>

Fixed problem with UDF functions.
</UL>



<H3><A NAME="News-3.23.4" HREF="manual_toc.html#News-3.23.4">D.4.57  Changes in release 3.23.4 (28 Sep 1999)</A></H3>


<UL>
<LI>

Inserting a <code>DATETIME</code> into a <code>TIME</code> column no longer will
try to store 'days' in it.
<LI>

Fixed problem with storage of float/double on little endian machines.
(This affected <code>SUM()</code>.)
<LI>

Added connect timeout on TCP/IP connections.
<LI>

Fixed problem with <code>LIKE "%"</code> on an index that may have <code>NULL</code> values.
<LI>

<code>REVOKE ALL PRIVILEGES</code> didn't revoke all privileges.
<LI>

Allow creation of temporary tables with same name as the original table.
<LI>

When granting an account a <code>GRANT</code> option for a database, the account
couldn't grant privileges to other users.
<LI>

New statement: <code>SHOW GRANTS FOR user</code> (by Sinisa).
<LI>

New <code>date_add</code> syntax:  <code>date/datetime + INTERVAL # interval_type</code>.
By Joshua Chamas.
<LI>

Fixed privilege check for <code>LOAD DATA REPLACE</code>.
<LI>

Automatic fixing of broken include files on Solaris 2.7
<LI>

Some configure issues to fix problems with big filesystem detection.
<LI>

<code>REGEXP</code> is now case-insensitive if you use non-binary strings.
</UL>



<H3><A NAME="News-3.23.3" HREF="manual_toc.html#News-3.23.3">D.4.58  Changes in release 3.23.3 (13 Sep 1999)</A></H3>


<UL>
<LI>

Added patches for MIT-pthreads on NetBSD.
<LI>

Fixed range bug in <code>MyISAM</code>.
<LI>

<code>ASC</code> is now the default again for <code>ORDER BY</code>.
<LI>

Added <code>LIMIT</code> to <code>UPDATE</code>.
<LI>

Added <code>mysql_change_user()</code> function to the MySQL C API.
<LI>

Added character set to <code>SHOW VARIABLES</code>.
<LI>

Added support of <code>--[whitespace]</code> comments.
<LI>

Allow <code>INSERT INTO <var>tbl_name</var> VALUES ()</code>, that is, you may now specify
an empty value list to insert a row in which each column is set to its
default value.
<LI>

Changed <code>SUBSTRING(text FROM pos)</code> to conform to standard SQL. (Before this
construct returned the rightmost <code>pos</code> characters.)
<LI>

<code>SUM()</code> with <code>GROUP BY</code> returned 0 on some systems.
<LI>

Changed output for <code>SHOW TABLE STATUS</code>.
<LI>

Added <code>DELAY_KEY_WRITE</code> option to <code>CREATE TABLE</code>.
<LI>

Allow <code>AUTO_INCREMENT</code> on any key part.
<LI>

Fixed problem with <code>YEAR(NOW())</code> and <code>YEAR(CURDATE())</code>.
<LI>

Added <code>CASE</code> construct.
<LI>

New <code>COALESCE()</code> function.
</UL>



<H3><A NAME="News-3.23.2" HREF="manual_toc.html#News-3.23.2">D.4.59  Changes in release 3.23.2 (09 Aug 1999)</A></H3>


<UL>
<LI>

Fixed range optimizer bug: <code>SELECT * FROM <var>tbl_name</var> WHERE
<var>key_part1</var> &#62;= <var>const</var> AND (<var>key_part2</var> = <var>const</var> OR <var>key_part2</var> = <var>const</var>)</code>.  The
bug was that some rows could be duplicated in the result.
<LI>

Running <code>myisamchk</code> without <code>-a</code> updated the index
distribution incorrectly.
<LI>

<code>SET SQL_LOW_PRIORITY_UPDATES=1</code> was causing a parse error.
<LI>

You can now update index columns that are used in the <code>WHERE</code> clause.
<code>UPDATE <var>tbl_name</var> SET KEY=KEY+1 WHERE KEY &#62; 100</code>
<LI>

Date handling should now be a bit faster.
<LI>

Added handling of fuzzy dates (dates where day or month is 0), such as
<code>'1999-01-00'</code>.
<LI>

Fixed optimization of <code>SELECT ... WHERE <var>key_part1</var>=<var>const1</var> AND
<var>key_part_2</var>=<var>const2</var> AND <var>key_part1</var>=<var>const4</var> AND
<var>key_part2</var>=<var>const4</var></code>; indextype
should be <code>range</code> instead of <code>ref</code>.
<LI>

Fixed <code>egcs</code> 1.1.2 optimizer bug (when using <code>BLOB</code> values) on Linux Alpha.
<LI>

Fixed problem with <code>LOCK TABLES</code> combined with <code>DELETE FROM table</code>.
<LI>

<code>MyISAM</code> tables now allow keys on <code>NULL</code> and <code>BLOB/TEXT</code> columns.
<LI>

The following join is now much faster:
<code>SELECT ... FROM t1 LEFT JOIN t2 ON ... WHERE t2.<var>not_null_column</var> IS NULL</code>.
<LI>

<code>ORDER BY</code> and <code>GROUP BY</code> can be done on functions.
<LI>

Changed handling of 'const_item' to allow handling of <code>ORDER BY RAND()</code>.
<LI>

Indexes are now used for <code>WHERE <var>key_column</var> = <var>function</var></code>.
<LI>

Indexes are now used for <code>WHERE <var>key_column</var> = <var>col_name</var></code> even if
the columns are not identically packed.
<LI>

Indexes are now used for <code>WHERE <var>col_name</var> IS NULL</code>.
<LI>

Changed heap tables to be stored in low_byte_first order (to make it easy
to convert to <code>MyISAM</code> tables)
<LI>

Automatic change of <code>HEAP</code> temporary tables to <code>MyISAM</code> tables
in case of ``table is full'' errors.
<LI>

Added <code>--init-file=<var>file_name</var></code> option to <code>mysqld</code>.
<LI>

Added <code>COUNT(DISTINCT <var>value</var>, [<var>value</var>, ...])</code>.
<LI>

<code>CREATE TEMPORARY TABLE</code> now creates a temporary table, in its own
namespace, that is automatically deleted if connection is dropped.
<LI>

New reserved words (required for <code>CASE</code>):  <code>CASE, THEN, WHEN, ELSE and END</code>.
<LI>

New functions <code>EXPORT_SET()</code> and <code>MD5()</code>.
<LI>

Support for the GB2312 Chinese character set.
</UL>



<H3><A NAME="News-3.23.1" HREF="manual_toc.html#News-3.23.1">D.4.60  Changes in release 3.23.1 (08 Jul 1999)</A></H3>


<UL>
<LI>

Fixed some compilation problems.
</UL>



<H3><A NAME="News-3.23.0" HREF="manual_toc.html#News-3.23.0">D.4.61  Changes in release 3.23.0 (05 Jul 1999: Alpha)</A></H3>


<UL>
<LI>

A new storage engine library (<code>MyISAM</code>) with a lot of new features.
See section <A HREF="manual_Storage_engines.html#MyISAM_storage_engine">14.1  The <code>MyISAM</code> Storage Engine</A>.
<LI>

You can create in-memory <code>HEAP</code> tables which are extremely fast for
lookups.
<LI>

Support for big files (63-bit) on OSs that support big files.
<LI>

New function <code>LOAD_FILE(filename)</code> to get the contents of a file as a
string value.
<LI>

New <code>&#60;=&#62;</code> operator that acts as <code>=</code> but returns TRUE
if both arguments are <code>NULL</code>.  This is useful for comparing changes
between tables.
<LI>

Added the ODBC 3.0 <code>EXTRACT(interval FROM datetime)</code> function.
<LI>

Columns defined as <code>FLOAT(<var>X</var>)</code> are not rounded on storage and may be
in scientific notation (1.0 E+10) when retrieved.
<LI>

<code>REPLACE</code> is now faster than before.
<LI>

Changed <code>LIKE</code> character comparison to behave as <code>=</code>;
This means that <code>'e' LIKE '&eacute;'</code> is now true.  (If the line doesn't
display correctly, the latter 'e' is a French 'e' with an acute accent above.)
<LI>

<code>SHOW TABLE STATUS</code> returns a lot of information about the tables.
<LI>

Added <code>LIKE</code> to the <code>SHOW STATUS</code> command.
<LI>

Added <code>Privileges</code> column to <code>SHOW COLUMNS</code>.
<LI>

Added <code>Packed</code> and <code>Comment</code> columns to <code>SHOW INDEX</code>.
<LI>

Added comments to tables (with <code>CREATE TABLE ... COMMENT '<var>xxx</var>'</code>).
<LI>

Added <code>UNIQUE</code>, as in
<code>CREATE TABLE <var>tbl_name</var> (col INT NOT NULL UNIQUE)</code>
<LI>

New create syntax: <code>CREATE TABLE <var>tbl_name</var> SELECT ...</code>
<LI>

New create syntax: <code>CREATE TABLE IF NOT EXISTS ...</code>
<LI>

Allow creation of <code>CHAR(0)</code> columns.
<LI>

<code>DATE_FORMAT()</code> now requires <samp>`%'</samp> before any format character.
<LI>

<code>DELAYED</code> is now a reserved word (sorry about that :( ).
<LI>

An example procedure is added: <code>analyse</code>, file: <tt>`sql_analyse.c'</tt>.
This will describe the data in your query.  Try the following:

<PRE>
SELECT ... FROM ...
WHERE ... PROCEDURE ANALYSE([max elements,[max memory]])
</PRE>

This procedure is extremely useful when you want to check the data in your
table!
<LI>

<code>BINARY</code> cast to force a string to be compared in case-sensitive fashion.
<LI>

Added <code>--skip-show-database</code> option to <code>mysqld</code>.
<LI>

Check whether a row has changed in an <code>UPDATE</code> now also works
with <code>BLOB</code>/<code>TEXT</code> columns.
<LI>

Added the <code>INNER</code> join syntax.  <strong>Note</strong>:  This made <code>INNER</code>
a reserved word!
<LI>

Added support for netmasks to the hostname in the MySQL grant tables.
You can specify a netmask using the <code>IP/NETMASK</code> syntax.
<LI>

If you compare a <code>NOT NULL DATE/DATETIME</code> column with <code>IS
NULL</code>, this is changed to a compare against <code>0</code> to satisfy some ODBC
applications.  (By <a HREF="mailto:shreeve@uci.edu">shreeve@uci.edu</a>.)
<LI>

<code>NULL IN (...)</code> now returns <code>NULL</code> instead of <code>0</code>.  This will
ensure that <code>null_column NOT IN (...)</code> doesn't match
<code>NULL</code> values.
<LI>

Fix storage of floating-point values in <code>TIME</code> columns.
<LI>

Changed parsing of <code>TIME</code> strings to be more strict.  Now the
fractional second part is detected (and currently skipped). The
following formats are supported:

<UL>
<LI>[[DAYS] [H]H:]MM:]SS[.fraction]

<LI>[[[[[H]H]H]H]MM]SS[.fraction]

</UL>

<LI>

Detect (and ignore) fractional second part from <code>DATETIME</code>.
<LI>

Added the <code>LOW_PRIORITY</code> attribute to <code>LOAD DATA INFILE</code>.
<LI>

The default index name now uses the same case as the column name on which the
index name is based.
<LI>

Changed default number of connections to 100.
<LI>

Use bigger buffers when using <code>LOAD DATA INFILE</code>.
<LI>

<code>DECIMAL(x,y)</code> now works according to standard SQL.
<LI>

Added aggregate UDF functions. Thanks to Andreas F. Bobak
(<a HREF="mailto:bobak@relog.ch">bobak@relog.ch</a>) for this!
<LI>

<code>LAST_INSERT_ID()</code> is now updated for <code>INSERT INTO ... SELECT</code>.
<LI>

Some small changes to the join table optimizer to make some joins faster.
<LI>

<code>SELECT DISTINCT</code> is much faster; it uses the new <code>UNIQUE</code>
functionality in <code>MyISAM</code>. One difference compared to MySQL 3.22
is that the output of <code>DISTINCT</code> is no longer sorted.
<LI>

All C client API macros are now functions to make shared libraries more
reliable. Because of this, you can no longer call <code>mysql_num_fields()</code> on
a <code>MYSQL</code> object, you must use <code>mysql_field_count()</code> instead.
<LI>

Added use of <code>LIBWRAP</code>; patch by Henning P. Schmiedehausen.
<LI>

Don't allow <code>AUTO_INCREMENT</code> for other than numerical columns.
<LI>

Using <code>AUTO_INCREMENT</code> will now automatically make the column
<code>NOT NULL</code>.
<LI>

Show <code>NULL</code> as the default value for <code>AUTO_INCREMENT</code> columns.
<LI>

Added <code>SQL_BIG_RESULT</code>; <code>SQL_SMALL_RESULT</code> is now default.
<LI>

Added a shared library RPM. This enhancement was contributed by David
Fox (<a HREF="mailto:dsfox@cogsci.ucsd.edu">dsfox@cogsci.ucsd.edu</a>).
<LI>

Added  <code>--enable-large-files</code> and <code>--disable-large-files</code> options
to <code>configure</code>. See <tt>`configure.in'</tt> for some systems where this is
automatically turned off because of broken implementations.
<LI>

Upgraded <code>readline</code> to 4.0.
<LI>

New <code>CREATE TABLE</code> options: <code>PACK_KEYS</code> and <code>CHECKSUM</code>.
<LI>

Added <code>--default-table-type</code> option to <code>mysqld</code>.
</UL>



<H2><A NAME="News-3.22.x" HREF="manual_toc.html#News-3.22.x">D.5  Changes in release 3.22.x (Old; discontinued)</A></H2>

<P>
<A NAME="IDX2386"></A>

</P>
<P>
The 3.22 version has faster and safer connect code than version 3.21, as well
as a lot of new nice enhancements.
As there aren't really any major changes, upgrading from 3.21 to 3.22 should
be very easy and painless.  See section <A HREF="manual_Installing.html#Upgrading-from-3.21">2.10.5  Upgrading from Version 3.21 to 3.22</A>.

</P>



<H3><A NAME="News-3.22.35" HREF="manual_toc.html#News-3.22.35">D.5.1  Changes in release 3.22.35</A></H3>


<UL>
<LI>

Fixed problem with <code>STD()</code>.
<LI>

Merged changes from the newest <code>ISAM</code> library from 3.23.
<LI>

Fixed problem with <code>INSERT DELAYED</code>.
<LI>

Fixed a bug core dump when using a <code>LEFT JOIN</code>/<code>STRAIGHT_JOIN</code>
on a table with only one row.
</UL>



<H3><A NAME="News-3.22.34" HREF="manual_toc.html#News-3.22.34">D.5.2  Changes in release 3.22.34</A></H3>


<UL>
<LI>

Fixed problem with <code>GROUP BY</code> on <code>TINYBLOB</code> columns; this
caused bugzilla to not show rows in some queries.
<LI>

Had to do total recompile of the Windows binary version as VC++ didn't
compile all relevant files for 3.22.33 :(
</UL>



<H3><A NAME="News-3.22.33" HREF="manual_toc.html#News-3.22.33">D.5.3  Changes in release 3.22.33</A></H3>


<UL>
<LI>

Fixed problems in Windows when locking tables with <code>LOCK TABLE</code>.
<LI>

Quicker kill of <code>SELECT DISTINCT</code> queries.
</UL>



<H3><A NAME="News-3.22.32" HREF="manual_toc.html#News-3.22.32">D.5.4  Changes in release 3.22.32 (14 Feb 2000)</A></H3>


<UL>
<LI>

Fixed problem when storing numbers in timestamps.
<LI>

Fix problem with time zones that have half hour offsets.
<LI>

Added <code>mysqlhotcopy</code>, a fast online hot-backup utility for local MySQL
databases. By Tim Bunce.
<LI>

New more secure <code>mysqlaccess</code>. Thanks to Steve Harvey for this.
<LI>

Fixed security problem in the protocol regarding password checking.
<LI>

Fixed problem that affected queries that did arithmetic on <code>GROUP</code> functions.
<LI>

Fixed a bug in the <code>ISAM</code> code when deleting rows on tables with
packed indexes.
</UL>



<H3><A NAME="News-3.22.31" HREF="manual_toc.html#News-3.22.31">D.5.5  Changes in release 3.22.31</A></H3>


<UL>
<LI>

A few small fixes for the Windows version.
</UL>



<H3><A NAME="News-3.22.30" HREF="manual_toc.html#News-3.22.30">D.5.6  Changes in release 3.22.30 (11 Jan 2000)</A></H3>


<UL>
<LI>

Fixed optimizer problem on <code>SELECT</code> when using many overlapping indexes.
<LI>

Disabled floating-point exceptions for FreeBSD to fix core dump when
doing <code>SELECT FLOOR(POW(2,63))</code>.
<LI>

Added print of default arguments options to all clients.
<LI>

Fixed critical problem with the <code>WITH GRANT OPTION</code> option.
<LI>

Fixed non-critical Y2K problem when writing short date to log files.
</UL>



<H3><A NAME="News-3.22.29" HREF="manual_toc.html#News-3.22.29">D.5.7  Changes in release 3.22.29 (02 Jan 2000)</A></H3>


<UL>
<LI>

Upgraded the configure and include files to match the latest 3.23 version.
This should increase portability and make it easier to build shared libraries.
<LI>

Added latest patches to MIT-pthreads for NetBSD.
<LI>

Fixed problem with time zones that are &#60; GMT -11.
<LI>

Fixed a bug when deleting packed keys in NISAM.
<LI>

Fixed problem that could cause MySQL to touch freed memory when
doing very complicated <code>GROUP BY</code> queries.
<LI>

Fixed core dump if you got a crashed table where an <code>ENUM</code> field value
was too big.
<LI>

Added <code>mysqlshutdown.exe</code> and <code>mysqlwatch.exe</code> to the Windows
distribution.
<LI>

Fixed problem when doing <code>ORDER BY</code> on a reference key.
<LI>

Fixed that <code>INSERT DELAYED</code> doesn't update timestamps that are given.
</UL>



<H3><A NAME="News-3.22.28" HREF="manual_toc.html#News-3.22.28">D.5.8  Changes in release 3.22.28 (20 Oct 1999)</A></H3>


<UL>
<LI>

Fixed problem with <code>LEFT JOIN</code> and <code>COUNT()</code> on a column which
was declared <code>NULL</code> + and it had a <code>DEFAULT</code> value.
<LI>

Fixed core dump problem when using <code>CONCAT()</code> in a <code>WHERE</code> clause.
<LI>

Fixed problem with <code>AVG()</code> and <code>STD()</code> with <code>NULL</code> values.
</UL>



<H3><A NAME="News-3.22.27" HREF="manual_toc.html#News-3.22.27">D.5.9  Changes in release 3.22.27 (05 Oct 1999)</A></H3>


<UL>
<LI>

Fixed prototype in <tt>`my_ctype.h'</tt> when using other character sets.
<LI>

Some configure issues to fix problems with big filesystem detection.
<LI>

Fixed problem when sorting on big <code>BLOB</code> columns.
<LI>

<code>ROUND()</code> will now work on Windows.
</UL>



<H3><A NAME="News-3.22.26" HREF="manual_toc.html#News-3.22.26">D.5.10  Changes in release 3.22.26 (16 Sep 1999)</A></H3>


<UL>
<LI>

Fixed core dump with empty <code>BLOB/TEXT</code> column argument to
<code>REVERSE()</code>.
<LI>

Extended <code>/*! */</code> with version numbers.
<LI>

Changed <code>SUBSTRING(text FROM pos)</code> to conform to standard SQL. (Before this
construct returned the rightmost 'pos' characters.)
<LI>

Fixed problem with <code>LOCK TABLES</code> combined with <code>DELETE FROM table</code>
<LI>

Fixed problem that <code>INSERT ... SELECT</code> didn't use <code>BIG_TABLES</code>.
<LI>

<code>SET SQL_LOW_PRIORITY_UPDATES=#</code> didn't work.
<LI>

Password wasn't updated correctly if privileges didn't change on:
<code>GRANT ... IDENTIFIED BY</code>
<LI>

Fixed range optimizer bug in
<code>SELECT * FROM <var>tbl_name</var> WHERE <var>key_part1</var> &#62;= <var>const</var> AND (<var>key_part2</var> = <var>const</var>
OR <var>key_part2</var> = <var>const</var>)</code>.
<LI>

Fixed bug in compression key handling in <code>ISAM</code>.
</UL>



<H3><A NAME="News-3.22.25" HREF="manual_toc.html#News-3.22.25">D.5.11  Changes in release 3.22.25 (07 Jun 1999)</A></H3>


<UL>
<LI>

Fixed some small problems with the installation.
</UL>



<H3><A NAME="News-3.22.24" HREF="manual_toc.html#News-3.22.24">D.5.12  Changes in release 3.22.24 (05 Jul 1999)</A></H3>


<UL>
<LI>

<code>DATA</code> is no longer a reserved word.
<LI>

Fixed optimizer bug with tables with only one row.
<LI>

Fixed bug when using <code>LOCK TABLES <var>tbl_name</var> READ; FLUSH TABLES;</code>
<LI>

Applied some patches for HP-UX.
<LI>

<code>isamchk</code> should now work on Windows.
<LI>

Changed <tt>`configure'</tt> to not use big file handling on Linux as this
crashes some Red Hat 6.0 systems
</UL>



<H3><A NAME="News-3.22.23" HREF="manual_toc.html#News-3.22.23">D.5.13  Changes in release 3.22.23 (08 Jun 1999)</A></H3>


<UL>
<LI>

Upgraded to use Autoconf 2.13, Automake 1.4 and <code>libtool</code> 1.3.2.
<LI>

Better support for SCO in <code>configure</code>.
<LI>

Added option <code>--defaults-file=file_name</code> to option file handling to force
use of only one specific option file.
<LI>

Extended <code>CREATE</code> syntax to ignore MySQL 3.23 keywords.
<LI>

Fixed deadlock problem when using <code>INSERT DELAYED</code> on a table locked with
<code>LOCK TABLES</code>.
<LI>

Fixed deadlock problem when using <code>DROP TABLE</code> on a table that was
locked by another thread.
<LI>

Add logging of <code>GRANT/REVOKE</code> commands in the update log.
<LI>

Fixed <code>isamchk</code> to detect a new error condition.
<LI>

Fixed bug in <code>NATURAL LEFT JOIN</code>.
</UL>



<H3><A NAME="News-3.22.22" HREF="manual_toc.html#News-3.22.22">D.5.14  Changes in release 3.22.22 (30 Apr 1999)</A></H3>


<UL>
<LI>

Fixed problem in the C API when you called <code>mysql_close()</code> directly after
<code>mysql_init()</code>.
<LI>

Better client error message when you can't open socket.
<LI>

Fixed <code>delayed_insert_thread</code> counting when you couldn't create a new
delayed_insert thread.
<LI>

Fixed bug in <code>CONCAT()</code> with many arguments.
<LI>

Added patches for DEC 3.2 and SCO.
<LI>

Fixed path-bug when installing MySQL as a service on NT.
<LI>

MySQL on Windows is now compiled with VC++ 6.0 instead of
with VC++ 5.0.
<LI>

New installation setup for MySQL on Windows.
</UL>



<H3><A NAME="News-3.22.21" HREF="manual_toc.html#News-3.22.21">D.5.15  Changes in release 3.22.21 (04 Apr 1999)</A></H3>


<UL>
<LI>

Fixed problem with <code>DELETE FROM TABLE</code> when table was locked by
another thread.
<LI>

Fixed bug in <code>LEFT JOIN</code> involving empty tables.
<LI>

Changed the <code>mysql.db</code> column from <code>CHAR(32)</code> to <code>CHAR(60)</code>.
<LI>

<code>MODIFY</code> and <code>DELAYED</code> are no longer reserved words.
<LI>

Fixed a bug when storing days in a <code>TIME</code> column.
<LI>

Fixed a problem with <code>Host '...' is not allowed to connect to this MySQL
server</code> after one had inserted a new MySQL user with a <code>GRANT</code>
command.
<LI>

Changed to use <code>TCP_NODELAY</code> also on Linux (should give faster TCP/IP
connections).
</UL>



<H3><A NAME="News-3.22.20" HREF="manual_toc.html#News-3.22.20">D.5.16  Changes in release 3.22.20 (18 Mar 1999)</A></H3>


<UL>
<LI>

Fixed <code>STD()</code> for big tables when result should be 0.
<LI>

The update log didn't have newlines on some operating systems.
<LI>

<code>INSERT DELAYED</code> had some garbage at end in the update log.
</UL>



<H3><A NAME="News-3.22.19" HREF="manual_toc.html#News-3.22.19">D.5.17  Changes in release 3.22.19 (01 Mar 1999)</A></H3>


<UL>
<LI>

Fixed bug in <code>mysql_install_db</code> (from 3.22.17).
<LI>

Changed default key cache size to 8MB.
<LI>

Fixed problem with queries that needed temporary tables with <code>BLOB</code>
columns.
</UL>



<H3><A NAME="News-3.22.18" HREF="manual_toc.html#News-3.22.18">D.5.18  Changes in release 3.22.18 (26 Feb 1999)</A></H3>


<UL>
<LI>

Fixes a fatal problem in 3.22.17 on Linux; after <code>shutdown</code>
not all threads died properly.
<LI>

Added option <code>-O flush_time=#</code> to <code>mysqld</code>.  This is mostly
useful on Windows and tells how often MySQL should close all
unused tables and flush all updated tables to disk.
<LI>

Fixed problem that a <code>VARCHAR</code> column compared with <code>CHAR</code> column
didn't use keys efficiently.
</UL>



<H3><A NAME="News-3.22.17" HREF="manual_toc.html#News-3.22.17">D.5.19  Changes in release 3.22.17 (22 Feb 1999: Production)</A></H3>


<UL>
<LI>

Fixed a core dump problem when using <code>--log-update</code> and connecting
without a default database.
<LI>

Fixed some <code>configure</code> and portability problems.
<LI>

Using <code>LEFT JOIN</code> on tables that had circular dependencies caused
<code>mysqld</code> to hang forever.
</UL>



<H3><A NAME="News-3.22.16" HREF="manual_toc.html#News-3.22.16">D.5.20  Changes in release 3.22.16 (05 Feb 1999)</A></H3>


<UL>
<LI>

<code>mysqladmin processlist</code> could kill the server if a new user logged in.
<LI>

<code>DELETE FROM <var>tbl_name</var> WHERE <var>key_column</var>=<var>col_name</var></code> didn't find any matching
rows.  Fixed.
<LI>

<code>DATE_ADD(column, ...)</code> didn't work.
<LI>

<code>INSERT DELAYED</code> could deadlock with status <code>upgrading lock</code>.
<LI>

Extended <code>ENCRYPT()</code> to take longer salt strings than 2 characters.
<LI>

<code>longlong2str</code> is now much faster than before.  For <code>Intel x86</code>
platforms, this function is written in optimized assembler.
<LI>

Added the <code>MODIFY</code> keyword to <code>ALTER TABLE</code>.
</UL>



<H3><A NAME="News-3.22.15" HREF="manual_toc.html#News-3.22.15">D.5.21  Changes in release 3.22.15 (27 Jan 1999)</A></H3>


<UL>
<LI>

<code>GRANT</code> used with <code>IDENTIFIED BY</code> didn't take effect until privileges
were flushed.
<LI>

Name change of some variables in <code>SHOW STATUS</code>.
<LI>

Fixed problem with <code>ORDER BY</code> with 'only index' optimization when there
were multiple key definitions for a used column.
<LI>

<code>DATE</code> and <code>DATETIME</code> columns are now up to 5 times faster than
before.
<LI>

<code>INSERT DELAYED</code> can be used to let the client do other things while the
server inserts rows into a table.
<LI>

<code>LEFT JOIN USING (col1,col2)</code> didn't work if one used it with tables
from 2 different databases.
<LI>

<code>LOAD DATA LOCAL INFILE</code> didn't work in the Unix version because of
a missing file.
<LI>

Fixed problems with <code>VARCHAR</code>/<code>BLOB</code> on very short rows (&#60; 4 bytes);
error 127 could occur when deleting rows.
<LI>

Updating <code>BLOB/TEXT</code> through formulas didn't work for short (&#60; 256 char)
strings.
<LI>

When you did a <code>GRANT</code> on a new host, <code>mysqld</code> could die on the first
connect from this host.
<LI>

Fixed bug when one used <code>ORDER BY</code> on column name that was the same
name as an alias.
<LI>

Added <code>BENCHMARK(loop_count,expression)</code> function to time expressions.
</UL>



<H3><A NAME="News-3.22.14" HREF="manual_toc.html#News-3.22.14">D.5.22  Changes in release 3.22.14 (01 Jan 1999: Gamma)</A></H3>


<UL>
<LI>

Allow empty arguments to <code>mysqld</code> to make it easier to start from shell
scripts.
<LI>

Setting a <code>TIMESTAMP</code> column to <code>NULL</code> didn't record the timestamp
value in the update log.
<LI>

Fixed lock handler bug when one did
<code>INSERT INTO TABLE ... SELECT ... GROUP BY</code>.
<LI>

Added a patch for <code>localtime_r()</code> on Windows so that it will no lonher crash
if your date is &#62; 2039, but instead will return a time of all zero.
<LI>

Names for
user-defined functions are no longer case-sensitive.
<LI>

Added escape of <code>^Z</code> (ASCII 26) to <code>\Z</code> as <code>^Z</code> doesn't
work with pipes on Windows.
<LI>

<code>mysql_fix_privileges</code> adds a new column to the <code>mysql.func</code> to
support aggregate UDF functions in future MySQL releases.
</UL>



<H3><A NAME="News-3.22.13" HREF="manual_toc.html#News-3.22.13">D.5.23  Changes in release 3.22.13 (16 Dec 1998)</A></H3>


<UL>
<LI>

Saving <code>NOW()</code>, <code>CURDATE()</code> or <code>CURTIME()</code> directly in a
column didn't work.
<LI>

<code>SELECT COUNT(*) ... LEFT JOIN ...</code> didn't work with no <code>WHERE</code> part.
<LI>

Updated <tt>`config.guess'</tt> to allow MySQL to configure on
UnixWare 7.1.x.
<LI>

Changed the implementation of <code>pthread_cond()</code> on the Windows version.
<code>get_lock()</code> now correctly times out on Windows!
</UL>



<H3><A NAME="News-3.22.12" HREF="manual_toc.html#News-3.22.12">D.5.24  Changes in release 3.22.12 (09 Dec 1998)</A></H3>


<UL>
<LI>

Fixed problem when using <code>DATE_ADD()</code> and <code>DATE_SUB()</code> in a
<code>WHERE</code> clause.
<LI>

You can now set the password for a user with the <code>GRANT ... TO user
IDENTIFIED BY 'password'</code> syntax.
<LI>

Fixed bug in <code>GRANT</code> checking with <code>SELECT</code> on many tables.
<LI>

Added missing file <code>mysql_fix_privilege_tables</code> to the RPM
distribution. This is not run by default because it relies on the client
package.
<LI>

Added option <code>SQL_SMALL_RESULT</code> to <code>SELECT</code> to force use of
fast temporary tables when you know that the result set will be small.
<LI>

Allow use of negative real numbers without a decimal point.
<LI>

Day number is now adjusted to maximum days in month if the resulting month
after <code>DATE_ADD</code>/<code>DATE_SUB()</code> doesn't have enough days.
<LI>

Fix that <code>GRANT</code> compares columns in case-insensitive fashion.
<LI>

Fixed a bug in <tt>`sql_list.h'</tt> that made <code>ALTER TABLE</code> dump core in
some contexts.
<LI>

The hostname in <code>user@hostname</code> can now include <samp>`.'</samp> and <samp>`-'</samp>
without quotes in the context of the <code>GRANT</code>, <code>REVOKE</code> and
<code>SET PASSWORD FOR ...</code> statements.
<LI>

Fix for <code>isamchk</code> for tables which need big temporary files.
</UL>



<H3><A NAME="News-3.22.11" HREF="manual_toc.html#News-3.22.11">D.5.25  Changes in release 3.22.11 (24 Nov 1998)</A></H3>


<UL>
<LI>

<strong>Important</strong>: You must run the <code>mysql_fix_privilege_tables</code> script
when you upgrade to this version!  This is needed because of the new
<code>GRANT</code> system. If you don't do this, you will get <code>Access
denied</code> when you try to use <code>ALTER TABLE</code>, <code>CREATE INDEX</code>, or
<code>DROP INDEX</code>.
<LI>

<code>GRANT</code> to allow/deny users table and column access.
<LI>

Changed <code>USER()</code> to return a value in <code>user@host</code> format.
Formerly it returned only <code>user</code>.
<LI>

Changed the syntax for how to set <code>PASSWORD</code> for another user.
<LI>

New command <code>FLUSH STATUS</code> that resets most status variables to zero.
<LI>

New status variables: <code>aborted_threads</code>, <code>aborted_connects</code>.
<LI>

New option variable: <code>connection_timeout</code>.
<LI>

Added support for Thai sorting (by Pruet Boonma
<a HREF="mailto:pruet@ds90.intanon.nectec.or.th">pruet@ds90.intanon.nectec.or.th</a>).
<LI>

Slovak and Japanese error messages.
<LI>

Configuration and portability fixes.
<LI>

Added option <code>SET SQL_WARNINGS=1</code> to get a warning count also for simple
(single-row) inserts.
<LI>

MySQL now uses <code>SIGTERM</code> instead of <code>SIGQUIT</code> with
shutdown to work better on FreeBSD.
<LI>

Added option <code>\G</code> (print vertically) to <code>mysql</code>.
<LI>

<code>SELECT HIGH_PRIORITY ...</code> killed <code>mysqld</code>.
<LI>

<code>IS NULL</code> on a <code>AUTO_INCREMENT</code> column in a <code>LEFT JOIN</code> didn't
work as expected.
<LI>

New function <code>MAKE_SET()</code>.
</UL>



<H3><A NAME="News-3.22.10" HREF="manual_toc.html#News-3.22.10">D.5.26  Changes in release 3.22.10 (04 Nov 1998)</A></H3>


<UL>
<LI>

<code>mysql_install_db</code> no longer starts the MySQL server!  You
should start <code>mysqld</code> with <code>safe_mysqld</code> after installing it!  The
MySQL RPM will, however, start the server as before.
<LI>

Added <code>--bootstrap</code> option to <code>mysqld</code> and recoded
<code>mysql_install_db</code> to use it.  This will make it easier to install
MySQL with RPMs.
<LI>

Changed <code>+</code>, <code>-</code> (sign and minus), <code>*</code>, <code>/</code>, <code>%</code>,
<code>ABS()</code> and <code>MOD()</code> to be <code>BIGINT</code> aware (64-bit safe).
<LI>

Fixed a bug in <code>ALTER TABLE</code> that caused <code>mysqld</code> to crash.
<LI>

MySQL now always reports the conflicting key values when a
duplicate key entry occurs. (Before this was only reported for <code>INSERT</code>.)
<LI>

New syntax: <code>INSERT INTO <var>tbl_name</var> SET <var>col_name</var>=<var>value</var>, <var>col_name</var>=<var>value</var>, ...</code>
<LI>

Most errors in the <tt>`.err'</tt> log are now prefixed with a time stamp.
<LI>

Added option <code>MYSQL_INIT_COMMAND</code> to <code>mysql_options()</code> to make
a query on connect or reconnect.
<LI>

Added option <code>MYSQL_READ_DEFAULT_FILE</code> and
<code>MYSQL_READ_DEFAULT_GROUP</code> to <code>mysql_options()</code> to read the
following parameters from the MySQL option files: <code>port</code>,
<code>socket</code>, <code>compress</code>, <code>password</code>, <code>pipe</code>, <code>timeout</code>,
<code>user</code>, <code>init-command</code>, <code>host</code> and <code>database</code>.
<LI>

Added <code>maybe_null</code> to the UDF structure.
<LI>

Added option <code>IGNORE</code> to <code>INSERT</code> statements with many rows.
<LI>

Fixed some problems with sorting of the <code>koi8</code> character sets; users of
<code>koi8</code> <strong>must</strong> run <code>isamchk -rq</code> on each table that has an
index on a <code>CHAR</code> or <code>VARCHAR</code> column.
<LI>

New script <code>mysql_setpermission</code>, by Luuk de Boer.  It allows easy
creation of new users with permissions for specific databases.
<LI>

Allow use of hexadecimal strings (0x...) when specifying a constant string
(like in the column separators with <code>LOAD DATA INFILE</code>).
<LI>

Ported to OS/2 (thanks to Antony T. Curtis <a HREF="mailto:antony.curtis@olcs.net">antony.curtis@olcs.net</a>).
<LI>

Added more variables to <code>SHOW STATUS</code> and changed format of output to
be like <code>SHOW VARIABLES</code>.
<LI>

Added <code>extended-status</code> command to <code>mysqladmin</code> which will show the
new status variables.
</UL>



<H3><A NAME="News-3.22.9" HREF="manual_toc.html#News-3.22.9">D.5.27  Changes in release 3.22.9 (19 Oct 1998)</A></H3>


<UL>
<LI>

<code>SET SQL_LOG_UPDATE=0</code> caused a lockup of the server.
<LI>

New SQL statement:  <code>FLUSH [ TABLES | HOSTS | LOGS | PRIVILEGES ] [, ...]</code>
<LI>

New SQL statement:  <code>KILL</code> <var>thread_id</var>.
<LI>

Added casts and changed include files to make MySQL easier to
compile on AIX and DEC OSF/1 4.x
<LI>

Fixed conversion problem when using <code>ALTER TABLE</code> from a <code>INT</code>
to a short <code>CHAR()</code> column.
<LI>

Added <code>SELECT HIGH_PRIORITY</code>; this will get a lock for the
<code>SELECT</code> even if there is a thread waiting for another
<code>SELECT</code> to get a <code>WRITE LOCK</code>.
<LI>

Moved <code>wild_compare()</code> to string class to be able to use <code>LIKE</code> on
<code>BLOB</code>/<code>TEXT</code> columns with <code>\0</code>.
<LI>

Added <code>ESCAPE</code> option to <code>LIKE</code>.
<LI>

Added a lot more output to <code>mysqladmin debug</code>.
<LI>

You can now start <code>mysqld</code> on Windows with the <code>--flush</code> option.
This will flush all tables to disk after each update.  This makes things
much safer on the Windows platforms but also <strong>much</strong> slower.
</UL>



<H3><A NAME="News-3.22.8" HREF="manual_toc.html#News-3.22.8">D.5.28  Changes in release 3.22.8 (06 Oct 1998)</A></H3>


<UL>
<LI>

Czech character sets should now work much better.
<LI>

<code>DATE_ADD()</code> and <code>DATE_SUB()</code> didn't work with group functions.
<LI>

<code>mysql</code> will now also try to reconnect on <code>USE database</code> commands.
<LI>

Fix problem with <code>ORDER BY</code> and <code>LEFT JOIN</code> and <code>const</code> tables.
<LI>

Fixed problem with <code>ORDER BY</code> if the first <code>ORDER BY</code> column
was a key and the rest of the <code>ORDER BY</code> columns wasn't part of the key.
<LI>

Fixed a big problem with <code>OPTIMIZE TABLE</code>.
<LI>

MySQL clients on NT will now by default first try to connect with
named pipes and after this with TCP/IP.
<LI>

Fixed a problem with <code>DROP TABLE</code> and <code>mysqladmin shutdown</code> on Windows
(a fatal bug from 3.22.6).
<LI>

Fixed problems with <code>TIME columns</code> and negative strings.
<LI>

Added an extra thread signal loop on shutdown to avoid some error messages
from the client.
<LI>

MySQL now uses the next available number as extension for the update
log file.
<LI>

Added patches for UNIXWARE 7.
</UL>



<H3><A NAME="News-3.22.7" HREF="manual_toc.html#News-3.22.7">D.5.29  Changes in release 3.22.7 (21 Sep 1998: Beta)</A></H3>


<UL>
<LI>

Added <code>LIMIT</code> clause for the <code>DELETE</code> statement.
<LI>

You can now use the <code>/*! ... */</code> syntax to hide MySQL-specific
keywords when you write portable code.  MySQL will parse the code
inside the comments as if the surrounding <code>/*!</code> and <code>*/</code> comment
characters didn't exist.
<LI>

<code>OPTIMIZE TABLE <var>tbl_name</var></code> can now be used to reclaim disk space
after many deletes.  Currently, this uses <code>ALTER TABLE</code> to
regenerate the table, but in the future it will use an integrated
<code>isamchk</code> for more speed.
<LI>

Upgraded <code>libtool</code> to make the configuration process more portable.
<LI>

Fixed slow <code>UPDATE</code> and <code>DELETE</code> operations when using
<code>DATETIME</code> or <code>DATE</code> keys.
<LI>

Changed optimizer to make it better at deciding when to do a full join
and when using keys.
<LI>

You can now use <code>mysqladmin proc</code> to display information about your own
threads. Only users with the <code>PROCESS</code> privilege can get
information about all threads.
(In 4.0.2, you need the <code>SUPER</code> privilege for this.)
<LI>

Added handling of formats <code>YYMMDD</code>, <code>YYYYMMDD</code>,
<code>YYMMDDHHMMSS</code> for numbers when using <code>DATETIME</code> and
<code>TIMESTAMP</code> types. (Formerly these formats only worked with strings.)
<LI>

Added connect option <code>CLIENT_IGNORE_SPACE</code> to allow use of spaces
after function names and before <samp>`('</samp> (Powerbuilder requires this).
This will make all function names reserved words.
<LI>

Added the <code>--log-long-format</code> option to <code>mysqld</code> to enable timestamps
and INSERT_IDs in the update log.
<LI>

Added <code>--where</code> option to <code>mysqldump</code> (patch by Jim Faucette).
<LI>

The lexical analyzer now uses ``perfect hashing'' for faster parsing of SQL
statements.
</UL>



<H3><A NAME="News-3.22.6" HREF="manual_toc.html#News-3.22.6">D.5.30  Changes in release 3.22.6 (31 Aug 1998)</A></H3>


<UL>
<LI>

Faster <code>mysqldump</code>.
<LI>

For the <code>LOAD DATA INFILE</code> statement, you can now use the new <code>LOCAL</code>
keyword to read the file from the client.  <code>mysqlimport</code> will
automatically use <code>LOCAL</code> when importing with the TCP/IP protocol.
<LI>

Fixed small optimize problem when updating keys.
<LI>

Changed makefiles to support shared libraries.
<LI>

MySQL-NT can now use named pipes, which means that you can now use
MySQL-NT without having to install TCP/IP.
</UL>



<H3><A NAME="News-3.22.5" HREF="manual_toc.html#News-3.22.5">D.5.31  Changes in release 3.22.5 (20 Aug 1998: Alpha)</A></H3>


<UL>
<LI>

All table lock handing is changed to avoid some very subtle
deadlocks when using <code>DROP TABLE</code>, <code>ALTER TABLE</code>, <code>DELETE FROM
TABLE</code> and <code>mysqladmin flush-tables</code> under heavy usage.
Changed locking code to get better handling of locks of different types.
<LI>

Updated <code>DBI</code> to 1.00 and <code>DBD</code> to 1.2.0.
<LI>

Added a check that the error message file contains error messages suitable for
the current version of <code>mysqld</code>. (To avoid errors if you accidentally
try to use an old error message file.)
<LI>

All count structures in the client (<code>affected_rows()</code>,
<code>insert_id()</code>, ...) are now of type <code>BIGINT</code> to allow 64-bit values
to be used.
This required a minor change in the MySQL protocol which should affect
only old clients when using tables with <code>AUTO_INCREMENT</code> values &#62; 16MB.
<LI>

The return type of <code>mysql_fetch_lengths()</code> has changed from <code>uint *</code>
to <code>ulong *</code>. This may give a warning for old clients but should work
on most machines.
<LI>

Change <code>mysys</code> and <code>dbug</code> libraries to allocate all thread variables
in one struct.  This makes it easier to make a threaded <tt>`libmysql.dll'</tt>
library.
<LI>

Use the result from <code>gethostname()</code> (instead of <code>uname()</code>) when
constructing <tt>`.pid'</tt> filenames.
<LI>

New better compressed client/server protocol.
<LI>

<code>COUNT()</code>, <code>STD()</code> and <code>AVG()</code> are extended to handle more than
4GB rows.
<LI>

You can now store values in the range <code>-838:59:59</code> &#60;= x &#60;=
<code>838:59:59</code> in a <code>TIME</code> column.
<LI>

<strong>Warning: Incompatible change!!</strong>
If you set a <code>TIME</code> column to too short a value, MySQL now
assumes the value is given as: <code>[[[D ]HH:]MM:]SS</code> instead of
<code>HH[:MM[:SS]]</code>.
<LI>

<code>TIME_TO_SEC()</code> and <code>SEC_TO_TIME()</code> can now handle negative times
and hours up to 32767.
<LI>

Added new option
<code>SET SQL_LOG_UPDATE={0|1}</code> to allow users with
the <code>PROCESS</code> privilege to bypass the update log.
(Modified patch from Sergey A Mukhin <a HREF="mailto:violet@rosnet.net">violet@rosnet.net</a>.)
<LI>

Fixed fatal bug in <code>LPAD()</code>.
<LI>

Initialize line buffer in <tt>`mysql.cc'</tt> to make <code>BLOB</code> reading from
pipes safer.
<LI>

Added <code>-O max_connect_errors=#</code> option to <code>mysqld</code>.
Connect errors are now reset for each correct connection.
<LI>

Increased the default value of <code>max_allowed_packet</code> to <code>1M</code> in
<code>mysqld</code>.
<LI>

Added <code>--low-priority-updates</code> option to <code>mysqld</code>, to give
table-modifying operations (<code>INSERT</code>, <code>REPLACE</code>, <code>UPDATE</code>,
<code>DELETE</code>) lower priority than retrievals.  You can now use
<code>{INSERT | REPLACE | UPDATE | DELETE} LOW_PRIORITY ...</code> You can
also use <code>SET SQL_LOW_PRIORITY_UPDATES={0|1}</code> to change
the priority for one thread.  One side effect is that <code>LOW_PRIORITY</code>
is now a reserved word. :(
<LI>

Add support for <code>INSERT INTO table ... VALUES(...),(...),(...)</code>,
to allow inserting multiple rows with a single statement.
<LI>

<code>INSERT INTO <var>tbl_name</var></code> is now also cached when used with <code>LOCK TABLES</code>.
(Previously only <code>INSERT ... SELECT</code> and <code>LOAD DATA INFILE</code> were
cached.)
<LI>

Allow <code>GROUP BY</code> functions with <code>HAVING</code>:

<PRE>
mysql&#62; SELECT col FROM table GROUP BY col HAVING COUNT(*)&#62;0;
</PRE>

<LI>

<code>mysqld</code> will now ignore trailing <samp>`;'</samp> characters in queries. This
is to make it easier to migrate from some other SQL servers that require the
trailing <samp>`;'</samp>.
<LI>

Fix for corrupted fixed-format output generated by <code>SELECT INTO OUTFILE</code>.
<LI>

<strong>Warning: Incompatible change!</strong>
Added Oracle <code>GREATEST()</code> and <code>LEAST()</code> functions.  You must now use
these instead of the <code>MAX()</code> and <code>MIN()</code> functions to get the
largest/smallest value from a list of values. These can now handle <code>REAL</code>,
<code>BIGINT</code> and string (<code>CHAR</code> or <code>VARCHAR</code>) values.
<LI>

<strong>Warning: Incompatible change!</strong>
<code>DAYOFWEEK()</code> had offset 0 for Sunday. Changed the offset to 1.
<LI>

Give an error for queries that mix <code>GROUP BY</code> columns and fields when
there is no <code>GROUP BY</code> specification.
<LI>

Added <code>--vertical</code> option to <code>mysql</code>, for printing results in
vertical mode.
<LI>

Index-only optimization; some queries are now resolved using
only indexes.  Until MySQL 4.0, this works only for numeric columns.
See section <A HREF="manual_MySQL_Optimization.html#MySQL_indexes">7.4.5  How MySQL Uses Indexes</A>.
<LI>

Lots of new benchmarks.
<LI>

A new C API chapter and lots of other improvements in the manual.
</UL>



<H3><A NAME="News-3.22.4" HREF="manual_toc.html#News-3.22.4">D.5.32  Changes in release 3.22.4 (06 Jul 1998: Beta)</A></H3>


<UL>
<LI>

Added <code>--tmpdir</code> option to <code>mysqld</code>, for specifying the location
of the temporary file directory.
<LI>

MySQL now automatically changes a query from an ODBC client:

<PRE>
SELECT ... FROM table WHERE auto_increment_column IS NULL
</PRE>

to:

<PRE>
SELECT ... FROM table WHERE auto_increment_column == LAST_INSERT_ID()
</PRE>

This allows some ODBC programs (Delphi, Access) to retrieve the newly
inserted row to fetch the <code>AUTO_INCREMENT</code> value.
<LI>

<code>DROP TABLE</code> now waits for all users to free a table before deleting it.
<LI>

Fixed small memory leak in the new connect protocol.
<LI>

New functions <code>BIN()</code>, <code>OCT()</code>, <code>HEX()</code> and <code>CONV()</code> for
converting between different number bases.
<LI>

Added function <code>SUBSTRING()</code> with two arguments.
<LI>

If you created a table with a record length smaller than 5, you couldn't
delete rows from the table.
<LI>

Added optimization to remove <code>const</code> reference tables from <code>ORDER BY</code> and
<code>GROUP BY</code>.
<LI>

<code>mysqld</code> now automatically disables system locking on Linux and Windows,
and for systems that use MIT-pthreads.  You can force the use of locking
with the <code>--enable-external-locking</code> option.
<LI>

Added <code>--console</code> option to <code>mysqld</code>, to force a console window
(for error messages) when using Windows.
<LI>

Fixed table locks for Windows.
<LI>

Allow <samp>`$'</samp> in identifiers.
<LI>

Changed name of user-specific configuration file from <tt>`my.cnf'</tt> to
<tt>`.my.cnf'</tt> (Unix only).
<LI>

Added <code>DATE_ADD()</code> and <code>DATE_SUB()</code> functions.
</UL>



<H3><A NAME="News-3.22.3" HREF="manual_toc.html#News-3.22.3">D.5.33  Changes in release 3.22.3 (30 Jun 1998)</A></H3>


<UL>
<LI>

Fixed a lock problem (bug in MySQL 3.22.1) when closing temporary tables.
<LI>

Added missing <code>mysql_ping()</code> to the client library.
<LI>

Added <code>--compress</code> option to all MySQL clients.
<LI>

Changed <code>byte</code> to <code>char</code> in <tt>`mysql.h'</tt> and <tt>`mysql_com.h'</tt>.
</UL>



<H3><A NAME="News-3.22.2" HREF="manual_toc.html#News-3.22.2">D.5.34  Changes in release 3.22.2</A></H3>


<UL>
<LI>

Searching on multiple constant keys that matched more than 30% of the rows
didn't always use the best possible key.
<LI>

New functions <code>&#60;&#60;</code>, <code>&#62;&#62;</code>, <code>RPAD()</code> and <code>LPAD()</code>.
<LI>

You can now save default options (like passwords) in a configuration file
(<tt>`my.cnf'</tt>).
<LI>

Lots of small changes to get <code>ORDER BY</code> to work when no records are found
when using fields that are not in <code>GROUP BY</code> (MySQL extension).
<LI>

Added <code>--chroot</code> option to <code>mysqld</code>, to start <code>mysqld</code> in
a chroot environment (by Nikki Chumakov <a HREF="mailto:nikkic@cityline.ru">nikkic@cityline.ru</a>).
<LI>

Trailing spaces are now ignored when comparing case-sensitive strings;
this should fix some problems with ODBC and flag 512!
<LI>

Fixed a core dump bug in the range optimizer.
<LI>

Added <code>--one-thread</code> option to <code>mysqld</code>, for debugging with
LinuxThreads (or <code>glibc</code>).  (This replaces the <code>-T32</code> flag)
<LI>

Added <code>DROP TABLE IF EXISTS</code> to prevent an error from occurring if the
table doesn't exist.
<LI>

<code>IF</code> and <code>EXISTS</code> are now reserved words (they would have to
be sooner or later).
<LI>

Added lots of new options to <code>mysqldump</code>.
<LI>

Server error messages are now in <tt>`mysqld_error.h'</tt>.
<LI>

The client/server protocol now supports compression.
<LI>

All bugfixes from MySQL 3.21.32.
</UL>



<H3><A NAME="News-3.22.1" HREF="manual_toc.html#News-3.22.1">D.5.35  Changes in release 3.22.1 (Jun 1998)</A></H3>


<UL>
<LI>

Added new C API function <code>mysql_ping()</code>.
<LI>

Added new API functions <code>mysql_init()</code> and <code>mysql_options()</code>.
You now MUST call <code>mysql_init()</code> before you call
<code>mysql_real_connect()</code>.
You don't have to call <code>mysql_init()</code> if you only use
<code>mysql_connect()</code>.
<LI>

Added <code>mysql_options(...,MYSQL_OPT_CONNECT_TIMEOUT,...)</code> so you can set a
timeout for connecting to a server.
<LI>

Added <code>--timeout</code> option to <code>mysqladmin</code>, as a test of
<code>mysql_options()</code>.
<LI>

Added <code>AFTER column</code> and <code>FIRST</code> options to
<code>ALTER TABLE ... ADD columns</code>.
This makes it possible to add a new column at some specific location
within a row in an existing table.
<LI>

<code>WEEK()</code> now takes an optional argument to allow handling of weeks when
the week starts on Monday (some European countries).  By default,
<code>WEEK()</code> assumes the week starts on Sunday.
<LI>

<code>TIME</code> columns weren't stored properly (bug in MySQL 3.22.0).
<LI>

<code>UPDATE</code> now returns information about how many rows were
matched and updated, and how many ``warnings'' occurred when doing the update.
<LI>

Fixed incorrect result from <code>FORMAT(-100,2)</code>.
<LI>

<code>ENUM</code> and <code>SET</code> columns were compared in binary (case-sensitive)
fashion; changed to be case-insensitive.
</UL>



<H3><A NAME="News-3.22.0" HREF="manual_toc.html#News-3.22.0">D.5.36  Changes in release 3.22.0 (18 May 1998: Alpha)</A></H3>


<UL>
<LI>

New (backward-compatible) connect protocol that allows you to
specify the database to use when connecting, to get much faster
connections to a specific database.

The <code>mysql_real_connect()</code> call is changed to:


<PRE>
mysql_real_connect(MYSQL *mysql, const char *host, const char *user,
                   const char *passwd, const char *db, uint port,
                   const char *unix_socket, uint client_flag)
</PRE>

<LI>

Each connection is handled by its own thread, rather than by the
master <code>accept()</code> thread.  This fixes permanently the telnet bug
that was a topic on the mail list some time ago.
<LI>

All TCP/IP connections are now checked with backward-resolution of
the hostname to get better security. <code>mysqld</code> now has a local hostname
resolver cache so connections should actually be faster than before,
even with this feature.
<LI>

A site automatically will be blocked from future connections if someone
repeatedly connects with an ``improper header'' (like when one uses telnet).
<LI>

You can now refer to tables in different databases with references of the form
<var>tbl_name@db_name</var> or <var>db_name.tbl_name</var>.  This makes it possible to
give a user read access to some tables and write access to others simply by
keeping them in different databases!
<LI>

Added <code>--user</code> option to <code>mysqld</code>, to allow it to run
as another Unix user (if it is started as the Unix <code>root</code> user).
<LI>

Added caching of users and access rights (for faster access rights checking)
<LI>

Normal users (not anonymous ones) can change their password with
<code>mysqladmin password "<var>newpwd</var>"</code>.  This uses encrypted passwords
that are not logged in the normal MySQL log!
<LI>

All important string functions are now coded in assembler for x86 Linux
machines.  This gives a speedup of 10% in many cases.
<LI>

For tables that have many columns, the column names are now hashed for
much faster column name lookup (this will speed up some benchmark
tests a lot!)
<LI>

Some benchmarks are changed to get better individual timing.
(Some loops were so short that a specific test took &#60; 2 seconds. The
loops have been changed to take about 20 seconds to make it easier
to compare different databases. A test that took 1-2 seconds before
now takes 11-24 seconds, which is much better)
<LI>

Re-arranged <code>SELECT</code> code to handle some very specific queries
involving group functions (like <code>COUNT(*)</code>) without a <code>GROUP BY</code> but
with <code>HAVING</code>. The following now works:

<PRE>
mysql&#62; SELECT COUNT(*) as C FROM table HAVING C &#62; 1;
</PRE>

<LI>

Changed the protocol for field functions to be faster and avoid some
calls to <code>malloc()</code>.
<LI>

Added <code>-T32</code> option to <code>mysqld</code>, for running all queries under the
main thread.  This makes it possible to debug <code>mysqld</code> under Linux with
<code>gdb</code>!
<LI>

Added optimization of <code>not_null_column IS NULL</code> (needed for some Access
queries).
<LI>

Allow <code>STRAIGHT_JOIN</code> to be used between two tables to force the optimizer
to join them in a specific order.
<LI>

String functions now return <code>VARCHAR</code> rather than <code>CHAR</code> and
the column type is now <code>VARCHAR</code> for fields saved as <code>VARCHAR</code>.
This should make the MyODBC driver better, but may break some old
MySQL clients that don't handle <code>FIELD_TYPE_VARCHAR</code> the same
way as <code>FIELD_TYPE_CHAR</code>.
<LI>

<code>CREATE INDEX</code> and <code>DROP INDEX</code> are now implemented through
<code>ALTER TABLE</code>.
<code>CREATE TABLE</code> is still the recommended (fast) way to create indexes.
<LI>

Added <code>--set-variable</code> option <code>wait_timeout</code> to <code>mysqld</code>.
<LI>

Added time column to <code>mysqladmin processlist</code> to show how long a query
has taken or how long a thread has slept.
<LI>

Added lots of new variables to <code>show variables</code> and some new to
<code>show status</code>.
<LI>

Added new type <code>YEAR</code>. <code>YEAR</code> is stored in 1 byte with allowable
values of 0, and 1901 to 2155.
<LI>

Added new <code>DATE</code> type that is stored in 3 bytes rather than 4 bytes.
All new tables are created with the new date type if you don't use the
<code>--old-protocol</code> option to <code>mysqld</code>.
<LI>

Fixed bug in record caches; for some queries, you could get
<code>Error from table handler: #</code> on some operating systems.
<LI>

Added <code>--enable-assembler</code> option to <code>configure</code>, for x86 machines
(tested on Linux + <code>gcc</code>).  This will enable assembler functions for the
most important string functions for more speed!
</UL>



<H2><A NAME="News-3.21.x" HREF="manual_toc.html#News-3.21.x">D.6  Changes in release 3.21.x</A></H2>

<P>
<A NAME="IDX2387"></A>

</P>
<P>
MySQL 3.21 is quite old now, and should be avoided if possible.  This
information is kept here for historical purposes only.

</P>



<H3><A NAME="News-3.21.33" HREF="manual_toc.html#News-3.21.33">D.6.1  Changes in release 3.21.33 (08 Jul 1998)</A></H3>


<UL>
<LI>

Fixed problem when sending <code>SIGHUP</code> to <code>mysqld</code>;
<code>mysqld</code> dumped core when starting from boot on some systems.
<LI>

Fixed problem with losing a little memory for some connections.
<LI>

<code>DELETE FROM <var>tbl_name</var></code> without a <code>WHERE</code> condition is now done the
long way when you use <code>LOCK TABLES</code> or if the table is in use, to
avoid race conditions.
<LI>

<code>INSERT INTO TABLE (timestamp_column) VALUES (NULL);</code> didn't set timestamp.
</UL>



<H3><A NAME="News-3.21.32" HREF="manual_toc.html#News-3.21.32">D.6.2  Changes in release 3.21.32 (30 Jun 1998)</A></H3>


<UL>
<LI>

Fixed some possible race conditions when doing many reopen/close on the same
tables under heavy load!  This can happen if you execute <code>mysqladmin
refresh</code> often. This could in some very rare cases corrupt the header of the
index file and cause error 126 or 138.

<LI>

Fixed fatal bug in <code>refresh()</code> when running with the
<code>--skip-external-locking</code> option.  There was a ``very small'' time gap after
a <code>mysqladmin refresh</code> when a table could be corrupted if one
thread updated a table while another thread did <code>mysqladmin
refresh</code> and another thread started a new update ont the same table
before the first thread had finished.  A refresh (or
<code>--flush-tables</code>) will now not return until all used tables are
closed!
<LI>

<code>SELECT DISTINCT</code> with a <code>WHERE</code> clause that didn't match any rows
returned a row in some contexts (bug only in 3.21.31).
<LI>

<code>GROUP BY</code> + <code>ORDER BY</code> returned one empty row when no rows where
found.
<LI>

Fixed a bug in the range optimizer that wrote
<code>Use_count: Wrong count for ...</code> in the error log file.
</UL>



<H3><A NAME="News-3.21.31" HREF="manual_toc.html#News-3.21.31">D.6.3  Changes in release 3.21.31 (10 Jun 1998)</A></H3>


<UL>
<LI>

Fixed a sign extension problem for the <code>TINYINT</code> type on Irix.
<LI>

Fixed problem with <code>LEFT("constant_string",function)</code>.
<LI>

Fixed problem with <code>FIND_IN_SET()</code>.
<LI>

<code>LEFT JOIN</code> dumped core if the second table is used with a constant
<code>WHERE/ON</code> expression that uniquely identifies one record.
<LI>

Fixed problems with <code>DATE_FORMAT()</code> and incorrect dates.
<code>DATE_FORMAT()</code> now ignores <code>'%'</code> to make it possible to extend
it more easily in the future.
</UL>



<H3><A NAME="News-3.21.30" HREF="manual_toc.html#News-3.21.30">D.6.4  Changes in release 3.21.30</A></H3>


<UL>
<LI>

<code>mysql</code> now returns an exit code &#62; 0 if the query returned an error.
<LI>

Saving of command-line history to file in <code>mysql</code> client.
By Tommy Larsen <a HREF="mailto:tommy@mix.hive.no">tommy@mix.hive.no</a>.
<LI>

Fixed problem with empty lines that were ignored in <tt>`mysql.cc'</tt>.
<LI>

Save the pid of the signal handler thread in the pid file instead
of the pid of the main thread.
<LI>

Added patch by <a HREF="mailto:tommy@valley.ne.jp">tommy@valley.ne.jp</a> to support Japanese characters
SJIS and UJIS.
<LI>

Changed <code>safe_mysqld</code> to redirect startup messages to
<code><var>host_name</var>.err</code> instead
of <code><var>host_name</var>.log</code> to reclaim file space on <code>mysqladmin refresh</code>.
<LI>

<code>ENUM</code> always had the first entry as default value.
<LI>

<code>ALTER TABLE</code> wrote two entries to the update log.
<LI>

<code>sql_acc()</code> now closes the <code>mysql</code> grant tables after a reload to
save table space and memory.
<LI>

Changed <code>LOAD DATA</code> to use less memory with tables and <code>BLOB</code>
columns.
<LI>

Sorting on a function which made a division / 0 produced a wrong set
in some cases.
<LI>

Fixed <code>SELECT</code> problem with <code>LEFT()</code> when using the <code>czech</code>
character set.
<LI>

Fixed problem in <code>isamchk</code>; it couldn't repair a packed table in a very
unusual case.
<LI>

<code>SELECT</code> statements with <code>&#38;</code> or <code>|</code> (bit functions) failed on
columns with <code>NULL</code> values.
<LI>

When comparing a field = field, where one of the fields was a part key,
only the length of the part key was compared.
</UL>



<H3><A NAME="News-3.21.29" HREF="manual_toc.html#News-3.21.29">D.6.5  Changes in release 3.21.29</A></H3>


<UL>
<LI>

<code>LOCK TABLES</code> + <code>DELETE from <var>tbl_name</var></code> never removed locks properly.
<LI>

Fixed problem when grouping on an <code>OR</code> function.
<LI>

Fixed permission problem with <code>umask()</code> and creating new databases.
<LI>

Fixed permission problem on result file with <code>SELECT ... INTO OUTFILE ...</code>
<LI>

Fixed problem in range optimizer (core dump) for a very complex query.
<LI>

Fixed problem when using <code>MIN(integer)</code> or <code>MAX(integer)</code> in
<code>GROUP BY</code>.
<LI>

Fixed bug on Alpha when using integer keys. (Other keys worked on Alpha.)
<LI>

Fixed bug in <code>WEEK("XXXX-xx-01")</code>.
</UL>



<H3><A NAME="News-3.21.28" HREF="manual_toc.html#News-3.21.28">D.6.6  Changes in release 3.21.28</A></H3>


<UL>
<LI>

Fixed socket permission (clients couldn't connect to Unix socket on Linux).
<LI>

Fixed bug in record caches; for some queries, you could get
<code>Error from table handler: #</code> on some operating systems.
</UL>



<H3><A NAME="News-3.21.27" HREF="manual_toc.html#News-3.21.27">D.6.7  Changes in release 3.21.27</A></H3>


<UL>
<LI>

Added user level lock functions <code>GET_LOCK(string,timeout)</code>,
<code>RELEASE_LOCK(string)</code>.
<LI>

Added <code>Opened_tables</code> to <code>show status</code>.
<LI>

Changed connect timeout to 3 seconds to make it somewhat harder
for crackers to kill <code>mysqld</code> through telnet + TCP/IP.
<LI>

Fixed bug in range optimizer when using
<code>WHERE <var>key_part_1</var> &#62;= <var>something</var> AND <var>key_part_2</var> &#60;= <var>something_else</var></code>.
<LI>

Changed <code>configure</code> for detection of FreeBSD 3.0 9803xx and above
<LI>

<code>WHERE</code> with <code><var>string_col_key</var> = <var>constant_string</var></code> didn't always
find all rows if the column had many values differing only with
characters of the same sort value (like e and e with an accent).
<LI>

Strings keys looked up with 'ref' were not compared in case-sensitive fashion.
<LI>

Added <code>umask()</code> to make log files non-readable for normal users.
<LI>

Ignore users with old (8-byte) password on startup if not using
<code>--old-protocol</code> option to <code>mysqld</code>.
<LI>

<code>SELECT</code> which matched all key fields returned the values in the
case of the matched values, not of the found values. (Minor problem.)
</UL>



<H3><A NAME="News-3.21.26" HREF="manual_toc.html#News-3.21.26">D.6.8  Changes in release 3.21.26</A></H3>


<UL>
<LI>

<code>FROM_DAYS(0)</code> now returns "0000-00-00".
<LI>

In <code>DATE_FORMAT()</code>, PM and AM were swapped for hours 00 and 12.
<LI>

Extended the default maximum key size to 256.
<LI>

Fixed bug when using <code>BLOB</code>/<code>TEXT</code> in <code>GROUP BY</code> with many
tables.
<LI>

An <code>ENUM</code> field that is not declared <code>NOT NULL</code> has <code>NULL</code> as
the default value.
(Previously, the default value was the first enumeration value.)
<LI>

Fixed bug in the join optimizer code when using many part keys
on the same key:  <code>INDEX (Organization,Surname(35),Initials(35))</code>.
<LI>

Added some tests to the table order optimizer to get some cases with
<code>SELECT ... FROM many_tables</code> much faster.
<LI>

Added a retry loop around <code>accept()</code> to possibly fix some problems on some
Linux machines.
</UL>



<H3><A NAME="News-3.21.25" HREF="manual_toc.html#News-3.21.25">D.6.9  Changes in release 3.21.25</A></H3>


<UL>
<LI>

Changed <code>typedef 'string'</code> to <code>typedef 'my_string'</code> for better
portability.
<LI>

You can now kill threads that are waiting on a disk-full condition.
<LI>

Fixed some problems with UDF functions.
<LI>

Added long options to <code>isamchk</code>. Try <code>isamchk --help</code>.
<LI>

Fixed a bug when using 8 bytes long (alpha); <code>filesort()</code> didn't work.
Affects <code>DISTINCT</code>, <code>ORDER BY</code> and <code>GROUP BY</code> on 64-bit
processors.
</UL>



<H3><A NAME="News-3.21.24" HREF="manual_toc.html#News-3.21.24">D.6.10  Changes in release 3.21.24</A></H3>


<UL>
<LI>

Dynamic loadable functions. Based on source from Alexis Mikhailov.
<LI>

You couldn't delete from a table if no one had done a <code>SELECT</code> on the
table.
<LI>

Fixed problem with range optimizer with many <code>OR</code> operators on key parts
inside each other.
<LI>

Recoded <code>MIN()</code> and <code>MAX()</code> to work properly with strings and
<code>HAVING</code>.
<LI>

Changed default umask value for new files from <code>0664</code> to <code>0660</code>.
<LI>

Fixed problem with <code>LEFT JOIN</code> and constant expressions in the <code>ON</code>
part.
<LI>

Added Italian error messages from <a HREF="mailto:brenno@dewinter.com">brenno@dewinter.com</a>.
<LI>

<code>configure</code> now works better on OSF/1 (tested on 4.0D).
<LI>

Added hooks to allow <code>LIKE</code> optimization with international character
support.
<LI>

Upgraded <code>DBI</code> to 0.93.
</UL>



<H3><A NAME="News-3.21.23" HREF="manual_toc.html#News-3.21.23">D.6.11  Changes in release 3.21.23</A></H3>


<UL>
<LI>

The following symbols are now reserved words:
<code>TIME</code>, <code>DATE</code>, <code>TIMESTAMP</code>, <code>TEXT</code>, <code>BIT</code>,
<code>ENUM</code>, <code>NO</code>, <code>ACTION</code>, <code>CHECK</code>, <code>YEAR</code>,
<code>MONTH</code>, <code>DAY</code>, <code>HOUR</code>, <code>MINUTE</code>, <code>SECOND</code>,
<code>STATUS</code>, <code>VARIABLES</code>.
<LI>

Setting a <code>TIMESTAMP</code> to <code>NULL</code> in <code>LOAD DATA INFILE ...</code> didn't
set the current time for the <code>TIMESTAMP</code>.
<LI>

Fix <code>BETWEEN</code> to recognize binary strings. Now <code>BETWEEN</code> is
case-sensitive.
<LI>

Added <code>--skip-thread-priority</code> option to <code>mysqld</code>, for systems
where <code>mysqld</code> thread scheduling doesn't work properly (BSDI 3.1).
<LI>

Added ODBC functions <code>DAYNAME()</code> and <code>MONTHNAME()</code>.
<LI>

Added function <code>TIME_FORMAT()</code>.  This works like <code>DATE_FORMAT()</code>,
but takes a time string (<code>'HH:MM:SS'</code>) as argument.
<LI>

Fixed unlikely(?) key optimizer bug when using <code>OR</code> operators of key parts
inside <code>AND</code> expressions.
<LI>

Added <code>variables</code> command to <code>mysqladmin</code>.
<LI>

A lot of small changes to the binary releases.
<LI>

Fixed a bug in the new protocol from MySQL 3.21.20.
<LI>

Changed <code>ALTER TABLE</code> to work with Windows (Windows can't rename
open files).  Also fixed a couple of small bugs in the Windows version.
<LI>

All standard MySQL clients are now ported to MySQL for Windows.
<LI>

MySQL can now be started as a service on NT.
</UL>



<H3><A NAME="News-3.21.22" HREF="manual_toc.html#News-3.21.22">D.6.12  Changes in release 3.21.22</A></H3>


<UL>
<LI>

Starting with this version, all MySQL distributions will be
configured, compiled and tested with <code>crash-me</code> and the benchmarks on
the following platforms: SunOS 5.6 sun4u, SunOS 5.5.1 sun4u, SunOS 4.14 sun4c,
SunOS 5.6 i86pc, Irix 6.3 mips5k, HP-UX 10.20 hppa, AIX 4.2.1 ppc,
OSF/1 V4.0 alpha, FreeBSD 2.2.2 i86pc and BSDI 3.1 i386.
<LI>

Fix <code>COUNT(*)</code> problems when the <code>WHERE</code> clause didn't match any
records.  (Bug from 3.21.17.)
<LI>

Removed that <code>NULL = NULL</code> is true.  Now you must use <code>IS NULL</code>
or <code>IS NOT NULL</code> to test whether a value is <code>NULL</code>.
(This is according to standard SQL but may break
old applications that are ported from <code>mSQL</code>.)
You can get the old behavior by compiling with <code>-DmSQL_COMPLIANT</code>.
<LI>

Fixed bug that caused core-dump when using many <code>LEFT OUTER JOIN</code> clauses.
<LI>

Fixed bug in <code>ORDER BY</code> on string formula with possible <code>NULL</code> values.
<LI>

Fixed problem in range optimizer when using <code>&#60;=</code> on sub index.
<LI>

Added functions <code>DAYOFYEAR()</code>, <code>DAYOFMONTH()</code>, <code>MONTH()</code>,
<code>YEAR()</code>, <code>WEEK()</code>, <code>QUARTER()</code>, <code>HOUR()</code>, <code>MINUTE()</code>,
<code>SECOND()</code> and <code>FIND_IN_SET()</code>.
<LI>

Added <code>SHOW VARIABLES</code> command.
<LI>

Added support of ``long constant strings'' from standard SQL:

<PRE>
mysql&#62; SELECT 'first ' 'second';       -&#62; 'first second'
</PRE>

<LI>

Upgraded Msql-Mysql-modules to 1.1825.
<LI>

Upgraded <code>mysqlaccess</code> to 2.02.
<LI>

Fixed problem with Russian character set and <code>LIKE</code>.
<LI>

Ported to OpenBSD 2.1.
<LI>

New Dutch error messages.
</UL>



<H3><A NAME="News-3.21.21a" HREF="manual_toc.html#News-3.21.21a">D.6.13  Changes in release 3.21.21a</A></H3>


<UL>
<LI>

Configure changes for some operating systems.
</UL>



<H3><A NAME="News-3.21.21" HREF="manual_toc.html#News-3.21.21">D.6.14  Changes in release 3.21.21</A></H3>


<UL>
<LI>

Fixed optimizer bug when using
<code>WHERE data_field = date_field2 AND date_field2 = constant</code>.
<LI>

Added <code>SHOW STATUS</code> command.
<LI>

Removed <tt>`manual.ps'</tt> from the source distribution to make it smaller.
</UL>



<H3><A NAME="News-3.21.20" HREF="manual_toc.html#News-3.21.20">D.6.15  Changes in release 3.21.20</A></H3>


<UL>
<LI>

Changed the maximum table name and column name lengths from 32 to 64.
<LI>

Aliases can now be of ``any'' length.
<LI>

Fixed <code>mysqladmin stat</code> to return the right number of queries.
<LI>

Changed protocol (downward compatible) to mark if a column has the
<code>AUTO_INCREMENT</code> attribute or is a <code>TIMESTAMP</code>. This is needed for
the new Java driver.
<LI>

Added Hebrew sorting order by Zeev Suraski.
<LI>

Solaris 2.6: Fixed <code>configure</code> bugs and increased maximum table size
from 2GB to 4GB.
</UL>



<H3><A NAME="News-3.21.19" HREF="manual_toc.html#News-3.21.19">D.6.16  Changes in release 3.21.19</A></H3>


<UL>
<LI>

Upgraded <code>DBD</code> to 1.1823. This version implements <code>mysql_use_result</code>
in <code>DBD-Mysql</code>.
<LI>

Benchmarks updated for empress (by Luuk).
<LI>

Fixed a case of slow range searching.
<LI>

Configure fixes (<tt>`Docs'</tt> directory).
<LI>

Added function <code>REVERSE()</code> (by Zeev Suraski).
</UL>



<H3><A NAME="News-3.21.18" HREF="manual_toc.html#News-3.21.18">D.6.17  Changes in release 3.21.18</A></H3>


<UL>
<LI>

Issue error message if client C functions are called in wrong order.
<LI>

Added automatic reconnect to the <tt>`libmysql.c'</tt> library. If a write command
fails, an automatic reconnect is done.
<LI>

Small sort sets no longer use temporary files.
<LI>

Upgraded <code>DBI</code> to 0.91.
<LI>

Fixed a couple of problems with <code>LEFT OUTER JOIN</code>.
<LI>

Added <code>CROSS JOIN</code> syntax. <code>CROSS</code> is now a reserved word.
<LI>

Recoded <code>yacc</code>/<code>bison</code> stack allocation to be even safer and to allow
MySQL to handle even bigger expressions.
<LI>

Fixed a couple of problems with the update log.
<LI>

<code>ORDER BY</code> was slow when used with key ranges.
</UL>



<H3><A NAME="News-3.21.17" HREF="manual_toc.html#News-3.21.17">D.6.18  Changes in release 3.21.17</A></H3>


<UL>
<LI>

Changed documentation string of <code>--with-unix-socket-path</code> to avoid
confusion.
<LI>

Added ODBC and standard SQL style <code>LEFT OUTER JOIN</code>.
<LI>

The following are new reserved words: <code>LEFT</code>, <code>NATURAL</code>,
<code>USING</code>.
<LI>

The client library now uses the value of the environment variable
<code>MYSQL_HOST</code> as the default host if it's defined.
<LI>

<code>SELECT <var>col_name</var>, SUM(<var>expr</var>)</code> now returns <code>NULL</code> for <var>col_name</var>
when there are matching rows.
<LI>

Fixed problem with comparing binary strings and <code>BLOB</code> values with ASCII
characters over 127.
<LI>

Fixed lock problem: when freeing a read lock on a table with multiple
read locks, a thread waiting for a write lock would have been given the lock.
This shouldn't affect data integrity, but could possibly make <code>mysqld</code>
restart if one thread was reading data that another thread modified.
<LI>

<code>LIMIT offset,count</code> didn't work in <code>INSERT ... SELECT</code>.
<LI>

Optimized key block caching. This will be quicker than the old algorithm when
using bigger key caches.
</UL>



<H3><A NAME="News-3.21.16" HREF="manual_toc.html#News-3.21.16">D.6.19  Changes in release 3.21.16</A></H3>


<UL>
<LI>

Added ODBC 2.0 &#38; 3.0 functions <code>POWER()</code>, <code>SPACE()</code>,
<code>COT()</code>, <code>DEGREES()</code>, <code>RADIANS()</code>, <code>ROUND(2 arg)</code>
and <code>TRUNCATE()</code>.
<LI>

<strong>Warning: Incompatible change!</strong> <code>LOCATE()</code> parameters were
swapped according to ODBC standard. Fixed.
<LI>

Added function <code>TIME_TO_SEC()</code>.
<LI>

In some cases, default values were not used for <code>NOT NULL</code> fields.
<LI>

Timestamp wasn't always updated properly in <code>UPDATE SET ...</code> statements.
<LI>

Allow empty strings as default values for <code>BLOB</code> and <code>TEXT</code>, to
be compatible with <code>mysqldump</code>.
</UL>



<H3><A NAME="News-3.21.15" HREF="manual_toc.html#News-3.21.15">D.6.20  Changes in release 3.21.15</A></H3>


<UL>
<LI>

<strong>Warning: Incompatible change!</strong> <code>mysqlperl</code> is now from
Msql-Mysql-modules. This means that <code>connect()</code> now takes
<code>host</code>, <code>database</code>, <code>user</code>, <code>password</code> arguments! The old
version took <code>host</code>, <code>database</code>, <code>password</code>, <code>user</code>.
<LI>

Allow <code>DATE '1997-01-01'</code>, <code>TIME '12:10:10'</code> and
<code>TIMESTAMP '1997-01-01 12:10:10'</code> formats required by standard SQL.
<strong>Warning: Incompatible change!</strong> This has the unfortunate
side effect that you no longer can have columns named <code>DATE</code>, <code>TIME</code>
or <code>TIMESTAMP</code>. :( Old columns can still be accessed through
<var>tbl_name.col_name</var>!)
<LI>

Changed Makefiles to hopefully work better with BSD systems. Also,
<tt>`manual.dvi'</tt> is now included in the distribution to avoid having stupid
<code>make</code> programs trying to rebuild it.
<LI>

<code>readline</code> library upgraded to version 2.1.
<LI>

A new sortorder german-1. That is a normal ISO-Latin1 with a german sort
order.
<LI>

Perl <code>DBI</code>/<code>DBD</code> is now included in the distribution. <code>DBI</code>
is now the recommended way to connect to MySQL from Perl.
<LI>

New portable benchmark suite with <code>DBD</code>, with test results from
<code>mSQL</code> 2.0.3, MySQL, PostgreSQL 6.2.1 and Solid server 2.2.
<LI>

<code>crash-me</code> is now included with the benchmarks; this is a Perl program
designed to find as many limits as possible in an SQL server. Tested with
<code>mSQL</code>, PostgreSQL, Solid and MySQL.
<LI>

Fixed bug in range-optimizer that crashed MySQL on some queries.
<LI>

Table and column name completion for <code>mysql</code> command-line tool, by Zeev
Suraski and Andi Gutmans.
<LI>

Added new command <code>REPLACE</code> that works like <code>INSERT</code> but
replaces conflicting records with the new record. <code>REPLACE INTO
TABLE ... SELECT ...</code> works also.
<LI>

Added new commands <code>CREATE DATABASE <var>db_name</var></code> and <code>DROP
DATABASE <var>db_name</var></code>.
<LI>

Added <code>RENAME</code> option to <code>ALTER TABLE</code>: <code>ALTER TABLE name
RENAME TO new_name</code>.
<LI>

<code>make_binary_distribution</code> now includes <tt>`libgcc.a'</tt> in
<tt>`libmysqlclient.a'</tt>. This should make linking work for people who don't
have <code>gcc</code>.
<LI>

Changed <code>net_write()</code> to <code>my_net_write()</code> because of a name
conflict with Sybase.
<LI>

<A NAME="IDX2388"></A>
<A NAME="IDX2389"></A>
New function <code>DAYOFWEEK()</code> compatible with ODBC.
<LI>

Stack checking and <code>bison</code> memory overrun checking to make MySQL
safer with weird queries.
</UL>



<H3><A NAME="News-3.21.14b" HREF="manual_toc.html#News-3.21.14b">D.6.21  Changes in release 3.21.14b</A></H3>


<UL>
<LI>

Fixed a couple of small <code>configure</code> problems on some platforms.
</UL>



<H3><A NAME="News-3.21.14a" HREF="manual_toc.html#News-3.21.14a">D.6.22  Changes in release 3.21.14a</A></H3>


<UL>
<LI>

Ported to SCO Openserver 5.0.4  with FSU Pthreads.
<LI>

HP-UX 10.20 should work.
<LI>

Added new function <code>DATE_FORMAT()</code>.
<LI>

Added <code>NOT IN</code>.
<LI>

Added automatic removal of 'ODBC function conversions': <code>{fn now() }</code>
<LI>

Handle ODBC 2.50.3 option flags.
<LI>

Fixed comparison of <code>DATE</code> and <code>TIME</code> values with <code>NULL</code>.
<LI>

Changed language name from germany to german to be consistent with
the other language names.
<LI>

Fixed sorting problem on functions returning a <code>FLOAT</code>. Previously, the
values were converted to <code>INT</code> values before sorting.
<LI>

Fixed slow sorting when sorting on key field when using
<code><var>key_col</var>=<var>constant</var></code>.
<LI>

Sorting on calculated <code>DOUBLE</code> values sorted on integer results instead.
<LI>

<code>mysql</code> no longer requires a database argument.
<LI>

Changed the place where <code>HAVING</code> should be. According to the SQL standards, it should
be after <code>GROUP BY</code> but before <code>ORDER BY</code>. MySQL 3.20
incorrectly had it last.
<LI>

Added Sybase command <code>USE database</code> to start using another database.
<LI>

Added automatic adjusting of number of connections and table cache size
if the maximum number of files that can be opened is less than needed.
This should fix that <code>mysqld</code> doesn't crash even if you haven't done a
<code>ulimit -n 256</code> before starting <code>mysqld</code>.
<LI>

Added lots of limit checks to make it safer when running with too little
memory or when doing weird queries.
</UL>



<H3><A NAME="News-3.21.13" HREF="manual_toc.html#News-3.21.13">D.6.23  Changes in release 3.21.13</A></H3>


<UL>
<LI>

Added retry of interrupted reads and clearing of <code>errno</code>.
This makes Linux systems much safer!
<LI>

Fixed locking bug when using many aliases on the same table in the same
<code>SELECT</code>.
<LI>

Fixed bug with <code>LIKE</code> on number key.
<LI>

New error message so you can check whether the connection was lost while
the command was running or whether the connection was down from the start.
<LI>

Added <code>--table</code> option to <code>mysql</code> to print in table format.
Moved time and row information after query result.
Added automatic reconnect of lost connections.
<LI>

Added <code>!=</code> as a synonym for <code>&#60;&#62;</code>.
<LI>

Added function <code>VERSION()</code> to make easier logs.
<LI>

New multi-user test <tt>`tests/fork_test.pl'</tt> to put some strain on the
thread library.
</UL>



<H3><A NAME="News-3.21.12" HREF="manual_toc.html#News-3.21.12">D.6.24  Changes in release 3.21.12</A></H3>


<UL>
<LI>

Fixed <code>ftruncate()</code> call in MIT-pthreads. This made <code>isamchk</code>
destroy the <tt>`.ISM'</tt> files on (Free)BSD 2.x systems.
<LI>

Fixed broken <code>__P_</code> patch in MIT-pthreads.
<LI>

Many memory overrun checks. All string functions now return <code>NULL</code>
if the returned string should be longer than <code>max_allowed_packet</code> bytes.
<LI>

Changed the name of the <code>INTERVAL</code> type to <code>ENUM</code>, because
<code>INTERVAL</code> is used in standard SQL.
<LI>

In some cases, doing a <code>JOIN</code> + <code>GROUP</code> + <code>INTO OUTFILE</code>,
the result wasn't grouped.
<LI>

<code>LIKE</code> with <code>'_'</code> as last character didn't work. Fixed.
<LI>

Added extended standard SQL <code>TRIM()</code> function.
<LI>

Added <code>CURTIME()</code>.
<LI>

Added <code>ENCRYPT()</code> function by Zeev Suraski.
<LI>

Fixed better <code>FOREIGN KEY</code> syntax skipping. New reserved words:
<code>MATCH</code>, <code>FULL</code>, <code>PARTIAL</code>.
<LI>

<code>mysqld</code> now allows IP number and hostname for the <code>--bind-address</code>
option.
<LI>

Added <code>SET CHARACTER SET cp1251_koi8</code> to enable conversions of
data to and from the <code>cp1251_koi8</code> character set.
<LI>

Lots of changes for Windows 95 port. In theory, this version should now be
easily portable to Windows 95.
<LI>

Changed the <code>CREATE COLUMN</code> syntax of <code>NOT NULL</code> columns to be after
the <code>DEFAULT</code> value, as specified in the standard SQL standard. This will
make <code>mysqldump</code> with <code>NOT NULL</code> and default values incompatible with
MySQL 3.20.
<LI>

Added many function name aliases so the functions can be used with
ODBC or standard SQL syntax.
<LI>

Fixed syntax of <code>ALTER TABLE <var>tbl_name</var> ALTER COLUMN <var>col_name</var> SET DEFAULT
NULL</code>.
<LI>

Added <code>CHAR</code> and <code>BIT</code> as synonyms for <code>CHAR(1)</code>.
<LI>

Fixed core dump when updating as a user who has only <code>SELECT</code> privilege.
<LI>

<code>INSERT ... SELECT ... GROUP BY</code> didn't work in some cases. An
<code>Invalid use of group function</code> error occurred.
<LI>

When using <code>LIMIT</code>, <code>SELECT</code> now always uses keys instead of record
scan.  This will give better performance on <code>SELECT</code> and a <code>WHERE</code>
that matches many rows.
<LI>

Added Russian error messages.
</UL>



<H3><A NAME="News-3.21.11" HREF="manual_toc.html#News-3.21.11">D.6.25  Changes in release 3.21.11</A></H3>


<UL>
<LI>

Configure changes.
<LI>

MySQL now works with the new thread library on BSD/OS 3.0.
<LI>

Added new group functions <code>BIT_OR()</code> and <code>BIT_AND()</code>.
<LI>

Added compatibility functions <code>CHECK</code> and <code>REFERENCES</code>.
<code>CHECK</code> is now a reserved word.
<LI>

Added <code>ALL</code> option to <code>GRANT</code> for better compatibility. (<code>GRANT</code>
is still a dummy function.)
<LI>

Added partly translated Dutch error messages.
<LI>

Fixed bug in <code>ORDER BY</code> and <code>GROUP BY</code> with <code>NULL</code> columns.
<LI>

Added function <code>LAST_INSERT_ID()</code> SQL function to retrieve last
<code>AUTO_INCREMENT</code>
value.  This is intended for clients to ODBC that can't use the
<code>mysql_insert_id()</code> API function, but can be used by any client.
<LI>

Added <code>--flush-logs</code> option to <code>mysqladmin</code>.
<LI>

Added command <code>STATUS</code> to <code>mysql</code>.
<LI>

Fixed problem with <code>ORDER BY</code>/<code>GROUP BY</code> because of bug in <code>gcc</code>.
<LI>

Fixed problem with <code>INSERT ... SELECT ... GROUP BY</code>.
</UL>



<H3><A NAME="News-3.21.10" HREF="manual_toc.html#News-3.21.10">D.6.26  Changes in release 3.21.10</A></H3>


<UL>
<LI>

New program <code>mysqlaccess</code>.
<LI>

<code>CREATE</code> now supports all ODBC types and the <code>mSQL</code> <code>TEXT</code> type.
All ODBC 2.5 functions are also supported (added <code>REPEAT</code>). This provides
better portability.
<LI>

Added text types <code>TINYTEXT</code>, <code>TEXT</code>, <code>MEDIUMTEXT</code> and
<code>LONGTEXT</code>.  These are actually <code>BLOB</code> types, but all searching is
done in case-insensitive fashion.
<LI>

All old <code>BLOB</code> fields are now <code>TEXT</code> fields.  This only
changes that all searching on strings is done in case-sensitive fashion.
You must do an <code>ALTER TABLE</code> and change the data type to <code>BLOB</code>
if you want to have tests done in case-sensitive fashion.
<LI>

Fixed some <code>configure</code> issues.
<LI>

Made the locking code a bit safer. Fixed very unlikely
deadlock situation.
<LI>

Fixed a couple of bugs in the range optimizer. Now the new range benchmark
<code>test-select</code> works.
</UL>



<H3><A NAME="News-3.21.9" HREF="manual_toc.html#News-3.21.9">D.6.27  Changes in release 3.21.9</A></H3>


<UL>
<LI>

Added <code>--enable-unix-socket=<var>pathname</var></code> option to <code>configure</code>.
<LI>

Fixed a couple of portability problems with include files.
<LI>

Fixed bug in range calculation that could return empty
set when searching on multiple key with only one entry (very rare).
<LI>

Most things ported to FSU Pthreads, which should allow MySQL to
run on SCO. See section <A HREF="manual_Installing.html#SCO">2.12.5.8  SCO Notes</A>.
</UL>



<H3><A NAME="News-3.21.8" HREF="manual_toc.html#News-3.21.8">D.6.28  Changes in release 3.21.8</A></H3>


<UL>
<LI>

Works now in Solaris 2.6.
<LI>

Added handling of calculation of <code>SUM()</code> functions.
For example, you can now use <code>SUM(column)/COUNT(column)</code>.
<LI>

Added handling of trigometric functions:
<code>PI()</code>, <code>ACOS()</code>, <code>ASIN()</code>, <code>ATAN()</code>, <code>COS()</code>,
<code>SIN()</code> and <code>TAN()</code>.
<LI>

New languages: Norwegian, Norwegian-ny and Portuguese.
<LI>

Fixed parameter bug in <code>net_print()</code> in <tt>`procedure.cc'</tt>.
<LI>

Fixed a couple of memory leaks.
<LI>

Now allow also the old <code>SELECT ... INTO OUTFILE</code> syntax.
<LI>

Fixed bug with <code>GROUP BY</code> and <code>SELECT</code> on key with many values.
<LI>

<code>mysql_fetch_lengths()</code> sometimes returned incorrect lengths when you used
<code>mysql_use_result()</code>. This affected at least some cases of
<code>mysqldump --quick</code>.
<LI>

Fixed bug in optimization of <code>WHERE const op field</code>.
<LI>

Fixed problem when sorting on <code>NULL</code> fields.
<LI>

Fixed a couple of 64-bit (Alpha) problems.
<LI>

Added <code>--pid-file=#</code> option to <code>mysqld</code>.
<LI>

Added date formatting to <code>FROM_UNIXTIME()</code>, originally by Zeev Suraski.
<LI>

Fixed bug in <code>BETWEEN</code> in range optimizer (did only test = of the first
argument).
<LI>

Added machine-dependent files for MIT-pthreads i386-SCO. There is probably
more to do to get this to work on SCO 3.5.
</UL>



<H3><A NAME="News-3.21.7" HREF="manual_toc.html#News-3.21.7">D.6.29  Changes in release 3.21.7</A></H3>


<UL>
<LI>

Changed <tt>`Makefile.am'</tt> to take advantage of Automake 1.2.
<LI>

Added the beginnings of a benchmark suite.
<LI>

Added more secure password handling.
<LI>

Added new client function <code>mysql_errno()</code>, to get the error number of
the error message. This makes error checking in the client much easier.
This makes the new server incompatible with the 3.20.x server when running
without <code>--old-protocol</code>.  The client code is backward-compatible.
More information can be found in the <tt>`README'</tt> file!
<LI>

Fixed some problems when using very long, illegal names.
</UL>



<H3><A NAME="News-3.21.6" HREF="manual_toc.html#News-3.21.6">D.6.30  Changes in release 3.21.6</A></H3>


<UL>
<LI>

Fixed more portability issues (incorrect <code>sigwait</code> and <code>sigset</code>
defines).
<LI>

<code>configure</code> should now be able to detect the last argument to
<code>accept()</code>.
</UL>



<H3><A NAME="News-3.21.5" HREF="manual_toc.html#News-3.21.5">D.6.31  Changes in release 3.21.5</A></H3>


<UL>
<LI>

Should now work with FreeBSD 3.0 if used with
<tt>`FreeBSD-3.0-libc_r-1.0.diff'</tt>,
which can be found at <a HREF="http://dev.mysql.com/downloads/os-freebsd.html">http://dev.mysql.com/downloads/os-freebsd.html</a>.
<LI>

Added new <code>-O tmp_table_size=#</code> option to <code>mysqld</code>.
<LI>

New function <code>FROM_UNIXTIME(timestamp)</code> which returns a date string in
<code>'YYYY-MM-DD HH:MM:SS'</code> format.
<LI>

New function <code>SEC_TO_TIME(seconds)</code> which returns a string in
<code>'HH:MM:SS'</code> format.
<LI>

New function <code>SUBSTRING_INDEX()</code>, originally by Zeev Suraski.
</UL>



<H3><A NAME="News-3.21.4" HREF="manual_toc.html#News-3.21.4">D.6.32  Changes in release 3.21.4</A></H3>


<UL>
<LI>

Should now configure and compile on OSF/1 4.0 with the DEC compiler.
<LI>

Configuration and compilation on BSD/OS 3.0 works, but due to some bugs in
BSD/OS 3.0, <code>mysqld</code> doesn't work on it yet.
<LI>

Configuration and compilation on FreeBSD 3.0 works, but I couldn't get
<code>pthread_create</code> to work.
</UL>



<H3><A NAME="News-3.21.3" HREF="manual_toc.html#News-3.21.3">D.6.33  Changes in release 3.21.3</A></H3>


<UL>
<LI>

Added reverse check lookup of hostnames to get better security.
<LI>

Fixed some possible buffer overflows if filenames that are too long are used.
<LI>

<code>mysqld</code> doesn't accept hostnames that start with digits followed by a
<code>'.'</code>, because the hostname may look like an IP number.
<LI>

Added <code>--skip-networking</code> option to <code>mysqld</code>, to allow only socket
connections.  (This will not work with MIT-pthreads!)
<LI>

Added check of too long table names for alias.
<LI>

Added check whether database name is okay.
<LI>

Added check whether too long table names.
<LI>

Removed incorrect <code>free()</code> that killed the server on
<code>CREATE DATABASE</code> or <code>DROP DATABASE</code>.
<LI>

Changed some <code>mysqld</code> <code>-O</code> options to better names.
<LI>

Added <code>-O join_cache_size=#</code> option to <code>mysqld</code>.
<LI>

Added <code>-O max_join_size=#</code> option to <code>mysqld</code>, to be able to set a
limit how big queries (in this case big = slow) one should be able to handle
without specifying <code>SET SQL_BIG_SELECTS=1</code>.  A # = is about 10
examined records. The default is ``unlimited.''
<LI>

When comparing a <code>TIME</code>, <code>DATE</code>, <code>DATETIME</code> or <code>TIMESTAMP</code>
column to a constant, the constant is converted to a time value before
performing the comparison.
This will make it easier to get ODBC (particularly Access97) to work with
these types. It should also make dates easier to use and the comparisons
should be quicker than before.
<LI>

Applied patch from Jochen Wiedmann that allows <code>query()</code> in
<code>mysqlperl</code> to take a query with <code>\0</code> in it.
<LI>

Storing a timestamp with a two-digit year (<code>YYMMDD</code>) didn't work.
<LI>

Fix that timestamp wasn't automatically updated if set in an <code>UPDATE</code>
clause.
<LI>

Now the automatic timestamp field is the FIRST timestamp field.
<LI>

<code>SELECT * INTO OUTFILE</code>, which didn't correctly if the outfile already
existed.
<LI>

<code>mysql</code> now shows the thread ID when starting or doing a reconnect.
<LI>

Changed the default sort buffer size from 2MB to 1MB.
</UL>



<H3><A NAME="News-3.21.2" HREF="manual_toc.html#News-3.21.2">D.6.34  Changes in release 3.21.2</A></H3>


<UL>
<LI>

The range optimizer is coded, but only 85% tested. It can be enabled with
<code>--new</code>, but it crashes core a lot yet...
<LI>

More portable. Should compile on AIX and alpha-digital.
At least the <code>isam</code> library should be relatively 64-bit clean.
<LI>

New <code>isamchk</code> which can detect and fix more problems.
<LI>

New options for <code>isamlog</code>.
<LI>

Using new version of Automake.
<LI>

Many small portability changes (from the AIX and alpha-digital port)
Better checking of pthread(s) library.
<LI>

czech error messages by <a HREF="mailto:snajdr@pvt.net">snajdr@pvt.net</a>.
<LI>

Decreased size of some buffers to get fewer problems on systems with little
memory.  Also added more checks to handle ``out of memory'' problems.
<LI>

<code>mysqladmin</code>: you can now do <code>mysqladmin kill 5,6,7,8</code> to kill
multiple threads.
<LI>

When the maximum connection limit is reached, one extra connection by a user
with the <strong>process_acl</strong> privilege is granted.
<LI>

Added <code>-O backlog=#</code> option to <code>mysqld</code>.
<LI>

Increased maximum packet size from 512KB to 1024KB for client.
<LI>

Almost all of the function code is now tested in the internal test suite.
<LI>

<code>ALTER TABLE</code> now returns warnings from field conversions.
<LI>

Port changed to 3306 (got it reserved from ISI).
<LI>

Added a fix for Visual FoxBase so that any schema name from a table
specification is automatically removed.
<LI>

New function <code>ASCII()</code>.
<LI>

Removed function <code>BETWEEN(a,b,c)</code>. Use the standard SQL
syntax instead: <code>expr BETWEEN <var>expr</var> AND <var>expr</var></code>.
<LI>

MySQL no longer has to use an extra temporary table when sorting
on functions or <code>SUM()</code> functions.
<LI>

Fixed bug that you couldn't use <var>tbl_name.field_name</var> in <code>UPDATE</code>.
<LI>

Fixed <code>SELECT DISTINCT</code> when using 'hidden group'. For example:

<PRE>
mysql&#62; SELECT DISTINCT MOD(some_field,10) FROM test
    -&#62;        GROUP BY some_field;
</PRE>

Note: <code>some_field</code> is normally in the <code>SELECT</code> part. Standard SQL should
require it.
</UL>



<H3><A NAME="News-3.21.0" HREF="manual_toc.html#News-3.21.0">D.6.35  Changes in release 3.21.0</A></H3>


<UL>
<LI>

New reserved words used: <code>INTERVAL</code>, <code>EXPLAIN</code>, <code>READ</code>,
<code>WRITE</code>, <code>BINARY</code>.
<LI>

Added ODBC function <code>CHAR(num,...)</code>.
<LI>

New operator <code>IN</code>. This uses a binary search to find a match.
<LI>

New command <code>LOCK TABLES <var>tbl_name</var> [AS <var>alias</var>] {READ|WRITE} ...</code>
<LI>

Added <code>--log-update</code> option to <code>mysqld</code>, to get a log suitable for
incremental updates.
<LI>

New command <code>EXPLAIN SELECT ...</code> to get information about how the
optimizer will do the join.
<LI>

For easier client code, the client should no longer use
<code>FIELD_TYPE_TINY_BLOB</code>, <code>FIELD_TYPE_MEDIUM_BLOB</code>,
<code>FIELD_TYPE_LONG_BLOB</code> or <code>FIELD_TYPE_VAR_STRING</code> (as
previously returned by <code>mysql_list_fields</code>).  You should instead use only
<code>FIELD_TYPE_BLOB</code> or <code>FIELD_TYPE_STRING</code>.  If you want exact
types, you should use the command <code>SHOW FIELDS</code>.
<LI>

Added varbinary syntax: <code>0x######</code> which can be used as a string
(default) or a number.
<LI>

<code>FIELD_TYPE_CHAR</code> is renamed to <code>FIELD_TYPE_TINY</code>.
<LI>

Changed all fields to C++ classes.
<LI>

Removed FORM struct.
<LI>

Fields with <code>DEFAULT</code> values no longer need to be <code>NOT NULL</code>.
<LI>

New field types:
<DL COMPACT>

<DT><code>ENUM</code>
<DD>
A string which can take only a couple of defined values. The value is
stored as a 1-3 byte number that is mapped automatically to a string.
This is sorted according to string positions!
<DT><code>SET</code>
<DD>
A string which may have one or many string values separated by ','.
The string is stored as a 1-, 2-, 3-, 4- or 8-byte number where each bit stands
for a specific set member.  This is sorted according to the unsigned value
of the stored packed number.
</DL>
<LI>

Now all function calculation is done with <code>double</code> or <code>long long</code>.
This will provide the full 64-bit range with bit functions and fix some
conversions that previously could result in precision losses.  One should
avoid using <code>unsigned long long</code> columns with full 64-bit range
(numbers bigger than 9223372036854775807) because calculations are done
with <code>signed long long</code>.
<LI>

<code>ORDER BY</code> will now put <code>NULL</code> field values first. <code>GROUP BY</code>
will also work with <code>NULL</code> values.
<LI>

Full <code>WHERE</code> with expressions.
<LI>

New range optimizer that can resolve ranges when some keypart prefix is
constant. Example:

<PRE>
mysql&#62; SELECT * FROM <var>tbl_name</var>
    -&#62;          WHERE <var>key_part_1</var>='<var>customer</var>'
    -&#62;          AND <var>key_part_2</var>&#62;=10 AND <var>key_part_2</var>&#60;=10;
</PRE>

</UL>



<H2><A NAME="News-3.20.x" HREF="manual_toc.html#News-3.20.x">D.7  Changes in release 3.20.x</A></H2>

<P>
<A NAME="IDX2390"></A>

</P>
<P>
MySQL 3.20 is quite old now, and should be avoided if possible.  This
information is kept here for historical purposes only.

</P>
<P>
Changes from 3.20.18 to 3.20.32b are not documented here because the
3.21 release branched here. And the relevant changes are also
documented as changes to the 3.21 version.

</P>



<H3><A NAME="News-3.20.18" HREF="manual_toc.html#News-3.20.18">D.7.1  Changes in release 3.20.18</A></H3>


<UL>
<LI>

Added <code>-p#</code> (remove <code>#</code> directories from path) to <code>isamlog</code>.
All files are written with a relative path from the database directory
Now <code>mysqld</code> shouldn't crash on shutdown when using the
<code>--log-isam</code> option.
<LI>

New <code>mysqlperl</code> version. It is now compatible with <code>msqlperl-0.63</code>.
<LI>

New <code>DBD</code> module available.
<LI>

Added group function <code>STD()</code> (standard deviation).
<LI>

The <code>mysqld</code> server is now compiled by default without debugging
information.  This will make the daemon smaller and faster.
<LI>

Now one usually only has to specify the <code>--basedir</code> option to
<code>mysqld</code>. All other paths are relative in a normal installation.
<LI>

<code>BLOB</code> columns sometimes contained garbage when used with a <code>SELECT</code>
on more than one table and <code>ORDER BY</code>.
<LI>

Fixed that calculations that are not in <code>GROUP BY</code> work as expected
(standard SQL extension).
Example:

<PRE>
mysql&#62; SELECT id,id+1 FROM table GROUP BY id;
</PRE>

<LI>

The test of using <code>MYSQL_PWD</code> was reversed. Now <code>MYSQL_PWD</code> is
enabled as default in the default release.
<LI>

Fixed conversion bug which caused <code>mysqld</code> to core dump with
Arithmetic error on SPARC-386.
<LI>

Added <code>--unbuffered</code> option to <code>mysql</code>, for new <code>mysqlaccess</code>.
<LI>

When using overlapping (unnecessary) keys and join over many tables,
the optimizer could get confused and return 0 records.
</UL>



<H3><A NAME="News-3.20.17" HREF="manual_toc.html#News-3.20.17">D.7.2  Changes in release 3.20.17</A></H3>


<UL>
<LI>

You can now use <code>BLOB</code> columns and the functions <code>IS NULL</code> and
<code>IS NOT NULL</code> in the <code>WHERE</code> clause.
<LI>

All communication packets and row buffers are now allocated dynamically
on demand. The default value of <code>max_allowed_packet</code> is now 64KB for
the server and 512KB for the client. This is mainly used to catch
incorrect packets that could trash all memory. The server limit may be
changed when it is started.
<LI>

Changed stack usage to use less memory.
<LI>

Changed <code>safe_mysqld</code> to check for running daemon.
<LI>

The <code>ELT()</code> function is renamed to <code>FIELD()</code>.  The new
<code>ELT()</code> function returns a value based on an index: <code>FIELD()</code>
is the inverse of <code>ELT()</code> Example: <code>ELT(2,"A","B","C")</code> returns
<code>"B"</code>. <code>FIELD("B","A","B","C")</code> returns <code>2</code>.
<LI>

<code>COUNT(field)</code>, where <code>field</code> could have a <code>NULL</code> value, now
works.
<LI>

A couple of bugs fixed in <code>SELECT ... GROUP BY</code>.
<LI>

Fixed memory overrun bug in <code>WHERE</code> with many unoptimizable brace levels.
<LI>

Fixed some small bugs in the grant code.
<LI>

If hostname isn't found by <code>get_hostname</code>, only the IP is checked.
Previously, you got <code>Access denied</code>.
<LI>

Inserts of timestamps with values didn't always work.
<LI>

<code>INSERT INTO ... SELECT ... WHERE</code> could give the error
<code>Duplicated field</code>.
<LI>

Added some tests to <code>safe_mysqld</code> to make it ``safer.''
<LI>

<code>LIKE</code> was case-sensitive in some places and case-insensitive in others.
Now <code>LIKE</code> is always case-insensitive.
<LI>

<tt>`mysql.cc'</tt>: Allow <code>'#'</code> anywhere on the line.
<LI>

New command <code>SET SQL_SELECT_LIMIT=#</code>. See the FAQ for more details.
<LI>

New version of the <code>mysqlaccess</code> script.
<LI>

Change <code>FROM_DAYS()</code> and <code>WEEKDAY()</code> to also take a full
<code>TIMESTAMP</code> or <code>DATETIME</code> as argument. Before they only took a
number of type <code>YYYYMMDD</code> or <code>YYMMDD</code>.
<LI>

Added new function <code>UNIX_TIMESTAMP(timestamp_column)</code>.
</UL>



<H3><A NAME="News-3.20.16" HREF="manual_toc.html#News-3.20.16">D.7.3  Changes in release 3.20.16</A></H3>


<UL>
<LI>

More changes in MIT-pthreads to get them safer. Fixed also some link
bugs at least in SunOS.
<LI>

Changed <code>mysqld</code> to work around a bug in MIT-pthreads. This makes multiple
small <code>SELECT</code> operations 20 times faster. Now <code>lock_test.pl</code> should
work.
<LI>

Added <code>mysql_FetchHash(handle)</code> to <code>mysqlperl</code>.
<LI>

The <code>mysqlbug</code> script is now distributed built to allow for reporting
bugs that appear during the build with it.
<LI>

Changed <tt>`libmysql.c'</tt> to prefer <code>getpwuid()</code> instead of
<code>cuserid()</code>.
<LI>

Fixed bug in <code>SELECT</code> optimizer when using many tables with the same
column used as key to different tables.
<LI>

Added new <code>latin2</code> and Russian <code>KOI8</code> character tables.
<LI>

Added support for a dummy <code>GRANT</code> command to satisfy Powerbuilder.
</UL>



<H3><A NAME="News-3.20.15" HREF="manual_toc.html#News-3.20.15">D.7.4  Changes in release 3.20.15</A></H3>


<UL>
<LI>

Fixed fatal bug <code>packets out of order</code> when using MIT-pthreads.
<LI>

Removed possible loop when a thread waits for command from client
and <code>fcntl()</code> fails. Thanks to Mike Bretz for finding this bug.
<LI>

Changed alarm loop in <tt>`mysqld.cc'</tt> because shutdown didn't always
succeed in Linux.
<LI>

Removed use of <code>termbits</code> from <tt>`mysql.cc'</tt>.  This conflicted with
<code>glibc</code> 2.0.
<LI>

Fixed some syntax errors for at least BSD and Linux.
<LI>

Fixed bug when doing a <code>SELECT</code> as superuser without a database.
<LI>

Fixed bug when doing <code>SELECT</code> with group calculation to outfile.
</UL>



<H3><A NAME="News-3.20.14" HREF="manual_toc.html#News-3.20.14">D.7.5  Changes in release 3.20.14</A></H3>


<UL>
<LI>

If one gives <code>-p</code> or <code>--password</code> option to <code>mysql</code> without
an argument, the user is solicited for the password from the tty.
<LI>

Added default password from <code>MYSQL_PWD</code> (by Elmar Haneke).
<LI>

Added command <code>kill</code> to <code>mysqladmin</code> to kill a specific
MySQL thread.
<LI>

Sometimes when doing a reconnect on a down connection this succeeded
first on second try.
<LI>

Fixed adding an <code>AUTO_INCREMENT</code> key with <code>ALTER_TABLE</code>.
<LI>

<code>AVG()</code> gave too small value on some <code>SELECT</code> statements with
<code>GROUP BY</code> and <code>ORDER BY</code>.
<LI>

Added new <code>DATETIME</code> type (by Giovanni Maruzzelli
<a HREF="mailto:maruzz@matrice.it">maruzz@matrice.it</a>).
<LI>

Fixed that defining <code>DONT_USE_DEFAULT_FIELDS</code> works.
<LI>

Changed to use a thread to handle alarms instead of signals on Solaris to
avoid race conditions.
<LI>

Fixed default length of signed numbers. (George Harvey
<a HREF="mailto:georgeh@pinacl.co.uk">georgeh@pinacl.co.uk</a>.)
<LI>

Allow anything for <code>CREATE INDEX</code>.
<LI>

Add prezeros when packing numbers to <code>DATE</code>, <code>TIME</code> and
<code>TIMESTAMP</code>.
<LI>

Fixed a bug in <code>OR</code> of multiple tables (gave empty set).
<LI>

Added many patches to MIT-pthreads. This fixes at least one lookup bug.
</UL>



<H3><A NAME="News-3.20.13" HREF="manual_toc.html#News-3.20.13">D.7.6  Changes in release 3.20.13</A></H3>


<UL>
<LI>

Added standard SQL <code>DATE</code> and <code>TIME</code> types.
<LI>

Fixed bug in <code>SELECT</code> with <code>AND</code>-<code>OR</code> levels.
<LI>

Added support for Slovenian characters. The <tt>`Contrib'</tt> directory contains
source and instructions for adding other character sets.
<LI>

Fixed bug with <code>LIMIT</code> and <code>ORDER BY</code>.
<LI>

Allow <code>ORDER BY</code> and <code>GROUP BY</code> on items that aren't in the
<code>SELECT</code> list.
(Thanks to Wim Bonis <a HREF="mailto:bonis@kiss.de">bonis@kiss.de</a>, for pointing this out.)
<LI>

Allow setting of timestamp values in <code>INSERT</code>.
<LI>

Fixed bug with <code>SELECT ... WHERE ... = NULL</code>.
<LI>

Added changes for <code>glibc</code> 2.0. To get <code>glibc</code> to work, you should
add the <tt>`gibc-2.0-sigwait-patch'</tt> before compiling <code>glibc</code>.
<LI>

Fixed bug in <code>ALTER TABLE</code> when changing a <code>NOT NULL</code> field to
allow <code>NULL</code> values.
<LI>

Added some standard SQL synonyms as field types to <code>CREATE TABLE</code>.
<code>CREATE TABLE</code> now allows <code>FLOAT(4)</code> and <code>FLOAT(8)</code> to mean
<code>FLOAT</code> and <code>DOUBLE</code>.
<LI>

New utility program <code>mysqlaccess</code> by <a HREF="mailto:Yves.Carlier@rug.ac.be">Yves.Carlier@rug.ac.be</a>.
This program shows the access rights for a specific user and the grant
rows that determine this grant.
<LI>

Added <code>WHERE const op field</code> (by <a HREF="mailto:bonis@kiss.de">bonis@kiss.de</a>).
</UL>



<H3><A NAME="News-3.20.11" HREF="manual_toc.html#News-3.20.11">D.7.7  Changes in release 3.20.11</A></H3>


<UL>
<LI>

When using <code>SELECT ... INTO OUTFILE</code>, all temporary tables are <code>ISAM</code>
instead of <code>HEAP</code> to allow big dumps.
<LI>

Changed date functions to be string functions. This fixed some ``funny''
side effects when sorting on dates.
<LI>

Extended <code>ALTER TABLE</code> for standard SQL compliance.
<LI>

Some minor compatibility changes.
<LI>

Added <code>--port</code> and <code>--socket</code> options to all utility programs and
<code>mysqld</code>.
<LI>

Fixed MIT-pthreads <code>readdir_r()</code>. Now <code>mysqladmin create database</code>
and <code>mysqladmin drop database</code> should work.
<LI>

Changed MIT-pthreads to use our <code>tempnam()</code>. This should fix the ``sort
aborted'' bug.
<LI>

Added sync of records count in <code>sql_update</code>. This fixed slow updates
on first connection. (Thanks to Vaclav Bittner for the test.)
</UL>



<H3><A NAME="News-3.20.10" HREF="manual_toc.html#News-3.20.10">D.7.8  Changes in release 3.20.10</A></H3>


<UL>
<LI>

New insert type: <code>INSERT INTO ... SELECT ...</code>
<LI>

<code>MEDIUMBLOB</code> fixed.
<LI>

Fixed bug in <code>ALTER TABLE</code> and <code>BLOB</code> values.
<LI>

<code>SELECT ... INTO OUTFILE</code> now creates the file in the current
database directory.
<LI>

<code>DROP TABLE</code> now can take a list of tables.
<LI>

Oracle synonym <code>DESCRIBE</code> (<code>DESC</code>).
<LI>

Changes to <code>make_binary_distribution</code>.
<LI>

Added some comments to installation instructions about <code>configure</code>
C++ link test.
<LI>

Added <code>--without-perl</code> option to <code>configure</code>.
<LI>

Lots of small portability changes.
</UL>



<H3><A NAME="News-3.20.9" HREF="manual_toc.html#News-3.20.9">D.7.9  Changes in release 3.20.9</A></H3>


<UL>
<LI>

<code>ALTER TABLE</code> didn't copy null bit. As a result, fields that were allowed
to have <code>NULL</code> values were always <code>NULL</code>.
<LI>

<code>CREATE</code> didn't take numbers as <code>DEFAULT</code>.
<LI>

Some compatibility changes for SunOS.
<LI>

Removed <tt>`config.cache'</tt> from old distribution.
</UL>



<H3><A NAME="News-3.20.8" HREF="manual_toc.html#News-3.20.8">D.7.10  Changes in release 3.20.8</A></H3>


<UL>
<LI>

Fixed bug with <code>ALTER TABLE</code> and multiple-part keys.
</UL>



<H3><A NAME="News-3.20.7" HREF="manual_toc.html#News-3.20.7">D.7.11  Changes in release 3.20.7</A></H3>


<UL>
<LI>

New commands: <code>ALTER TABLE</code>, <code>SELECT ... INTO OUTFILE</code> and
<code>LOAD DATA INFILE</code>.
<LI>

New function: <code>NOW()</code>.
<LI>

Added new field <code>File_priv</code> to <code>mysql/user</code> table.
<LI>

New script <code>add_file_priv</code> which adds the new field <code>File_priv</code>
to the <code>user</code> table. This script must be executed if you want to
use the new <code>SELECT ... INTO</code> and <code>LOAD DATA INFILE ...</code> commands
with a version of MySQL earlier than 3.20.7.
<LI>

Fixed bug in locking code, which made <code>lock_test.pl</code> test fail.
<LI>

New files <tt>`NEW'</tt> and <tt>`BUGS'</tt>.
<LI>

Changed <tt>`select_test.c'</tt> and <tt>`insert_test.c'</tt> to include
<tt>`config.h'</tt>.
<LI>

Added <code>status</code> command to <code>mysqladmin</code> for short logging.
<LI>

Increased maximum number of keys to 16 and maximum number of key parts to 15.
<LI>

Use of sub keys. A key may now be a prefix of a string field.
<LI>

Added <code>-k</code> option to <code>mysqlshow</code>, to get key information for a table.
<LI>

Added long options to <code>mysqldump</code>.
</UL>



<H3><A NAME="News-3.20.6" HREF="manual_toc.html#News-3.20.6">D.7.12  Changes in release 3.20.6</A></H3>


<UL>
<LI>

Portable to more systems because of MIT-pthreads, which will
be used automatically if <code>configure</code> cannot find a <code>-lpthreads</code>
library.
<LI>

Added GNU-style long options to almost all programs. Test with
<code><var>program</var> --help</code>.
<LI>

Some shared library support for Linux.
<LI>

The FAQ is now in <tt>`.texi'</tt> format and is available in <tt>`.html'</tt>,
<tt>`.txt'</tt> and <tt>`.ps'</tt> formats.
<LI>

Added new SQL function <code>RAND([init])</code>.
<LI>

Changed <code>sql_lex</code> to handle <code>\0</code> unquoted, but the client can't send
the query through the C API, because it takes a str pointer.
You must use <code>mysql_real_query()</code> to send the query.
<LI>

Added API function <code>mysql_get_client_info()</code>.
<LI>

<code>mysqld</code> now uses the <code>N_MAX_KEY_LENGTH</code> from <tt>`nisam.h'</tt> as
the maximum allowable key length.
<LI>

The following now works:

<PRE>
mysql&#62; SELECT filter_nr,filter_nr FROM filter ORDER BY filter_nr;
</PRE>

Previously, this resulted in the error:
<code>Column: 'filter_nr' in order clause is ambiguous</code>.
<LI>

<code>mysql</code> now outputs <code>'\0'</code>, <code>'\t'</code>, <code>'\n'</code> and <code>'\\'</code>
when encountering ASCII 0, tab, newline, or <code>'\'</code> while writing
tab-separated output.
This is to allow printing of binary data in a portable format.
To get the old behavior, use <code>-r</code> (or <code>--raw</code>).
<LI>

Added german error messages (60 of 80 error messages translated).
<LI>

Added new API function <code>mysql_fetch_lengths(MYSQL_RES *)</code>, which
returns an array of column lengths (of type <code>uint</code>).
<LI>

Fixed bug with <code>IS NULL</code> in <code>WHERE</code> clause.
<LI>

Changed the optimizer a little to get better results when searching on a key
part.
<LI>

Added <code>SELECT</code> option <code>STRAIGHT_JOIN</code> to tell the optimizer that
it should join tables in the given order.
<LI>

Added support for comments starting with <code>'--'</code> in <tt>`mysql.cc'</tt>
(Postgres syntax).
<LI>

You can have <code>SELECT</code> expressions and table columns in a <code>SELECT</code>
which are not used in the group part. This makes it efficient to implement
lookups.  The column that is used should be a constant for each group because
the value is calculated only once for the first row that is found for a group.

<PRE>
mysql&#62; SELECT id,lookup.text,SUM(*) FROM test,lookup
    -&#62;        WHERE test.id=lookup.id GROUP BY id;
</PRE>

<LI>

Fixed bug in <code>SUM(function)</code> (could cause a core dump).
<LI>

Changed <code>AUTO_INCREMENT</code> placement in the SQL query:

<PRE>
INSERT INTO table (auto_field) VALUES (0);
</PRE>

inserted 0, but it should insert an <code>AUTO_INCREMENT</code> value.
<LI>

<tt>`mysqlshow.c'</tt>: Added number of records in table. Had to change the
client code a little to fix this.
<LI>

<code>mysql</code> now allows doubled <code>''</code> or <code>""</code> within strings for
embedded <code>'</code> or <code>"</code>.
<LI>

New math functions:
<code>EXP()</code>, <code>LOG()</code>, <code>SQRT()</code>, <code>ROUND()</code>, <code>CEILING()</code>.
</UL>



<H3><A NAME="News-3.20.3" HREF="manual_toc.html#News-3.20.3">D.7.13  Changes in release 3.20.3</A></H3>


<UL>
<LI>

The <code>configure</code> source now compiles a thread-free client library
<code>-lmysqlclient</code>. This is the only library that needs to be linked
with client applications.  When using the binary releases, you must
link with <code>-lmysql -lmysys -ldbug -lmystrings</code> as before.
<LI>

New <code>readline</code> library from <code>bash-2.0</code>.
<LI>

LOTS of small changes to <code>configure</code> and makefiles (and related source).
<LI>

It should now be possible to compile in another directory using
<code>VPATH</code>. Tested with GNU Make 3.75.
<LI>

<code>safe_mysqld</code> and <code>mysql.server</code> changed to be more compatible
between the source and the binary releases.
<LI>

<code>LIMIT</code> now takes one or two numeric arguments.
If one argument is given, it indicates the maximum number of rows in
a result. If two arguments are given, the first argument indicates the offset
of the first row to return, the second is the maximum number of rows.
With this it's easy to do a poor man's next page/previous page WWW
application.
<LI>

Changed name of SQL function <code>FIELDS()</code> to <code>ELT()</code>.
Changed SQL function <code>INTERVALL()</code> to <code>INTERVAL()</code>.
<LI>

Made <code>SHOW COLUMNS</code> a synonym for <code>SHOW FIELDS</code>.
Added compatibility syntax <code>FRIEND KEY</code> to <code>CREATE TABLE</code>. In
MySQL, this creates a non-unique key on the given columns.
<LI>

Added <code>CREATE INDEX</code> and <code>DROP INDEX</code> as compatibility functions.
In MySQL, <code>CREATE INDEX</code> only checks whether the index exists and
issues an error if it doesn't exist. <code>DROP INDEX</code> always succeeds.
<LI>

<tt>`mysqladmin.c'</tt>: added client version to version information.
<LI>

Fixed core dump bug in <code>sql_acl</code> (core on new connection).
<LI>

Removed <code>host</code>, <code>user</code> and <code>db</code> tables from database <code>test</code>
in the distribution.
<LI>

<code>FIELD_TYPE_CHAR</code> can now be signed (-128 to 127) or unsigned (0 to 255)
Previously, it was always unsigned.
<LI>

Bug fixes in <code>CONCAT()</code> and <code>WEEKDAY()</code>.
<LI>

Changed a lot of source to get <code>mysqld</code> to be compiled with SunPro
compiler.
<LI>

SQL functions must now have a <code>'('</code> immediately after the function name
(no intervening space).
For example, <code>'USER('</code> is regarded as beginning a function call, and
<code>'USER ('</code> is regarded as an identifier <code>USER</code> followed by a
<code>'('</code>, not as a function call.
</UL>



<H3><A NAME="News-3.20.0" HREF="manual_toc.html#News-3.20.0">D.7.14  Changes in release 3.20.0</A></H3>


<UL>
<LI>

The source distribution is done with <code>configure</code> and Automake.
It will make porting much easier.  The <code>readline</code> library is included
in the distribution.
<LI>

Separate client compilation:
the client code should be very easy to compile on systems which
don't have threads.
<LI>

The old Perl interface code is automatically compiled and installed.
Automatic compiling of <code>DBD</code> will follow when the new <code>DBD</code> code
is ported.
<LI>

Dynamic language support: <code>mysqld</code> can now be started with Swedish
or English (default) error messages.
<LI>

New functions: <code>INSERT()</code>, <code>RTRIM()</code>, <code>LTRIM()</code> and
<code>FORMAT()</code>.
<LI>

<code>mysqldump</code> now works correctly for all field types (even
<code>AUTO_INCREMENT</code>). The format for <code>SHOW FIELDS FROM <var>tbl_name</var></code>
is changed so the <code>Type</code> column contains information suitable for
<code>CREATE TABLE</code>.  In previous releases, some <code>CREATE TABLE</code>
information had to be patched when re-creating tables.
<LI>

Some parser bugs from 3.19.5 (<code>BLOB</code> and <code>TIMESTAMP</code>) are corrected.
<code>TIMESTAMP</code> now returns different date information depending on its
create length.
<LI>

Changed parser to allow a database, table or field name to
start with a number or <code>'_'</code>.
<LI>

All old C code from Unireg changed to C++ and cleaned up. This makes
the daemon a little smaller and easier to understand.
<LI>

A lot of small bugfixes done.
<LI>

New <tt>`INSTALL'</tt> files (not final version) and some information regarding porting.
</UL>



<H2><A NAME="News-3.19.x" HREF="manual_toc.html#News-3.19.x">D.8  Changes in release 3.19.x</A></H2>

<P>
<A NAME="IDX2391"></A>

</P>
<P>
MySQL 3.19 is quite old now, and should be avoided if possible.  This
information is kept here for historical purposes only.

</P>



<H3><A NAME="News-3.19.5" HREF="manual_toc.html#News-3.19.5">D.8.1  Changes in release 3.19.5</A></H3>


<UL>
<LI>

Some new functions, some more optimization on joins.
<LI>

Should now compile clean on Linux (2.0.x).
<LI>

Added functions <code>DATABASE()</code>, <code>USER()</code>, <code>POW()</code>,
<code>LOG10()</code> (needed for ODBC).
<LI>

In a <code>WHERE</code> with an <code>ORDER BY</code> on fields from only one table,
the table is now preferred as first table in a multi-join.
<LI>

<code>HAVING</code> and <code>IS NULL</code> or <code>IS NOT NULL</code> now works.
<LI>

A group on one column and a sort on a group function (<code>SUM()</code>,
<code>AVG()</code>...) didn't work together. Fixed.
<LI>

<code>mysqldump</code>: Didn't send password to server.
</UL>



<H3><A NAME="News-3.19.4" HREF="manual_toc.html#News-3.19.4">D.8.2  Changes in release 3.19.4</A></H3>


<UL>
<LI>

Fixed horrible locking bug when inserting in one thread and reading
in another thread.
<LI>

Fixed one-off decimal bug.  1.00 was output as 1.0.
<LI>

Added attribute <code>'Locked'</code> to process list as information if a query is
locked by another query.
<LI>

Fixed full magic timestamp. Timestamp length may now be 14, 12, 10, 8, 6, 4
or 2 bytes.
<LI>

Sort on some numeric functions could sort incorrectly on last number.
<LI>

<code>IF(arg,syntax_error,syntax_error)</code> crashed.
<LI>

Added functions <code>CEILING()</code>, <code>ROUND()</code>, <code>EXP()</code>, <code>LOG()</code> and <code>SQRT()</code>.
<LI>

Enhanced <code>BETWEEN</code> to handle strings.
</UL>



<H3><A NAME="News-3.19.3" HREF="manual_toc.html#News-3.19.3">D.8.3  Changes in release 3.19.3</A></H3>


<UL>
<LI>

Fixed <code>SELECT</code> with grouping on <code>BLOB</code> columns not to return
incorrect <code>BLOB</code> info. Grouping, sorting and distinct on <code>BLOB</code>
columns will not yet work as
expected (probably it will group/sort by the first 7 characters in the
<code>BLOB</code>). Grouping on formulas with a fixed string size (use <code>MID()</code>
on a <code>BLOB</code>) should work.
<LI>

When doing a full join (no direct keys) on multiple tables with <code>BLOB</code>
fields, the <code>BLOB</code> was garbage on output.
<LI>

Fixed <code>DISTINCT</code> with calculated columns.
</UL>



<H2><A NAME="InnoDB_change_history" HREF="manual_toc.html#InnoDB_change_history">D.9  <code>InnoDB</code> Change History</A></H2>

<P>
<strong>Starting from 4.0.22 and 4.1.5, all InnoDB changes are included in
the MySQL Change History, and this manual section is no longer separately
maintained.</strong>

</P>



<H3><A NAME="InnoDB_news-4.0.21" HREF="manual_toc.html#InnoDB_news-4.0.21">D.9.1  MySQL/InnoDB-4.0.21, September 10, 2004</A></H3>

<P>
Functionality added or changed:

</P>

<UL>

<LI>

Renamed the <tt>`innodb.status.<var>&#60;pid&#62;</var>'</tt> files (created in the data
directory) to <tt>`innodb_status.<var>&#60;pid&#62;</var>'</tt>. This avoids
problems on filesystems that do not allow multiple periods in filenames.

<LI>

Added <code>innodb_status_file</code> system variable to <code>mysqld</code>
to control whether output from <code>SHOW INNODB STATUS</code> is written
to a <tt>`innodb_status.<var>&#60;pid&#62;</var>'</tt> file in the data directory.
By default, the file is not created.  To create it, start <code>mysqld</code>
with the <code>--innodb_status_file=1</code> option.

<LI>

Changes for NetWare to exit InnoDB gracefully on NetWare even in a case of
an assertion failure, instead of intentionally crashing the <code>`mysqld'</code>
server process. 

</UL>

<P>
Bugs fixed:

</P>

<UL>

<LI>

Fixed a bug in <code>ON DELETE CASCADE</code> and <code>ON UPDATE CASCADE</code>
foreign key constraints: long chains of cascaded operations would cause
a stack overflow and crash the server.  Cascaded operations are now limited
to 15 levels.  (Bug #4446)

<LI>

Fixed a possible bug in <code>LOCK TABLES</code> introduced in
MySQL/InnoDB-4.0.19: The count of tables explicitly locked by a
transaction was incremented only after the locks were granted, but
decremented when the lock structures were destroyed.

<LI>

Fixed a bug in <code>UNLOCK TABLES</code> in <code>AUTOCOMMIT=0</code> mode,
introduced in MySQL/InnoDB-4.0.19: The memory allocated for some locks
acquired by the transaction could be deallocated before those locks were
released.  The bug can lead to crashes and memory corruption of the
buffer pool when the transaction acquires a large number of locks (table
locks or row-level locks).

<LI>

Increment the InnoDB watchdog timeout during <code>CHECK TABLE</code>. A
long-running <code>CHECK TABLE</code> would cause InnoDB to
complain about a 'long semaphore wait', and crash the server,
if a query had to wait more than 600 seconds behind that
<code>CHECK TABLE</code> operation.
(Bug #2694)

<LI>

If you configure <code>innodb_additional_mem_pool_size</code> so small that InnoDB
memory allocation spills over from it, then every 4 billionth spill may
cause memory corruption. A symptom is a printout like below in the
<tt>`.err'</tt> log.
The workaround is to make
<code>innodb_additional_mem_pool_size</code> big enough to hold all memory
allocation.
Use <code>SHOW INNODB STATUS</code> to determine that there is plenty of free space
available in the additional mem pool, and the total allocated memory stays
rather constant.

<PRE>
InnoDB: Error: Mem area size is 0. Possibly a memory overrun of the
InnoDB: previous allocated area!
InnoDB: Apparent memory corruption: mem dump  len 500; hex
</PRE>

<LI>

The special meaning of the table names <code>innodb_monitor</code>,
<code>innodb_lock_monitor</code>, <code>innodb_tablespace_monitor</code>,
<code>innodb_table_monitor</code>, and <code>innodb_validate</code> in
<code>CREATE TABLE</code> and <code>DROP TABLE</code> statements was accidentally
removed in MySQL/InnoDB-4.0.19.  The diagnostic functions attached
to these special table names (see section <A HREF="manual_InnoDB.html#InnoDB_Monitor">15.12.1  <code>SHOW INNODB STATUS</code> and the <code>InnoDB</code> Monitors</A>) are accessible
again in MySQL/InnoDB-4.0.21.

<LI>

When the private SQL parser of InnoDB was modified in
MySQL/InnoDB-4.0.19 in order to allow the use of the apostrophe (<samp>`''</samp>)
in table and column names, the fix relied on a previously unused function
<code>mem_realloc()</code>, whose implementation was incorrect.  As a
result, InnoDB can incorrectly parse column and table names as the
empty string.  The InnoDB <code>realloc()</code> implementation has been
corrected in MySQL/InnoDB-4.0.21.

<LI>

Fixed a glitch introduced in 4.0.18 and 4.1.2: in <code>SHOW TABLE STATUS</code>
InnoDB systematically overestimated the row count by 1 if the
table fit on a single 16 kB data page.

<LI>

InnoDB created temporary files with the C library function <code>tmpfile()</code>.
On Windows, the files would be created in the root directory of the current
file system.  To correct this behavior, the invocations of <code>tmpfile()</code>
were replaced with code that uses the function <code>create_temp_file()</code> in
the MySQL portability layer.  (Bug #3998)

<LI>

If <code>ALTER TABLE ... DROP FOREIGN KEY ...</code> fails because of a wrong
constraint name, return a table handler error number 150 instead of 152.

<LI>

If there was little file I/O in InnoDB, but the insert buffer was
used, it could happen that 'Pending normal aio reads' was bigger than 0,
but the I/O handler thread did not get waken up in 600 seconds.
This resulted in a hang, and crashing of InnoDB.

<LI>

If we <code>RENAME</code>d a table, InnoDB forgot to load the <code>FOREIGN KEY</code>
constraints that reference the new table name, and forgot to check that
they are compatible with the table.

</UL>



<H3><A NAME="InnoDB_news-4.1.4" HREF="manual_toc.html#InnoDB_news-4.1.4">D.9.2  MySQL/InnoDB-4.1.4, August 31, 2004</A></H3>

<P>
Functionality added or changed:

</P>

<UL>
<LI>

<strong>Important:</strong>
Made internal representation of <code>TIMESTAMP</code> values in <code>InnoDB</code> in
4.1 to be the same as in 4.0. This difference resulted in incorrect datetime
values in <code>TIMESTAMP</code> columns in <code>InnoDB</code> tables after an upgrade
from 4.0 to 4.1. (Bug #4492)
<strong>Warning: extra steps during upgrade required!</strong>
This means that if you are upgrading from 4.1.x,
where x &#60;= 3, to 4.1.4
you should use <code>mysqldump</code> for saving and then restoring your
<code>InnoDB</code> tables with <code>TIMESTAMP</code> columns. No conversion
is needed if you upgrade from 3.23 or 4.0 to 4.1.4 or later.

<LI>

Added a new startup option <code>innodb_locks_unsafe_for_binlog</code>. This
option forces <code>InnoDB</code> not to use next-key locking in searches and
index scans.

<LI>

Added <code>innodb_status_file</code> system variable to <code>mysqld</code>
to control whether output from <code>SHOW INNODB STATUS</code> is written
to a <tt>`innodb_status.<var>&#60;pid&#62;</var>'</tt> file in the data directory.
By default, the file is not created.  To create it, start <code>mysqld</code>
with the <code>--innodb_status_file=1</code> option.

<LI>

Changes for NetWare to exit InnoDB gracefully on NetWare
even in a case of an assertion failure, instead of intentionally crashing the
<code>mysqld</code> server process.

<LI>

'Gap' type row locks without
the <code>LOCK_INSERT_INTENTION</code> flag do not need to wait for
anything. This is because different users can have conflicting lock types
on gaps. This change reduces unnecessary deadlocks.

</UL>

<P>
Bugs fixed:

</P>

<UL>
<LI>

Fixed a bug in <code>ON DELETE CASCADE</code> and <code>ON UPDATE CASCADE</code>
foreign key constraints: long chains of cascaded operations would cause
a stack overflow and crash the server.  Cascaded operations are now limited
to 15 levels.  (Bug #4446)

<LI>

Increment the InnoDB watchdog timeout during <code>CHECK TABLE</code>.  (Bug #2694)

<LI>

If you configure <code>innodb_additional_mem_pool_size</code> so small that InnoDB
memory allocation spills over from it, then every 4 billionth spill may
cause memory corruption. A symptom is a printout like below in the
<tt>`.err'</tt> log.

<PRE>
InnoDB: Error: Mem area size is 0. Possibly a memory overrun of the
InnoDB: previous allocated area!
InnoDB: Apparent memory corruption: mem dump  len 500; hex
</PRE>

<LI>

Fixed a glitch introduced in 4.0.18 and 4.1.2: in <code>SHOW TABLE STATUS</code>
InnoDB systematically overestimated the row count by 1 if the
table fit on a single 16 kB data page.

<LI>

InnoDB created temporary files with the C library function <code>tmpfile()</code>.
On Windows, the files would be created in the root directory of the current
file system.  To correct this behavior, the invocations of <code>tmpfile()</code>
were replaced with code that uses the function <code>create_temp_file()</code> in
the MySQL portability layer.  (Bug #3998)

<LI>

If we <code>RENAME</code>d a table, InnoDB forgot to load the foreign key
constraints that reference the new table name, and forgot to check
that they are compatible with the table.

<LI>

If there was little file I/O in InnoDB, but the insert buffer was
used, it could happen that 'Pending normal aio reads' was bigger than 0,
but the I/O handler thread did not get waken up in 600 seconds.
This resulted in a hang, and an intentional crashing of <code>mysqld</code>.
</UL>



<H3><A NAME="InnoDB_news-4.1.3" HREF="manual_toc.html#InnoDB_news-4.1.3">D.9.3  MySQL/InnoDB-4.1.3, June 28, 2004</A></H3>

<P>
Functionality added or changed:

<UL>

<LI>

<strong>Important:</strong>
Starting from MySQL 4.1.3, <code>InnoDB</code> uses the same character
set comparison functions as MySQL for non-<code>latin1_swedish_ci</code>
character strings that are not <code>BINARY</code>.  This changes the sorting
order of space and characters &#60; ASCII(32) in those character sets.
For <code>latin1_swedish_ci</code> character strings and <code>BINARY</code> strings,
<code>InnoDB</code> uses its own pad-spaces-at-end comparison method, which stays
unchanged.  If you have an <code>InnoDB</code> table created with MySQL 4.1.2 or
earlier, with an index on a non-<code>latin1</code> character set (in the case
of 4.1.0 and 4.1.1 with any character set) <code>CHAR</code>/<code>VARCHAR</code>/or
<code>TEXT</code> column that is not <code>BINARY</code> but may contain characters &#60;
ASCII(32), then you should do <code>ALTER TABLE</code> or <code>OPTIMIZE</code> table on
it to <strong>regenerate the index, after upgrading to MySQL 4.1.3 or later</strong>.

<LI>

<code>OPTIMIZE TABLE</code> for <code>InnoDB</code> tables is now mapped to <code>ALTER
TABLE</code> rather than to <code>ANALYZE TABLE</code>.

<LI>

Added an interface for storing the binlog offset in the InnoDB log and
flushing the log.
</UL>

<P>
Bugs fixed:

</P>

<UL>

<LI>

The <strong>critical bug in 4.1.2</strong> (crash recovery skipping all <tt>`.ibd'</tt>
files if you specify <code>innodb_file_per_table</code> on Unix) has been fixed.
The bug was a combination of two bugs.  Crash recovery ignored the files,
because the attempt to lock them in the wrong mode failed.  From now on,
locks will only be obtained for regular files opened in read/write mode,
and crash recovery will stop if an <tt>`.ibd'</tt> file for a table exists
in a database directory but is unaccessible.

<LI>

Do not remember the original <code>select_lock_type</code> inside <code>LOCK TABLES</code>.
(Bug #4047)

<LI>

The special meaning of the table names <code>innodb_monitor</code>,
<code>innodb_lock_monitor</code>, <code>innodb_tablespace_monitor</code>,
<code>innodb_table_monitor</code>, and <code>innodb_validate</code> in
<code>CREATE TABLE</code> and <code>DROP TABLE</code> statements was accidentally
removed in MySQL/InnoDB-4.1.2.  The diagnostic functions attached
to these special table names (see section <A HREF="manual_InnoDB.html#InnoDB_Monitor">15.12.1  <code>SHOW INNODB STATUS</code> and the <code>InnoDB</code> Monitors</A>) are accessible
again in MySQL/InnoDB-4.1.3.

<LI>

When the private SQL parser of InnoDB was modified in
MySQL/InnoDB-4.0.19 in order to allow the use of the apostrophe (<samp>`''</samp>)
in table and column names, the fix relied on a previously unused function
<code>mem_realloc()</code>, whose implementation was incorrect.  As a
result, InnoDB can incorrectly parse column and table names as the
empty string.  The InnoDB <code>realloc()</code> implementation has been
corrected in MySQL/InnoDB-4.1.3.

<LI>

In a clean-up of MySQL/InnoDB-4.1.2, the code for invalidating the
query cache was broken.  Now the query cache should be correctly
invalidated for tables affected by <code>ON UPDATE CASCADE</code> or
<code>ON DELETE CASCADE</code> constraints.

<LI>

Fixed a bug: in <code>LIKE 'abc%'</code>, the <code>'%'</code> did not match
the empty string if the character set was not
<code>latin1_swedish_ci</code>. This bug was fixed by changing the sorting
order in these character sets. See the above note about data conversion
in 4.1.3.

</UL>



<H3><A NAME="InnoDB_news-4.1.2" HREF="manual_toc.html#InnoDB_news-4.1.2">D.9.4  MySQL/InnoDB-4.1.2, May 30, 2004</A></H3>

<P>
<strong>NOTE</strong>: CRITICAL BUG in 4.1.2 if you specify
<code>innodb_file_per_table</code> in <tt>`my.cnf'</tt> on Unix. In crash recovery
InnoDB will skip the crash recovery for all <tt>`.ibd'</tt> files and those
tables become CORRUPT! The symptom is a message <code>Unable to lock ...ibd
with lock 1, error: 9: fcntl: Bad file descriptor</code> in the <tt>`.err'</tt>
log in crash recovery.

</P>
<P>
Functionality added or changed:

</P>

<UL>
<LI>

Support multiple character sets.  Note that tables created in other
collations than <code>latin1_swedish_ci</code> cannot be accessed in
MySQL/InnoDB 4.0.

<LI>

Automatically create a suitable index on a <code>FOREIGN KEY</code>, if the user does
not create one. Removes most of the cases of <code>Error 1005 (errno 150)</code>
in table creation.

<LI>

Do not assert in <tt>`log0log.c'</tt>, line 856 if <code>ib_logfiles</code> are
too small for <code>innodb_thread_concurrency</code>.  Instead, print
instructions how to adjust <tt>`my.cnf'</tt> and call <code>exit(1)</code>.

<LI>

If MySQL tries to <code>SELECT</code> from an InnoDB table without setting
any table locks, print a descriptive error message and assert; some
subquery bugs were of this type.

<LI>

Allow a key part length in InnoDB to be up to 3,500 bytes; this is
needed so that you can create an index on a column with 255 UTF-8
characters.

<LI>

All new features from InnoDB-4.0.17, InnoDB-4.0.18, InnoDB-4.0.19 and InnoDB-4.0.20.
</UL>

<P>
Bugs fixed:

</P>

<UL>
<LI>

If you configure <code>innodb_additional_mem_pool_size</code> so small that InnoDB
memory allocation spills over from it, then every 4 billionth spill may
cause memory corruption. A symptom is a printout like below in the
<tt>`.err'</tt> log.

<PRE>
InnoDB: Error: Mem area size is 0. Possibly a memory overrun of the
InnoDB: previous allocated area!
InnoDB: Apparent memory corruption: mem dump  len 500; hex
</PRE>

<LI>

Improved portability to 64-bit platforms, especially Win64.

<LI>

Fixed an assertion failure when a purge of a table was not possible
because of missing <tt>`.ibd'</tt> file.

<LI>

Fixed a bug: do not retrieve all columns in a table if we only need
the 'ref' of the row (usually, the <code>PRIMARY KEY</code>) to calculate an
<code>ORDER BY</code>. (Bug #1942)

<LI>

On Unix-like systems, obtain an exclusive advisory lock on InnoDB
files, to prevent corruption when multiple instances of MySQL are
running on the same set of data files.  The Windows version of InnoDB
already took a mandatory lock on the files. (Bug #3608)

<LI>

Added a missing space to the output format of <code>SHOW INNODB STATUS</code>;
reported by Jocelyn Fournier.

<LI>

All bugfixes from InnoDB-4.0.17, InnoDB-4.0.18, InnoDB-4.0.19 and InnoDB-4.0.20.
</UL>



<H3><A NAME="InnoDB_news-4.0.20" HREF="manual_toc.html#InnoDB_news-4.0.20">D.9.5  MySQL/InnoDB-4.0.20, May 18, 2004</A></H3>

<P>
Bugs fixed:

</P>

<UL>
<LI>

Apostrophe characters now are recognized by the internal <code>InnoDB</code>
parser and can be used within quoted table and column identifiers in
<code>FOREIGN KEY</code> clauses.

<LI>

Make <code>LOCK TABLE</code> aware of <code>InnoDB</code> row-level locks and
<code>InnoDB</code> aware of locks set with <code>LOCK TABLE</code>. (Bug #3299)

<LI>

Fixed race conditions in <code>SHOW INNODB STATUS</code>. (Bug #3596)
</UL>



<H3><A NAME="InnoDB_news-4.0.19" HREF="manual_toc.html#InnoDB_news-4.0.19">D.9.6  MySQL/InnoDB-4.0.19, May 4, 2004</A></H3>

<P>
Functionality added or changed:

</P>

<UL>
<LI>

Better error message when the server has to crash because the buffer
pool is exhausted by the lock table or the adaptive hash index.

<LI>

Print always the count of pending <code>pread()</code> and <code>pwrite()</code>
calls if there is a long semaphore wait.

<LI>

Improve space utilization when rows of 1,500 to 8,000 bytes are
inserted in the order of the primary key.

<LI>

Remove potential buffer overflow errors by sending diagnostic output to
stderr or files instead of stdout or fixed-size memory buffers.  As a
side effect, the output of <code>SHOW INNODB STATUS</code> will be written
to a file <tt>`<var>&#60;datadir&#62;</var>/innodb.status.<var>&#60;pid&#62;</var>'</tt> every 15
seconds.
</UL>

<P>
Bugs fixed:

</P>

<UL>
<LI>

Fixed a bug: <code>DROP DATABASE</code> did not work if <code>FOREIGN KEY</code>
references were defined within the database. (Bug #3058)

<LI>

Remove unnecessary files, functions and variables.  Many of these were
needed in the standalone version of InnoDB.  Remove debug functions
and variables from non-debug build.

<LI>

Add diagnostic code to analyze an assertion failure in ha_innodb.cc on line
2020 reported by a user. (Bug #2903)

<LI>

Fixed a bug: in a <code>FOREIGN KEY</code>, <code>ON UPDATE CASCADE</code>
was not triggered if the update changed a string to another value
identical in alphabetical ordering, for example, <samp>`abc'</samp> -&#62; <samp>`aBc'</samp>.

<LI>

Protect the reading of the latest foreign key error explanation buffer
with a mutex; in theory, a race condition could cause <code>SHOW
INNODB STATUS</code> print garbage characters after the error info.

<LI>

Fixed a bug: The row count and key cardinality estimate was grossly
too small if each clustered index page only contained one record.

<LI>

Parse <code>CONSTRAINT FOREIGN KEY</code> correctly. (Bug #3332)

<LI>

Fixed a memory corruption bug on Windows.  The bug is present in all
InnoDB versions in Windows, but it depends on how the linker places a
static array in <code>srv0srv.c</code>, whether the bug shows itself. 4
bytes were overwritten with a pointer to a statically allocated
string <samp>`get windows aio return value'</samp>.

<LI>

Fix a glitch reported by Philippe Lewicki on the general mailing list:
do not print a warning to the <tt>`.err'</tt> log if <code>read_key</code> fails
with a lock wait timeout error 146.

<LI>

Allow quotes to be embedded in strings in the private SQL parser of
InnoDB, so that <samp>`''</samp> can be used in InnoDB table and column names.
Display quotes within identifiers properly.

<LI>

Debugging: Allow <code>UNIV_SYNC_DEBUG</code> to be disabled while
<code>UNIV_DEBUG</code> is enabled.

<LI>

Debugging: Handle magic numbers in a more consistent way.
</UL>



<H3><A NAME="InnoDB_news-4.0.18" HREF="manual_toc.html#InnoDB_news-4.0.18">D.9.7  MySQL/InnoDB-4.0.18, February 13, 2004</A></H3>


<UL>
<LI>

Do not allow dropping a table referenced by a <code>FOREIGN KEY</code>
constraint, unless the user does <code>SET FOREIGN_KEY_CHECKS=0</code>.
The error message here is somewhat misleading
``Cannot delete or update a parent row...'', and must be changed in a
future version 4.1.x.
<LI>

Make <code>InnoDB</code> to remember the <code>CONSTRAINT</code> name given by a user for
a <code>FOREIGN KEY</code>.
<LI>

Change the print format of <code>FOREIGN KEY</code> constraints spanning
multiple databases to <code>`<var>db_name</var>`.`<var>tbl_name</var>`</code>. But when
parsing them, we must also accept <code>`<var>db_name</var>.<var>tbl_name</var>`</code>,
because that was the output format in &#60; 4.0.18.
<LI>

An optimization in locking: If <code>AUTOCOMMIT=1</code>, then we do not
need to make a plain <code>SELECT</code> set shared locks even on the
<code>SERIALIZABLE</code> isolation level, because we know that the
transaction is read-only. A read-only transaction can always be
performed on the <code>REPEATABLE READ</code> level, and that does not
endanger the serializability.
<LI>

Implement an automatic downgrade from &#62;= 4.1.1 -&#62; 4.0.18 if the user
has not created tables in <tt>`.ibd'</tt> files or used other 4.1.x
features. <strong>Consult</strong> the manual section on
<strong>multiple tablespaces</strong> carefully if you want to downgrade!
<LI>

Fixed a bug: MySQL should not allow <code>REPLACE</code> to internally
perform an <code>UPDATE</code> if the table is referenced by a
<code>FOREIGN KEY</code>. The MySQL manual states that <code>REPLACE</code> must
resolve a duplicate-key error semantically with
<code>DELETE</code>(s) + <code>INSERT</code>, and not by an <code>UPDATE</code>.
In versions &#60; 4.0.18 and &#60; 4.1.2, MySQL could resolve a duplicate key
conflict in <code>REPLACE</code> by doing an <code>UPDATE</code> on the existing
row, and <code>FOREIGN KEY</code> checks could behave in a semantically
wrong way. (Bug #2418)
<LI>

Fixed a bug: generate <code>FOREIGN KEY</code> constraint identifiers
locally for each table, in the form
<var>db_name/tbl_name_ibfk_number</var>. If the user gives the
constraint name explicitly, then remember it. These changes should
ensure that foreign key id's in a slave are the same as in the master,
and <code>DROP FOREIGN KEY</code> does not break replication. (Bug #2167)
<LI>

Fixed a bug: allow quoting of identifiers in InnoDB's
<code>FOREIGN KEY</code> definitions with a backtick (`) and a double quote
("). You can now use also spaces in table and column names, if you
quote the identifiers. (Bug #1725, Bug #2424)
<LI>

Fixed a bug: <code>FOREIGN KEY ... ON UPDATE/DELETE NO ACTION</code> must
check the foreign key constraint, not ignore it. Since we do not have
deferred constraints in <code>InnoDB</code>, this bugfix makes <code>InnoDB</code> to check
<code>NO ACTION</code> constraints immediately, like it checks
<code>RESTRICT</code> constraints.
<LI>

Fixed a bug: <code>InnoDB</code> crashed in <code>RENAME TABLE</code> if 
<var>db_name.tbl_name</var> is shorter than 5 characters.
(Bug #2689)
<LI>

Fixed a bug: in <code>SHOW TABLE STATUS</code>, <code>InnoDB</code> row count and index
cardinality estimates wrapped around at 512 million in 32-bit
computers. Note that unless MySQL is compiled with the
<code>BIG_TABLES</code> option, they will still wrap around at 4 billion.
<LI>

Fixed a bug: If there was a <code>UNIQUE</code> secondary index, and
<code>NULL</code> values in that unique index, then with the
<code>IS NULL</code> predicate, <code>InnoDB</code> returned only the first matching row,
though there can be many.
This bug was introduced in 4.0.16. (Bug #2483)
</UL>



<H3><A NAME="InnoDB_news-5.0.0" HREF="manual_toc.html#InnoDB_news-5.0.0">D.9.8  MySQL/InnoDB-5.0.0, December 24, 2003</A></H3>


<UL>
<LI>

<strong>Important note:</strong> If you upgrade to MySQL 4.1.1 or higher, it is
difficult to downgrade back to 4.0 or 4.1.0! That is because, for earlier
versions, <code>InnoDB</code> is not aware of multiple tablespaces.
<LI>

<code>InnoDB</code> in 5.0.0 is essentially the same as InnoDB-4.1.1 with the
bugfixes of InnoDB-4.0.17 included.
</UL>



<H3><A NAME="InnoDB_news-4.0.17" HREF="manual_toc.html#InnoDB_news-4.0.17">D.9.9  MySQL/InnoDB-4.0.17, December 17, 2003</A></H3>


<UL>
<LI>

Fixed a bug: If you created a column prefix secondary index and updated it
so that the last characters in the column prefix were spaces, <code>InnoDB</code> would
assert in <tt>`row0upd.c'</tt>, line 713. The same assertion failed if you
updated a column in an ordinary secondary index so that the new value was
alphabetically equivalent, but had a different length. This could happen,
for example, in the UTF8 character set if you updated a letter to its
accented or umlaut form. 
<LI>

Fixed a bug: <code>InnoDB</code> could think that a secondary index record was not
locked though it had been updated to an alphabetically equivalent value,
for example, 'abc' -&#62; 'aBc'. 
<LI>

Fixed a bug: If you updated a secondary index column to an alphabetically
equivalent value, and rolled back your update, <code>InnoDB</code> failed to restore
the field in the secondary index to its original value. 
<LI>

There are still several outstanding non-critical bugs reported in the MySQL
bugs database. Their fixing has been delayed, because resources were
allocated to the 4.1.1 release.
</UL>



<H3><A NAME="InnoDB_news-4.1.1" HREF="manual_toc.html#InnoDB_news-4.1.1">D.9.10  MySQL/InnoDB-4.1.1, December 4, 2003</A></H3>


<UL>
<LI>

<strong>Important note:</strong> If you upgrade to MySQL 4.1.1 or higher, you
cannot downgrade to a version lower than 4.1.1 any more! That is because,
for earlier versions, <code>InnoDB</code> is not aware of multiple tablespaces.
<LI>

Multiple tablespaces now available for <code>InnoDB</code>. You can store each
<code>InnoDB</code>
type table and its indexes into a separate <tt>`.ibd'</tt> file into a
MySQL database directory, into the same directory where the
<tt>`.frm'</tt> file is stored.
<LI>

The MySQL query cache now works for <code>InnoDB</code> tables also if
<code>AUTOCOMMIT=0</code>, or the statements are enclosed inside
<code>BEGIN ... COMMIT</code>. 
<LI>

Reduced <code>InnoDB</code> memory consumption by a few megabytes if one sets the buffer
pool size &#60; 8MB. 
<LI>

You can use raw disk partitions also in Windows. 
</UL>



<H3><A NAME="InnoDB_news-4.0.16" HREF="manual_toc.html#InnoDB_news-4.0.16">D.9.11  MySQL/InnoDB-4.0.16, October 22, 2003</A></H3>


<UL>
<LI>

Fixed a bug: in contrary to what was said in the manual, in a locking
read <code>InnoDB</code> set two record locks if a unique exact match search
condition was used on a multi-column unique key. For a single column
unique key it worked right. 
<LI>

Fixed a bug: If you used the rename trick
<code>#sql... -&#62; rsql...</code> to recover a temporary table, <code>InnoDB</code> asserted in
<code>row_mysql_lock_data_dictionary()</code>.
<LI>

There are several outstanding non-critical bugs reported in the MySQL bugs
database. Their fixing has been delayed, because resources are allocated
to the upcoming 4.1.1 release. 
</UL>



<H3><A NAME="InnoDB_news-3.23.58" HREF="manual_toc.html#InnoDB_news-3.23.58">D.9.12  MySQL/InnoDB-3.23.58, September 15, 2003</A></H3>


<UL>
<LI>

Fixed a bug: <code>InnoDB</code> could make the index page directory corrupt in the
first B-tree page splits after <code>mysqld</code> startup. A symptom would be
an assertion failure in <tt>`page0page.c'</tt>, in function
<code>page_dir_find_slot()</code>.
<LI>

Fixed a bug: <code>InnoDB</code> could in rare cases return an extraneous row if a
rollback, purge, and a <code>SELECT</code> coincided.
<LI>

Fixed a possible hang over the <tt>`btr0sea.c'</tt> latch if
<code>SELECT</code> was used inside <code>LOCK TABLES</code>.
<LI>

Fixed a bug: If a single <code>DELETE</code> statement first managed to delete
some rows and then failed in a <code>FOREIGN KEY</code> error or a
<code>Table is full</code> error, MySQL did not roll back the whole SQL statement
as it should. 
</UL>



<H3><A NAME="InnoDB_news-4.0.15" HREF="manual_toc.html#InnoDB_news-4.0.15">D.9.13  MySQL/InnoDB-4.0.15, September 10, 2003</A></H3>


<UL>
<LI>

Fixed a bug: If you updated a row so that the 8000 byte maximum length
(without <code>BLOB</code> and <code>TEXT</code>) was exceeded, <code>InnoDB</code> simply removed
the record from the clustered index. In a similar insert, <code>InnoDB</code> would
leak reserved file space extents, which would only be freed at the next
<code>mysqld</code> startup. 
<LI>

Fixed a bug: If you used big <code>BLOB</code> values, and your log files were
relatively small, <code>InnoDB</code> could in a big <code>BLOB</code> operation temporarily
write over the log produced after the latest checkpoint. If <code>InnoDB</code>
would crash at that moment, then the crash recovery would fail,
because <code>InnoDB</code> would not be able to scan the log even up to the
latest checkpoint. Starting from this version, <code>InnoDB</code> tries to ensure
the latest checkpoint is young enough. If that is not possible,
<code>InnoDB</code> prints a warning to the <tt>`.err'</tt> log of MySQL and advises
you to make the log files bigger. 
<LI>

Fixed a bug: setting <code>innodb_fast_shutdown=0</code> had no effect. 
<LI>

Fixed a bug introduced in 4.0.13: If a <code>CREATE TABLE</code> ended in a
comment, that could cause a memory overrun. 
<LI>

Fixed a bug: If <code>InnoDB</code> printed <code>Operating system error number .. in
a file operation</code> to the <tt>`.err'</tt> log in Windows, the error number
explanation was wrong. Workaround: look at section 13.2 of
http://www.innodb.com/ibman.php about Windows
error numbers.
<LI>

Fixed a bug: If you created a column prefix
<code>PRIMARY KEY</code> like in <code>t(a CHAR(200), PRIMARY KEY (a(10)))</code>
on a fixed-length <code>CHAR</code> column, <code>InnoDB</code> would crash even in a
simple <code>SELECT</code>. A <code>CHECK TABLE</code> would report the table as
corrupt, also in the case where the created key was not <code>PRIMARY</code>. 
</UL>



<H3><A NAME="InnoDB_news-4.0.14" HREF="manual_toc.html#InnoDB_news-4.0.14">D.9.14  MySQL/InnoDB-4.0.14, July 22, 2003</A></H3>


<UL>
<LI>

<code>InnoDB</code> now supports the <code>SAVEPOINT</code> and <code>ROLLBACK TO SAVEPOINT</code>
SQL statements. See http://www.innodb.com/ibman.php#Savepoints for
the syntax.
<LI>

You can now create column prefix keys like in
<code>CREATE TABLE t (a BLOB, INDEX (a(10)))</code>.
<LI>

You can also use <code>O_DIRECT</code> as the <code>innodb_flush_method</code> on the
latest versions of Linux and FreeBSD. Beware of possible bugs in those
operating systems, though. 
<LI>

Fixed the checksum calculation of data pages. Previously most OS file
system corruption went unnoticed. Note that if you downgrade from
version &#62;= 4.0.14 to an earlier version &#60; 4.0.14 then in the first
startup(s) <code>InnoDB</code> will print warnings: 

<PRE>
InnoDB: Warning: An inconsistent page in the doublewrite buffer
InnoDB: space id 2552202359 page number 8245, 127'th page in dblwr buf.
</PRE>

but that is not dangerous and can be ignored. 
<LI>

Modified the buffer pool replacement algorithm so that it tries to
flush modified pages if there are no replaceable pages in the last
10 % of the LRU list. This can reduce disk I/O if the workload is
a mixture of reads and writes. 
<LI>

The buffer pool checkpoint flush algorithm now tries to flush also
close neighbors of the page at the end of the flush list. This can
speed up database shutdown, and can also speed up disk writes if
<code>InnoDB</code> log files are very small compared to the buffer pool size. 
<LI>

In 4.0.13 we made <code>SHOW INNODB STATUS</code> to print detailed info
on the latest <code>UNIQUE KEY</code> error, but storing that information could
slow down <code>REPLACE</code> significantly. We no longer store or print
the info. 
<LI>

Fixed a bug: <code>SET FOREIGN_KEY_CHECKS=0</code> was not replicated properly
in the MySQL replication. The fix will not be backported to 3.23. 
<LI>

Fixed a bug: the parameter <code>innodb_max_dirty_pages_pct</code> forgot to
take into account the free pages in the buffer pool. This could lead
to excessive flushing even though there were lots of free pages in
the buffer pool. Workaround: <code>SET GLOBAL
innodb_max_dirty_pages_pct = 100</code>.
<LI>

Fixed a bug: If there were big index scans then a file read request
could starve and <code>InnoDB</code> could assert because of a very long semaphore wait. 
<LI>

Fixed a bug: If <code>AUTOCOMMIT=1</code> then inside <code>LOCK TABLES</code> MySQL
failed to do the commit after an updating SQL statement if binary logging was
not on, and for <code>SELECT</code> statements did not commit regardless of binary logging state. 
<LI>

Fixed a bug: <code>InnoDB</code> could make the index page directory corrupt in the
first B-tree page splits after a <code>mysqld</code> startup. A symptom would be an
assertion in page0page.c, in function page_dir_find_slot(). 
<LI>

Fixed a bug: If in a <code>FOREIGN KEY</code> with an <code>UPDATE CASCADE</code>
clause the parent column was of a different internal storage length
than the child column, then a cascaded update would make the column
length wrong in the child table and corrupt the child table. Because
of MySQL's 'silent column specification changes' a fixed-length
<code>CHAR</code> column can change internally to a <code>VARCHAR</code> and cause
this error. 
<LI>

Fixed a bug: If a non-<code>latin1</code> character set was used and if in a
<code>FOREIGN KEY</code> the parent column was of a different internal storage
length than the child column, then all inserts to the child table would
fail in a foreign key error. 
<LI>

Fixed a bug: <code>InnoDB</code> could complain that it cannot find the clustered
index record, or in rare cases return an extraneous row if a rollback,
purge, and a <code>SELECT</code> coincided. 
<LI>

Fixed a possible hang over the btr0sea.c latch if <code>SELECT</code> was used
inside <code>LOCK TABLES</code>. 
<LI>

Fixed a bug: contrary to what the release note of 4.0.13 said, the
group commit still did not work if the MySQL binary logging was on. 
<LI>

Fixed a bug: os_event_wait() did not work properly in Unix, which
might have caused starvation in various log operations. 
<LI>

Fixed a bug: If a single <code>DELETE</code> statement first managed to delete
some rows and then failed in a <code>FOREIGN KEY</code> error or a
<code>Table is full</code> error, MySQL did not roll back the whole SQL statement
as it should, and also wrote the failed statement to the binary log, reporting
there a non-zero error_code. 
<LI>

Fixed a bug: the maximum allowed number of columns in a table is 1000, but
<code>InnoDB</code> did not check that limit in <code>CREATE TABLE</code>, and a subsequent
<code>INSERT</code> or <code>SELECT</code> from that table could cause an assertion. 
</UL>



<H3><A NAME="InnoDB_news-3.23.57" HREF="manual_toc.html#InnoDB_news-3.23.57">D.9.15  MySQL/InnoDB-3.23.57, June 20, 2003</A></H3>


<UL>
<LI>

Changed the default value of <code>innodb_flush_log_at_trx_commit</code> from 0
to 1. If you have not specified it explicitly in your <tt>`my.cnf'</tt>, and
your application runs much slower with this new release, it is because the
value 1 causes a log flush to disk at each transaction commit. 
<LI>

Fixed a bug: <code>InnoDB</code> forgot to call pthread_mutex_destroy() when a table was
dropped. That could cause memory leakage on FreeBSD and other non-Linux
Unixes. 
<LI>

Fixed a bug: MySQL could erroneously return 'Empty set' if <code>InnoDB</code> estimated
an index range size to 0 records though the range was not empty; MySQL also
failed to do the next-key locking in the case of an empty index range. 
<LI>

Fixed a bug: <code>GROUP BY</code> and <code>DISTINCT</code> could treat NULL values
inequal. 
</UL>



<H3><A NAME="InnoDB_news-4.0.13" HREF="manual_toc.html#InnoDB_news-4.0.13">D.9.16  MySQL/InnoDB-4.0.13, May 20, 2003</A></H3>


<UL>
<LI>

<code>InnoDB</code> now supports <code>ALTER TABLE DROP FOREIGN KEY</code>. You have to use
<code>SHOW CREATE TABLE</code> to find the internally generated foreign key ID
when you want to drop a foreign key. 
<LI>

<code>SHOW INNODB STATUS</code> now prints detailed information of the latest
detected <code>FOREIGN KEY</code> and <code>UNIQUE KEY</code> errors. If you do not understand
why <code>InnoDB</code> gives the error 150 from a <code>CREATE TABLE</code>, you can use
this statement to study the reason. 
<LI>

<code>ANALYZE TABLE</code> now works also for <code>InnoDB</code> type tables. It makes 10
random dives to each of the index trees and updates index cardinality
estimates accordingly. Note that because these are only estimates,
repeated runs of <code>ANALYZE TABLE</code> may produce different numbers. MySQL
uses index cardinality estimates only in join optimization. If some
join is not optimized in the right way, you may try using <code>ANALYZE TABLE</code>. 
<LI>

<code>InnoDB</code> group commit capability now works also when MySQL
binary logging is switched on. There have to be &#62; 2 client threads
for the group commit to become active. 
<LI>

Changed the default value of <code>innodb_flush_log_at_trx_commit</code> from
0 to 1. If you have not specified it explicitly in your <tt>`my.cnf'</tt>,
and your application runs much slower with this new release, it
is because the value 1 causes a log flush to disk at each transaction
commit. 
<LI>

Added a new global settable MySQL system variable
<code>innodb_max_dirty_pages_pct</code>. It is an integer in the range 0 - 100.
The default is 90. The main thread in <code>InnoDB</code> tries to flush pages
from the buffer pool so that at most this many percents are not yet
flushed at any time. 
<LI>

If <code>innodb_force_recovery=6</code>, do not let <code>InnoDB</code> do repair of corrupt
pages based on the doublewrite buffer. 
<LI>

<code>InnoDB</code> startup now happens faster because it does not set the
memory in the buffer pool to zero. 
<LI>

Fixed a bug: The <code>InnoDB</code> parser for <code>FOREIGN KEY</code> definitions was
confused by the keywords 'foreign key' inside MySQL comments. 
<LI>

Fixed a bug: If you dropped a table to which there was a <code>FOREIGN
KEY</code> reference, and later created the same table with non-matching
column types, <code>InnoDB</code> could assert in <tt>`dict0load.c'</tt>, in function
<code>dict_load_table()</code>. 
<LI>

Fixed a bug: <code>GROUP BY</code> and <code>DISTINCT</code> could treat <code>NULL</code>
values as not equal.
MySQL also failed to do the next-key locking in the case of an
empty index range. 
<LI>

Fixed a bug: Do not commit the current transaction when a <code>MyISAM</code>
table is updated; this also makes <code>CREATE TABLE</code> not to commit an
<code>InnoDB</code> transaction, even when binary logging is enabled. 
<LI>

Fixed a bug: We did not allow <code>ON DELETE SET NULL</code> to modify the same
table where the delete was made; we can allow it because that cannot
produce infinite loops in cascaded operations. 
<LI>

Fixed a bug: Allow <code>HANDLER PREV</code> and <code>NEXT</code> also after positioning
the cursor with a unique search on the primary key.
<LI>

Fixed a bug: If <code>MIN()</code> or <code>MAX()</code> resulted in a deadlock or a lock
wait timeout, MySQL did not return an error, but returned <code>NULL</code> as the
function value.
<LI>

Fixed a bug: <code>InnoDB</code> forgot to call <code>pthread_mutex_destroy()</code> when
a table was dropped. That could cause memory leakage on FreeBSD
and other non-Linux Unix systems. 
</UL>



<H3><A NAME="InnoDB_news-4.1.0" HREF="manual_toc.html#InnoDB_news-4.1.0">D.9.17  MySQL/InnoDB-4.1.0, April 3, 2003</A></H3>


<UL>
<LI>

<code>InnoDB</code> now supports up to 64GB of buffer pool memory in a
Windows 32-bit Intel computer. This is possible because <code>InnoDB</code>
can use the AWE extension of Windows to address memory over
the 4GB limit of a 32-bit process. A new startup variable
<code>innodb_buffer_pool_awe_mem_mb</code> enables AWE and sets the size
of the buffer pool in megabytes. 
<LI>

Reduced the size of buffer headers and the lock table. <code>InnoDB</code> uses
2 % less memory. 
</UL>



<H3><A NAME="InnoDB_news-3.23.56" HREF="manual_toc.html#InnoDB_news-3.23.56">D.9.18  MySQL/InnoDB-3.23.56, March 17, 2003</A></H3>


<UL>
<LI>

Fixed a major bug in <code>InnoDB</code> query optimization: queries of type
SELECT ... WHERE indexcolumn &#60; x and SELECT ... WHERE
indexcolumn &#62; x could cause a table scan even if the selectivity
would have been very good.
<LI>

Fixed a potential bug if MySQL calls store_lock with TL_IGNORE
in the middle of a query. 
</UL>



<H3><A NAME="InnoDB_news-4.0.12" HREF="manual_toc.html#InnoDB_news-4.0.12">D.9.19  MySQL/InnoDB-4.0.12, March 18, 2003</A></H3>


<UL>
<LI>

In crash recovery <code>InnoDB</code> now prints the progress in percents of a
transaction rollback.
<LI>

Fixed a bug/feature: If your application program used
mysql_use_result(), and used &#62;= 2 connections to send
SQL queries, it could deadlock on the adaptive hash S-latch
in btr0sea.c. Now <code>mysqld</code> releases the S-latch whenever it
passes data from a SELECT to the client. 
<LI>

Fixed a bug: MySQL could erroneously return 'Empty set'
if <code>InnoDB</code> estimated an index range size to 0 records though
the range was not empty; MySQL also failed to do the next-key
locking in the case of an empty index range. 
</UL>



<H3><A NAME="InnoDB_news-4.0.11" HREF="manual_toc.html#InnoDB_news-4.0.11">D.9.20  MySQL/InnoDB-4.0.11, February 25, 2003</A></H3>


<UL>
<LI>

Fixed a bug introduced in 4.0.10: SELECT ... FROM ... ORDER BY ... DESC
could hang in an infinite loop. 
<LI>

An outstanding bug: SET FOREIGN_KEY_CHECKS=0 is not replicated properly
in the MySQL replication.
</UL>



<H3><A NAME="InnoDB_news-4.0.10" HREF="manual_toc.html#InnoDB_news-4.0.10">D.9.21  MySQL/InnoDB-4.0.10, February 4, 2003</A></H3>


<UL>
<LI>

In INSERT INTO t1 SELECT ... FROM t2 WHERE ... MySQL previously
set a table level read lock on t2. This lock is now removed. 
<LI>

Increased SHOW INNODB STATUS maximum printed length to 200KB.
<LI>

Fixed a major bug in <code>InnoDB</code> query optimization: queries of type
SELECT ... WHERE indexcolumn &#60; x and SELECT ... WHERE
indexcolumn &#62; x could cause a table scan even if the
selectivity would have been very good. 
<LI>

Fixed a bug: purge could cause a hang in a BLOB table where the
primary key index tree was of height 1. Symptom: semaphore waits
caused by an X-latch set in btr_free_externally_stored_field(). 
<LI>

Fixed a bug: using <code>InnoDB</code> HANDLER commands on a fresh handle
crashed <code>mysqld</code> in <code>ha_innobase::change_active_index()</code>. 
<LI>

Fixed a bug: If MySQL estimated a query in the middle of a SELECT
statement, <code>InnoDB</code> could hang on the adaptive hash index latch in btr0sea.c. 
<LI>

Fixed a bug: <code>InnoDB</code> could report table corruption and assert
in page_dir_find_owner_slot() if an adaptive hash index search
coincided with purge or an insert. 
<LI>

Fixed a bug: some filesystem snapshot tool in Windows 2000 could
cause an <code>InnoDB</code> file write to fail with error 33 ERROR_LOCK_VIOLATION.
In synchronous writes <code>InnoDB</code> now retries the write 100 times at 1
second intervals. 
<LI>

Fixed a bug: REPLACE INTO t1 SELECT ... did not work if t1 has an
auto-inc column. 
<LI>

An outstanding bug: SET FOREIGN_KEY_CHECKS=0 is not replicated properly
in the MySQL replication.
</UL>



<H3><A NAME="InnoDB_news-3.23.55" HREF="manual_toc.html#InnoDB_news-3.23.55">D.9.22  MySQL/InnoDB-3.23.55, January 24, 2003</A></H3>


<UL>
<LI>

In INSERT INTO t1 SELECT ... FROM t2 WHERE ... MySQL previously set
a table level read lock on t2. This lock is now removed.
<LI>

Fixed a bug: If the combined size of <code>InnoDB</code> log files was &#62;= 2GB 
in a 32-bit computer, <code>InnoDB</code> would write log in a wrong
position. That could make crash recovery and <code>InnoDB Hot Backup</code>
to fail in log scan. 
<LI>

Fixed a bug: index cursor restoration could theoretically fail. 
<LI>

Fixed a bug: an assertion in btr0sea.c, in function
btr_search_info_update_slow could theoretically fail in a race of 3 threads. 
<LI>

Fixed a bug: purge could cause a hang in a BLOB table where the
primary key index tree was of height 1. Symptom: semaphore waits
caused by an X-latch set in btr_free_externally_stored_field(). 
<LI>

Fixed a bug: If MySQL estimated a query in the middle of a SELECT statement,
<code>InnoDB</code> could hang on the adaptive hash index latch in btr0sea.c. 
<LI>

Fixed a bug: <code>InnoDB</code> could report table corruption and assert in
page_dir_find_owner_slot() if an adaptive hash index search
coincided with purge or an insert. 
<LI>

Fixed a bug: some filesystem snapshot tool in Windows 2000 could
cause an <code>InnoDB</code> file write to fail with error 33 ERROR_LOCK_VIOLATION.
In synchronous writes <code>InnoDB</code> now retries the write 100 times
at 1 second intervals. 
<LI>

An outstanding bug: SET FOREIGN_KEY_CHECKS=0 is not replicated properly
in the MySQL replication. The fix will appear in 4.0.11 and will probably
not be backported to 3.23.
<LI>

Fixed bug in <code>InnoDB</code> <tt>`page0cur.c'</tt> file in function page_cur_search_with_match
which caused <code>InnoDB</code> to remain on the same page forever.
This bug is evident only in tables with more than one page.
</UL>



<H3><A NAME="InnoDB_news-4.0.9" HREF="manual_toc.html#InnoDB_news-4.0.9">D.9.23  MySQL/InnoDB-4.0.9, January 14, 2003</A></H3>


<UL>
<LI>

Removed the warning message: 'InnoDB: Out of memory in additional memory pool.'
<LI>

Fixed a bug: If the combined size of <code>InnoDB</code> log files was &#62;= 2GB in a
32-bit computer, <code>InnoDB</code> would write log in a wrong position. That could
make crash recovery and <code>InnoDB Hot Backup</code> to fail. 
<LI>

Fixed a bug: index cursor restoration could theoretically fail. 
</UL>



<H3><A NAME="InnoDB_news-4.0.8" HREF="manual_toc.html#InnoDB_news-4.0.8">D.9.24  MySQL/InnoDB-4.0.8, January 7, 2003</A></H3>


<UL>
<LI>

<code>InnoDB</code> now supports also FOREIGN KEY (...) REFERENCES ...(...)
[ON UPDATE CASCADE | ON UPDATE SET NULL | ON UPDATE RESTRICT
| ON UPDATE NO ACTION]. 
<LI>

Tables and indexes now reserve 4 % less space in the tablespace.
Also existing tables reserve less space. By upgrading to 4.0.8
you will see more free space in "InnoDB free" in SHOW TABLE STATUS. 
<LI>

Fixed bugs: updating the PRIMARY KEY of a row would generate a
foreign key error on all FOREIGN KEYs which referenced secondary
keys of the row to be updated. Also, if a referencing
FOREIGN KEY constraint only referenced the first columns in an
index, and there were more columns in that index, updating the
additional columns generated a foreign key error. 
<LI>

Fixed a bug: If an index contains some column twice, and that
column is updated, the table will become corrupt. From now on
<code>InnoDB</code> prevents creation of such indexes. 
<LI>

Fixed a bug: removed superfluous error 149 and 150 printouts
from the .err log when a locking SELECT caused a deadlock or a
lock wait timeout.
<LI>

Fixed a bug: an assertion in btr0sea.c, in function
btr_search_info_update_slow could theoretically fail in a race of 3 threads. 
<LI>

Fixed a bug: one could not switch a session transaction isolation
level back to REPEATABLE READ after setting it to something else.
</UL>



<H3><A NAME="InnoDB_news-4.0.7" HREF="manual_toc.html#InnoDB_news-4.0.7">D.9.25  MySQL/InnoDB-4.0.7, December 26, 2002</A></H3>


<UL>
<LI>

<code>InnoDB</code> in 4.0.7 is essentially the same as in 4.0.6.
</UL>



<H3><A NAME="InnoDB_news-4.0.6" HREF="manual_toc.html#InnoDB_news-4.0.6">D.9.26  MySQL/InnoDB-4.0.6, December 19, 2002</A></H3>


<UL>
<LI>

Since innodb_log_arch_dir has no relevance under MySQL,
there is no need to specify it any more in my.cnf. 
<LI>

LOAD DATA INFILE in AUTOCOMMIT=1 mode no longer does
implicit commits for each 1MB of written binary log. 
<LI>

Fixed a bug introduced in 4.0.4: LOCK TABLES ... READ LOCAL
should not set row locks on the rows read. This caused
deadlocks and lock wait timeouts in mysqldump. 
<LI>

Fixed two bugs introduced in 4.0.4: in AUTO_INCREMENT,
REPLACE could cause the counter to be left 1 too low.
A deadlock or a lock wait timeout could cause the same problem. 
<LI>

Fixed a bug: TRUNCATE on a TEMPORARY table crashed <code>InnoDB</code>. 
<LI>

Fixed a bug introduced in 4.0.5: If binary logging was not switched on,
INSERT INTO ... SELECT ... or CREATE TABLE ... SELECT ... could
cause <code>InnoDB</code> to hang on a semaphore created in btr0sea.c, line 128.
Workaround: switch binary logging on. 
<LI>

Fixed a bug: in replication issuing SLAVE STOP in the middle of
a multiple-statement transaction could cause that SLAVE START would
only perform a part of the transaction. A similar error could occur
if the slave crashed and was restarted.
</UL>



<H3><A NAME="InnoDB_news-3.23.54" HREF="manual_toc.html#InnoDB_news-3.23.54">D.9.27  MySQL/InnoDB-3.23.54, December 12, 2002</A></H3>


<UL>
<LI>

Fixed a bug: the <code>InnoDB</code> range estimator greatly exaggerated
the size of a short index range if the paths to the endpoints of
the range in the index tree happened to branch already in the root.
This could cause unnecessary table scans in SQL queries. 
<LI>

Fixed a bug: ORDER BY could fail if you had not created a
primary key to a table, but had defined several indexes
of which at least one was a UNIQUE index with all its
columns declared as NOT NULL. 
<LI>

Fixed a bug: a lock wait timeout in connection with
ON DELETE CASCADE could cause corruption in indexes. 
<LI>

Fixed a bug: If a SELECT was done with a unique key
from a primary index, and the search matched to a
delete-marked record, <code>InnoDB</code> could erroneously return the NEXT record. 
<LI>

Fixed a bug introduced in 3.23.53: LOCK TABLES ... READ LOCAL
should not set row locks on the rows read. This caused deadlocks
and lock wait timeouts in mysqldump. 
<LI>

Fixed a bug: If an index contains some column twice, and that
column is updated, the table will become corrupt. From now on
<code>InnoDB</code> prevents creation of such indexes. 
</UL>



<H3><A NAME="InnoDB_news-4.0.5" HREF="manual_toc.html#InnoDB_news-4.0.5">D.9.28  MySQL/InnoDB-4.0.5, November 18, 2002</A></H3>


<UL>
<LI>

<code>InnoDB</code> now supports also transaction isolation levels READ COMMITTED
and READ UNCOMMITTED. READ COMMITTED more closely emulates Oracle
and makes porting of applications from Oracle to MySQL easier. 
<LI>

Deadlock resolution is now selective: we try to pick as victims
transactions with less modified or inserted rows. 
<LI>

FOREIGN KEY definitions are now aware of the
lower_case_table_names setting in my.cnf. 
<LI>

SHOW CREATE TABLE does not output the database name
to a FOREIGN KEY definition if the referred table is
in the same database as the table. 
<LI>

<code>InnoDB</code> does a consistency check to most index pages
before writing them to a data file. 
<LI>

If you set <code>innodb_force_recovery</code> &#62; 0, <code>InnoDB</code> tries to
jump over corrupt index records and pages when doing
SELECT * FROM table. This helps in dumping. 
<LI>

<code>InnoDB</code> now again uses asynchronous unbuffered I/O in
Windows 2000 and XP; only unbuffered simulated async
I/O in NT, 95/98/ME. 
<LI>

Fixed a bug: the <code>InnoDB</code> range estimator greatly exaggerated
the size of a short index range if the paths to the
endpoints of the range in the index tree happened
to branch already in the root. This could cause
unnecessary table scans in SQL queries.
The fix will also be backported to 3.23.54. 
<LI>

Fixed a bug present in 3.23.52, 4.0.3, 4.0.4:
<code>InnoDB</code> startup could take very long or even
crash on some Windows 95/98/ME computers. 
<LI>

Fixed a bug: the AUTO-INC lock was held to the end
of the transaction if it was granted after a
lock wait. This could cause unnecessary deadlocks. 
<LI>

Fixed a bug: If SHOW INNODB STATUS, innodb_monitor,
or innodb_lock_monitor had to print several hundred
transactions in one report, and the output became
truncated, <code>InnoDB</code> would hang, printing to the error
log many waits for a mutex created at srv0srv.c, line 1621. 
<LI>

Fixed a bug: SHOW INNODB STATUS on Unix always
reported average file read size as 0 bytes. 
<LI>

Fixed a potential bug in 4.0.4: <code>InnoDB</code> now
does ORDER BY ... DESC like <code>MyISAM</code>. 
<LI>

Fixed a bug: DROP TABLE could cause crash or a
hang if there was a rollback concurrently running
on the table. The fix will be backported to 3.23
only if this appears a real problem for users. 
<LI>

Fixed a bug: ORDER BY could fail if you had not
created a primary key to a table, but had defined
several indexes of which at least one was a UNIQUE
index with all its columns declared as NOT NULL. 
<LI>

Fixed a bug: a lock wait timeout in connection
with ON DELETE CASCADE could cause corruption in indexes. 
<LI>

Fixed a bug: If a SELECT was done with a unique
key from a primary index, and the search matched
to a delete-marked record, <code>InnoDB</code> could return the NEXT record. 
<LI>

Outstanding bugs: in 4.0.4 two bugs were introduced
to AUTO_INCREMENT. REPLACE can cause the counter to
be left 1 too low. A deadlock or a lock wait timeout
can cause the same problem. These will be fixed in 4.0.6.
</UL>



<H3><A NAME="InnoDB_news-3.23.53" HREF="manual_toc.html#InnoDB_news-3.23.53">D.9.29  MySQL/InnoDB-3.23.53, October 9, 2002</A></H3>


<UL>
<LI>

We again use unbuffered disk I/O to data files in Windows.
Windows XP and Windows 2000 read performance seems to be
very poor with normal I/O. 
<LI>

Tuned range estimator so that index range scans are
preferred over full index scans. 
<LI>

Allow dropping and creating a table even if
innodb_force_recovery is set. One can use this to
drop a table which would cause a crash in rollback
or purge, or if a failed table import causes a runaway rollback in recovery. 
<LI>

Fixed a bug present in 3.23.52, 4.0.3, 4.0.4: <code>InnoDB</code> startup
could take very long or even crash on some Windows 95/98/ME computers. 
<LI>

Fixed a bug: fast shutdown (which is the default)
sometimes was slowed down by purge and insert buffer merge. 
<LI>

Fixed a bug: doing a big SELECT from a table where no
rows were visible in a consistent read could cause a
very long (&#62; 600 seconds) semaphore wait in btr0cur.c line 310. 
<LI>

Fixed a bug: the AUTO-INC lock was held to the end of
the transaction if it was granted after a lock wait.
This could cause unnecessary deadlocks. 
<LI>

Fixed a bug: If you created a temporary table
inside LOCK TABLES, and used that temporary table,
that caused an assertion failure in ha_innobase.cc. 
<LI>

Fixed a bug: If SHOW INNODB STATUS, innodb_monitor,
or innodb_lock_monitor had to print several hundred
transactions in one report, and the output became
truncated, <code>InnoDB</code> would hang, printing to the error
log many waits for a mutex created at srv0srv.c, line 1621. 
<LI>

Fixed a bug: SHOW INNODB STATUS on Unix always
reported average file read size as 0 bytes.
</UL>



<H3><A NAME="InnoDB_news-4.0.4" HREF="manual_toc.html#InnoDB_news-4.0.4">D.9.30  MySQL/InnoDB-4.0.4, October 2, 2002</A></H3>


<UL>
<LI>

We again use unbuffered disk I/O in Windows. Windows XP and Windows 2000
read performance seems to be very poor with normal I/O.
<LI>

Increased the maximum key length of <code>InnoDB</code> tables from 500 to 1024 bytes.
<LI>

Increased the table comment field in SHOW TABLE STATUS so that
up to 16000 characters of foreign key definitions can be printed there.
<LI>

The auto-increment counter is no longer incremented if
an insert of a row immediately fails in an error.
<LI>

Allow dropping and creating a table even if
innodb_force_recovery is set. One can use this to drop
a table which would cause a crash in rollback or purge,
or if a failed table import causes a runaway rollback in recovery.
<LI>

Fixed a bug: Using ORDER BY primarykey DESC in 4.0.3 causes
an assertion failure in btr0pcur.c, line 203.
<LI>

Fixed a bug: fast shutdown (which is the default) sometimes
was slowed down by purge and insert buffer merge.
<LI>

Fixed a bug: doing a big SELECT from a table where
no rows were visible in a consistent read could cause
a very long (&#62; 600 seconds) semaphore wait in btr0cur.c line 310.
<LI>

Fixed a bug: If the MySQL query cache was used, it did not get
invalidated by a modification done by ON DELETE CASCADE or ...SET NULL.
<LI>

Fixed a bug: If you created a temporary table inside LOCK TABLES,
and used that temporary table, that caused an assertion failure
in ha_innodb.cc.
<LI>

Fixed a bug: If you set innodb_flush_log_at_trx_commit to 1, SHOW
VARIABLES would show its value as 16 million.
</UL>



<H3><A NAME="InnoDB_news-4.0.3" HREF="manual_toc.html#InnoDB_news-4.0.3">D.9.31  MySQL/InnoDB-4.0.3, August 28, 2002</A></H3>


<UL>
<LI>

Removed unnecessary deadlocks when inserts have to wait for
a locking read, update, or delete to release its next-key lock.
<LI>

The MySQL <code>HANDLER</code> SQL commands now work also for <code>InnoDB</code>
type tables. <code>InnoDB</code> does the <code>HANDLER</code> reads always as
consistent reads. <code>HANDLER</code> is a direct access path to read
individual indexes of tables. In some cases, <code>HANDLER</code> can be
used as a substitute of server-side cursors.
<LI>

Fixed a bug in 4.0.2: even a simple insert could crash the
AIX version.
<LI>

Fixed a bug: If you used in a table name characters whose code is &#62; 127,
in DROP TABLE <code>InnoDB</code> could assert on line 155 of pars0sym.c.
<LI>

Compilation from source now provides a working version both on
HP-UX-11 and HP-UX-10.20. The source of 4.0.2 worked only on 11,
and the source of 3.23.52 only on 10.20.
<LI>

Fixed a bug: If compiled on 64-bit Solaris, <code>InnoDB</code> produced a bus error
at startup.
</UL>



<H3><A NAME="InnoDB_news-3.23.52" HREF="manual_toc.html#InnoDB_news-3.23.52">D.9.32  MySQL/InnoDB-3.23.52, August 16, 2002</A></H3>


<UL>
<LI>

The feature set of 3.23 will be frozen from this version on. New features
will go the 4.0 branch, and only bugfixes will be made to the 3.23
branch.
<LI>

Many CPU-bound join queries now run faster. On Windows also many
other CPU-bound queries run faster.
<LI>

A new SQL command SHOW INNODB STATUS returns the output of the
<code>InnoDB</code> Monitor to the client. The <code>InnoDB</code> Monitor now prints detailed
information on
the latest detected deadlock.
<LI>

<code>InnoDB</code> made the SQL query optimizer to avoid too much index-only
range scans and choose full table scans instead. This is now fixed.
<LI>

<code>BEGIN</code> and <code>COMMIT</code> are now added in the binary log around transactions.
The MySQL replication now respects transaction borders:
a user will no longer see half transactions in replication slaves.
<LI>

A replication slave now prints in crash recovery the last
master binary log position it was able to recover to.
<LI>

A new setting <code>innodb_flush_log_at_trx_commit=2</code> makes <code>InnoDB</code> to write
the log to the operating system file cache at each commit. This is
almost as fast as the setting innodb_flush_log_at_trx_commit=0, and
the setting 2 also has the nice feature that in a crash where the
operating system does not crash, no committed transaction is lost.
If the operating system crashes or there is a power outage, then
the setting 2 is no safer than the setting 0.
<LI>

Added checksum fields to log blocks.
<LI>

SET FOREIGN_KEY_CHECKS=0 helps in importing tables
in an arbitrary order which does not respect the foreign key rules.
<LI>

SET UNIQUE_CHECKS=0 speeds up table imports into <code>InnoDB</code>
if you have UNIQUE constraints on secondary indexes.
This flag should be used only if you are certain that the input records
contain no UNIQUE constraint violations.
<LI>

SHOW TABLE STATUS now lists also possible ON DELETE CASCADE or
ON DELETE SET NULL in the comment field of the table.
<LI>

When CHECK TABLE is run on any <code>InnoDB</code> type table, it now
checks also the adaptive hash index for all tables.
<LI>

If you defined ON DELETE CASCADE or SET NULL and updated the
referenced key in the parent row, <code>InnoDB</code> deleted or updated
the child row. This is now changed to conform to standard SQL: you get
the error 'Cannot delete parent row'.
<LI>

Improved the auto-increment algorithm: now the first insert or
SHOW TABLE STATUS initializes the auto-increment counter for the table.
This removes almost all surprising deadlocks caused by
SHOW TABLE STATUS.
<LI>

Aligned some buffers used in reading and writing to data files.
This allows using unbuffered raw devices as data files in Linux.
<LI>

Fixed a bug: If you updated the primary key of a table so that only the
case of characters changed, that could cause assertion
failures, mostly in page0page.ic line 515.
<LI>

Fixed a bug: If you delete or update a row referenced in a foreign key
constraint and the foreign key check has to wait for a lock,
then the check may report an erroneous result. This
affects also the ON DELETE... operation.
<LI>

Fixed a bug: A deadlock or a lock wait timeout error in <code>InnoDB</code>
causes <code>InnoDB</code> to roll back the whole transaction, but MySQL could still
write the earlier SQL statements to the binary log, even though
<code>InnoDB</code> rolled them back. This could, for example, cause replicated
databases to get out-of-sync.
<LI>

Fixed a bug: If the database happened to crash in the middle of a
commit, then the recovery might leak tablespace pages.
<LI>

Fixed a bug: If you specified a non-latin1 character set in my.cnf,
then, in contrary to what is stated in the manual, in a foreign key
constraint a string type column had to have the same length specification
in the referencing table and the referenced table.
<LI>

Fixed a bug: DROP TABLE or DROP DATABASE could fail if there
simultaneously was a CREATE TABLE running.
<LI>

Fixed a bug: If you configured the buffer pool bigger than 2GB in
a 32-bit computer, <code>InnoDB</code> would assert in buf0buf.ic line 214.
<LI>

Fixed a bug: on 64-bit computers updating rows which contained the
SQL NULL in some column could cause the undo log and the ordinary
log to become corrupt.
<LI>

Fixed a bug: innodb_log_monitor caused a hang if it suppressed
lock prints for a page.
<LI>

Fixed a bug: in the HP-UX-10.20 version mutexes would leak and cause
race conditions and crashes in any part of <code>InnoDB</code> code.
<LI>

Fixed a bug: If you ran in the AUTOCOMMIT mode, executed a SELECT,
and immediately after that a RENAME TABLE, then RENAME would fail and
MySQL would complain about error 1192.
<LI>

Fixed a bug: If compiled on 64-bit Solaris, <code>InnoDB</code> produced a bus error
at startup.
</UL>



<H3><A NAME="InnoDB_news-4.0.2" HREF="manual_toc.html#InnoDB_news-4.0.2">D.9.33  MySQL/InnoDB-4.0.2, July 10, 2002</A></H3>


<UL>
<LI>

<code>InnoDB</code> is essentially the same as InnoDB-3.23.51.
<LI>

If no innodb_data_file_path is specified, <code>InnoDB</code> at the database creation
now creates a 10MB auto-extending data file ibdata1 to the datadir
of MySQL. In 4.0.1 the file was 64MB and not auto-extending.
</UL>



<H3><A NAME="InnoDB_news-3.23.51" HREF="manual_toc.html#InnoDB_news-3.23.51">D.9.34  MySQL/InnoDB-3.23.51, June 12, 2002</A></H3>


<UL>
<LI>

Fixed a bug: a join could result in a seg fault in copying of a BLOB or
TEXT column if some of the BLOB or TEXT columns in the table contained
SQL NULL values.
<LI>

Fixed a bug: If you added self-referential foreign key constraints with
ON DELETE CASCADE to tables and a row deletion caused <code>InnoDB</code>
to attempt the deletion of the same row twice because of
a cascading delete, then you got an assertion failure.
<LI>

Fixed a bug: If you use MySQL 'user level locks' and close
a connection, then <code>InnoDB</code> may assert in ha_innobase.cc, line 302.
</UL>



<H3><A NAME="InnoDB_news-3.23.50" HREF="manual_toc.html#InnoDB_news-3.23.50">D.9.35  MySQL/InnoDB-3.23.50, April 23, 2002</A></H3>


<UL>
<LI>

<code>InnoDB</code> now supports an auto-extending last data file. You do not need
to preallocate the whole data file at the database startup.
<LI>

Made several changes to facilitate the use of the <code>InnoDB Hot Backup</code>
tool. It is a separate non-free tool you can use to take online backups
of your database without shutting down the server or setting
any locks.
<LI>

If you want to run the <code>InnoDB Hot Backup</code> tool on an auto-extending
data file you have to upgrade it to version ibbackup-0.35.
<LI>

The log scan phase in crash recovery will now run much faster.
<LI>

Starting from this server version, the hot backup tool
truncates unused ends in the backup <code>InnoDB</code> data files.
<LI>

To allow the hot backup tool to work, on Windows we no longer use
unbuffered I/O or native async I/O; instead we use the same simulated
async I/O as on Unix.
<LI>

You can now define the ON DELETE CASCADE or ON DELETE SET NULL
clause on foreign keys.
<LI>

FOREIGN KEY constraints now survive ALTER TABLE and CREATE
INDEX.
<LI>

We suppress the FOREIGN KEY check if any of the column values in the
foreign key or referenced key to be checked is the SQL NULL. This
is compatible with Oracle, for example.
<LI>

SHOW CREATE TABLE now lists also foreign key constraints. Also
mysqldump no longer forgets about foreign keys in table definitions.
<LI>

You can now add a new foreign key constraint with
ALTER TABLE ... ADD CONSTRAINT FOREIGN KEY (...) REFERENCES ... (...).
<LI>

FOREIGN KEY definitions now allow backticks around table and
column names.
<LI>

MySQL command
SET TRANSACTION ISOLATION LEVEL ...
has now the following effect on
<code>InnoDB</code> tables: If a transaction is defined as SERIALIZABLE
then <code>InnoDB</code> conceptually adds LOCK IN SHARE MODE
to all consistent reads. If a transaction is defined to have any other
isolation level, then <code>InnoDB</code> obeys its default locking strategy
which is REPEATABLE READ.
<LI>

SHOW TABLE STATUS no longer sets an x-lock at the end of an
auto-increment index if the auto-increment counter has already
been initialized. This removes in almost all cases the surprising deadlocks
caused by SHOW TABLE STATUS.
<LI>

Fixed a bug: in a CREATE TABLE statement the string 'foreign'
followed by a non-space character confused the FOREIGN KEY parser
and caused table creation to fail with errno 150.
</UL>



<H3><A NAME="InnoDB_news-3.23.49" HREF="manual_toc.html#InnoDB_news-3.23.49">D.9.36  MySQL/InnoDB-3.23.49, February 17, 2002</A></H3>


<UL>
<LI>

Fixed a bug: If you called DROP DATABASE for a database on which
there simultaneously were running queries, the MySQL server could crash
or hang. Crashes fixed, but a full fix has to wait some changes
in the MySQL layer of code.
<LI>

Fixed a bug: on Windows one had to put the database name
in lowercase for <code>DROP
DATABASE</code> to work. Fixed in 3.23.49: case no longer matters
on Windows. On Unix, the database name remains case sensitive.
<LI>

Fixed a bug: If one defined a non-latin1 character set as
the default character set,
then definition of foreign key constraints could fail
in an assertion failure
in dict0crea.c, reporting an internal error 17.
</UL>



<H3><A NAME="InnoDB_news-3.23.48" HREF="manual_toc.html#InnoDB_news-3.23.48">D.9.37  MySQL/InnoDB-3.23.48, February 9, 2002</A></H3>


<UL>
<LI>

Tuned the SQL optimizer to favor more often index searches
over table scans.
<LI>

Fixed a performance problem when several large SELECT
queries are run concurrently on a multiprocessor Linux computer.
Large CPU-bound SELECT queries will now also generally run faster on
all platforms.
<LI>

If MySQL binary logging is used,
<code>InnoDB</code> now prints after crash recovery the latest MySQL binary log
file name and the position in that file (= byte offset)
<code>InnoDB</code> was able to recover to. This is useful, for example,
when resynchronizing a master and a slave database in replication.
<LI>

Added better error messages to help in installation problems.
<LI>

One can now recover also MySQL temporary tables which have become
orphaned inside the <code>InnoDB</code> tablespace.
<LI>

<code>InnoDB</code> now prevents a FOREIGN KEY declaration where the signedness
is not the same in the referencing and referenced integer columns.
<LI>

Fixed a bug: calling SHOW CREATE TABLE or SHOW TABLE STATUS
could cause memory corruption and make <code>mysqld</code> to crash.
Especially at risk was mysqldump, because it calls frequently
SHOW CREATE TABLE.
<LI>

Fixed a bug: If on Unix you did an ALTER TABLE to an <code>InnoDB</code> table and
simultaneously did queries to it, <code>mysqld</code> could crash with an assertion
failure in row0row.c, line 474.
<LI>

Fixed a bug: If inserts to several tables containing an auto-inc column
were wrapped inside one LOCK TABLES, <code>InnoDB</code> asserted in lock0lock.c.
<LI>

In 3.23.47 we allowed several NULLS in a UNIQUE secondary index.
But CHECK TABLE was not relaxed: it reports the table as corrupt.
CHECK TABLE no longer complains in this situation.
<LI>

Fixed a bug: on Sparc and other high-endian processors SHOW VARIABLES
showed innodb_flush_log_at_trx_commit and other boolean-valued
startup parameters always OFF even if they were switched on. 
<LI>

Fixed a bug: If you ran mysqld-max-nt as a service on Windows NT/2000,
the service shutdown did not always wait long enough for the <code>InnoDB</code> shutdown
to finish.
</UL>



<H3><A NAME="InnoDB_news-3.23.47" HREF="manual_toc.html#InnoDB_news-3.23.47">D.9.38  MySQL/InnoDB-3.23.47, December 28, 2001</A></H3>


<UL>
<LI>

Recovery happens now faster, especially in a lightly loaded system,
because background checkpointing has been made more frequent.
<LI>

<code>InnoDB</code> allows now several similar key values in a UNIQUE secondary index
if those values contain SQL NULLs. Thus the convention is now the same as in
<code>MyISAM</code> tables.
<LI>

<code>InnoDB</code> gives a better row count estimate for a table which contains BLOBs.
<LI>

In a FOREIGN KEY constraint <code>InnoDB</code> is now case-insensitive to column
names, and in Windows also to table names.
<LI>

<code>InnoDB</code> allows a FOREIGN KEY column of CHAR type to refer to a column of
VARCHAR type, and vice versa. MySQL silently changes the type of some
columns between CHAR and VARCHAR, and these silent changes do not hinder
FOREIGN KEY declaration any more.
<LI>

Recovery has been made more resilient to corruption of log files.
<LI>

Unnecessary statistics calculation has been removed from queries which
generate a temporary table. Some ORDER BY and DISTINCT queries will now run
much faster.
<LI>

MySQL now knows that the table scan of an <code>InnoDB</code> table is done through the
primary key. This will save a sort in some ORDER BY queries.
<LI>

The maximum key length of <code>InnoDB</code> tables is again restricted to 500 bytes.
The MySQL interpreter is not able to handle longer keys.
<LI>

The default value of innodb_lock_wait_timeout was changed from infinite to
50 seconds, the default value of innodb_file_io_threads from 9
to 4.
</UL>



<H3><A NAME="InnoDB_news-4.0.1" HREF="manual_toc.html#InnoDB_news-4.0.1">D.9.39  MySQL/InnoDB-4.0.1, December 23, 2001</A></H3>


<UL>
<LI>

<code>InnoDB</code> is the same as in 3.23.47.
<LI>

In 4.0.0 the MySQL interpreter did not know the syntax LOCK IN
SHARE MODE. This has been fixed.
<LI>

In 4.0.0 multiple-table delete did not work for transactional tables.
This has been fixed.
</UL>



<H3><A NAME="InnoDB_news-3.23.46" HREF="manual_toc.html#InnoDB_news-3.23.46">D.9.40  MySQL/InnoDB-3.23.46, November 30, 2001</A></H3>


<UL>
<LI>

This is the same as 3.23.45.
</UL>



<H3><A NAME="InnoDB_news-3.23.45" HREF="manual_toc.html#InnoDB_news-3.23.45">D.9.41  MySQL/InnoDB-3.23.45, November 23, 2001</A></H3>


<UL>
<LI>

This is a bugfix release.
<LI>

In versions 3.23.42-.44 when creating a table on Windows, you
have to use lowercase letters in the database name to be able to
access the table. Fixed in 3.23.45.
<LI>

<code>InnoDB</code> now flushes stdout and stderr every 10 seconds: If these
are redirected to files, the file contents can be better viewed with
an editor.
<LI>

Fixed an assertion failure in .44, in trx0trx.c, line 178
when you drop a table which has
the .frm file but does not exist inside <code>InnoDB</code>.
<LI>

Fixed a bug in the insert buffer.
The insert buffer tree could get into an inconsistent state, causing a crash,
and also crashing the recovery. This bug could appear especially in
large table imports or alterations.
<LI>

Fixed a bug in recovery: <code>InnoDB</code> could go into an infinite loop
constantly printing
a warning message that it cannot find free blocks from the buffer pool.
<LI>

Fixed a bug: when you created a temporary table of the <code>InnoDB</code> type, and then
used ALTER TABLE to it, the MySQL server could crash.
<LI>

Prevented creation of MySQL system tables 'mysql.user',
'mysql.host', or 'mysql.db', in the
<code>InnoDB</code> type.
<LI>

Fixed a bug which can cause an assertion failure in 3.23.44 in
srv0srv.c, line 1728.
</UL>



<H3><A NAME="InnoDB_news-3.23.44" HREF="manual_toc.html#InnoDB_news-3.23.44">D.9.42  MySQL/InnoDB-3.23.44, November 2, 2001</A></H3>


<UL>
<LI>

You can define foreign key constraints on <code>InnoDB</code>
tables. An example: FOREIGN KEY (col1) REFERENCES table2(col2).
<LI>

You can create data files larger than 4GB in those
filesystems that allow it.
<LI>

Improved <code>InnoDB</code> monitors, including a new innodb_table_monitor
which allows you to print the contents of the <code>InnoDB</code> internal data
dictionary.
<LI>

DROP DATABASE will now work also for <code>InnoDB</code> tables.
<LI>

Accent characters in the default character set
latin1 will be ordered according to the MySQL ordering.&#60;br&#62;
NOTE: If you are using latin1 and have inserted characters
whose code is &#62; 127 to an indexed CHAR column, you should run
CHECK TABLE on your table when you upgrade to
3.23.43, and drop and reimport the table if CHECK TABLE
reports an error!
<LI>

<code>InnoDB</code> will calculate better table cardinality
estimates.
<LI>

Change in deadlock resolution:
in .43 a deadlock rolls back only the
SQL statement, in .44 it will roll back the whole transaction.
<LI>

Deadlock, lock wait timeout, and foreign key
constraint violations (no parent row, child rows exist)
now return native MySQL
error codes 1213, 1205, 1216, 1217, respectively.
<LI>

A new my.cnf parameter innodb_thread_concurrency
helps in performance tuning in high concurrency environments.
<LI>

A new my.cnf option innodb_force_recovery will
help you in dumping tables from a corrupted database.
<LI>

A new my.cnf option innodb_fast_shutdown will
speed up shutdown. Normally <code>InnoDB</code> does a full purge
and an insert buffer merge at shutdown.
<LI>

Raised maximum key length to 7000 bytes from a
previous limit of 500 bytes.
<LI>

Fixed a bug in replication of auto-inc columns with multiline inserts.
<LI>

Fixed a bug when the case of letters changes in an update of an indexed
secondary column.
<LI>

Fixed a hang when there are more than 24 data files.
<LI>

Fixed a crash when MAX(col) is selected from an empty table, and col is a
not the first column in a multi-column index.
<LI>

Fixed a bug in purge which could cause crashes.
</UL>



<H3><A NAME="InnoDB_news-3.23.43" HREF="manual_toc.html#InnoDB_news-3.23.43">D.9.43  MySQL/InnoDB-3.23.43, October 4, 2001</A></H3>


<UL>
<LI>

This is essentially the same as InnoDB-3.23.42.
</UL>



<H3><A NAME="InnoDB_news-3.23.42" HREF="manual_toc.html#InnoDB_news-3.23.42">D.9.44  MySQL/InnoDB-3.23.42, September 9, 2001</A></H3>


<UL>
<LI>

Fixed a bug which corrupted the table if the primary key
of a &#62; 8000-byte row was updated.
<LI>

There are now 3 types of <code>InnoDB</code> Monitors: innodb_monitor,
innodb_lock_monitor, and innodb_tablespace_monitor.
innodb_monitor now prints also buffer pool hit rate and the total
number of rows inserted, updated, deleted, read.
<LI>

Fixed a bug in RENAME TABLE.
<LI>

Fixed a bug in replication with an auto-increment column.
</UL>



<H3><A NAME="InnoDB_news-3.23.41" HREF="manual_toc.html#InnoDB_news-3.23.41">D.9.45  MySQL/InnoDB-3.23.41, August 13, 2001</A></H3>


<UL>
<LI>

Support for &#60; 4GB rows. The previous limit was
8000 bytes.
<LI>

Use the doublewrite file flush method.
<LI>

Raw disk partitions supported as data files.
<LI>

<code>InnoDB</code> Monitor.
<LI>

Several hang bugs fixed and an <code>ORDER BY</code>
bug (``Sort aborted'') fixed.
</UL>



<H3><A NAME="InnoDB_news-3.23.40" HREF="manual_toc.html#InnoDB_news-3.23.40">D.9.46  MySQL/InnoDB-3.23.40, July 16, 2001</A></H3>


<UL>
<LI>

Only a few rare bugs fixed.
</UL>



<H3><A NAME="InnoDB_news-3.23.39" HREF="manual_toc.html#InnoDB_news-3.23.39">D.9.47  MySQL/InnoDB-3.23.39, June 13, 2001</A></H3>


<UL>
<LI>

<code>CHECK TABLE</code> now works for <code>InnoDB</code> tables.
<LI>

A new <tt>`my.cnf'</tt> parameter <code>innodb_unix_file_flush_method</code>
introduced. It can be used to tune disk write performance.
<LI>

An auto-increment column now gets new values past the
transaction mechanism. This saves CPU time and eliminates
transaction deadlocks in new value assignment.
<LI>

Several bugfixes, most notably the rollback bug in 3.23.38.
</UL>



<H3><A NAME="InnoDB_news-3.23.38" HREF="manual_toc.html#InnoDB_news-3.23.38">D.9.48  MySQL/InnoDB-3.23.38, May 12, 2001</A></H3>


<UL>
<LI>

The new syntax <code>SELECT ... LOCK IN SHARE MODE</code> is introduced.
<LI>

<code>InnoDB</code> now calls <code>fsync()</code> after every disk write and calculates
a checksum
for every database page it writes or reads, which will reveal disk defects.
<LI>

Several bugfixes.
</UL>



<H2><A NAME="MySQL_Cluster_change_history" HREF="manual_toc.html#MySQL_Cluster_change_history">D.10  <code>MySQL Cluster</code> Change History</A></H2>



<H3><A NAME="MySQL_Cluster_news-4.1.10" HREF="manual_toc.html#MySQL_Cluster_news-4.1.10">D.10.1  MySQL Cluster-4.1.10 (not released yet)</A></H3>

<P>
Functionality added or changed:

<UL>
</UL>

<P>
Bugs fixed:

<UL>
</UL>



<H3><A NAME="MySQL_Cluster_news-4.1.9" HREF="manual_toc.html#MySQL_Cluster_news-4.1.9">D.10.2  MySQL Cluster-4.1.9 (13 Jan 2005)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>New implementation of shared memory transporter.

<LI>Cluster will automatically configure shared memory transporter if possible.

<LI>Cluster will prioritize usage of transporters with shared memory

      and localhost TCP
<LI>Added switches to control the above functions, <code>ndb-shm</code> and

      <code>ndb-optimized-node-selection</code>.
</UL>

<P>
Bugs fixed:

<UL>
<LI>(Bug #7379)

      ndb restore fails to handle blobs and multiple databases
<LI>(Bug #7346)

      ndb_restore enters infinite loop
<LI>(Bug #7124)

      ndb_mgmd is aborted on startup when using SHM connection
</UL>



<H3><A NAME="MySQL_Cluster_news-4.1.8" HREF="manual_toc.html#MySQL_Cluster_news-4.1.8">D.10.3  MySQL Cluster-4.1.8 (14 Dec 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>Default port for <code>ndb_mgmd</code> was changed to 1186 (from 2200) as

      this port number was officially assigned to MySQL Cluster by IANA.
<LI>New command in <code>ndb_mgm</code>, PURGE STALE SESSIONS, as a workaround

      for cases where nodes fail to allocate a node id even if it is free
      to use.
<LI>New command in <code>ndb_mgm</code>, CONNECT.

<LI>The ndb executables have been changed to make use of the

      regular MySQL command line option parsing features. 
      See section <A HREF="manual_NDBCluster.html#MySQL_Cluster_Command_Options">16.4.5  Command Options for MySQL Cluster Processes</A> for notes on changes.
<LI>As bonus of the above you can now specify all command

      line options in <tt>`my.cnf'</tt> using the executable names
      as sections, i.e. <code>[ndbd]</code>, <code>[ndb_mgmd]</code>,
      <code>[ndb_mgm]</code>, <code>[ndb_restore]</code> etc.

<PRE>
      [ndbd]
      ndb-connectstring=myhost.domain.com:1234
      [ndb_mgm]
      ndb-connectstring=myhost.domain.com:1234
</PRE>

<LI>Added use of section <code>[mysql_cluster]</code> in <tt>`my.cnf'</tt>. All cluster

      executables, including mysqld, parse this section. Convenient place to
      put e.g. <code>ndb-connectstring</code> so that it only needs to be specified once.
<LI>Added cluster log info events on allocation and deallocation of nodeid's.

<LI>Added cluster log info events on connection refuse as a result of version

      mismatch.
<LI>Extended connectstring syntax to allow for leaving the port number out.

      E.g. <code>ndb-connectstring|connect-string=myhost1,myhost2,myhost3</code> is 
      a valid connectstring and connect will occur on default port 1186.
<LI>Clear text ndb error messages provided also for error codes that are mapped

      to corresponding mysql error codes, by executing <code>SHOW WARNINGS</code> after
      an error has occured which relates to the ndb storage engine.
<LI>Significant performance improvements done for read performance,

      especially for blobs.
<LI>Added some variables for performance tuning, <code>ndb_force_send</code> and

      <code>ndb_use_exact_count</code>. Do <code>show variables like 'ndb%';</code> in mysql
      client for listing. Use <code>set</code> command to alter variables.
<LI>Added variables to set some options, <code>ndb_use_transactions</code> and

      <code>ndb_autoincrement_prefetch_sz</code>.
</UL>

<P>
Bugs fixed:

<UL>
<LI>(Bug #7303)

      ndb_mgm: Trying to set CLUSTERLOG for a specific node id core dumps
<LI>(Bug #7193)

      start backup gives false error printout
<LI>(Bug #7153)

      Cluster nodes don't report error on endianness mismatch
<LI>(Bug #7152)

      ndb_mgmd segfaults on incorrect HostName in configuration
<LI>(Bug #7104)

      clusterlog filtering and level setting broken
<LI>(Bug #6995)

      ndb_recover on varchar fields results in changing case of data
<LI>(Bug #6919)

      all status only shows 2 nodes on a 8-node cluster
<LI>(Bug #6871)

      DBD execute failed: Got error 897 'Unknown error code' from ndbcluster
<LI>(Bug #6794)

      Wrong outcome of update operation of ndb table
<LI>(Bug #6791)

      Segmentation fault when config.ini is not correctly set
<LI>(Bug #6775)

      failure in acc when running many mysql clients
<LI>(Bug #6696)

      ndb_mgm command line options inconsistent with behaviour
<LI>(Bug #6684)

      ndb_restore doesn't give error messages if inproper command given
<LI>(Bug #6677)

      ndb_mgm can crash on "ALL CLUSTERLOG"
<LI>(Bug #6538)

      Error code returned when select max() on empty table with index
<LI>(Bug #6451)

      failing create table givers "ghost" tables which are impossible to remove
<LI>(Bug #6435)

      strange behaviour of left join
<LI>(Bug #6426)

      update with long pk fails
<LI>(Bug #6398)

      update of primary key fails
<LI>(Bug #6354)

      mysql does not complain about --ndbcluster option when NDB is not compiled in
<LI>(Bug #6331)

      INSERT IGNORE .. SELECT breaks subsequent inserts
<LI>(Bug #6288)

      cluster nodes crash on data import
<LI>(Bug #6031)

      To drop database you have to execute DROP DATABASE command twice
<LI>(Bug #6020)

      LOCK TABLE + delete returns error 208
<LI>(Bug #6018)

      REPLACE does not work for BLOBs + NDB
<LI>(Bug #6016)

      Strange crash with blobs + different DATABASES
<LI>(Bug #5973)

      ndb table belonging to different database shows up in show tables
<LI>(Bug #5872)

      ALTER TABLE with blob from ndb table to myisam fails
<LI>(Bug #5844)

      Failing mysql-test-run leaves stray NDB processes behind
<LI>(Bug #5824)

      HELP text messed up in ndb_mgm
<LI>(Bug #5786)

      Duplicate key error after restore
<LI>(Bug #5785)

      lock timeout during concurrent update
<LI>(Bug #5782)

      Unknown error when using LIMIT with ndb table
<LI>(Bug #5756)

      RESTART node from ndb_mgm fails
<LI>A few more not reported bugs fixed

</UL>



<H3><A NAME="MySQL_Cluster_news-4.1.7" HREF="manual_toc.html#MySQL_Cluster_news-4.1.7">D.10.4  MySQL Cluster-4.1.7 (23 Oct 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Optimization 1: Improved performance on index scans. Measured 30% performance increase on query which do large amounts of index scans.
<LI>

Optimization 2: Improved performance on primary key lookups. Around double performance for autocommitted primary key lookups.
<LI>

Optimization 3: Improved performance when using blobs by avoiding usage of exclusive locks for blobs.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

A few bugs fixed.
</UL>



<H3><A NAME="MySQL_Cluster_news-4.1.6" HREF="manual_toc.html#MySQL_Cluster_news-4.1.6">D.10.5  MySQL Cluster-4.1.6 (10 Oct 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Limited character set support for storage engine NDBCLUSTER:

<TABLE BORDER>
<TR><TD>Char set </TD><TD> Collation
</TD></TR>
<TR><TD>big5 </TD><TD> big5_chinese_ci
</TD></TR>
<TR><TD></TD><TD> big5_bin
</TD></TR>
<TR><TD>binary </TD><TD> binary
</TD></TR>
<TR><TD>euckr </TD><TD> euckr_korean_ci
</TD></TR>
<TR><TD></TD><TD> euckr_bin
</TD></TR>
<TR><TD>gb2312 </TD><TD> gb2312_chinese_ci
</TD></TR>
<TR><TD></TD><TD> gb2312_bin
</TD></TR>
<TR><TD>gbk </TD><TD> gbk_chinese_ci
</TD></TR>
<TR><TD></TD><TD> gbk_bin
</TD></TR>
<TR><TD>latin1 </TD><TD> latin1_swedish_ci
</TD></TR>
<TR><TD></TD><TD> latin1_bin
</TD></TR>
<TR><TD>sjis </TD><TD> sjis_japanese_ci
</TD></TR>
<TR><TD></TD><TD> sjis_bin
</TD></TR>
<TR><TD>tis620 </TD><TD> tis620_bin
</TD></TR>
<TR><TD>ucs2 </TD><TD> ucs2_general_ci
</TD></TR>
<TR><TD></TD><TD> ucs2_bin
</TD></TR>
<TR><TD>ujis </TD><TD> ujis_japanese_ci
</TD></TR>
<TR><TD></TD><TD> ujis_bin
</TD></TR>
<TR><TD>utf8 </TD><TD> utf8_general_ci
</TD></TR>
<TR><TD></TD><TD> utf8_bin
</TD></TR>
</TABLE>

<LI>

The SCI Transporter has been brought up-to-date with all changes and
now works and has been documented as well.

<LI>

Optimizations when several clients to a MySQL Server access ndb tables.

<LI>

Added more checks and warnings for erroneous and unappropriate cluster configurations.

<LI>

<code>SHOW TABLES</code> now directly shows ndb tables created on a different mysql server,
i.e. without a prior table access.

<LI>

Enhanced support for starting MySQL Server independently of ndbd and ndb_mgmd.

<LI>

Clear text ndb error messages provided by executing <code>SHOW WARNINGS</code> after
an error has occured which relates to the ndb storage engine.

</UL>

<P>
Bugs fixed:

<UL>
<LI>

Quite a few bugs fixed.

</UL>



<H3><A NAME="MySQL_Cluster_news-4.1.5" HREF="manual_toc.html#MySQL_Cluster_news-4.1.5">D.10.6  MySQL Cluster-4.1.5 (16 Sep 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

Many queries in MySQL Cluster are executed as range scans or full
table scans. All queries that don't use a unique hash index or the
primary hash index will use this access method. In a distributed
system it is crucial that batching is properly performed.

In previous version the batch size was fixed to 16 per storage node.
In this version it is configurable per MySQL Server. So for queries
using lots of large scans it is appropriate to set this parameter
rather large and for queries using lots of small scans only fetching
a small amount of records it is appropriate to set it low.

The performance of queries can easily change as much as 40% based on
how this variable is set.

In future versions more logic will be made to assess the batch size
on per query basis. Thus the semantics of this new configuration
variable <code>ScanBatchSize</code> is likely to change.

<LI>

The fixed size overhead of the ndbd process was greatly decreased. Also
overhead per operation record was greatly decreased and also overhead
per table and index was greatly decreased.

A number of new configuration variables was introduced to be able to
configure more buffers in the system. Configuration variables to
specify the number of tables, unique hash indexes and ordered indexes
was introduced as well.

New configuration variables:
<code>MaxNoOfOrderedIndexes</code>, <code>MaxNoOfUniqueHashIndexes</code>

Configuration variables no longer used:
<code>MaxNoOfIndexes</code> (split into the two above).

<LI>

In previous versions <code>ALTER TABLE</code>, <code>TRUNCATE TABLE</code>, and <code>LOAD
DATA</code> were performed as one big transaction. In this version, all those
statements will be automatically separated into a number of transactions.

This removes the limitation that one could not change very large tables
due to the <code>MaxNoOfConcurrentOperations</code> parameter.

<LI>

The online backup feature of MySQL Cluster now also backs up the
indexes such that the restore ensures that both data and indexes are
restored.

<LI>

In previous versions it was not possible to use <code>NULL</code> in indexes. This
is now possible in all indexes.

<LI>

Much work has been put onto making <code>AUTO_INCREMENT</code> features work as for
other table handlers. Autoincrements as a partial key is still only
supported by <code>MyISAM</code>.

<LI>

In previous version,s <code>mysqld</code> would crash if the cluster wasn't
started and the <code>--ndbcluster</code> option was used. Now <code>mysqld</code>
will handle cluster crashes and not started without crashing.

<LI>

The <code>-i</code> option for initial startup has been removed from
<code>ndbd</code>. Initial startup still can be specified by using the
<code>--initial</code> option. The reason is to ensure that it is clearer what
takes place when using the <code>--initial</code> option. This option completely
removes all data from the disk and should only be used at initial start, in
certain software upgrade cases, and in some cases when node restarts don't
work as a workaround.

<LI>

The management client (<code>ndb_mgm</code>) now has more commands and more
information is printed in some commands such as <code>show</code>.

<LI>

In previous versions, the files were called <tt>`ndb_0..'</tt> when it wasn't
possible to allocate a node ID when starting the node. To ensure
that files are not so easily overwritten, these files are now
named <tt>`ndb_pid..'</tt>, where pid is the process ID assigned by the OS.

<LI>

The default parameters have changed for <code>ndb_mgmd</code> and
<code>ndbd</code>.  Yn particular, they are now started as daemons by default.
The <code>-n</code> option was removed since it could confusion as to whether its
meaning is nostart or nodaemon.

<LI>

In the configuration file, you can now use <code>[NDBD]</code> as an alias for
<code>[DB]</code>, <code>[MYSQLD]</code> as an alias for <code>[API]</code>, and
<code>[NDB_MGMD]</code> as an alias for <code>[MGM]</code>.

<LI>

Many more checks of the consistency of the configuration have been
introduced to provide quicker feedback on configuration errors. 

<LI>

In the connect string, it is now possible to use both <samp>`;'</samp> and <samp>`,'</samp>
as the separator between entries. So "nodeid=2,host=localhost:2200" is
equivalent to "nodeid=2;host=localhost:2200".

In the configuration, it is possible to use <samp>`:'</samp> or <samp>`='</samp> as the
assignment symbol. Thus <code>MaxNoOfOrderedIndexes : 128</code> and
<code>MaxNoOfOrderedIndexes = 128</code> are equivalent.

<LI>

The configuration variable names are now case insensitive so
<code>MaxNoOfOrderedIndexes: 128</code>
is equivalent to
<code>MAXNOOFORDEREDINDEXES = 128</code>.

<LI>

It is possible now to set the backup directory separately from the
<code>FileSystemPath</code> by using the <code>BackupDir</code> config variable.

Log files and trace files can now be put in any directory by setting
the <code>DataDir</code> configuration variable.

<code>FileSystemPath</code> is no longer mandatory and defaults to <code>DataDir</code>.

<LI>

It is now supported to perform queries involving tables from different
databases in MySQL.

<LI>

It is now possible to update the primary key.

<LI>

The performance of the ordered index has been greatly improved,
particularly the maintenance of the index at updates, inserts and
deletes.

</UL>

<P>
Bugs fixed:

<UL>
<LI>

Quite a few bugs fixed.
</UL>



<H3><A NAME="MySQL_Cluster_news-4.1.4" HREF="manual_toc.html#MySQL_Cluster_news-4.1.4">D.10.7  MySQL Cluster-4.1.4 (31 Aug 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

The names of the log files and trace files created by the <code>ndbd</code> and
<code>ndb_mgmd</code> processes have changed.

<LI>

Support for the many <code>BLOB</code> data types was introduced in this version.

</UL>

<P>
Bugs fixed:

<UL>
<LI>

Quite a few bugs were fixed in the 4.1.4 release.
</UL>



<H3><A NAME="MySQL_Cluster_news-5.0.1" HREF="manual_toc.html#MySQL_Cluster_news-5.0.1">D.10.8  MySQL Cluster-5.0.1 (27 Jul 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

This was the first MySQL Cluster release in 5.0. Actually almost all
attention was on getting 4.1 stable so it is not recommended to use
MySQL 5.0.1 for MySQL Cluster usage.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

</UL>



<H3><A NAME="MySQL_Cluster_news-4.1.3" HREF="manual_toc.html#MySQL_Cluster_news-4.1.3">D.10.9  MySQL Cluster-4.1.3 (28 Jun 2004)</A></H3>

<P>
Functionality added or changed:

<UL>
<LI>

This was the first MySQL Cluster release so all the functionality was
new.
</UL>

<P>
Bugs fixed:

<UL>
<LI>

Various bugs fixed in the development process leading up to 4.1.3.
</UL>

<P><HR><P>
Go to the <A HREF="manual_Introduction.html">first</A>, <A HREF="manual_TODO.html">previous</A>, <A HREF="manual_Porting.html">next</A>, <A HREF="manual_Concept_Index.html">last</A> section, <A HREF="manual_toc.html">table of contents</A>.
 </BODY>
 </HTML>
