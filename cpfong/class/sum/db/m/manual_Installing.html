  <HTML>
  <HEAD>
  
  <TITLE>MySQL Reference Manual for version 5.0.3-alpha - 2  Installing MySQL</TITLE>
   <style> code {color:purple} tt {color:green} samp {color:navy} pre {color:maroon} </style>
  </HEAD>
  <BODY BGCOLOR=silver TEXT=#000000 LINK=#101090 VLINK=#7030B0>
Go to the <A HREF="manual_Introduction.html">first</A>, <A HREF="manual_Introduction.html">previous</A>, <A HREF="manual_Tutorial.html">next</A>, <A HREF="manual_Concept_Index.html">last</A> section, <A HREF="manual_toc.html">table of contents</A>.
<P><HR><P>


<H1><A NAME="Installing" HREF="manual_toc.html#Installing">2  Installing MySQL</A></H1>

<P>
<A NAME="IDX125"></A>

</P>

<P>
This chapter describes how to obtain and install MySQL:

</P>

<OL>

<LI>

<strong>Determine whether your platform is supported.</strong>  Please note that
not all supported systems are equally good for running MySQL on them.
On some it is much more robust and efficient than others.
See section <A HREF="manual_Installing.html#Which_OS">2.1.1  Operating Systems Supported by MySQL</A> for details.

<LI>

<strong>Choose which distribution to install.</strong>  Several versions of MySQL are available,
and most are available in several distribution formats.  You can choose
from pre-packaged distributions containing binary (precompiled) programs or
source code.  When in doubt, use a binary distribution.  We also provide
public access to our current source tree for those who want to see our most
recent developments and help us test new code.  To determine which version
and type of distribution you should use, see section <A HREF="manual_Installing.html#Which_version">2.1.2  Choosing Which MySQL Distribution to Install</A>.

<LI>

<strong>Download the distribution that you want to install.</strong>
For a list of sites from which you can obtain MySQL, see
section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.
You can verify the integrity of the distribution using the instructions in
section <A HREF="manual_Installing.html#Verifying_Package_Integrity">2.1.4  Verifying Package Integrity Using MD5 Checksums or <code>GnuPG</code></A>.

<LI>

<strong>Install the distribution.</strong>  To install MySQL from a binary
distribution, use the instructions in section <A HREF="manual_Installing.html#Quick_Standard_Installation">2.2  Standard MySQL Installation Using a Binary Distribution</A>.
To install MySQL from a source distribution or from the current development
source tree, use the instructions in section <A HREF="manual_Installing.html#Installing_source">2.8  MySQL Installation Using a Source Distribution</A>.

<strong>Note</strong>:
If you plan to upgrade an existing version of MySQL to a newer version
rather than installing MySQL for the first time, see section <A HREF="manual_Installing.html#Upgrade">2.10  Upgrading MySQL</A> for
information about upgrade procedures and about issues that you should
consider before upgrading.

If you encounter installation difficulties, see section <A HREF="manual_Installing.html#Operating_System_Specific_Notes">2.12  Operating System-Specific Notes</A> for information on solving problems for particular
platforms.

<LI>

<strong>Perform any necessary post-installation setup.</strong> After installing
MySQL, read section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.  This section contains important
information about making sure the MySQL server is working properly. It also
describes how to secure the initial MySQL user accounts, <em>which have no
passwords</em> until you assign passwords.  The section applies whether you
install MySQL using a binary or source distribution.

<LI>

If you want to run the MySQL benchmark scripts, Perl support for MySQL
must be available.
See section <A HREF="manual_Installing.html#Perl_support">2.13  Perl Installation Notes</A>.

</OL>



<H2><A NAME="General_Installation_Issues" HREF="manual_toc.html#General_Installation_Issues">2.1  General Installation Issues</A></H2>

<P>
Before installing MySQL, you should do the following:

</P>

<OL>
<LI>

Determine whether or not MySQL runs on your platform.

<LI>

Choose a distribution to install.

<LI>

Download the distribution and verify its integrity.

</OL>

<P>
This section contains the information necessary to carry out these steps.
After doing so, you can use the instructions in later sections of the chapter
to install the distribution that you choose.

</P>



<H3><A NAME="Which_OS" HREF="manual_toc.html#Which_OS">2.1.1  Operating Systems Supported by MySQL</A></H3>

<P>
<A NAME="IDX126"></A>
<A NAME="IDX127"></A>
<A NAME="IDX128"></A>
<A NAME="IDX129"></A>
<A NAME="IDX130"></A>

</P>
<P>
This section lists the operating systems on which you can expect to be able to
run MySQL.

</P>
<P>
We use GNU Autoconf, so it is possible to port MySQL to all modern systems
that have a C++ compiler and a working implementation of POSIX threads.
(Thread support is needed for the server. To compile only the client code,
the only requirement is a C++ compiler.) We use and develop the software
ourselves primarily on Linux (SuSE and Red Hat), FreeBSD, and Sun Solaris
(Versions 8 and 9).

</P>
<P>
MySQL has been reported to compile successfully on the following
combinations of operating system and thread package.  Note that for many
operating systems, native thread support works only in the latest versions.

</P>

<UL>
<LI>

AIX 4.x, 5.x with native threads.  See section <A HREF="manual_Installing.html#IBM-AIX">2.12.5.3  IBM-AIX notes</A>.
<LI>

Amiga.
<LI>

BSDI 2.x with the MIT-pthreads package.  See section <A HREF="manual_Installing.html#BSDI">2.12.4.5  BSD/OS Version 2.x Notes</A>.
<LI>

BSDI 3.0, 3.1 and 4.x with native threads.  See section <A HREF="manual_Installing.html#BSDI">2.12.4.5  BSD/OS Version 2.x Notes</A>.
<LI>

Digital Unix 4.x with native threads.  See section <A HREF="manual_Installing.html#Alpha-DEC-UNIX">2.12.5.5  Alpha-DEC-UNIX Notes (Tru64)</A>.
<LI>

FreeBSD 2.x with the MIT-pthreads package.  See section <A HREF="manual_Installing.html#FreeBSD">2.12.4.1  FreeBSD Notes</A>.
<LI>

FreeBSD 3.x and 4.x with native threads.  See section <A HREF="manual_Installing.html#FreeBSD">2.12.4.1  FreeBSD Notes</A>.
<LI>

FreeBSD 4.x with LinuxThreads.  See section <A HREF="manual_Installing.html#FreeBSD">2.12.4.1  FreeBSD Notes</A>.
<LI>

HP-UX 10.20 with the DCE threads or the MIT-pthreads package.
See section <A HREF="manual_Installing.html#HP-UX_10.20">2.12.5.1  HP-UX Version 10.20 Notes</A>.
<LI>

HP-UX 11.x with the native threads.  See section <A HREF="manual_Installing.html#HP-UX_11.x">2.12.5.2  HP-UX Version 11.x Notes</A>.
<LI>

Linux 2.0+ with LinuxThreads 0.7.1+ or <code>glibc</code> 2.0.7+ for various
CPU architectures.  See section <A HREF="manual_Installing.html#Linux">2.12.1  Linux Notes</A>.
<LI>

Mac OS X.  See section <A HREF="manual_Installing.html#Mac_OS_X">2.12.2  Mac OS X Notes</A>.
<LI>

NetBSD 1.3/1.4 Intel and NetBSD 1.3 Alpha (requires GNU make).  See section <A HREF="manual_Installing.html#NetBSD">2.12.4.2  NetBSD Notes</A>.
<LI>

Novell NetWare 6.0.  See section <A HREF="manual_Installing.html#NetWare_installation">2.6  Installing MySQL on NetWare</A>.
<LI>

OpenBSD &#62; 2.5 with native threads. OpenBSD &#60; 2.5 with the
MIT-pthreads package.  See section <A HREF="manual_Installing.html#OpenBSD">2.12.4.3  OpenBSD 2.5 Notes</A>.
<LI>

OS/2 Warp 3, FixPack 29 and OS/2 Warp 4, FixPack 4.  See section <A HREF="manual_Installing.html#OS_2">2.12.6  OS/2 Notes</A>.
<LI>

SCO OpenServer with a recent port of the FSU Pthreads package. 
See section <A HREF="manual_Installing.html#SCO">2.12.5.8  SCO Notes</A>.
<LI>

SCO UnixWare 7.1.x.  See section <A HREF="manual_Installing.html#SCO_UnixWare">2.12.5.9  SCO UnixWare Version 7.1.x Notes</A>.
<LI>

SGI Irix 6.x with native threads.  See section <A HREF="manual_Installing.html#SGI-Irix">2.12.5.7  SGI Irix Notes</A>.
<LI>

Solaris 2.5 and above with native threads on SPARC and x86.  See section <A HREF="manual_Installing.html#Solaris">2.12.3  Solaris Notes</A>.
<LI>

SunOS 4.x with the MIT-pthreads package.  See section <A HREF="manual_Installing.html#Solaris">2.12.3  Solaris Notes</A>.
<LI>

Tru64 Unix.  See section <A HREF="manual_Installing.html#Alpha-DEC-UNIX">2.12.5.5  Alpha-DEC-UNIX Notes (Tru64)</A>.
<LI>

Windows 9x, Me, NT, 2000, XP, and 2003.  See section <A HREF="manual_Installing.html#Windows_installation">2.3  Installing MySQL on Windows</A>.
</UL>

<P>
Not all platforms are equally well-suited for running
MySQL. How well a certain platform is suited for a high-load
mission-critical MySQL server is determined by the following
factors:

</P>

<UL>
<LI>

General stability of the thread library. A platform may have an excellent
reputation otherwise, but MySQL will be only as stable as the thread library
if that library is unstable in the code that is called by MySQL, even if
everything else is perfect.

<LI>

The capability of the kernel and the thread library to take advantage of
symmetric multi-processor (SMP) systems. In other words, when a process
creates a thread, it should be possible for that thread to run on a different
CPU than the original process.

<LI>

The capability of the kernel and the thread library to run many threads that
acquire and release a mutex over a short critical region frequently without
excessive context switches. If the implementation of
<code>pthread_mutex_lock()</code> is too anxious to yield CPU time, this will hurt
MySQL tremendously. If this issue is not taken care of, adding extra CPUs
will actually make MySQL slower.

<LI>

General filesystem stability and performance.

<LI>

If your tables are big, the ability of the filesystem to deal with large
files at all and to deal with them efficiently.

<LI>

Our level of expertise here at MySQL AB with the platform. If we know
a platform well, we enable platform-specific optimizations and fixes at
compile time. We can also provide advice on configuring your system optimally
for MySQL.

<LI>

The amount of testing we have done internally for similar configurations.

<LI>

The number of users that have successfully run MySQL on the
platform in similar configurations. If this number is high, the chances of
encountering platform-specific surprises are much smaller.
</UL>

<P>
Based on the preceding criteria, the best platforms for running
MySQL at this point are x86 with SuSE Linux using a 2.4 kernel, and
ReiserFS (or any similar Linux distribution) and SPARC with Solaris
(2.7-9). FreeBSD comes third, but we really hope it will join the top
club once the thread library is improved. We also hope that at some
point we will be able to include into the top category all other platforms
on which MySQL currently compiles and runs okay, but not quite with the
same level of stability and performance.  This will require some
effort on our part in cooperation with the developers of the operating system
and library components that MySQL depends on. If you are interested in
improving one of those components, are in a position to influence its
development, and need more detailed instructions on what MySQL
needs to run better, send an email message to the MySQL <code>internals</code>
mailing list.
See section <A HREF="manual_Introduction.html#Mailing-list">1.4.1.1  The MySQL Mailing Lists</A>.

</P>
<P>
Please note that the purpose of the preceding comparison is not to say that
one operating system is better or worse than another in general. We are
talking only about choosing an OS for the specific purpose of running MySQL.
With this in mind, the result of this comparison would be different if we
considered more factors. In some cases, the reason one OS is better than the
other could simply be that we have been able to put more effort into testing
and optimizing for a particular platform.  We are just stating our
observations to help you decide which platform to use for running MySQL.

</P>



<H3><A NAME="Which_version" HREF="manual_toc.html#Which_version">2.1.2  Choosing Which MySQL Distribution to Install</A></H3>

<P>
When preparing to install MySQL, you should decide which version
to use.  MySQL development occurs in several release series, and
you can pick the one that best fits your needs.  After deciding
which version to install, you can choose a distribution format.
Releases are available in binary or source format.

</P>

<P>
<A NAME="IDX131"></A>
<A NAME="IDX132"></A>
<A NAME="IDX133"></A>
<A NAME="IDX134"></A>
<A NAME="IDX135"></A>

</P>


<H4><A NAME="Choosing_version" HREF="manual_toc.html#Choosing_version">2.1.2.1  Choosing Which Version of MySQL to Install</A></H4>

<P>
The first decision to make is whether you want to use a production (stable)
release or a development release.  In the MySQL development process,
multiple release series co-exist, each at a different stage of maturity:

</P>

<UL>

<LI>

MySQL 5.0 is the newest development release series and is under very active
development for new features. Alpha releases have been issued to allow more
widespread testing.

<LI>

MySQL 4.1 is the current stable (production-quality) release series.
New releases are issued for bugfixes. No new features are added
that could diminish the code stability.

<LI>

MySQL 4.0 is the previous stable (production-quality) release series.
New releases are issued for bugfixes. No new features are added
that could diminish the code stability.

<LI>

MySQL 3.23 is the old stable (production-quality) release series.
This series is retired, so new releases are issued only to fix
critical bugs.

</UL>

<P>
We don't believe in a complete freeze, as this also leaves out bugfixes and
things that ``must be done.''  ``Somewhat frozen'' means that we may add
small things that ``almost surely will not affect anything that's already
working.'' Naturally, relevant bugfixes from an earlier series propagate to
later series.

</P>
<P>
Normally, if you are beginning to use MySQL for the first time or trying
to port it to some system for which there is no binary distribution, we
recommend going with the production release series. Currently this is MySQL
4.1.  All MySQL releases, even those from development series, are
checked with the MySQL benchmarks and an extensive test suite before being
issued.

</P>
<P>
If you are running an old system and want to upgrade, but
don't want to take the chance of having a non-seamless upgrade, you should
upgrade to the latest version in the same release series you are using (where
only the last part of the version number is newer than yours).  We have tried
to fix only fatal bugs and make small, relatively safe changes to that version.

</P>
<P>
If you want to use new features not present in the production release
series, you can use a version from a development series. Note that
development releases are not as stable as production releases.

</P>
<P>
If you want to use the very latest sources containing all current patches and
bugfixes, you can use one of our BitKeeper repositories.
These are not ``releases'' as such, but are available as previews of the
code on which future releases will be based.

</P>
<P>
<A NAME="IDX136"></A>
<A NAME="IDX137"></A>

</P>
<P>
The MySQL naming scheme uses release names that consist of three
numbers and a suffix; for example, <code>mysql-4.1.2-alpha</code>.
The numbers within the release name are interpreted like this:

</P>

<UL>
<LI>

The first number (<code>4</code>) is the major version and also describes the
file format.  All Version 4 releases have the same file format.

<LI>

The second number (<code>1</code>) is the release level.
Taken together, the major version and release level constitute the release
series number.

<LI>

The third number (<code>2</code>) is the version number within the
release series.  This is incremented for each new release.  Usually you
want the latest version for the series you have chosen.

</UL>

<P>
For each minor update, the last number in the version string is incremented.
When there are major new features or minor incompatibilities with previous
versions, the second number in the version string is incremented.  When the
file format changes, the first number is increased.

</P>
<P>
Release names also include a suffix to indicates the stability level of the
release.  Releases within a series progress through a set of suffixes to
indicate how the stability level improves.
The possible suffixes are:

</P>

<UL>
<LI>

<code>alpha</code> indicates that the release contains some large section of
new code that hasn't been 100% tested.  Known bugs (usually there are none)
should be documented in the News section.  See section <A HREF="manual_News.html#News">D  MySQL Change History</A>.  There are also new
commands and extensions in most alpha releases.  Active development that
may involve major code changes can occur in an alpha release, but everything
will be tested before issuing a release.  For this reason, there should be
no known bugs in any MySQL release.

<LI>

<code>beta</code> means that all new code has been tested.  No major new
features that could cause corruption in old code are added.  There should
be no known bugs.  A version changes from alpha to beta when there
haven't been any reported fatal bugs within an alpha version for at least
a month and we have no plans to add any features that could make any old
command unreliable.

<LI>

<code>gamma</code> is a beta that has been around a while and seems to work fine.
Only minor fixes are added.  This is what many other companies call a release.

<LI>

If there is no suffix, it means that the version has been run for a
while at many different sites with no reports of bugs other than
platform-specific bugs.  Only critical bugfixes are applied to the
release. This is what we call a production (stable) or `General Availability' (GA) release.
</UL>

<P>
MySQL uses a naming scheme that is slightly different from most other products.
In general, it's relatively safe to use any version that has been out for
a couple of weeks without being replaced with a new version within the release
series.

</P>
<P>
All releases of MySQL are run through our standard tests and
benchmarks to ensure that they are relatively safe to use.  Because the
standard tests are extended over time to check for all previously found bugs,
the test suite keeps getting better.

</P>
<P>
<A NAME="IDX138"></A>
<A NAME="IDX139"></A>

</P>
<P>
All releases have been tested at least with:

</P>
<DL COMPACT>

<DT>An internal test suite
<DD>
The <tt>`mysql-test'</tt> directory contains an extensive set of test cases.
We run these tests for virtually every server binary.
See section <A HREF="manual_Extending_MySQL.html#MySQL_test_suite">24.1.2  MySQL Test Suite</A> for more information about this test suite.

<DT>The MySQL benchmark suite
<DD>
This suite runs a range of common queries.  It is also a test to see whether the
latest batch of optimizations actually made the code faster.
See section <A HREF="manual_MySQL_Optimization.html#MySQL_Benchmarks">7.1.4  The MySQL Benchmark Suite</A>.

<DT>The <code>crash-me</code> test
<DD>
This test tries to determine what features the database supports and what its
capabilities and limitations are.  See section <A HREF="manual_MySQL_Optimization.html#MySQL_Benchmarks">7.1.4  The MySQL Benchmark Suite</A>.
</DL>

<P>
Another test is that we use the newest MySQL version in our internal
production environment, on at least one machine.  We have more than 100GB
of data to work with.

</P>



<H4><A NAME="Choosing_distribution_format" HREF="manual_toc.html#Choosing_distribution_format">2.1.2.2  Choosing a Distribution Format</A></H4>

<P>
After choosing which version of MySQL to install, you should decide
whether to use a binary distribution or a source distribution.  In
most cases, you should probably use a binary distribution, if one
exists for your platform. Binary distributions are available in native format
for many platforms, such as RPM files for Linux or DMG package installers for
Mac OS X. Distributions also are available as Zip archives or compressed
<code>tar</code> files. 

</P>
<P>
Reasons to choose a binary distribution include the following:

</P>

<UL>
<LI>

Binary distributions generally are easier to install than source distributions.

<LI>

To satisfy different user requirements, we provide two
different binary versions: one compiled with the non-transactional storage
engines (a small, fast binary), and one configured with the most
important extended options like transaction-safe tables.  Both versions
are compiled from the same source distribution.  All native MySQL
clients can connect to servers from either MySQL version.

The extended MySQL binary distribution is marked with the
<code>-max</code> suffix and is configured with the same options as
<code>mysqld-max</code>. See section <A HREF="manual_MySQL_Database_Administration.html#mysqld-max">5.1.2  The <code>mysqld-max</code> Extended MySQL Server</A>.

If you want to use the <code>MySQL-Max</code> RPM, you must first
install the standard <code>MySQL-server</code> RPM.

</UL>

<P>
Under some circumstances, you probably will be better off installing MySQL
from a source distribution:

</P>

<UL>
<LI>

You want to install MySQL at some explicit location.  The standard
binary distributions are ``ready to run'' at any place, but you may want
to have even more flexibility to place MySQL components where you want.

<LI>

You want to configure <code>mysqld</code> with some extra features that are not
included in the standard binary distributions.  Here is a list of the most
common extra options that you may want to use:


<UL>
<LI><code>--with-innodb</code> (default for MySQL 4.0 and up)

<LI><code>--with-berkeley-db</code> (not available on all platforms)

<LI><code>--with-raid</code>

<LI><code>--with-libwrap</code>

<LI><code>--with-named-z-libs</code> (this is done for some of the binaries)

<LI><code>--with-debug[=<var>full</var>]</code>

</UL>

<LI>

You want to configure <code>mysqld</code> without some features that are
included in the standard binary distributions. For example,
distributions normally are compiled with support for all character
sets. If you want a smaller MySQL server, you can recompile it with support
for only the character sets you need.

<LI>

You have a special compiler (such as <code>pgcc</code>) or want to use compiler
options that are better optimized for your processor.  Binary distributions
are compiled with options that should work on a variety of processors from
the same processor family.

<LI>

You want to use the latest sources from one of the BitKeeper
repositories to have access to all current bugfixes. For example,
if you have found a bug and reported it to the MySQL development
team, the bugfix will be committed to the source repository and you
can access it there.  The bugfix will not appear in a release until
a release actually is issued.

<LI>

You want to read (or modify) the C and C++ code that makes up MySQL. For
this purpose, you should get a source distribution, because the source code
is always the ultimate manual.

<LI>

Source distributions contain more tests and examples than binary
distributions.

</UL>



<H4><A NAME="Many_versions" HREF="manual_toc.html#Many_versions">2.1.2.3  How and When Updates Are Released</A></H4>

<P>
<A NAME="IDX140"></A>
<A NAME="IDX141"></A>

</P>
<P>
MySQL is evolving quite rapidly here at MySQL AB and we want to share
new developments with other MySQL users.  We try to make a release
when we have very useful features that others seem to have a need for.

</P>
<P>
We also try to help out users who request features that are easy to
implement.  We take note of what our licensed users want to have, and
we especially take note of what our support customers
want and try to help them out.

</P>
<P>
No one has to download a new release.  The News section will tell you if
the new release has something you really want.  See section <A HREF="manual_News.html#News">D  MySQL Change History</A>.

</P>
<P>
We use the following policy when updating MySQL:

</P>

<UL>
<LI>

Releases are issued within each series. For each release, the last
number in the version is one more than the previous release within the same
series.

<LI>

Production (stable) releases are meant to appear about 1-2 times a year.
However, if small bugs are found, a release with only bugfixes will be issued.

<LI>

Working releases/bugfixes to old releases are meant to appear about
every 4-8 weeks.

<LI>

Binary distributions for some platforms are made by us for major releases.
Other people may make binary distributions for other systems, but probably
less frequently.

<LI>

We make fixes available as soon as we have identified and corrected
small or non-critical but annoying bugs. The fixes
are available immediately from our public BitKeeper repositories, and will
be included in the next release.

<LI>

If by any chance a fatal bug is found in a release, we will make a new
release as soon as possible.  (We would like other companies to do this,
too!)
</UL>



<H4><A NAME="Release_philosophy" HREF="manual_toc.html#Release_philosophy">2.1.2.4  Release Philosophy--No Known Bugs in Releases</A></H4>

<P>
We put a lot of time and effort into making our releases bug-free.
To our knowledge, we have not released a single MySQL version with any
<em>known</em> ``fatal'' repeatable bugs.
(A ``fatal'' bug is something that crashes MySQL under normal usage,
produces incorrect answers for normal queries, or has a security problem.)

</P>
<P>
We have documented all open problems, bugs, and issues that are
dependent on design decisions.
See section <A HREF="manual_Introduction.html#Bugs">1.5.7  Known Errors and Design Deficiencies in MySQL</A>.

</P>
<P>
Our aim is to fix everything that is fixable without risk of
making a stable MySQL version less stable. In certain cases, this
means we can fix an issue in the development versions, but not
in the stable (production) version. Naturally, we document such
issues so that users are aware of them.

</P>
<P>
Here is a description of how our build process works:

<UL>
<LI>

We monitor bugs from our customer support list, the bugs database at
<a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a>, and the MySQL external mailing lists.
<LI>

All reported bugs for live versions are entered into the bugs database.
<LI>

When we fix a bug, we always try to make a test case for it and
include it into our test system to ensure that the bug will never
recur without being detected. (About 90% of all fixed bugs have a test case.)
<LI>

We create test cases for all new features we add to MySQL.
<LI>

Before we start to build a new MySQL release, we ensure that all
reported repeatable bugs for the MySQL version (3.23.x, 4.0.x, etc)
are fixed.  If something is impossible to fix (due to some internal
design decision in MySQL), we document this in the manual.
See section <A HREF="manual_Introduction.html#Bugs">1.5.7  Known Errors and Design Deficiencies in MySQL</A>.
<LI>

We do a build on all platforms for which we support binaries (15+
platforms) and run our test suite and benchmark suite on all of them.
<LI>

We will not publish a binary for a platform for which the test or benchmark
suite fails.  If the problem is due to a general error in the source, we fix
it and do the build plus tests on all systems again from scratch.
<LI>

The build and test process takes 2-3 days.  If we receive a report regarding
a fatal bug during this process (for example, one that causes
a core dump), we fix the problem and restart the build process.
<LI>

After publishing the binaries on <a HREF="http://dev.mysql.com/">http://dev.mysql.com/</a>, we send
out an announcement message to the <code>mysql</code> and <code>announce</code> mailing
lists.
See section <A HREF="manual_Introduction.html#Mailing-list">1.4.1.1  The MySQL Mailing Lists</A>.
The announcement message contains a list
of all changes to the release and any known problems with the release.
The Known Problems section in the release notes has been needed
for only a handful of releases.
<LI>

To quickly give our users access to the latest MySQL features, we do
a new MySQL release every 4-8 weeks.
Source code snapshots are built daily and are available at
<a HREF="http://downloads.mysql.com/snapshots.php">http://downloads.mysql.com/snapshots.php</a>.
<LI>

If, despite our best efforts, we get any bug reports after the release is done
that there was something critically wrong with the build on a specific
platform, we will fix it at once and build a new <code>'a'</code> release for that
platform. Thanks to our large user base, problems are found quickly.
<LI>

Our track record for making good releases is quite good.  In the last
150 releases, we had to do a new build for fewer than 10 releases. In three
of these cases, the bug was a faulty <code>glibc</code> library on one of our build
machines that took us a long time to track down.
</UL>



<H4><A NAME="MySQL_binaries" HREF="manual_toc.html#MySQL_binaries">2.1.2.5  MySQL Binaries Compiled by MySQL AB</A></H4>

<P>
<A NAME="IDX142"></A>

</P>
<P>
As a service of MySQL AB, we provide a set of binary distributions
of MySQL that are compiled on systems at our site or on systems where
supporters of MySQL kindly have given us access to their machines. 

</P>
<P>
In addition to the binaries provided in platform-specific package formats,
we offer binary distributions for a number of platforms in the form of
compressed <code>tar</code> files (<code>.tar.gz</code> files).
See section <A HREF="manual_Installing.html#Quick_Standard_Installation">2.2  Standard MySQL Installation Using a Binary Distribution</A>.

</P>
<P>
For Windows distributions, see section <A HREF="manual_Installing.html#Windows_installation">2.3  Installing MySQL on Windows</A>.

</P>
<P>
These distributions are generated using the script
<code>Build-tools/Do-compile</code>, which compiles the source code and creates
the binary <code>tar.gz</code> archive using
<code>scripts/make_binary_distribution</code>.

</P>
<P>
These binaries are configured and built with the following compilers and
options. This information can also be obtained by looking at the variables
<code>COMP_ENV_INFO</code> and <code>CONFIGURE_LINE</code> inside the script
<code>bin/mysqlbug</code> of every binary <code>tar</code> file distribution.

</P>
<P>
The following binaries are built on MySQL AB development systems:

</P>
<DL COMPACT>

<DT>Linux 2.4.xx x86 with <code>gcc</code> 2.95.3:
<DD>
<code>CFLAGS="-O2 -mcpu=pentiumpro" CXX=gcc CXXFLAGS="-O2 -mcpu=pentiumpro -felide-constructors" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --disable-shared --with-client-ldflags=-all-static --with-mysqld-ldflags=-all-static</code>

<DT>Linux 2.4.x x86 with <code>icc</code> (Intel C++ Compiler 8.0):
<DD>
<code>CC=icc CXX=icc CFLAGS="-O3 -unroll2 -ip -mp -no-gcc -restrict" CXXFLAGS="-O3 -unroll2 -ip -mp -no-gcc -restrict" ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --disable-shared --with-client-ldflags=-all-static --with-mysqld-ldflags=-all-static --with-embedded-server --with-innodb</code>

<DT>Linux 2.4.xx Intel Itanium 2 with <code>ecc</code> (Intel C++ Itanium Compiler 7.0):
<DD>
<code>CC=ecc CFLAGS="-O2 -tpp2 -ip -nolib_inline" CXX=ecc CXXFLAGS="-O2 -tpp2 -ip -nolib_inline" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile</code>

<DT>Linux 2.4.xx Intel Itanium with <code>ecc</code> (Intel C++ Itanium Compiler 7.0):
<DD>
<code>CC=ecc CFLAGS=-tpp1 CXX=ecc CXXFLAGS=-tpp1 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile</code>

<DT>Linux 2.4.xx alpha with <code>ccc</code> (Compaq C V6.2-505 / Compaq C++ V6.3-006):
<DD>
<code>CC=ccc CFLAGS="-fast -arch generic" CXX=cxx CXXFLAGS="-fast -arch generic -noexceptions -nortti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared --disable-shared</code>

<DT>Linux 2.x.xx ppc with <code>gcc</code> 2.95.4:
<DD>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared --with-embedded-server --with-innodb</code>

<DT>Linux 2.4.xx s390 with <code>gcc</code> 2.95.3:
<DD>
<code>CFLAGS="-O2" CXX=gcc CXXFLAGS="-O2 -felide-constructors" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --disable-shared --with-client-ldflags=-all-static --with-mysqld-ldflags=-all-static</code>

<DT>Linux 2.4.xx x86_64 (AMD64) with <code>gcc</code> 3.2.1:
<DD>
<code>CXX=gcc ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared</code>

<DT>Sun Solaris 8 x86 with <code>gcc</code> 3.2.3:
<DD>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared --with-innodb</code>

<DT>Sun Solaris 8 SPARC with <code>gcc</code> 3.2:
<DD>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-z-libs=no --with-named-curses-libs=-lcurses --disable-shared</code>

<DT>Sun Solaris 8 SPARC 64-bit with <code>gcc</code> 3.2:
<DD>
<code>CC=gcc CFLAGS="-O3 -m64 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -m64 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --with-named-curses-libs=-lcurses --disable-shared</code>

<DT>Sun Solaris 9 SPARC with <code>gcc</code> 2.95.3:
<DD>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-curses-libs=-lcurses --disable-shared</code>

<DT>Sun Solaris 9 SPARC with <code>cc-5.0</code> (Sun Forte 5.0):
<DD>
<code>CC=cc-5.0 CXX=CC ASFLAGS="-xarch=v9" CFLAGS="-Xa -xstrconst -mt -D_FORTEC_ -xarch=v9" CXXFLAGS="-noex -mt -D_FORTEC_ -xarch=v9" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-z-libs=no --enable-thread-safe-client --disable-shared</code>

<DT>IBM AIX 4.3.2 ppc with <code>gcc</code> 3.2.3:
<DD>
<code>CFLAGS="-O2 -mcpu=powerpc -Wa,-many " CXX=gcc CXXFLAGS="-O2 -mcpu=powerpc -Wa,-many  -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --disable-shared</code>

<DT>IBM AIX 4.3.3 ppc with <code>xlC_r</code> (IBM Visual Age C/C++ 6.0):
<DD>
<code>CC=xlc_r CFLAGS="-ma -O2 -qstrict -qoptimize=2 -qmaxmem=8192" CXX=xlC_r CXXFLAGS ="-ma -O2 -qstrict -qoptimize=2 -qmaxmem=8192" ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --disable-shared --with-innodb</code>

<DT>IBM AIX 5.1.0 ppc with <code>gcc</code> 3.3:
<DD>
<code>CFLAGS="-O2 -mcpu=powerpc -Wa,-many" CXX=gcc CXXFLAGS="-O2 -mcpu=powerpc -Wa,-many  -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --disable-shared</code>

<DT>IBM AIX 5.2.0 ppc with <code>xlC_r</code> (IBM Visual Age C/C++ 6.0):
<DD>
<code>CC=xlc_r CFLAGS="-ma -O2 -qstrict -qoptimize=2 -qmaxmem=8192" CXX=xlC_r CXXFLAGS="-ma -O2 -qstrict -qoptimize=2 -qmaxmem=8192" ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --disable-shared --with-embedded-server --with-innodb</code>

<DT>HP-UX 10.20 pa-risc1.1 with <code>gcc</code> 3.1:
<DD>
<code>CFLAGS="-DHPUX -I/opt/dce/include -O3 -fPIC" CXX=gcc CXXFLAGS="-DHPUX -I/opt/dce /include -felide-constructors -fno-exceptions -fno-rtti -O3 -fPIC" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --with-pthread --with-named-thread-libs=-ldce --with-lib-ccflags=-fPIC --disable-shared</code>

<DT>HP-UX 11.00 pa-risc with <code>aCC</code> (HP ANSI C++ B3910B A.03.50):
<DD>
<code>CC=cc CXX=aCC CFLAGS=+DAportable CXXFLAGS=+DAportable ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --disable-shared --with-embedded-server --with-innodb</code>

<DT>HP-UX 11.11 pa-risc2.0 64bit with <code>aCC</code> (HP ANSI C++ B3910B A.03.33):
<DD>
<code>CC=cc CXX=aCC CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --disable-shared</code>

<DT>HP-UX 11.11 pa-risc2.0 32bit with <code>aCC</code> (HP ANSI C++ B3910B A.03.33):
<DD>
<code>CC=cc CXX=aCC CFLAGS="+DAportable" CXXFLAGS="+DAportable" ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared --with-innodb</code>

<DT>HP-UX 11.22 ia64 64bit with <code>aCC</code> (HP aC++/ANSI C B3910B A.05.50):
<DD>
<code>CC=cc CXX=aCC CFLAGS="+DD64 +DSitanium2" CXXFLAGS="+DD64 +DSitanium2" ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared --with-embedded-server --with-innodb</code> 

<DT>Apple Mac OS X 10.2 powerpc with <code>gcc</code> 3.1:
<DD>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared</code>

<DT>FreeBSD 4.7 i386 with <code>gcc</code> 2.95.4:
<DD>
<code>CFLAGS=-DHAVE_BROKEN_REALPATH ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-z-libs=not-used --disable-shared</code>

<DT>FreeBSD 4.7 i386 using LinuxThreads with <code>gcc</code> 2.95.4:
<DD>
<code>CFLAGS="-DHAVE_BROKEN_REALPATH -D__USE_UNIX98 -D_REENTRANT -D_THREAD_SAFE -I/usr/local/include/pthread/linuxthreads" CXXFLAGS="-DHAVE_BROKEN_REALPATH -D__USE_UNIX98 -D_REENTRANT -D_THREAD_SAFE -I/usr/local/include/pthread/linuxthreads" ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --enable-thread-safe-client --enable-local-infile --enable-assembler --with-named-thread-libs="-DHAVE_GLIBC2_STYLE_GETHOSTBYNAME_R -D_THREAD_SAFE -I /usr/local/include/pthread/linuxthreads -L/usr/local/lib -llthread -llgcc_r" --disable-shared --with-embedded-server --with-innodb</code>

<DT>QNX Neutrino 6.2.1 i386 with <code>gcc</code> 2.95.3qnx-nto 20010315:
<DD>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared</code>

</DL>

<P>
The following binaries are built on third-party systems kindly provided to
MySQL AB by other users. These are provided only as a courtesy; MySQL AB
does not have full control over these systems, so we can provide only
limited support for the binaries built on them.

</P>
<DL COMPACT>

<DT>SCO Unix 3.2v5.0.6 i386 with <code>gcc</code> 2.95.3:
<DD>
<code>CFLAGS="-O3 -mpentium" LDFLAGS=-static CXX=gcc CXXFLAGS="-O3 -mpentium -felide-constructors" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --enable-thread-safe-client --disable-shared</code>

<DT>SCO OpenUnix 8.0.0 i386 with <code>CC</code> 3.2:
<DD>
<code>CC=cc CFLAGS="-O" CXX=CC ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-z-libs=no --enable-thread-safe-client --disable-shared</code>

<DT>Compaq Tru64 OSF/1 V5.1 732 alpha with <code>cc/cxx</code> (Compaq C V6.3-029i / DIGITAL C++ V6.1-027):
<DD>
<code>CC="cc -pthread" CFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed -speculate all" CXX="cxx -pthread" CXXFLAGS="-O4 -ansi_alias -fast -inline speed -speculate all -noexceptions -nortti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --with-named-thread-libs="-lpthread -lmach -lexc -lc" --disable-shared --with-mysqld-ldflags=-all-static</code>

<DT>SGI Irix 6.5 IP32 with <code>gcc</code> 3.0.1:
<DD>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile  --disable-shared</code>

<DT>FreeBSD/sparc64 5.0 with <code>gcc</code> 3.2.1:
<DD>
<code>CFLAGS=-DHAVE_BROKEN_REALPATH ./configure --prefix=/usr/local/mysql --localstatedir=/usr/local/mysql/data --libexecdir=/usr/local/mysql/bin --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --disable-shared --with-innodb</code>
</DL>

<P>
The following compile options have been used for binary packages that MySQL
AB provided in the past. These binaries no longer are being updated, but the
compile options are listed here for reference purposes.

</P>
<DL COMPACT>

<DT>Linux 2.2.xx SPARC with <code>egcs</code> 1.1.2:
<DD>
<code>CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex --enable-thread-safe-client --enable-local-infile --enable-assembler --disable-shared</code>

<DT>Linux 2.2.x with x686 with <code>gcc</code> 2.95.2:
<DD>
<code>CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --enable-assembler --with-mysqld-ldflags=-all-static --disable-shared --with-extra-charsets=complex</code>

<DT>SunOS 4.1.4 2 sun4c with <code>gcc</code> 2.7.2.1:
<DD>
<code>CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors" ./configure --prefix=/usr/local/mysql --disable-shared --with-extra-charsets=complex --enable-assembler</code>

<DT>SunOS 5.5.1 (and above) sun4u with <code>egcs</code> 1.0.3a or 2.90.27 or
<DD>
<code>gcc</code> 2.95.2 and newer:
<code>CC=gcc CFLAGS="-O3" CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" ./configure --prefix=/usr/local/mysql --with-low-memory --with-extra-charsets=complex --enable-assembler</code>

<DT>SunOS 5.6 i86pc with <code>gcc</code> 2.8.1:
<DD>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-low-memory --with-extra-charsets=complex</code>

<DT>BSDI BSD/OS 3.1 i386 with <code>gcc</code> 2.7.2.1:
<DD>
<code>CC=gcc CXX=gcc CXXFLAGS=-O ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>

<DT>BSDI BSD/OS 2.1 i386 with <code>gcc</code> 2.7.2:
<DD>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>

<DT>AIX 4.2 with <code>gcc</code> 2.7.2.2:
<DD>
<code>CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql --with-extra-charsets=complex</code>
</DL>

<P>
Anyone who has more optimal options for any of the preceding configurations
listed can always mail them to the MySQL <code>internals</code> mailing list.
See section <A HREF="manual_Introduction.html#Mailing-list">1.4.1.1  The MySQL Mailing Lists</A>.

</P>
<P>
RPM distributions prior to MySQL 3.22 are user-contributed.
Beginning with MySQL 3.22, RPM distributions are generated by MySQL AB.

</P>
<P>
If you want to compile a debug version of MySQL, you should add
<code>--with-debug</code> or <code>--with-debug=full</code> to the preceding
<code>configure</code> commands and remove any <code>-fomit-frame-pointer</code> options.

</P>



<H3><A NAME="Getting_MySQL" HREF="manual_toc.html#Getting_MySQL">2.1.3  How to Get MySQL</A></H3>

<P>
<A NAME="IDX143"></A>
<A NAME="IDX144"></A>
<A NAME="IDX145"></A>
<A NAME="IDX146"></A>
<A NAME="IDX147"></A>
<A NAME="IDX148"></A>

</P>
<P>
Check the MySQL downloads page (<a HREF="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>) for
information about the current version and for downloading instructions.
For a complete up-to-date list of MySQL download mirror sites, see
<a HREF="http://dev.mysql.com/downloads/mirrors.html">http://dev.mysql.com/downloads/mirrors.html</a>.
There you will also find information about becoming a MySQL mirror
site and how to report a bad or out-of-date mirror.

</P>
<P>
Our main mirror is located at <a HREF="http://mirrors.sunsite.dk/mysql/">http://mirrors.sunsite.dk/mysql/</a>.

</P>



<H3><A NAME="Verifying_Package_Integrity" HREF="manual_toc.html#Verifying_Package_Integrity">2.1.4  Verifying Package Integrity Using MD5 Checksums or <code>GnuPG</code></A></H3>

<P>
After you have downloaded the MySQL package that suits your needs and before
you attempt to install it, you should make sure that it is intact and has not
been tampered with. MySQL AB offers three means of integrity checking:

</P>

<UL>

<LI>

MD5 checksums

<LI>

Cryptographic signatures using <code>GnuPG</code>, the GNU Privacy Guard

<LI>

For RPM packages, the built-in RPM integrity verification mechanism

</UL>

<P>
The following sections describe how to use these methods.

</P>
<P>
If you notice that the MD5 checksum or GPG signatures
do not match, first try to download the respective package one more time,
perhaps from another mirror site. If you repeatedly cannot successfully
verify the integrity of the package, please notify us about such incidents,
including the full package name and the download site you have been using,
at <a HREF="mailto:webmaster@mysql.com">webmaster@mysql.com</a> or <a HREF="mailto:build@mysql.com">build@mysql.com</a>.
Do not report downloading problems using the bug-reporting system.

</P>



<H4><A NAME="Verifying_MD5_Checksum" HREF="manual_toc.html#Verifying_MD5_Checksum">2.1.4.1  Verifying the MD5 Checksum</A></H4>

<P>
After you have downloaded a MySQL package, you should make sure that its MD5
checksum matches the one provided on the MySQL download pages. Each package
has an individual checksum that you can verify with the following command,
where <code>package_name</code> is the name of the package you downloaded:

</P>

<PRE>
shell&#62; md5sum package_name
</PRE>

<P>
Example:

<PRE>
shell&#62; md5sum mysql-standard-4.0.17-pc-linux-i686.tar.gz
60f5fe969d61c8f82e4f7f62657e1f06  mysql-standard-4.0.17-pc-linux-i686.tar.gz
</PRE>

<P>
You should verify that the resulting checksum (the string of hexadecimal
digits) matches the one displayed on
the download page immediately below the respective package.

</P>
<P>
Note that not all operating systems support the <code>md5sum</code> command. On
some, it is simply called <code>md5</code> and others do not ship it at all. On
Linux, it is part of the <code>GNU Text Utilities</code> package, which is
available for a wide range of platforms. You can download the source code
from <a HREF="http://www.gnu.org/software/textutils/">http://www.gnu.org/software/textutils/</a> as well. If you have
<code>OpenSSL</code> installed, you can also use the command <code>openssl md5
package_name</code> instead. A DOS/Windows implementation of the <code>md5</code>
command is available from <a HREF="http://www.fourmilab.ch/md5/">http://www.fourmilab.ch/md5/</a>.

</P>



<H4><A NAME="Checking_GPG_Signature" HREF="manual_toc.html#Checking_GPG_Signature">2.1.4.2  Signature Checking Using <code>GnuPG</code></A></H4>

<P>
Another method of verifying the integrity and authenticity of a package
is to use cryptographic signatures. This is more reliable than using MD5
checksums, but requires more work.

</P>
<P>
Beginning with MySQL 4.0.10 (February 2003), MySQL AB started signing
downloadable packages with <code>GnuPG</code> (<code>GNU Privacy Guard</code>).
<code>GnuPG</code> is an Open Source alternative to the very well-known
<code>Pretty Good Privacy</code> (<code>PGP</code>) by Phil Zimmermann.
See <a HREF="http://www.gnupg.org/">http://www.gnupg.org/</a> for more information about <code>GnuPG</code>
and how to obtain and install it on your system. Most Linux distributions
already ship with <code>GnuPG</code> installed by default.  For more information
about <code>OpenPGP</code>, see <a HREF="http://www.openpgp.org/">http://www.openpgp.org/</a>.

</P>

<P>
To verify the signature for a specific package, you first need to obtain a
copy of MySQL AB's public GPG build key. You can download the key from
<a HREF="http://www.keyserver.net/">http://www.keyserver.net/</a>.  The key that you want to obtain is named
<code>build@mysql.com</code>.  Alternatively, you can cut and paste the key
directly from the following text:

</P>

<PRE>
Key ID:
pub  1024D/5072E1F5 2003-02-03
     MySQL Package signing key (www.mysql.com) &#60;build@mysql.com&#62;
Fingerprint: A4A9 4068 76FC BD3C 4567  70C8 8C71 8D3B 5072 E1F5

Public Key (ASCII-armored):

-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.0.6 (GNU/Linux)
Comment: For info see http://www.gnupg.org

mQGiBD4+owwRBAC14GIfUfCyEDSIePvEW3SAFUdJBtoQHH/nJKZyQT7h9bPlUWC3
RODjQReyCITRrdwyrKUGku2FmeVGwn2u2WmDMNABLnpprWPkBdCk96+OmSLN9brZ
fw2vOUgCmYv2hW0hyDHuvYlQA/BThQoADgj8AW6/0Lo7V1W9/8VuHP0gQwCgvzV3
BqOxRznNCRCRxAuAuVztHRcEAJooQK1+iSiunZMYD1WufeXfshc57S/+yeJkegNW
hxwR9pRWVArNYJdDRT+rf2RUe3vpquKNQU/hnEIUHJRQqYHo8gTxvxXNQc7fJYLV
K2HtkrPbP72vwsEKMYhhr0eKCbtLGfls9krjJ6sBgACyP/Vb7hiPwxh6rDZ7ITnE
kYpXBACmWpP8NJTkamEnPCia2ZoOHODANwpUkP43I7jsDmgtobZX9qnrAXw+uNDI
QJEXM6FSbi0LLtZciNlYsafwAPEOMDKpMqAK6IyisNtPvaLd8lH0bPAnWqcyefep
rv0sxxqUEMcM3o7wwgfN83POkDasDbs3pjwPhxvhz6//62zQJ7Q7TXlTUUwgUGFj
a2FnZSBzaWduaW5nIGtleSAod3d3Lm15c3FsLmNvbSkgPGJ1aWxkQG15c3FsLmNv
bT6IXQQTEQIAHQUCPj6jDAUJCWYBgAULBwoDBAMVAwIDFgIBAheAAAoJEIxxjTtQ
cuH1cY4AnilUwTXn8MatQOiG0a/bPxrvK/gCAJ4oinSNZRYTnblChwFaazt7PF3q
zIhMBBMRAgAMBQI+PqPRBYMJZgC7AAoJEElQ4SqycpHyJOEAn1mxHijft00bKXvu
cSo/pECUmppiAJ41M9MRVj5VcdH/KN/KjRtW6tHFPYhMBBMRAgAMBQI+QoIDBYMJ
YiKJAAoJELb1zU3GuiQ/lpEAoIhpp6BozKI8p6eaabzF5MlJH58pAKCu/ROofK8J
Eg2aLos+5zEYrB/LsrkCDQQ+PqMdEAgA7+GJfxbMdY4wslPnjH9rF4N2qfWsEN/l
xaZoJYc3a6M02WCnHl6ahT2/tBK2w1QI4YFteR47gCvtgb6O1JHffOo2HfLmRDRi
Rjd1DTCHqeyX7CHhcghj/dNRlW2Z0l5QFEcmV9U0Vhp3aFfWC4Ujfs3LU+hkAWzE
7zaD5cH9J7yv/6xuZVw411x0h4UqsTcWMu0iM1BzELqX1DY7LwoPEb/O9Rkbf4fm
Le11EzIaCa4PqARXQZc4dhSinMt6K3X4BrRsKTfozBu74F47D8Ilbf5vSYHbuE5p
/1oIDznkg/p8kW+3FxuWrycciqFTcNz215yyX39LXFnlLzKUb/F5GwADBQf+Lwqq
a8CGrRfsOAJxim63CHfty5mUc5rUSnTslGYEIOCR1BeQauyPZbPDsDD9MZ1ZaSaf
anFvwFG6Llx9xkU7tzq+vKLoWkm4u5xf3vn55VjnSd1aQ9eQnUcXiL4cnBGoTbOW
I39EcyzgslzBdC++MPjcQTcA7p6JUVsP6oAB3FQWg54tuUo0Ec8bsM8b3Ev42Lmu
QT5NdKHGwHsXTPtl0klk4bQk4OajHsiy1BMahpT27jWjJlMiJc+IWJ0mghkKHt92
6s/ymfdf5HkdQ1cyvsz5tryVI3Fx78XeSYfQvuuwqp2H139pXGEkg0n6KdUOetdZ
Whe70YGNPw1yjWJT1IhMBBgRAgAMBQI+PqMdBQkJZgGAAAoJEIxxjTtQcuH17p4A
n3r1QpVC9yhnW2cSAjq+kr72GX0eAJ4295kl6NxYEuFApmr1+0uUq/SlsQ==
=YJkx
-----END PGP PUBLIC KEY BLOCK-----
</PRE>

<P>
You can import the build key into your personal public GPG keyring by using
<code>gpg --import</code>. For example, if you save the key in a file named
<tt>`mysql_pubkey.asc'</tt>, the import command looks like this:

</P>

<PRE>
shell&#62; gpg --import mysql_pubkey.asc
</PRE>

<P>
See the GPG documentation for more information on how to work with public keys.

</P>
<P>
After you have downloaded and imported the public build key,
download your desired MySQL package and the corresponding
signature, which also is available from the download page.
The signature file has the same name as the distribution file with an
<tt>`.asc'</tt> extension. For example:

</P>
<TABLE BORDER>
<TR><TD>Distribution file </TD><TD> <code>mysql-standard-4.0.17-pc-linux-i686.tar.gz</code>
</TD></TR>
<TR><TD>Signature file </TD><TD> <code>mysql-standard-4.0.17-pc-linux-i686.tar.gz.asc</code>
</TD></TR>
</TABLE>

<P>
Make sure that both files are stored in the same directory and then run
the following command to verify the signature for the distribution file:

</P>

<PRE>
shell&#62; gpg --verify package_name.asc
</PRE>

<P>
Example:

</P>

<PRE>
shell&#62; gpg --verify mysql-standard-4.0.17-pc-linux-i686.tar.gz.asc
gpg: Warning: using insecure memory!
gpg: Signature made Mon 03 Feb 2003 08:50:39 PM MET
using DSA key ID 5072E1F5
gpg: Good signature from
     "MySQL Package signing key (www.mysql.com) &#60;build@mysql.com&#62;"
</PRE>

<P>
The <code>Good signature</code> message indicates that everything is all right.
You can ignore the <code>insecure memory</code> warning.

</P>


<H4><A NAME="Checking_RPM_Signature" HREF="manual_toc.html#Checking_RPM_Signature">2.1.4.3  Signature Checking Using <code>RPM</code></A></H4>

<P>
For RPM packages, there is no separate signature. RPM packages have a
built-in GPG signature and MD5 checksum. You can verify a package by running
the following command:

</P>

<PRE>
shell&#62; rpm --checksig package_name.rpm
</PRE>

<P>
Example:

</P>

<PRE>
shell&#62; rpm --checksig MySQL-server-4.0.10-0.i386.rpm
MySQL-server-4.0.10-0.i386.rpm: md5 gpg OK
</PRE>

<P>
<strong>Note</strong>: If you are using RPM 4.1 and it complains about <code>(GPG)
NOT OK (MISSING KEYS: GPG#5072e1f5)</code>, even though you have imported the
MySQL public build key into your own GPG keyring, you need to import the
key into the RPM keyring first. RPM 4.1 no longer uses your personal GPG
keyring (or GPG itself). Rather, it maintains its own keyring because it is
a system-wide application and a user's GPG public keyring is a user-specific
file. To import the MySQL public key into the RPM keyring, first obtain the
key as described in the previous section. Then use <code>rpm --import</code>
to import the key.  For example, if you have the public key stored in a file
named <tt>`mysql_pubkey.asc'</tt>, import it using this command:

</P>

<PRE>
shell&#62; rpm --import mysql_pubkey.asc
</PRE>

<P>
If you need to obtain the MySQL public key, see section <A HREF="manual_Installing.html#Checking_GPG_Signature">2.1.4.2  Signature Checking Using <code>GnuPG</code></A>.

</P>



<H3><A NAME="Installation_layouts" HREF="manual_toc.html#Installation_layouts">2.1.5  Installation Layouts</A></H3>

<P>
<A NAME="IDX149"></A>
<A NAME="IDX150"></A>
<A NAME="IDX151"></A>
<A NAME="IDX152"></A>

</P>
<P>
This section describes the default layout of the directories created by
installing binary or source distributions provided by MySQL AB. If you
install a distribution provided by another vendor, some other layout might
be used.

</P>
<P>
On Windows, the default installation directory is <tt>`C:\mysql'</tt>. With MySQL version
4.1.5 and higher, this has changed to <tt>`C:\Program Files\MySQL\MySQL Server 4.1'</tt>, 
where 4.1 will be the major version of the installation. The folder has
the following subdirectories:

</P>
<TABLE BORDER>
<TR><TD><strong>Directory</strong> </TD><TD> <strong>Contents of Directory</strong>
</TD></TR>
<TR><TD><tt>`bin'</tt> </TD><TD> Client programs and the <code>mysqld</code> server
</TD></TR>
<TR><TD><tt>`data'</tt> </TD><TD> Log files, databases
</TD></TR>
<TR><TD><tt>`Docs'</tt> </TD><TD> Documentation
</TD></TR>
<TR><TD><tt>`examples'</tt> </TD><TD> Example programs and scripts
</TD></TR>
<TR><TD><tt>`include'</tt> </TD><TD> Include (header) files
</TD></TR>
<TR><TD><tt>`lib'</tt> </TD><TD> Libraries
</TD></TR>
<TR><TD><tt>`scripts'</tt> </TD><TD> Utility scripts
</TD></TR>
<TR><TD><tt>`share'</tt> </TD><TD> Error message files
</TD></TR>
</TABLE>

<P>
Installations created from Linux RPM distributions result in files under
the following system directories:

</P>
<TABLE BORDER>
<TR><TD><strong>Directory</strong> </TD><TD> <strong>Contents of Directory</strong>
</TD></TR>
<TR><TD><tt>`/usr/bin'</tt> </TD><TD> Client programs and scripts
</TD></TR>
<TR><TD><tt>`/usr/sbin'</tt> </TD><TD> The <code>mysqld</code> server
</TD></TR>
<TR><TD><tt>`/var/lib/mysql'</tt> </TD><TD> Log files, databases
</TD></TR>
<TR><TD><tt>`/usr/share/doc/packages'</tt> </TD><TD> Documentation
</TD></TR>
<TR><TD><tt>`/usr/include/mysql'</tt> </TD><TD> Include (header) files
</TD></TR>
<TR><TD><tt>`/usr/lib/mysql'</tt> </TD><TD> Libraries
</TD></TR>
<TR><TD><tt>`/usr/share/mysql'</tt> </TD><TD> Error message and character set files
</TD></TR>
<TR><TD><tt>`/usr/share/sql-bench'</tt> </TD><TD> Benchmarks
</TD></TR>
</TABLE>

<P>
On Unix, a <code>tar</code> file
binary distribution is installed by unpacking it at the installation
location you choose (typically <tt>`/usr/local/mysql'</tt>) and creates the
following directories in that location:

</P>
<TABLE BORDER>
<TR><TD><strong>Directory</strong> </TD><TD> <strong>Contents of Directory</strong>
</TD></TR>
<TR><TD><tt>`bin'</tt> </TD><TD> Client programs and the <code>mysqld</code> server
</TD></TR>
<TR><TD><tt>`data'</tt> </TD><TD> Log files, databases
</TD></TR>
<TR><TD><tt>`docs'</tt> </TD><TD> Documentation, ChangeLog
</TD></TR>
<TR><TD><tt>`include'</tt> </TD><TD> Include (header) files
</TD></TR>
<TR><TD><tt>`lib'</tt> </TD><TD> Libraries
</TD></TR>
<TR><TD><tt>`scripts'</tt> </TD><TD> <code>mysql_install_db</code>
</TD></TR>
<TR><TD><tt>`share/mysql'</tt> </TD><TD> Error message files
</TD></TR>
<TR><TD><tt>`sql-bench'</tt> </TD><TD> Benchmarks
</TD></TR>
</TABLE>

<P>
A source distribution is installed after you configure and compile it.  By
default, the installation step installs files under <tt>`/usr/local'</tt>, in the
following subdirectories:

</P>
<TABLE BORDER>
<TR><TD><strong>Directory</strong> </TD><TD> <strong>Contents of Directory</strong>
</TD></TR>
<TR><TD><tt>`bin'</tt> </TD><TD> Client programs and scripts
</TD></TR>
<TR><TD><tt>`include/mysql'</tt> </TD><TD> Include (header) files
</TD></TR>
<TR><TD><tt>`info'</tt> </TD><TD> Documentation in Info format
</TD></TR>
<TR><TD><tt>`lib/mysql'</tt> </TD><TD> Libraries
</TD></TR>
<TR><TD><tt>`libexec'</tt> </TD><TD> The <code>mysqld</code> server
</TD></TR>
<TR><TD><tt>`share/mysql'</tt> </TD><TD> Error message files
</TD></TR>
<TR><TD><tt>`sql-bench'</tt> </TD><TD> Benchmarks and <code>crash-me</code> test
</TD></TR>
<TR><TD><tt>`var'</tt> </TD><TD> Databases and log files
</TD></TR>
</TABLE>

<P>
Within an installation directory, the layout of a source installation differs
from that of a binary installation in the following ways:

</P>

<UL>
<LI>

The <code>mysqld</code> server is installed in the <tt>`libexec'</tt>
directory rather than in the <tt>`bin'</tt> directory.

<LI>

The data directory is <tt>`var'</tt> rather than <tt>`data'</tt>.

<LI>

<code>mysql_install_db</code> is installed in the <tt>`bin'</tt> directory
rather than in the <tt>`scripts'</tt> directory.

<LI>

The header file and library directories are <tt>`include/mysql'</tt> and
<tt>`lib/mysql'</tt> rather than <tt>`include'</tt> and <tt>`lib'</tt>.
</UL>

<P>
You can create your own binary installation from a compiled source
distribution by executing the <tt>`scripts/make_binary_distribution'</tt> script
from the top directory of the source distribution.

</P>


<H2><A NAME="Quick_Standard_Installation" HREF="manual_toc.html#Quick_Standard_Installation">2.2  Standard MySQL Installation Using a Binary Distribution</A></H2>

<P>
The next several sections cover the installation of MySQL on platforms where
we offer packages using the native packaging format of the respective
platform. (This is also known as performing a ``binary install.'') However,
binary distributions of MySQL are available for many other platforms as
well. See section <A HREF="manual_Installing.html#Installing_binary">2.7  Installing MySQL on Other Unix-Like Systems</A> for generic installation instructions for
these packages that apply to all platforms.

</P>
<P>
See section <A HREF="manual_Installing.html#General_Installation_Issues">2.1  General Installation Issues</A> for more information on what other binary
distributions are available and how to obtain them.

</P>



<H2><A NAME="Windows_installation" HREF="manual_toc.html#Windows_installation">2.3  Installing MySQL on Windows</A></H2>

<P>
A native Windows version of MySQL has been available from MySQL AB since
version 3.21 and has grown in popularity until it now represents a sizable
percentage of the daily downloads of MySQL. This section describes the
process for installing MySQL on Windows.

</P>
<P>
With the release of MySQL 4.1.5, MySQL AB has introduced a new installer for
the Windows version of MySQL, combined with a new GUI Configuration Wizard.
This combination automatically installs MySQL, creates an option file,
starts the server, and secures the default user accounts.

</P>
<P>
If you have already installed a version of MySQL prior to version 4.1.5,
you must perform the following steps:

</P>

<OL>
<LI>

Obtain and install the distribution.

<LI>

Set up an option file if necessary.

<LI>

Select the server that you want to use.

<LI>

Start the server.

<LI>

Assign passwords to the initial MySQL accounts.

</OL>

<P>
This process also must be followed with newer MySQL installations where the
installation package does not include an installer.

</P>
<P>
MySQL for Windows is available in two distribution formats:

</P>

<UL>

<LI>

The binary distribution contains a setup program that installs
everything you need so that you can start the server immediately.

<LI>

The source distribution contains all the code and support files
for building the executables using the VC++ 6.0 compiler.

</UL>

<P>
Generally speaking, you should use the binary distribution. It's simpler, and
you need no additional tools to get MySQL up and running.

</P>
<P>
This section describes how to install MySQL on Windows using a binary
distribution.  To install using a source distribution, see
section <A HREF="manual_Installing.html#Windows_source_build">2.8.6  Installing MySQL from Source on Windows</A>.

</P>



<H3><A NAME="Windows_system_requirements" HREF="manual_toc.html#Windows_system_requirements">2.3.1  Windows System Requirements</A></H3>

<P>
To run MySQL on Windows, you need the following:

</P>

<UL>

<LI>

A 32-bit Windows operating system such as 9x, Me, NT, 2000, XP, or Windows
Server 2003.

A Windows NT based operating system (NT, 2000, XP, 2003)  permits you to run
the MySQL server as a service. The use of a Windows NT based operating
system is strongly recommended. See section <A HREF="manual_Installing.html#Windows_start_service">2.3.12  Starting MySQL as a Windows Service</A>.

<LI>

TCP/IP protocol support.

<LI>

A copy of the MySQL binary distribution for Windows, which
can be downloaded from <a HREF="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.
See section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.

Note: If you download the distribution via FTP, we recommend the use of an
adequate FTP client with a resume feature to avoid corruption of files
during the download process.

<LI>

A tool that can read <tt>`.zip'</tt> files, to unpack the distribution file.

<LI>

Enough space on the hard drive to unpack, install, and create the
databases in accordance with your requirements (generally a minimum of 200 megabytes is recommended.)

</UL>

<P>
You may also have the following optional requirements:

</P>

<UL>

<LI>

If you plan to connect to the MySQL server via ODBC, you
also need a Connector/ODBC driver. See section <A HREF="manual_MySQL_Connectors.html#ODBC_Connector">22.1  MySQL ODBC Support</A>.

<LI>

If you need tables with a size larger than 4GB, install MySQL
on an NTFS or newer filesystem. Don't forget to use <code>MAX_ROWS</code> and
<code>AVG_ROW_LENGTH</code> when you create tables.
See section <A HREF="manual_SQL_Syntax.html#CREATE_TABLE">13.2.6  <code>CREATE TABLE</code> Syntax</A>.

</UL>



<H3><A NAME="Windows_choosing_package" HREF="manual_toc.html#Windows_choosing_package">2.3.2  Choosing An Installation Package</A></H3>

<P>
Starting with MySQL version 4.1.5, there are three install packages to choose from
when installing MySQL on Windows. The Packages are as follows:

</P>

<UL>
<LI>

<strong>The Essentials Package</strong>: This package has a filename similar to
<tt>`mysql-essential-4.1.9-win32.msi'</tt> and contains the minimum files needed
to install MySQL on Windows, including the Configuration Wizard. This package
does not include optional components such as the embedded server and benchmark
suite.

<LI>

<strong>The Complete Package</strong>: This package has a filename similar to
<tt>`mysql-4.1.9-win32.zip'</tt> and contains all files needed for a complete
Windows installation, including the Configuration Wizard. This package includes
optional components such as the embedded server and benchmark suite.

<LI>

<strong>The Noinstall Archive</strong>: This package has a filename similar to
<tt>`mysql-noinstall-4.1.9-win32.zip'</tt> and contains all the files found in the
Complete install package, with the exception of the Configuration Wizard. This
package does not include an automated installer, and must be manually installed
and configured.

</UL>

<P>
The Essentials package is recommended for most users.

</P>
<P>
Your choice of install package affects the installation process you must follow. 
If you choose to install either the Essentials or Complete install
packages, see section <A HREF="manual_Installing.html#Windows_using_installer">2.3.3  Installing MySQL with the Automated Installer</A>. If you choose to install
MySQL from the Noinstall archive, see section <A HREF="manual_Installing.html#Windows_install_archive">2.3.6  Installing MySQL from a noinstall Zip Archive</A>.

</P>


<H3><A NAME="Windows_using_installer" HREF="manual_toc.html#Windows_using_installer">2.3.3  Installing MySQL with the Automated Installer</A></H3>

<P>
Starting with MySQL 4.1.5, users can use the new MySQL Installation Wizard and 
MySQL Configuration Wizard to install MySQL on Windows. The MySQL Installation 
Wizard and MySQL Configuration Wizard are designed to install and configure 
MySQL in such a way that new users can immediately get started using MySQL. 

</P>
<P>
The MySQL Installation Wizard and MySQL Configuration Wizard are available
in the Essentials and Complete install packages, and are recommended for
most standard MySQL installations. Exceptions include users who need to
install multiple instances of MySQL on a single server and advanced users
who want complete control of server configuration.

</P>
<P>
If you are installing a version of MySQL prior to MySQL 4.1.5, please follow
the instructions for installing MySQL from the Noinstall installation
package. See section <A HREF="manual_Installing.html#Windows_install_archive">2.3.6  Installing MySQL from a noinstall Zip Archive</A>.

</P>



<H3><A NAME="Windows_install_wizard" HREF="manual_toc.html#Windows_install_wizard">2.3.4  Using the MySQL Installation Wizard</A></H3>



<H4><A NAME="mysql-install-wizard-introduction" HREF="manual_toc.html#mysql-install-wizard-introduction">2.3.4.1  Introduction</A></H4>

<P>
MySQL Installation Wizard is a new installer for the MySQL server that uses
the latest installer technologies for Microsoft Windows. The MySQL
Installation Wizard, in combination with the MySQL Configuration Wizard,
allows a user to install and configure a MySQL server that is ready for use
immediately after installation.

</P>
<P>
The MySQL Installation Wizard is the standard installer for all MySQL server
distributions, version 4.1.5 and higher. Users of previous versions of MySQL
need to manually shut down and remove their existing MySQL installations
before installing MySQL with the MySQL Installation Wizard. See
section <A HREF="manual_Installing.html#mysql-install-wizard-upgrading">2.3.4.7  Upgrading MySQL</A> for more information on upgrading from
a previous version.

</P>
<P>
Microsoft has included an improved version of their Microsoft Windows
Installer (MSI) in the recent versions of Windows. Using the MSI has
become the de-facto standard for application installations on Windows
2000, Windows XP, and Windows Server 2003. The MySQL Installation Wizard makes
use of this technology to provide a smoother and more flexible
installation progress.

</P>
<P>
The Microsoft Windows Installer Engine was updated with the release
of Windows XP; those using a previous version of Windows can reference
<a HREF="http://support.microsoft.com/default.aspx?scid=kb;EN-US;292539">this
Microsoft Knowledge Base article</a> for information on upgrading
to the latest version of the Windows Installer Engine.

</P>
<P>
Further, Microsoft has introduced the WiX (Windows Installer XML)
tool set recently. It is the first highly acknowledged Open Source
project from Microsoft. We switched to WiX because it is an Open
Source project and it allows us to handle the complete Windows
installation process in a flexible way with scripts.

</P>
<P>
Improving the MySQL Installation Wizard depends on the support and feedback of
users like you. If you find that the MySQL Installation Wizard is lacking some
feature important to you, or if you discover a bug, please use our
<a HREF="http://bugs.mysql.com">MySQL Bug System</a> to
request features or report problems.

</P>



<H4><A NAME="mysql-install-wizard-starting" HREF="manual_toc.html#mysql-install-wizard-starting">2.3.4.2  Downloading and Starting the MySQL Installation Wizard</A></H4>

<P>
The MySQL server install packages can be downloaded from
<a HREF="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.
If the package you download is contained within a Zip archive, you
need to extract the archive first.

</P>
<P>
The process for starting the wizard depends on the contents of the
install package you download. If there is a
<code>setup.exe</code> file present, double-click it to start
the install process. If there is a <code>.msi</code> file
present, double-click it to start the install process.

</P>



<H4><A NAME="mysql-install-wizard-install-type" HREF="manual_toc.html#mysql-install-wizard-install-type">2.3.4.3  Choosing an Install Type</A></H4>

<P>
There are up three installation types available:
<code>Typical</code>, <code>Complete</code>, and
<code>Custom</code>.

</P>
<P>
The <code>Typical</code> installation type installs the MySQL
server, the <code>mysql</code> command-line client, and the
command-line utilities. The command-line clients and utilities
include <code>mysqldump</code>, <code>myisamchk</code>,
and several other tools to help you manage the MySQL server.

</P>
<P>
The <code>Complete</code> installation type installs all
components included in the installation package. The full
installation package includes components such as the embedded server
library, the benchmark suite, support scripts, and documentation.

</P>
<P>
The <code>Custom</code> installation type gives you complete
control over which packages you wish to install and the installation
path that will be used. See
section <A HREF="manual_Installing.html#mysql-install-wizard-custom-install">2.3.4.4  The Custom Install Dialog</A>
for more information on performing a custom install.

</P>
<P>
If you choose the <code>Typical</code> or
<code>Complete</code> installation types and click the
Next button, you advance to the confirmation
screen to confirm your choices and begin the installation. If you
choose the <code>Custom</code> installation type and click the
Next button, you advance to the custom install
dialog, described in
section <A HREF="manual_Installing.html#mysql-install-wizard-custom-install">2.3.4.4  The Custom Install Dialog</A>

</P>



<H4><A NAME="mysql-install-wizard-custom-install" HREF="manual_toc.html#mysql-install-wizard-custom-install">2.3.4.4  The Custom Install Dialog</A></H4>

<P>
If you wish to change the installation path or the specific
components that are installed by the MySQL Installation Wizard, you should
choose the <code>Custom</code> installation type.

</P>
<P>
All available components are listed in a tree view on the left side
of the custom install dialog. Components that will not be installed
have a red <code>X</code> icon, components that will be
installed have a gray icon. To change whether a component is
installed, click on the component's icon and choose an new option
from the drop-down list that appears.

</P>
<P>
You can change the default installation path by clicking the
Change... button to the right of the displayed
installation path.

</P>
<P>
After choosing your install components and installation path, click
the Next button to advance to the confirmation
dialog.

</P>



<H4><A NAME="mysql-install-wizard-confirmation-dialog" HREF="manual_toc.html#mysql-install-wizard-confirmation-dialog">2.3.4.5  The Confirmation Dialog</A></H4>

<P>
Once you choose an installation type and optionally choose your
installation components, you advance to the confirmation dialog. Your
installation type and installation path are displayed for you to
review.

</P>
<P>
To install MySQL if you are satisfied with your settings, click the
Install button. To change your settings, click
the Back button. To exit the MySQL
Installation Wizard without installing MySQL, click the
Cancel button.

</P>
<P>
After installation is complete, you will be given the option of
registering with the MySQL web site. Registration will give you
access to post in the MySQL forums at
<a HREF="http://forums.mysql.com">forums.mysql.com</a>, along
with the ability to report bugs at
<a HREF="http://bugs.mysql.com">bugs.mysql.com</a> and
subscribe to the newsletter. The final screen of the installer
provides a summary of the installation and gives you the option to
launch the MySQL Configuration Wizard, which you can use to create a
configuration file, install the MySQL service, and configure
security.

</P>



<H4><A NAME="mysql-install-wizard-changes" HREF="manual_toc.html#mysql-install-wizard-changes">2.3.4.6  Changes Made by MySQL Installation Wizard</A></H4>

<P>
Once you click the Install button, the
MySQL Installation Wizard begins the installation process and makes certain
changes to your system which are described in the sections that
follow.

</P>
<P>
<strong>Changes to the Registry</strong>

</P>
<P>
The MySQL Installation Wizard creates one Windows registry key in a typical
install situation, located in
<code>HKEY_LOCAL_MACHINE\SOFTWARE\MySQL AB</code>.

</P>
<P>
The MySQL Installation Wizard creates a key named after the major version of
the server that is being installed, such as <code>MySQL Server
4.1</code>. It contains two string values,
<code>Location</code> and <code>Version</code>. The
<code>Location</code> string contains the path to the
installation directory. In a default installation it contains
<code>C:\Program Files\MySQL\MySQL Server 4.1\</code>. The
<code>Version</code> string contains the release number. For
example, for an installation of MySQL Server 4.1.5 the key contains
a value of <code>4.1.5</code>.

</P>
<P>
These registry keys are used to help external tools identify the
installed location of the MySQL server, preventing a complete scan
of the hard-disk to determine the installation path of the MySQL
server. The registry keys are not required to run the server and
when using the <code>noinstall</code> Zip archive the registry
keys are not created.

</P>

<P>
<strong>Changes to the Start Menu</strong>

</P>
<P>
The MySQL Installation Wizard creates a new entry in the Windows Start menu
under a common MySQL menu heading named after the
major version of MySQL that you have installed. For example, if you
install MySQL 4.1, the MySQL Installation Wizard creates a MySQL
Server 4.1 section in the start menu.

</P>
<P>
The following entries are created within the new Start menu section:

</P>

<UL>

<LI>

<code>MySQL Command Line Client</code>: This is a shortcut to
the <code>mysql</code> command-line client and is configured
to connect as the <code>root</code> user. The shortcut prompts for a <code>root</code> user
password when connecting.

<LI>

<code>MySQL Server Instance Config Wizard</code>: This is a
shortcut to the MySQL Configuration Wizard. Use this shortcut to configure a
newly installed server, or to re-configure an existing server.

<LI>

<code>MySQL Documentation</code>: This is a link to the MySQL
server documentation that is stored locally in the MySQL server
installation directory. This option is not available when the MySQL
server is installed from the <code>essential</code>
installation package.

</UL>

<P>
<strong>Changes to the File System</strong>

</P>
<P>
The MySQL Installation Wizard by default installs the MySQL server to
<code>C:\<var>Program Files</var>\MySQL\MySQL
Server <var>4.1</var></code>, where
<var>Program Files</var> is the default location for
applications in your system, and <var>4.1</var> is
the major version of your MySQL server. This is the new recommended
location for the MySQL server, replacing the previous default
location of <tt>`c:\mysql'</tt>.

</P>
<P>
By default, all MySQL applications are stored in a common directory
at <code>C:\<var>Program
Files</code>\MySQL</var>, where <var>Program
Files</var> is the default location for applications in your
Windows installation. A typical MySQL installation on a developer
machine may look like this:

</P>

<PRE>
C:\Program Files\MySQL\MySQL Server 4.1
C:\Program Files\MySQL\MySQL Server 5.0
C:\Program Files\MySQL\MySQL Administrator 1.0
C:\Program Files\MySQL\MySQL Query Browser 1.0
</PRE>

<P>
This approach makes it easier to manage and maintain all MySQL
applications installed on a particular system.

</P>



<H4><A NAME="mysql-install-wizard-upgrading" HREF="manual_toc.html#mysql-install-wizard-upgrading">2.3.4.7  Upgrading MySQL</A></H4>

<P>
From MySQL version 4.1.5, the new MySQL Installation Wizard can perform server
upgrades automatically using the upgrade capabilities of MSI. That
means you do not need to remove a previous installation manually
before installing a new release. The installer automatically shuts
down and removes the previous MySQL service before installing the new
version.

</P>
<P>
Automatic upgrades are only available when upgrading between
installations that have the same major and minor version numbers. For
example, you can upgrade automatically from MySQL 4.1.5 to MySQL
4.1.6, but not from MySQL 4.1 to MySQL 5.0.

</P>
<P>
<em>If you are upgrading MySQL version 4.1.4 or earlier to
version 4.1.5 or later, you must first manually shut down and remove
the older installation before upgrading. Be sure to back up your
databases before performing such an upgrade, so that you can restore
the databases after the upgrade is completed. <em>It is always
recommended that you back up your data before performing any
upgrades</em>.</em>

</P>
<P>
See section <A HREF="manual_Installing.html#Windows_upgrading">2.3.15  Upgrading MySQL on Windows</A>.

</P>



<H3><A NAME="Windows_config_wizard" HREF="manual_toc.html#Windows_config_wizard">2.3.5  Using the Configuration Wizard</A></H3>



<H4><A NAME="mysql-config-wizard-introduction" HREF="manual_toc.html#mysql-config-wizard-introduction">2.3.5.1  Introduction</A></H4>

<P>
The MySQL Configuration Wizard helps automate the processs of configuring your
server under Windows. The MySQL Configuration Wizard creates a custom
<tt>`my.ini'</tt> file by asking you a series of questions
and then applying your responses to a template to generate a
<tt>`my.ini'</tt> file that is tuned to your installation.

</P>
<P>
The MySQL Configuration Wizard is included with the MySQL server starting with
MySQL version 4.1.5, but is designed to work with MySQL servers
versions 4.0 and higher. The MySQL Configuration Wizard is currently available
for Windows users only.

</P>
<P>
MySQL Configuration Wizard is to a large extent the result of feedback MySQL AB
has received from many users over a period of several years. However,
if you find it's lacking some feature important to you, or if you
discover a bug, please use our
<a HREF="http://bugs.mysql.com">MySQL Bug System</a> to
request features or report problems.

</P>



<H4><A NAME="mysql-config-wizard-starting" HREF="manual_toc.html#mysql-config-wizard-starting">2.3.5.2  Starting the MySQL Configuration Wizard</A></H4>

<P>
The MySQL Configuration Wizard is typically launched from the MySQL Installation Wizard,
as the MySQL Installation Wizard exits. You can also launch the
MySQL Configuration Wizard by clicking the MySQL Server Instance Config
Wizard entry in the MySQL section of the
<code>Start</code> menu.

</P>
<P>
In addition, you can navigate to the <code>bin</code> directory
of your MySQL installation and launch the
<tt>`MySQLInstanceConfig.exe'</tt> file directly.

</P>



<H4><A NAME="mysql-config-wizard-maintenance" HREF="manual_toc.html#mysql-config-wizard-maintenance">2.3.5.3  Choosing a Maintenance Option</A></H4>

<P>
If the MySQL Configuration Wizard detects an existing
<tt>`my.ini'</tt> file, you will have the option of either
re-configuring your existing server, or removing the server instance
by deleting the <tt>`my.ini'</tt> file and stopping and
removing the MySQL service.

</P>
<P>
To reconfigure an existing server, choose the <code>Re-configure
Instance</code> option and click the Next
button. Your existing <tt>`my.ini'</tt> file will be
renamed to <code>my
<var>timestamp</var>.ini.bak</code>, where
<var>timestamp</var> is the date and time the
existing <tt>`my.ini'</tt> file was created. To remove the
existing server instance, choose the <code>Remove
Instance</code> option and click the Next
button.

</P>
<P>
If you choose the <code>Remove Instance</code> option, you
advance to a confirmation window. Click the
Execute button and the MySQL Configuration Wizard will
stop and remove the MySQL service and delete the
<tt>`my.ini'</tt> file. The server installation and its
<code>data</code> folder will not be removed.

</P>
<P>
If you choose the <code>Re-configure Instance</code> option,
you advance to the <code>Configuration Type</code> dialog where
you can choose the type of installation you wish to configure.

</P>



<H4><A NAME="mysql-config-wizard-configuration-type" HREF="manual_toc.html#mysql-config-wizard-configuration-type">2.3.5.4  Choosing a Configuration Type</A></H4>

<P>
When you start the MySQL Configuration Wizard for a new MySQL installation, or
choose the <code>Re-configure Instance</code> option for an
existing installation, you advance to the <code>Configuration
Type</code> dialog.

</P>
<P>
There are two configuration types available: <code>Detailed
Configuration</code> and <code>Standard
Configuration</code>. The <code>Standard
Configuration</code> option is intended for new users who want to
get started with MySQL quickly without having to make a lot of
decisions in regards to server configuration. The <code>Detailed
Configuration</code> option is intended for advanced users who
want more fine-grained control of server configuration.

</P>
<P>
If you are new to MySQL and need a server configured as a
single-user developer machine the <code>Standard
Configuration</code> will suit your needs. Choosing the
<code>Standard Configuration</code> option causes the
MySQL Configuration Wizard to automatically set all configuration options with
the exception of the <code>Service Options</code> and
<code>Security Options</code>.

</P>

<P>
The <code>Standard Configuration</code> sets options that may
be incompatible with systems where there are existing MySQL
installations. If you have an existing MySQL installation on your
system in addition to the installation you wish to configure, the
<code>Detailed Configuration</code> option is recommended.

</P>
<P>
To complete the <code>Standard Configuration</code>, please refer to the sections
on <code>Service Options</code> and <code>Security Options</code>, located at
section <A HREF="manual_Installing.html#mysql-config-wizard-service">2.3.5.11  The Service Options Dialog</A> and section <A HREF="manual_Installing.html#mysql-config-wizard-security">2.3.5.12  The Security Options Dialog</A>
respectively.

</P>



<H4><A NAME="mysql-config-wizard-server-type" HREF="manual_toc.html#mysql-config-wizard-server-type">2.3.5.5  The Server Type Dialog</A></H4>

<P>
There are three different server types available to choose from, and
the server type you choose will affect the decisions the
MySQL Configuration Wizard makes with regards to memory, disk, and processor
usage.

</P>

<UL>

<LI>

<code>Developer Machine</code>: Choose this option for a
typical desktop workstation where MySQL is intended only for
personal use. It is assumed that many other desktop applications
will be running. The MySQL server will be configured to use minimal
system resources.

<LI>

<code>Server Machine</code>: Choose this option for a server
machine where the MySQL server will be running alongside other
server applications such as FTP, email, and web servers. The MySQL
server will be configured to use a medium portion of the system
resources.

<LI>

<code>Dedicated MySQL Server Machine</code>: Choose this
option for a server machine that is intended to run only the MySQL
server. It is assumed that no other applications will be running.
The MySQL server will be configured to use all available system
resources.

</UL>



<H4><A NAME="mysql-config-wizard-database-usage" HREF="manual_toc.html#mysql-config-wizard-database-usage">2.3.5.6  The Database Usage Dialog</A></H4>

<P>
The <code>Database Usage</code> dialog allows you to indicate
the table handlers you expect to use when creating MySQL tables. The
option you choose will determine whether the InnoDB table handler is
available and what percentage of the server resources are available
to InnoDB.

</P>

<UL>

<LI>

<code>Multifunctional Database</code>: This option enables
both the InnoDB and MyISAM table handlers and divides resources
evenly between the two. This option is recommended for users that
will use both table handlers on a regular basis.

<LI>

<code>Transactional Database Only</code>: This option enables
both the InnoDB and MyISAM table handlers but dedicates most server
resources toward the InnoDB table handler. This option is
recommended for users that will use InnoDB almost exclusively and
will make only minimal use of MyISAM.

<LI>

<code>Non-Transactional Database Only</code>: This option
disables the InnoDB table handler completely and dedicates all
server resources to the MyISAM table handler. This option is
recommended for users who will not be using InnoDB.

</UL>



<H4><A NAME="mysql-config-wizard-tablespace" HREF="manual_toc.html#mysql-config-wizard-tablespace">2.3.5.7  The InnoDB Tablespace Dialog</A></H4>

<P>
Some users may want to locate the InnoDB tablespace files in a
different location than the MySQL server data directory. Placing the
tablespace files in a seperate location can be desireable if your
system has a higher capacity or higher performance storage device
available, such as a RAID storage system.

</P>
<P>
To change the default location for the InnoDB tablespace files,
choose a new drive from the drop-down list of drive letters and
choose a new path from the drop-down list of paths. To create a
custom path, click the ... button.

</P>
<P>
If you are modifying the configuration of an existing server, you
must click the Modify button before you change
the path. In this situation you will have to manually move the
existing tablespace files to the new location before starting the
server.

</P>



<H4><A NAME="mysql-config-wizard-connections" HREF="manual_toc.html#mysql-config-wizard-connections">2.3.5.8  The Concurrent Connections Dialog</A></H4>

<P>
It is important to set a limit to the number of concurrent
connections to the MySQL server that can be established to prevent
the server from running out of resources. The <code>Concurrent
Connections</code> dialog allows you to choose the expected usage
of your server, and will set the limit for concurrent connections
accordingly. It is also possible to manually set the concurrent
connection limit.

</P>

<UL>

<LI>

<code>Decision Support (DSS)/OLAP</code>: Choose this option
if your server will not require a large number of concurrent
connections. The maximum number of connections will be set at 100,
with an average of 20 concurrent connections assumed.

<LI>

<code>Online Transaction Processing (OLTP)</code>: Choose this
option if your server will require a large number of concurrent
connections. The maximum number of connections will be set at 500.

<LI>

<code>Manual Setting</code>: Choose this option to manually
set the maximum number of concurrent connections to the server.
Choose the number of concurrent connections from the drop-down box
provided, or type the maximum number of connections into the
drop-down box if the number you desire is not listed.

</UL>



<H4><A NAME="mysql-config-wizard-networking" HREF="manual_toc.html#mysql-config-wizard-networking">2.3.5.9  The Networking Options Dialog</A></H4>

<P>
Use the <code>Networking Options</code> dialog to enable or
disable TCP/IP networking and to configure the port number that is
used to connect to the MySQL server.

</P>
<P>
TCP/IP networking is enabled by default. To disable TCP/IP
networking, uncheck the box next to the <code>Enable TCP/IP
Networking</code> option.

</P>
<P>
Port 3306 is used by default. To change the port used to access
MySQL, choose a new port number from the drop-down box or type a new
port number directly into the drop-down box. If the port number you
choose is already in use you will be prompted to confirm your choice
of port number.

</P>



<H4><A NAME="mysql-config-wizard-character-set" HREF="manual_toc.html#mysql-config-wizard-character-set">2.3.5.10  The Character Set Dialog</A></H4>

<P>
The MySQL server supports multiple character sets and it is possible
to set a default server character set that will be applied to all
tables, columns, and databases unless overridden. Use the
<code>Character Set</code> dialog to change the default
character set of the MySQL server.

</P>

<UL>

<LI>

<code>Standard Character Set</code>: Choose this option if you
want to use <code>Latin1</code> as the default server
character set. <code>Latin1</code> is used for English and
many Western European languages.

<LI>

<code>Best Support For Multilingualism</code>: Choose this
option if you want to use <code>UTF8</code> as the default
server character set. <code>UTF8</code> can store characters
from many different languages in a single character set.

<LI>

<code>Manual Selected Default Character Set /
Collation</code>: Choose this option if you want to pick the
server's default character set manually. Choose the desired
character set from the provided drop-down list.

</UL>



<H4><A NAME="mysql-config-wizard-service" HREF="manual_toc.html#mysql-config-wizard-service">2.3.5.11  The Service Options Dialog</A></H4>

<P>
On Windows NT based platforms, the MySQL server can be installed as a
service. When installed as a service, the MySQL server can be started
automatically during system startup, and even restarted automatically
by Windows in the event of a service failure.

</P>
<P>
The MySQL Configuration Wizard will install the MySQL server as a service by
default, using the service name <code>MySQL</code>. If you do
not wish to install the service, un-check the box next to the
<code>Install As Windows Service</code> option. You can changed
the service name by picking a new service name from the drop-down box
provided or by typing a new service name into the drop-down box.

</P>
<P>
To install the MySQL server as a service but not have it started
automatically at startup, un-check the box next to the
<code>Launch the MySQL Server automatically</code> option.

</P>



<H4><A NAME="mysql-config-wizard-security" HREF="manual_toc.html#mysql-config-wizard-security">2.3.5.12  The Security Options Dialog</A></H4>

<P>
It is strongly recommended that you set a <code>root</code> password for your
MySQL server, and the MySQL Configuration Wizard requires you set a <code>root</code>
password by default. If you do not wish to set a <code>root</code> password,
un-check the box next to the <code>Modify Security
Settings</code> option.

</P>
<P>
To set the <code>root</code> password, type the desired password into both the
<code>New root password</code> and <code>Confirm</code>
boxes. If you are re-configuring an existing server, you will also
need to enter the existing <code>root</code> password into the <code>Current
root password</code> box.

</P>
<P>
To prevent <code>root</code> logins from across the network, check the box next to
the <code>Root may only connect from localhost</code> option.
This will increase the security of your <code>root</code> account.

</P>
<P>
To create an anonymous user account, check the box next to the
<code>Create An Anonymous Account</code> option. Creating an
anonymous account can decrease server security and cause login and
permission difficulties and is not recommended.

</P>



<H4><A NAME="mysql-config-wizard-confirmation" HREF="manual_toc.html#mysql-config-wizard-confirmation">2.3.5.13  The Confirmation Dialog</A></H4>

<P>
The final dialog in the MySQL Configuration Wizard is the <code>Confirmation
Dialog</code>. To start the configuration process, click the
Execute button. To return to a previous
dialog, click the Back button. To exit the
MySQL Configuration Wizard without configuring the server, click the
Cancel button.

</P>
<P>
After you click the Execute button, the
MySQL Configuration Wizard will perform a series of tasks with progress
displayed onscreen as the tasks are performed.

</P>
<P>
The MySQL Configuration Wizard will first determine various configuration file
options based on your choices using a template prepared by MySQL AB
developers and engineers. This template is named
<tt>`my-template.ini'</tt> and is located in your server
installation directory.

</P>
<P>
The MySQL Configuration Wizard will then write these options to a
<tt>`my.ini'</tt> file. The final location of the
<tt>`my.ini'</tt> file will be displayed next to the
<code>Write configuration file</code> task.

</P>
<P>
If you chose to create a service for the MySQL server the
MySQL Configuration Wizard will create the service and start it. If you are
re-configuring an existing service, the MySQL Configuration Wizard will restart
the service to apply your configuration changes.

</P>
<P>
If you chose to set a <code>root</code> password, the MySQL Configuration Wizard will connect
to the server and set your new <code>root</code> password and apply any other
security setting you may have selected.

</P>
<P>
After the MySQL Configuration Wizard has completed its tasks, a summary will be
shown. Click the Finish button to exit the
MySQL Configuration Wizard.

</P>



<H4><A NAME="mysql-config-wizard-file-location" HREF="manual_toc.html#mysql-config-wizard-file-location">2.3.5.14  The Location of the my.ini File</A></H4>

<P>
In MySQL installations prior to version 4.1.5 it was customary to
name the server configuration file <tt>`my.cnf'</tt> or
<tt>`my.ini'</tt> and locate the file either at
<tt>`c:\my.cnf'</tt> or <tt>`c:\Windows\my.ini'</tt>.

</P>
<P>
The new MySQL Configuration Wizard places the <tt>`my.ini'</tt> file
in the installation directory of the MySQL server. This helps
associate configuration files with particular server instances.

</P>
<P>
To ensure that the MySQL server knows where to look for the
<tt>`my.ini'</tt> file, an argument similar to this is
passed to the MySQL server as part of the service installation:
<code>--defaults-file="<var>C:\Program Files\MySQL\MySQL
Server 4.1</code>\my.ini"</var>, where
<var>C:\Program Files\MySQL\MySQL Server 4.1</var> is
replaced with the installation path to the MySQL Server.

</P>
<P>
The <code>--defaults-file</code> instructs the MySQL server to
read the specified file for configuration options.

</P>



<H4><A NAME="mysql-config-wizard-editing" HREF="manual_toc.html#mysql-config-wizard-editing">2.3.5.15  Editing The my.ini File</A></H4>

<P>
To modify the <tt>`my.ini'</tt> file, open it with a text
editor and make any necessary changes. You can also modify the server
configuration with the
<a HREF="http://www.mysql.com/products/administrator/">MySQL
Administrator</a> utility.

</P>
<P>
MySQL clients and utilities such as the <code>mysql</code>
command-line client and <code>mysqldump</code> will not locate
the <tt>`my.ini'</tt> file located in the server
installation directory. To configure the client and utility
applications, create a new <tt>`my.ini'</tt> file in the
<tt>`c:\Windows'</tt> directory.

</P>


<H3><A NAME="Windows_install_archive" HREF="manual_toc.html#Windows_install_archive">2.3.6  Installing MySQL from a noinstall Zip Archive</A></H3>

<P>
Users who are installing from the Noinstall package, or who are installing a
version of MySQL prior to 4.1.5 can use the instructions in this section to
manually install MySQL. If you are installing a version prior to 4.1.5 with
an install package that includes a Setup program, substitute running the
Setup program for extracting the archive.

</P>
<P>
The process for installing MySQL from a Zip archive is as follows:

</P>

<OL>
<LI>

Extract the archive to the desired install directory.

<LI>

Create an option file.

<LI>

Choose a MySQL server type.

<LI>

Start the MySQL server.

<LI>

Secure the default user accounts.

</OL>

<P>
This process is described in the sections that follow.

</P>


<H3><A NAME="Windows_extract_archive" HREF="manual_toc.html#Windows_extract_archive">2.3.7  Extracting the Install Archive</A></H3>

<P>
To install MySQL manually, do the following:

</P>

<OL>
<LI>

If you are upgrading from a previous version please refer to section <A HREF="manual_Installing.html#Windows_upgrading">2.3.15  Upgrading MySQL on Windows</A> before beginning the upgrade process.

<LI>

If you are using a Windows NT-based operating system such as Windows NT,
Windows 2000, Windows XP, or Windows Server 2003, make sure that you are
logged in as a user with administrator privileges.

<LI>

Choose an installation location. Traditionally the MySQL server is installed at
<tt>`C:\mysql'</tt>, and the new MySQL Installation Wizard installs MySQL to
<tt>`C:\Program Files\MySQL'</tt>. If you do not install MySQL at <tt>`C:\mysql'</tt>,
you must specify the
path to the install directory during startup or in an option file.
See section <A HREF="manual_Installing.html#Windows_create_option_file">2.3.8  Creating an Option File</A>.

<LI>

Extract the install archive to the chosen installation location using your
preferred Zip archive tool. Some tools may extract the archive to a folder
within your chosen installation location. If this occurs you can move the
contents of the subfolder into the chosen installation location.

</OL>



<H3><A NAME="Windows_create_option_file" HREF="manual_toc.html#Windows_create_option_file">2.3.8  Creating an Option File</A></H3>

<P>
If you need to specify startup options when you run the server, you can
indicate them on the command line or place them in an option file. For
options that will be used every time the server starts, you will find it
most convenient to use an option file to specify your MySQL configuration.
This is true particularly under the following circumstances:

</P>

<UL>

<LI>

The installation or data directory locations are different from the default
locations (<tt>`C:\mysql'</tt> and <tt>`C:\mysql\data'</tt>).

<LI>

You need to tune the server settings.  For example, to use the <code>InnoDB</code>
transactional tables in MySQL 3.23, you must manually add some extra lines
to the option file, as described in section <A HREF="manual_InnoDB.html#InnoDB_configuration">15.4  <code>InnoDB</code> Configuration</A>.  (As of MySQL 4.0, <code>InnoDB</code> creates its
data files and log files in the data directory by default. This means you
need not configure <code>InnoDB</code> explicitly.  You may still do so if you
wish, and an option file will be useful in this case, too.)

</UL>

<P>
When the MySQL server starts on Windows, it looks for options in
two files:  the <tt>`my.ini'</tt> file in the Windows directory, and
the <tt>`C:\my.cnf'</tt> file.  The Windows directory typically is
named something like <tt>`C:\WINDOWS'</tt> or <tt>`C:\WinNT'</tt>.  You
can determine its exact location from the value of the <code>WINDIR</code>
environment variable using the following command:

</P>

<PRE>
C:\&#62; echo %WINDIR%
</PRE>

<P>
MySQL looks for options first in the <tt>`my.ini'</tt> file, then in
the <tt>`my.cnf'</tt> file.  However, to avoid confusion, it's best if
you use only one file.  If your PC uses a boot loader where the
<code>C:</code> drive isn't the boot drive, your only option is to use
the <tt>`my.ini'</tt> file.  Whichever option file you use, it must be a plain
text file.

</P>
<P>
You can also make use of the example option files included with your MySQL
distribution.  Look in your install directory for files such as
my-small.cnf, my-medium.cnf, my-large.cnf, etc., which you can rename and
copy to the appropriate location for use as a base configuration file.

</P>
<P>
An option file can be created and modified with any text editor,
such as the <code>Notepad</code> program.  For example, if MySQL is
installed at <tt>`E:\mysql'</tt> and the data directory is located at
<tt>`E:\mydata\data'</tt>, you can create the option file and set up
a <code>[mysqld]</code> section to specify values for the <code>basedir</code>
and <code>datadir</code> parameters:

</P>

<PRE>
[mysqld]
# set basedir to your installation path
basedir=E:/mysql
# set datadir to the location of your data directory
datadir=E:/mydata/data
</PRE>

<P>
Note that Windows pathnames are specified in option files using
forward slashes rather than backslashes.  If you do use backslashes,
you must double them:

</P>

<PRE>
[mysqld]
# set basedir to your installation path
basedir=E:\\mysql
# set datadir to the location of your data directory
datadir=E:\\mydata\\data
</PRE>

<P>
On Windows, the MySQL installer places the data directory directly under the
directory where you install MySQL.  If you would like to use a data
directory in a different location, you should copy the entire contents of
the <tt>`data'</tt> directory to the new location. For example, by default, the
installer places MySQL in <tt>`C:\mysql'</tt> and the data directory in
<tt>`C:\mysql\data'</tt>. If you want to use a data directory of
<tt>`E:\mydata'</tt>, you must do two things:

</P>

<UL>
<LI>

Move the data directory from <tt>`C:\mysql\data'</tt> to <tt>`E:\mydata'</tt>.

<LI>

Use a <code>--datadir</code> option to specify the new data directory location
each time you start the server.

</UL>



<H3><A NAME="Windows_select_server" HREF="manual_toc.html#Windows_select_server">2.3.9  Selecting a MySQL Server type</A></H3>

<P>
Starting with MySQL 3.23.38, the Windows distribution includes
both the normal and the MySQL-Max server binaries.

</P>
<P>
Up through the early releases of MySQL 4.1, the servers included
in Windows distributions are named like this:

</P>
<TABLE BORDER>
<TR><TD><strong>Binary</strong> </TD><TD> <strong>Description</strong>
</TD></TR>
<TR><TD><code>mysqld</code> </TD><TD> Compiled with full debugging and automatic memory allocation checking, symbolic links, and <code>InnoDB</code> and <code>BDB</code> tables.
</TD></TR>
<TR><TD><code>mysqld-opt</code> </TD><TD> Optimized binary.  From version 4.0 on, <code>InnoDB</code> is enabled.  Before 4.0, this server includes no transactional table support.
</TD></TR>
<TR><TD><code>mysqld-nt</code> </TD><TD> Optimized binary for Windows NT, 2000, and XP with support for named pipes.
</TD></TR>
<TR><TD><code>mysqld-max</code> </TD><TD> Optimized binary with support for symbolic links, and <code>InnoDB</code> and <code>BDB</code> tables.
</TD></TR>
<TR><TD><code>mysqld-max-nt</code> </TD><TD> Like <code>mysqld-max</code>, but compiled with support for named pipes.
</TD></TR>
</TABLE>

<P>
We have found that the server with the most generic name
(<code>mysqld</code>) is the one that many users are likely to choose
by default. However, that is also the server that results in the
highest memory and CPU use due to the inclusion of full debugging
support.  The server named <code>mysqld-opt</code> is a better general-use
server choice to make instead if you don't need debugging suport
and don't want the maximal feature set offered by the <code>-max</code>
servers or named pipe support offered by the <code>-nt</code> servers.

</P>
<P>
To make it less likely that the debugging server would be chosen
inadvertantly, some name changes were made from MySQL 4.1.2 to
4.1.4:  <code>mysqld</code> has been renamed to <code>mysqld-debug</code>
and <code>mysqld-opt</code> has been renamed to <code>mysqld</code>.
Thus, the server that includes debugging support indicates that in
its name, and the server named <code>mysqld</code> is an efficient
default choice. The other servers still have their same names. The
resulting servers are named like this:

</P>
<TABLE BORDER>
<TR><TD><strong>Binary</strong> </TD><TD> <strong>Description</strong>
</TD></TR>
<TR><TD><code>mysqld-debug</code> </TD><TD> Compiled with full debugging and automatic memory allocation checking, symbolic links, and <code>InnoDB</code> and <code>BDB</code> tables.
</TD></TR>
<TR><TD><code>mysqld</code> </TD><TD> Optimized binary with <code>InnoDB</code> support.
</TD></TR>
<TR><TD><code>mysqld-nt</code> </TD><TD> Optimized binary for Windows NT, 2000, and XP with support for named pipes.
</TD></TR>
<TR><TD><code>mysqld-max</code> </TD><TD> Optimized binary with support for symbolic links, and <code>InnoDB</code> and <code>BDB</code> tables.
</TD></TR>
<TR><TD><code>mysqld-max-nt</code> </TD><TD> Like <code>mysqld-max</code>, but compiled with support for named pipes.
</TD></TR>
</TABLE>

<P>
The name changes were not both instituted at the same time. If you
have MySQL 4.1.2 or 4.1.3, it might be that you have a server named
<code>mysqld-debug</code> but not one named <code>mysqld</code>. In this
case, you should have a server <code>mysqld-opt</code>, which you
should choose as your default server unless you need maximal features,
named pipes, or debugging support.

</P>
<P>
All of the preceding binaries are optimized for modern Intel processors,
but should work on any Intel i386-class or higher processor.

</P>
<P>
<A NAME="IDX153"></A>
<A NAME="IDX154"></A>

</P>
<P>
MySQL supports TCP/IP on all Windows platforms. The <code>mysqld-nt</code>
and <code>mysql-max-nt</code> servers support named pipes on Windows NT, 2000, XP, and 2003.
However, the default is to use TCP/IP regardless of the platform.
(Named pipes are slower than TCP/IP in many Windows configurations.)
Named pipe use is subject to these conditions:

</P>

<UL>
<LI>

Starting from MySQL 3.23.50, named pipes are enabled only
if you start the server with the <code>--enable-named-pipe</code> option.
It is now necessary to use this option explicitly because some users have
experienced problems shutting down the MySQL server when named pipes
were used.

<LI>

Named pipe connections are allowed only by the <code>mysqld-nt</code> or
<code>mysqld-max-nt</code> servers, and only if the server is run on a version
of Windows that supports named pipes (NT, 2000, XP, 2003).

<LI>

These servers can be run on Windows 98 or Me, but only if TCP/IP is installed;
named pipe connections cannot be used.

<LI>

These servers can not be run on Windows 95.

</UL>

<P>
<strong>Note</strong>:
Most of the examples in reference manual use <code>mysqld</code> as the
server name. If you choose to use a different server, such as
<code>mysqld-nt</code>, make the appropriate substitutions in the commands that
are shown in the examples. 

</P>


<H3><A NAME="Windows_server_first_start" HREF="manual_toc.html#Windows_server_first_start">2.3.10  Starting the Server for the First Time</A></H3>

<P>
On Windows 95, 98, or Me, MySQL clients always connect to the server using
TCP/IP.  (This allows any machine on your network to connect to your MySQL
server.)  Because of this, you must make sure that TCP/IP support is installed
on your machine before starting MySQL.  You can find TCP/IP on your
Windows CD-ROM.

</P>
<P>
Note that if you are using an old Windows 95 release (for example,
OSR2), it's likely that you have an old Winsock package;
MySQL requires Winsock 2! You can get the newest Winsock from
<a HREF="http://www.microsoft.com/">http://www.microsoft.com/</a>.  Windows 98 has the new Winsock 2
library, so it is unnecessary to update the library.

</P>
<P>
On NT-based systems such as Windows NT, 2000, XP, or 2003, clients have two
options. They can use TCP/IP, or they can use a named pipe if the server
supports named pipe connections.

</P>
<P>
In MySQL versions 4.1 and higher, Windows servers also support shared-memory
connections if started with the <code>--shared-memory</code> option.  Clients can
connect through shared memory by using the <code>--protocol=memory</code> option.

</P>
<P>
For information about which server binary to run, see
section <A HREF="manual_Installing.html#Windows_select_server">2.3.9  Selecting a MySQL Server type</A>.

</P>
<P>
This section gives a general overview of starting the MySQL server.  The
following sections provide more specific information for starting the MySQL
server from the command line or as a Windows service.

</P>
<P>
The examples in these sections assume that MySQL is installed under the default
location of <tt>`C:\mysql'</tt>. Adjust the pathnames shown in the examples if you
have MySQL installed in a different location.

</P>
<P>
Testing is best done from a command prompt in a console window (a ``DOS
window''). This way you can have the server display status messages in the
window where they are easy to see.  If something is wrong with your
configuration, these messages make it easier for you to identify
and fix any problems.

</P>
<P>
To start the server, enter this command:

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysqld --console
</PRE>

<P>
For servers that include <code>InnoDB</code> support,
you should see the following messages as the server starts:

</P>

<PRE>
InnoDB: The first specified datafile c:\ibdata\ibdata1 did not exist:
InnoDB: a new database to be created!
InnoDB: Setting file c:\ibdata\ibdata1 size to 209715200
InnoDB: Database physically writes the file full: wait...
InnoDB: Log file c:\iblogs\ib_logfile0 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile0 size to 31457280
InnoDB: Log file c:\iblogs\ib_logfile1 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile1 size to 31457280
InnoDB: Log file c:\iblogs\ib_logfile2 did not exist: new to be created
InnoDB: Setting log file c:\iblogs\ib_logfile2 size to 31457280
InnoDB: Doublewrite buffer not found: creating new
InnoDB: Doublewrite buffer created
InnoDB: creating foreign key constraint system tables
InnoDB: foreign key constraint system tables created
011024 10:58:25  InnoDB: Started
</PRE>

<P>
When the server finishes its startup sequence, you should see something
like this, which indicates that the server is ready to service client
connections:

</P>

<PRE>
mysqld: ready for connections
Version: '4.0.14-log'  socket: ''  port: 3306
</PRE>

<P>
The server will continue to write to the console any further diagnostic
output it produces.  You can open a new console window in which to run
client programs.

</P>
<P>
If you omit the <code>--console</code> option, the server writes diagnostic output
to the error log in the data directory (<tt>`C:\mysql\data'</tt> by default).
The error log is the file with the <tt>`.err'</tt> extension.

</P>
<P>
<strong>Note</strong>:
The accounts that are listed in the MySQL grant tables initially have no
passwords.  After starting the server, you should set up passwords for
them using the instructions in section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.

</P>



<H3><A NAME="Windows_start_command_line" HREF="manual_toc.html#Windows_start_command_line">2.3.11  Starting MySQL from the Windows Command Line</A></H3>

<P>
The MySQL server can be started manually from the command line.
This can be done on any version of Windows.

</P>
<P>
To start the <code>mysqld</code> server from the command line, you should
start a console window (a ``DOS window'') and enter this command:

</P>

<PRE>
C:\&#62; C:\Program Files\MySQL\MySQL Server 4.1\bin\mysqld
</PRE>

<P>
The path used in the preceding example may vary depending on the install location
of MySQL on your system.

</P>
<P>
On non-NT versions of Windows, this will start <code>mysqld</code> in the
background. That is, after the server starts, you should see another
command prompt. If you start the server this way on Windows NT, 2000, or XP,
the server will run in the foreground and no command prompt will appear
until the server exits.  Because of this, you should open another console
window to run client programs while the server is running.

</P>
<P>
You can stop the MySQL server by executing this command:

</P>

<PRE>
C:\&#62; C:\Program Files\MySQL\MySQL Server 4.1\bin\mysqladmin -u root shutdown
</PRE>

<P>
This invokes the MySQL administrative utility <code>mysqladmin</code> to
connect to the server and tell it to shut down. The command connects
as <code>root</code>, which is the default administrative account in the
MySQL grant system. Note that users in the MySQL grant system
are wholly independent from any login users under Windows.

</P>
<P>
If <code>mysqld</code> doesn't start, check the error log to see whether the
server wrote any messages there to indicate the cause of the problem.
The error log is located in the <tt>`C:\mysql\data'</tt> directory. It is
the file with a suffix of <tt>`.err'</tt>. You can also try to start the
server as <code>mysqld --console</code>; in this case, you may get some useful
information on the screen that may help solve the problem.

</P>
<P>
The last option is to start <code>mysqld</code> with <code>--standalone
--debug</code>.  In this case, <code>mysqld</code> writes a log file
<tt>`C:\mysqld.trace'</tt> that should contain the reason why <code>mysqld</code>
doesn't start. See section <A HREF="manual_Porting.html#Making_trace_files">E.1.2  Creating Trace Files</A>.

</P>
<P>
Use <code>mysqld --verbose --help</code> to display all the options that
<code>mysqld</code> understands.  (Prior to MySQL 4.1, omit the
<code>--verbose</code> option.)

</P>



<H3><A NAME="Windows_start_service" HREF="manual_toc.html#Windows_start_service">2.3.12  Starting MySQL as a Windows Service</A></H3>

<P>
On the NT family (Windows NT, 2000, XP, 2003), the recommended way to run
MySQL is to install it as a Windows service. When MySQL is installed as a
service, Windows starts and stops the MySQL server automatically when
Windows starts and stops.  A server installed as a service can also be
controlled from the command line using <code>NET</code> commands, or with the
graphical <code>Services</code> utility.

</P>
<P>
The <code>Services</code> utility (the Windows <code>Service Control Manager</code>) can
be found in the Windows <code>Control Panel</code> (under <code>Administrative
Tools</code> on Windows 2000, XP, and Server 2003). It is advisable to close the
<code>Services</code> utility while performing server installation or removal
operations from this command line.  This prevents some odd errors.

</P>
<P>
To get MySQL to work with TCP/IP on Windows NT 4, you must install
service pack 3 (or newer).

</P>
<P>
Before installing MySQL as a Windows service, you should first stop
the current server if it is running by using the following command:

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysqladmin -u root shutdown
</PRE>

<P>
This invokes the MySQL administrative utility <code>mysqladmin</code> to
connect to the server and tell it to shut down. The command connects
as <code>root</code>, which is the default administrative account in the
MySQL grant system. Note that users in the MySQL grant system
are wholly independent from any login users under Windows.

</P>
<P>
Now install the server as a service:

</P>

<PRE>
C:\&#62; mysqld --install
</PRE>

<P>
If you have problems installing <code>mysqld</code> as a
service using just the server name, try installing it using its full pathname:

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysqld --install
</PRE>

<P>
As of MySQL 4.0.2, you can specify a specific service name after the
<code>--install</code> option.  As of MySQL 4.0.3, you can in addition specify a
<code>--defaults-file</code> option after the service name to indicate where the
server should obtain options when it starts. The rules that determine the
service name and option files the server uses are as follows:

</P>

<UL>

<LI>

If you specify no service name, the server uses the default service name of
<code>MySQL</code> and the server reads options from the <code>[mysqld]</code> group in
the standard option files.

<LI>

If you specify a service name after the
<code>--install</code> option, the server ignores the <code>[mysqld]</code> option
group and instead reads options from the group that has the same name as the
service. The server reads options from the standard option files.

<LI>

If you specify a <code>--defaults-file</code> option after the service name,
the server ignores the standard option files and reads options only from the
<code>[mysqld]</code> group of the named file.

</UL>

<P>
<strong>Note</strong>: Prior to MySQL 4.0.17, a server installed as a Windows
service has problems starting if its pathname or the service name contains
spaces. For this reason, avoid installing MySQL in a directory such as
<tt>`C:\Program Files'</tt> or using a service name containing spaces.

</P>
<P>
As a more complex example, consider the following command:

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysqld --install mysql --defaults-file=C:\my-opts.cnf
</PRE>

<P>
Here, a service name is given after the <code>--install</code> option. If no
<code>--defaults-file</code> option had been given, this command would have the
effect of causing the server to read the <code>[mysql]</code> group from the
standard option files. (This would be a bad idea, because that option group
is for use by the <code>mysql</code> client program.) However, because the
<code>--defaults-file</code> option is present, the server reads options only from
the named file, and only from the <code>[mysqld]</code> option group.

</P>
<P>
You can also specify options as ``<code>Start parameters</code>'' in the
Windows <code>Services</code> utility before you start the MySQL service.

</P>
<P>
Once a MySQL server is installed as a service, Windows will start
the service automatically whenever Windows starts.  The service also
can be started immediately from the <code>Services</code> utility, or by
using the command <code>NET START MySQL</code>.  The <code>NET</code> command
is not case sensitive.

</P>
<P>
When run as a service, <code>mysqld</code> has no access
to a console window, so no messages can be seen there.  If
<code>mysqld</code> doesn't start, check the error log to see whether the
server wrote any messages there to indicate the cause of the problem.
The error log is located in the <tt>`C:\mysql\data'</tt> directory. It
is the file with a suffix of <tt>`.err'</tt>.

</P>
<P>
When <code>mysqld</code> is running as a service, it can be stopped by
using the <code>Services</code> utility, the command <code>NET STOP
MySQL</code>, or the command <code>mysqladmin shutdown</code>. If the service
is running when Windows shuts down, Windows will stop the server
automatically.

</P>
<P>
From MySQL 3.23.44 on, you have the choice of installing the
server as a <code>Manual</code> service if you don't wish the service to
be started automatically during the boot process. To do this, use
the <code>--install-manual</code> option rather than the <code>--install</code>
option:

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysqld --install-manual
</PRE>

<P>
To remove a server that is installed as a service, first stop it if it is
running. Then use the <code>--remove</code> option to remove it:

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysqld --remove
</PRE>

<P>
For MySQL versions older than 3.23.49, one problem with automatic
MySQL service shutdown is that Windows waited only for a few
seconds for the shutdown to complete, then killed the database
server process if the time limit was exceeded. This had the potential
to cause problems.  (For example, the <code>InnoDB</code> storage engine
had to perform crash recovery at the next startup.) Starting from
MySQL 3.23.49, Windows waits longer for the MySQL server
shutdown to complete. If you notice this still is not enough for
your installation, it is safest not to run the MySQL server as a
service. Instead, start it from the command-line prompt, and stop
it with <code>mysqladmin shutdown</code>.

</P>
<P>
This change to tell Windows to wait longer when stopping the MySQL server
works for Windows 2000 and XP. It does not work for Windows NT, where Windows
waits only 20 seconds for a service to shut down, and after that kills the
service process. You can increase this default by opening the Registry
Editor <tt>`\winnt\system32\regedt32.exe'</tt> and editing the value of
<code>WaitToKillServiceTimeout</code> at
<code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control</code>
in the Registry tree. Specify the new larger value in milliseconds.
For example, the value 120000 tells Windows NT to wait up to 120 seconds.

</P>
<P>
If you don't want to start <code>mysqld</code> as a service, you can start it
from the command line.  For instructions, see section <A HREF="manual_Installing.html#Windows_start_command_line">2.3.11  Starting MySQL from the Windows Command Line</A>.

</P>
<P>
Please see section <A HREF="manual_Installing.html#Windows_troubleshooting">2.3.14  Troubleshooting a MySQL Installation Under Windows</A> if you encounter difficulties
during installation.

</P>



<H3><A NAME="Windows_testing" HREF="manual_toc.html#Windows_testing">2.3.13  Testing The MySQL Installation</A></H3>

<P>
<A NAME="IDX155"></A>
<A NAME="IDX156"></A>

</P>
<P>
You can test whether the MySQL server is working by executing any of the
following commands:

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysqlshow
C:\&#62; C:\mysql\bin\mysqlshow -u root mysql
C:\&#62; C:\mysql\bin\mysqladmin version status proc
C:\&#62; C:\mysql\bin\mysql test
</PRE>

<P>
If <code>mysqld</code> is slow to respond to TCP/IP connections from client
programs on Windows 9x/Me, there is probably a problem with your DNS.  In
this case, start <code>mysqld</code> with the <code>--skip-name-resolve</code> option
and use only <code>localhost</code> and IP numbers in the <code>Host</code> column of
the MySQL grant tables.

</P>
<P>
You can force a MySQL client to use a named pipe connection rather than
TCP/IP by specifying the <code>--pipe</code> option or by specifying <code>.</code>
(period) as the host name.  Use the <code>--socket</code> option to specify the
name of the pipe.  As of MySQL 4.1, you should use the
<code>--protocol=PIPE</code> option.

</P>
<P>
There are two versions of the MySQL command-line tool:
<TABLE BORDER>
<TR><TD><strong>Binary</strong> </TD><TD> <strong>Description</strong>
</TD></TR>
<TR><TD><code>mysql</code> </TD><TD> Compiled on native Windows, offering limited
text editing capabilities.
</TD></TR>
<TR><TD><code>mysqlc</code> </TD><TD> Compiled with the Cygnus GNU compiler and
libraries, which offers <code>readline</code> editing. <code>mysqlc</code> was 
intended for use primarily with Windows 9x/Me. It does not support the 
updated authentication protocol used beginning with MySQL 4.1, and is 
not supported in MySQL 4.1 and above. Beginning with MySQL 4.1.8, it is 
no longer included in MySQL Windows distributions.
</TD></TR>
</TABLE>

</P>

<P>
If you want to use <code>mysqlc</code>, you must have a copy of the
<tt>`cygwinb19.dll'</tt> library installed somewhere that <code>mysqlc</code>
can find it. Current distributions of MySQL include this library
in the same directory as <code>mysqlc</code> (the <tt>`bin'</tt> directory
under the base directory of your MySQL installation). If your
distribution does not have the <code>cygwinb19.dll</code> library in the
<tt>`bin'</tt> directory, look for it in the <code>lib</code> directory and
copy it to your Windows system directory
(<tt>`\Windows\system'</tt> or a similar place).

</P>



<H3><A NAME="Windows_troubleshooting" HREF="manual_toc.html#Windows_troubleshooting">2.3.14  Troubleshooting a MySQL Installation Under Windows</A></H3>

<P>
When installing and running MySQL for the first time, you may encounter 
certain errors that prevent the MySQL server from starting. 
The purpose of this section is to help you diagnose and correct some 
of these errors. 

</P>
<P>
Your first resource when troubleshooting server issues is the error log. 
The MySQL server uses the error log to record information relevant to the 
error that is preventing the server from starting. The error log is
located in the data directory specified in your <tt>`my.ini'</tt> file.
The default data directory location is <tt>`C:\mysql\data'</tt>.
See section <A HREF="manual_MySQL_Database_Administration.html#Error_log">5.9.1  The Error Log</A>.

</P>
<P>
Another source of information regarding possible errors is the console
messages displayed when the MySQL service is starting. Use the <code>NET
START mysql</code> command from the command line after installing <code>mysqld</code> as
a service to see any error messages regarding the starting of the MySQL
server as a service.
See section <A HREF="manual_Installing.html#Windows_start_service">2.3.12  Starting MySQL as a Windows Service</A>.

</P>
<P>
The following are examples of some of the more common error messages you may
encounter when installing MySQL and starting the server for the first time:

</P>

<PRE>
System error 1067 has occurred.
Fatal error: Can't open privilege tables: Table 'mysql.host' doesn't exist
</PRE>

<P>
These messages occur when the MySQL server cannot find the <code>mysql</code> 
privileges database or other critical files. This error is often encountered 
when the MySQL base or data directories are installed in different 
locations than the default locations (<tt>`C:\mysql'</tt> and
<tt>`C:\mysql\data'</tt>, respectively).

</P>
<P>
If you have installed MySQL to a directory other than <tt>`C:\mysql'</tt> you
need to ensure that the MySQL server is aware of this through the use of a
configuration (<code>my.ini</code>) file. The <code>my.ini</code> file needs to be
located in your Windows directory, typically located at <tt>`C:\WinNT'</tt> or
<tt>`C:\WINDOWS'</tt>. You can determine its exact location from the value of
the <code>WINDIR</code> environment variable by issuing the following command from
the command prompt:

</P>

<PRE>
C:\&#62; echo %WINDIR%
</PRE>

<P>
An option file can be created and modified with any text editor, 
such as the Notepad program. For example, if MySQL is installed at 
<tt>`E:\mysql'</tt> and the data directory is located at <tt>`D:\MySQLdata'</tt>, 
you can create the option file and set up a <code>[mysqld]</code> section to specify 
values for the basedir and datadir parameters:

</P>

<PRE>
[mysqld]
# set basedir to your installation path
basedir=E:/mysql
# set datadir to the location of your data directory
datadir=D:/MySQLdata
</PRE>

<P>
Note that Windows pathnames are specified in option files using 
forward slashes rather than backslashes. If you do use backslashes, 
you must double them:

</P>

<PRE>
[mysqld]
# set basedir to your installation path
basedir=C:\\Program Files\\mysql
# set datadir to the location of your data directory
datadir=D:\\MySQLdata
</PRE>

<P>
See section <A HREF="manual_Installing.html#Windows_create_option_file">2.3.8  Creating an Option File</A>.

</P>


<H3><A NAME="Windows_upgrading" HREF="manual_toc.html#Windows_upgrading">2.3.15  Upgrading MySQL on Windows</A></H3>

<P>
<A NAME="IDX157"></A>

</P>
<P>
This section lists some of the steps you should take when upgrading MySQL on
Windows.

</P>

<OL>

<LI>

You should always back up your current MySQL installation before performing
an upgrade.
See section <A HREF="manual_MySQL_Database_Administration.html#Backup">5.7.1  Database Backups</A>.

<LI>

Download the latest Windows distribution of MySQL from
<a HREF="http://dev.mysql.com">http://dev.mysql.com</a>.

<LI>

Before upgrading MySQL, you must stop the server.

If the server is installed as a service, stop the service with the following
command from the command prompt:

<PRE>
C:\&#62; NET STOP MySQL
</PRE>

If you are not running the MySQL server as a service, use the following command to stop the server:


<PRE>
C:\&#62; C:\mysql\bin\mysqladmin -u root shutdown
</PRE>

<LI>

Exit the <code>WinMySQLAdmin</code> program if it is running.

<LI>

When upgrading to MySQL 4.1.5 or higher from a previous version, or when
upgrading from a version of MySQL installed from a Zip archive to a version
of MySQL installed with the MySQL Installation Wizard, you must manually
remove the previous installation and MySQL service (if the server is
installed as a service).

To remove the MySQL service, use the following command:

<PRE>
C:\&#62; C:\mysql\bin\mysqld --remove
</PRE>

<strong>If you do not remove the existing service, the MySQL Installation
Wizard may fail to properly install the new MySQL service.</strong>

<LI>

If you are using the MySQL Installation Wizard, start the wizard as
described in section <A HREF="manual_Installing.html#Windows_install_wizard">2.3.4  Using the MySQL Installation Wizard</A>.

<LI>

If you are installing MySQL from a Zip archive, extract the archive. You may
either overwrite your existing MySQL installation (usually located at
<tt>`C:\mysql'</tt>), or install it into a different directory, such as
<code>C:\mysql4</code>. Overwriting the existing installation is recommended.

<LI>

Restart the server. For example, use <code>NET START MySQL</code> if you run MySQL
as a service, or invoke <code>mysqld</code> directly otherwise.

<LI>

Refer to section <A HREF="manual_Installing.html#Upgrade">2.10  Upgrading MySQL</A> for additional information on upgrading MySQL that is
not specific to Windows.

<LI>

If you encounter errors, see section <A HREF="manual_Installing.html#Windows_troubleshooting">2.3.14  Troubleshooting a MySQL Installation Under Windows</A>.

</OL>



<H3><A NAME="Windows_vs_Unix" HREF="manual_toc.html#Windows_vs_Unix">2.3.16  MySQL on Windows Compared to MySQL on Unix</A></H3>

<P>
<A NAME="IDX158"></A>
<A NAME="IDX159"></A>

</P>
<P>
MySQL for Windows has proven itself to be very stable. The Windows
version of MySQL has the same features as the corresponding Unix version,
with the following exceptions:

</P>
<DL COMPACT>

<DT><strong>Windows 95 and threads</strong>
<DD>
Windows 95 leaks about 200 bytes of main memory for each thread creation.
Each connection in MySQL creates a new thread, so you shouldn't
run <code>mysqld</code> for an extended time on Windows 95 if your server handles
many connections!  Other versions of Windows don't suffer from this bug.

<DT><strong>Limited number of ports</strong>
<DD>
Windows systems have about 4,000 ports available for client connections, and
after a connection on a port closes, it takes two to four minutes before the
port can be reused.  In situations where clients connect to and disconnect
from the server at a high rate, it is possible for all available ports to be
used up before closed ports become available again. If this happens, the
MySQL server will appear to have become unresponsive even though it is
running.  Note that ports may be used by other applications running on the
machine as well, in which case the number of ports available to MySQL is
lower.

For more information, see
<a HREF="http://support.microsoft.com/default.aspx?scid=kb;en-us;196271">http://support.microsoft.com/default.aspx?scid=kb;en-us;196271</a>.

<DT><strong>Concurrent reads</strong>
<DD>
MySQL depends on the <code>pread()</code> and <code>pwrite()</code> calls to be
able to mix <code>INSERT</code> and <code>SELECT</code>.  Currently we use mutexes
to emulate <code>pread()</code>/<code>pwrite()</code>.  We will, in the long run,
replace the file level interface with a virtual interface so that we can
use the <code>readfile()</code>/<code>writefile()</code> interface on NT, 2000, and XP to
get more speed.
The current implementation limits the number of open files MySQL can use to
2,048 (1,024 before MySQL 4.0.19), which means that you will not be able to
run as many concurrent threads on NT, 2000, and XP as on Unix.

<DT><strong>Blocking read</strong>
<DD>
MySQL uses a blocking read for each connection, which has the following
implications if named pipe connections are enabled:


<UL>
<LI>

A connection will not be disconnected automatically after eight hours, as
happens with the Unix version of MySQL.

<LI>

If a connection hangs, it's impossible to break it without killing
MySQL.

<LI>

<code>mysqladmin kill</code> will not work on a sleeping connection.

<LI>

<code>mysqladmin shutdown</code> can't abort as long as there are sleeping
connections.
</UL>

We plan to fix this problem when our Windows developers have figured out a
nice workaround.

<DT><strong><code>ALTER TABLE</code></strong>
<DD>
While you are executing an <code>ALTER TABLE</code> statement, the table is locked
from being used by other threads.  This has to do with the fact that on Windows,
you can't delete a file that is in use by another thread.  In the future,
we may find some way to work around this problem.

<DT><strong><code>DROP TABLE</code></strong>
<DD>
<code>DROP TABLE</code> on a table that is in use by a <code>MERGE</code> table will
not work on Windows because the <code>MERGE</code> handler does the table mapping
hidden from the upper layer of MySQL.  Because Windows doesn't allow you
to drop files that are open, you first must flush all <code>MERGE</code>
tables (with <code>FLUSH TABLES</code>) or drop the <code>MERGE</code> table before
dropping the table.  We will fix this at the same time we introduce
views.

<DT><strong><code>DATA DIRECTORY</code> and <code>INDEX DIRECTORY</code></strong>
<DD>
The <code>DATA DIRECTORY</code> and <code>INDEX DIRECTORY</code> options for
<code>CREATE TABLE</code> are ignored on Windows, because Windows doesn't support
symbolic links.  These options also are ignored on systems that have a
non-functional <code>realpath()</code> call.

<DT><strong><code>DROP DATABASE</code></strong>
<DD>
You cannot drop a database that is in use by some thread.

<DT><strong>Killing MySQL from the Task Manager</strong>
<DD>
You cannot kill MySQL from the Task Manager or with the shutdown
utility in Windows 95.  You must stop it with <code>mysqladmin shutdown</code>.

<DT><strong>Case-insensitive names</strong>
<DD>
Filenames are not case sensitive on Windows, so MySQL database and table
names are also not case sensitive on Windows.  The only restriction is that
database and table names must be specified using the same case throughout a
given statement.  See section <A HREF="manual_Language_Structure.html#Name_case_sensitivity">9.2.2  Identifier Case Sensitivity</A>.

<DT><strong>The <samp>`\'</samp> pathname separator character</strong>
<DD>
Pathname components in Windows are separated by the <samp>`\'</samp> character,
which is also the escape character in MySQL.  If you are using <code>LOAD
DATA INFILE</code> or <code>SELECT ... INTO OUTFILE</code>,
use Unix-style filenames with <samp>`/'</samp> characters:


<PRE>
mysql&#62; LOAD DATA INFILE 'C:/tmp/skr.txt' INTO TABLE skr;
mysql&#62; SELECT * INTO OUTFILE 'C:/tmp/skr.txt' FROM skr;
</PRE>

Alternatively, you must double the <samp>`\'</samp> character:


<PRE>
mysql&#62; LOAD DATA INFILE 'C:\\tmp\\skr.txt' INTO TABLE skr;
mysql&#62; SELECT * INTO OUTFILE 'C:\\tmp\\skr.txt' FROM skr;
</PRE>

<DT><strong>Problems with pipes.</strong>
<DD>
Pipes do not work reliably from the Windows command-line prompt.  If the
pipe includes the character <code>^Z</code> / <code>CHAR(24)</code>, Windows will think it
has encountered end-of-file and abort the program.

This is mainly a problem when you try to apply a binary log as follows:


<PRE>
C:\&#62; mysqlbinlog binary-log-name | mysql --user=root
</PRE>

If you have a problem applying the log and suspect that it is because of a
<code>^Z</code> / <code>CHAR(24)</code> character, you can use the following workaround:


<PRE>
C:\&#62; mysqlbinlog binary-log-file --result-file=/tmp/bin.sql
C:\&#62; mysql --user=root --execute "source /tmp/bin.sql"
</PRE>

The latter command also can be used to reliably read in any SQL file
that may contain binary data.

<DT><strong><code>Access denied for user</code> error</strong>
<DD>
If you attempt to run a MySQL client program to connect to a server
running on the same machine, but get the error <code>Access denied
for user '<var>some-user</var>'@'unknown' to database 'mysql'</code>, this means
that MySQL cannot resolve your hostname properly.

To fix this, you should create a file named <tt>`\windows\hosts'</tt> containing
the following information:


<PRE>
127.0.0.1       localhost
</PRE>

</DL>

<P>
Here are some open issues for anyone who might want to help us improve MySQL
on Windows:

</P>
<P>
<A NAME="IDX160"></A>

</P>

<UL>
PD: Commented this one out as obsolete until I hear otherwise
<LI>

Make a single-user <code>MYSQL.DLL</code> server.  This should include everything in
a standard MySQL server, except thread creation.  This will make
MySQL much easier to use in applications that don't need a true
client/server and don't need to access the server from other hosts.
<LI>

Add some nice start and shutdown icons to the MySQL installation.

<LI>

It would be really nice to be able to kill <code>mysqld</code> from the Task Manager
in Windows 95.  For the moment, you must use <code>mysqladmin shutdown</code>.

<LI>

Port <code>readline</code> to Windows for use in the <code>mysql</code> command-line tool.

<LI>

GUI versions of the standard MySQL clients (<code>mysql</code>,
<code>mysqlshow</code>, <code>mysqladmin</code>, and <code>mysqldump</code>) would be nice.

<LI>

It would be nice if the socket read and write functions in <tt>`net.c'</tt> were
interruptible. This would make it possible to kill open threads with
<code>mysqladmin kill</code> on Windows.

<LI>

Add macros to use the faster thread-safe increment/decrement methods
provided by Windows.
</UL>



<H2><A NAME="Linux-RPM" HREF="manual_toc.html#Linux-RPM">2.4  Installing MySQL on Linux</A></H2>

<P>
<A NAME="IDX161"></A>
<A NAME="IDX162"></A>
<A NAME="IDX163"></A>

</P>
<P>
The recommended way to install MySQL on Linux is by using the RPM
packages. The MySQL RPMs are currently built on a SuSE Linux 7.3
system, but should work on most versions of Linux that support <code>rpm</code>
and use <code>glibc</code>.
To obtain RPM packages, see section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.

</P>
<P>
<strong>Note</strong>: RPM distributions of MySQL often are provided by other
vendors.  Be aware that they may differ in features and capabilities from
those built by MySQL AB, and that the instructions in this manual do not
necessarily apply to installing them. The vendor's instructions should be
consulted instead.

</P>
<P>
If you have problems with an RPM file (for example, if you receive the error
``<code>Sorry, the host '<var>xxxx</var>' could not be looked up</code>''), see
section <A HREF="manual_Installing.html#Binary_notes-Linux">2.12.1.2  Linux Binary Distribution Notes</A>.

</P>
<P>
In most cases, you only need to install the <code>MySQL-server</code> and
<code>MySQL-client</code> packages to get a functional MySQL installation. The
other packages are not required for a standard installation.
If you want to run a MySQL-Max server that has additional capabilities,
you should also install the <code>MySQL-Max</code> RPM. However, you should do so only
<em> after</em> installing the <code>MySQL-server</code> RPM.
See section <A HREF="manual_MySQL_Database_Administration.html#mysqld-max">5.1.2  The <code>mysqld-max</code> Extended MySQL Server</A>.

</P>
<P>
If you get a dependency failure when trying to install the MySQL 4.0
packages (for example, ``<code>error: removing these packages would break dependencies:
libmysqlclient.so.10 is needed by ...</code>''), you should also install
the package <code>MySQL-shared-compat</code>, which includes both the
shared libraries for backward compatibility (<code>libmysqlclient.so.12</code>
for MySQL 4.0 and <code>libmysqlclient.so.10</code> for MySQL 3.23).

</P>
<P>
Many Linux distributions still ship with MySQL 3.23 and they usually link
applications dynamically to save disk space. If these shared libraries are
in a separate package (for example, <code>MySQL-shared</code>), it is
sufficient to simply leave this package installed and just upgrade
the MySQL server and client packages (which are statically linked
and do not depend on the shared libraries). For distributions that
include the shared libraries in the same package as the MySQL server
(for example, Red Hat Linux), you could either install our 3.23
<code>MySQL-shared</code> RPM, or use the <code>MySQL-shared-compat</code> package instead.

</P>
<P>
The following RPM packages are available:

</P>

<UL>
<LI><code>MySQL-server-<var>VERSION</var>.i386.rpm</code>

The MySQL server.  You will need this unless you only want to
connect to a MySQL server running on another machine. Note:
Server RPM files were called <code>MySQL-<var>VERSION</var>.i386.rpm</code> before
MySQL 4.0.10. That is, they did not have <code>-server</code> in the name.

<LI><code>MySQL-Max-<var>VERSION</var>.i386.rpm</code>

The MySQL-Max server. This server has additional capabilities that the
one provided in the <code>MySQL-server</code> RPM does not.  You must install the
<code>MySQL-server</code> RPM first, because the <code>MySQL-Max</code> RPM depends on it.

<LI><code>MySQL-client-<var>VERSION</var>.i386.rpm</code>

The standard MySQL client programs. You probably always want to
install this package.

<LI><code>MySQL-bench-<var>VERSION</var>.i386.rpm</code>

Tests and benchmarks. Requires Perl and the <code>DBD::mysql</code> module.

<LI><code>MySQL-devel-<var>VERSION</var>.i386.rpm</code>

The libraries and include files that are needed if you want to compile other
MySQL clients, such as the Perl modules.

<LI><code>MySQL-shared-<var>VERSION</var>.i386.rpm</code>

This package contains the shared libraries (<code>libmysqlclient.so*</code>)
that certain languages and applications need to dynamically load and
use MySQL.

<LI><code>MySQL-shared-compat-<var>VERSION</var>.i386.rpm</code>

This package includes the shared libraries for both MySQL 3.23 and
MySQL 4.0. Install this package instead of <code>MySQL-shared</code> if you
have applications installed that are dynamically linked against MySQL
3.23 but you want to upgrade to MySQL 4.0 without breaking the library
dependencies. This package has been available since MySQL 4.0.13.

<LI><code>MySQL-embedded-<var>VERSION</var>.i386.rpm</code>

The embedded MySQL server library (from MySQL 4.0).

<LI><code>MySQL-<var>VERSION</var>.src.rpm</code>

This contains the source code for all of the previous packages. It can also
be used to rebuild the RPMs on other architectures (for example, Alpha or SPARC).
</UL>

<P>
To see all files in an RPM package (for example, a <code>MySQL-server</code>
RPM), run:

</P>

<PRE>
shell&#62; rpm -qpl MySQL-server-<var>VERSION</var>.i386.rpm
</PRE>

<P>
To perform a standard minimal installation, run:

</P>

<PRE>
shell&#62; rpm -i MySQL-server-<var>VERSION</var>.i386.rpm
shell&#62; rpm -i MySQL-client-<var>VERSION</var>.i386.rpm
</PRE>

<P>
To install just the client package, run:

</P>

<PRE>
shell&#62; rpm -i MySQL-client-<var>VERSION</var>.i386.rpm
</PRE>

<P>
RPM provides a feature to verify the integrity and authenticity of packages
before installing them. If you would like to learn more about this feature,
see section <A HREF="manual_Installing.html#Verifying_Package_Integrity">2.1.4  Verifying Package Integrity Using MD5 Checksums or <code>GnuPG</code></A>.

</P>
<P>
The server RPM places data under the <tt>`/var/lib/mysql'</tt> directory. The
RPM also creates a login account for a user named <code>mysql</code> (if one does not
already exist) to use for running the MySQL server, and
creates the appropriate entries in <tt>`/etc/init.d/'</tt> to start the
server automatically at boot time. (This means that if you have performed a
previous installation and have made changes to its startup script, you may
want to make a copy of the script so that you don't lose it when you install a
newer RPM.) See section <A HREF="manual_Installing.html#Automatic_start">2.9.2.2  Starting and Stopping MySQL Automatically</A> for more information on how MySQL can be
started automatically on system startup.

</P>
<P>
If you want to install the MySQL RPM on older Linux distributions that do
not support initialization scripts in <tt>`/etc/init.d'</tt> (directly
or via a symlink), you should create a symbolic link that points
to the location where your initialization scripts actually are
installed. For example, if that location is <tt>`/etc/rc.d/init.d'</tt>,
use these commands before installing the RPM to create <tt>`/etc/init.d'</tt>
as a symbolic link that points there:

</P>

<PRE>
shell&#62; cd /etc
shell&#62; ln -s rc.d/init.d .
</PRE>

<P>
However, all current major Linux distributions should already support the
new directory layout that uses <tt>`/etc/init.d'</tt>, because it is
required for LSB (Linux Standard Base) compliance.

</P>
<P>
If the RPM files that you install include <code>MySQL-server</code>, the
<code>mysqld</code> server should be up and running after installation.
You should now be able to start using MySQL.

</P>
<P>
If something goes wrong, you can find more information in the binary
installation section. See section <A HREF="manual_Installing.html#Installing_binary">2.7  Installing MySQL on Other Unix-Like Systems</A>.

</P>
<P>
<strong>Note</strong>:
The accounts that are listed in the MySQL grant tables initially have no
passwords.  After starting the server, you should set up passwords for
them using the instructions in section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.

</P>



<H2><A NAME="Mac_OS_X_installation" HREF="manual_toc.html#Mac_OS_X_installation">2.5  Installing MySQL on Mac OS X</A></H2>

<P>
<A NAME="IDX164"></A>
<A NAME="IDX165"></A>

</P>
<P>
Beginning with MySQL 4.0.11, you can install MySQL on Mac OS X 10.2.x
(``Jaguar'') and up using a Mac OS X binary package in PKG format instead of the
binary tarball distribution. Please note that older versions of Mac OS X
(for example, 10.1.x) are not supported by this package.

</P>
<P>
The package is located inside a disk image (<code>.dmg</code>) file that you
first need to mount by double-clicking its icon in the Finder. It should
then mount the image and display its contents.

</P>
<P>
To obtain MySQL, see section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.

</P>
<P>
<strong>Note</strong>: Before proceeding with the installation, be sure to
shut down all running MySQL server instances by either
using the MySQL Manager Application (on Mac OS X Server) or via
<code>mysqladmin shutdown</code> on the command line.

</P>
<P>
To actually install the MySQL PKG file, double-click on the package icon. This
launches the Mac OS X Package Installer, which will guide you through
the installation of MySQL.

</P>
<P>
Due to a bug in the Mac OS X package installer, you may see this
error message in the destination disk selection dialog:

</P>

<PRE>
You cannot install this software on this disk. (null)
</PRE>

<P>
If this error occurs, simply click the <code>Go Back</code> button once to return
to the previous screen. Then click <code>Continue</code> to advance to the
destination disk selection again, and you should be able to choose the
destination disk correctly. We have reported this bug to Apple and it is
investigating this problem.

</P>
<P>
The Mac OS X PKG of MySQL will install itself into
<tt>`/usr/local/mysql-<var>VERSION</var>'</tt> and will also install a symbolic link,
<tt>`/usr/local/mysql'</tt>, pointing to the new location. If a directory named
<tt>`/usr/local/mysql'</tt> already exists, it will be renamed to
<tt>`/usr/local/mysql.bak'</tt> first. Additionally, the installer will create the
grant tables in the <code>mysql</code> database by executing <code>mysql_install_db</code>
after the installation.

</P>
<P>
The installation layout is similar to that of a <code>tar</code> file binary
distribution; all MySQL binaries are located in the directory
<tt>`/usr/local/mysql/bin'</tt>.  The MySQL socket file is created as
<tt>`/tmp/mysql.sock'</tt> by default.
See section <A HREF="manual_Installing.html#Installation_layouts">2.1.5  Installation Layouts</A>.

</P>
<P>
MySQL installation requires a Mac OS X user account named <code>mysql</code>.  A
user account with this name should exist by default on Mac OS X 10.2 and up.

</P>
<P>
If you are running Mac OS X Server, you already have a version of MySQL
installed.  The versions of MySQL that ship with Mac OS X Server versions are
shown in the following table:

</P>
<TABLE BORDER>
<TR><TD><strong>Mac OS X Server Version</strong> </TD><TD> <strong>MySQL Version</strong>
</TD></TR>
<TR><TD>10.2-10.2.2 </TD><TD> 3.23.51
</TD></TR>
<TR><TD>10.2.3-10.2.6 </TD><TD> 3.23.53
</TD></TR>
<TR><TD>10.3 </TD><TD> 4.0.14
</TD></TR>
<TR><TD>10.3.2 </TD><TD> 4.0.16
</TD></TR>
</TABLE>

<P>
This manual section covers the installation of the official MySQL Mac OS X
PKG only.  Make sure to read Apple's help information about installing MySQL:
Run the ``Help View'' application, select ``Mac OS X Server'' help, do a
search for ``MySQL,'' and read the item entitled ``Installing MySQL.''

</P>
<P>
For pre-installed versions of MySQL on Mac OS X Server, note especially that
you should start <code>mysqld</code> with <code>safe_mysqld</code> instead of
<code>mysqld_safe</code> if MySQL is older than version 4.0.

</P>
<P>
If you previously used Marc Liyanage's MySQL packages for Mac OS X from
<a HREF="http://www.entropy.ch">http://www.entropy.ch</a>, you can simply follow the update instructions
for packages using the binary installation layout as given on his pages.

</P>
<P>
If you are upgrading from Marc's 3.23.xx versions or from the Mac OS X
Server version of MySQL to the official MySQL PKG, you also need to convert
the existing MySQL privilege tables to the current format, because
some new security privileges have been added.
See section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.

</P>
<P>
If you would like to automatically start up MySQL during system startup, you
also need to install the MySQL Startup Item. Starting with MySQL 4.0.15, it
is part of the Mac OS X installation disk images as a separate installation
package. Simply double-click the <code>MySQLStartupItem.pkg</code> icon and follow
the instructions to install it.

</P>
<P>
Note that the Startup Item need be installed only once! There is no need to
install it each time you upgrade the MySQL package later.

</P>
<P>
The Startup Item will be installed into
<tt>`/Library/StartupItems/MySQLCOM'</tt>.  (Before MySQL 4.1.2, the location
was <tt>`/Library/StartupItems/MySQL'</tt>, but that collided with the MySQL
Startup Item installed by Mac OS X Server.)  Startup Item installation
adds a variable <code>MYSQLCOM=-YES-</code> to the system configuration file
<tt>`/etc/hostconfig'</tt>. If you would like to disable the automatic startup
of MySQL, simply change this variable to <code>MYSQLCOM=-NO-</code>.

</P>
<P>
On Mac OS X Server, the default MySQL installation uses the variable
<code>MYSQL</code> in the <tt>`/etc/hostconfig'</tt> file.  The MySQL AB Startup Item
installer disables this variable by setting it to <code>MYSQL=-NO-</code>. This
avoids boot time conflicts with the <code>MYSQLCOM</code> variable used by the
MySQL AB Startup Item.  However, it does not shut down an already running
MySQL server. You should do that yourself.

</P>
<P>
After the installation, you can start up MySQL by running the following
commands in a terminal window. You must have administrator privileges to
perform this task.

</P>
<P>
If you have installed the Startup Item:

</P>

<PRE>
shell&#62; sudo /Library/StartupItems/MySQLCOM/MySQLCOM start
(Enter your password, if necessary)
(Press Control-D or enter "exit" to exit the shell)
</PRE>

<P>
For versions of MySQL older than 4.1.3, substitute 
<code>/Library/StartupItems/MySQLCOM/MySQLCOM</code> with
<code>/Library/StartupItems/MySQL/MySQL</code> above.

</P>
<P>
If you don't use the Startup Item, enter the following command sequence:

</P>

<PRE>
shell&#62; cd /usr/local/mysql
shell&#62; sudo ./bin/mysqld_safe
(Enter your password, if necessary)
(Press Control-Z)
shell&#62; bg
(Press Control-D or enter "exit" to exit the shell)
</PRE>

<P>
You should now be able to connect to the MySQL server, for example, by running
<tt>`/usr/local/mysql/bin/mysql'</tt>.

</P>
<P>
<strong>Note</strong>:
The accounts that are listed in the MySQL grant tables initially have no
passwords.  After starting the server, you should set up passwords for
them using the instructions in section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.

</P>
<P>
You might want to add aliases to your shell's resource file to make it easier
to access commonly used programs such as <code>mysql</code> and <code>mysqladmin</code>
from the command line. The syntax for <code>tcsh</code> is:

</P>

<PRE>
alias mysql /usr/local/mysql/bin/mysql
alias mysqladmin /usr/local/mysql/bin/mysqladmin
</PRE>

<P>
For <code>bash</code>, use:

</P>

<PRE>
alias mysql=/usr/local/mysql/bin/mysql
alias mysqladmin=/usr/local/mysql/bin/mysqladmin
</PRE>

<P>
Even better,
add <code>/usr/local/mysql/bin</code> to
your <code>PATH</code> environment variable. For example, add the following
line to your <tt>`$HOME/.tcshrc'</tt> file if your shell is <code>tcsh</code>:

</P>

<PRE>
setenv PATH ${PATH}:/usr/local/mysql/bin
</PRE>

<P>
If no <tt>`.tcshrc'</tt> file exists in your home directory, create it with a text
editor.

</P>
<P>
If you are upgrading an existing installation,
please note that installing a new MySQL PKG does not remove the directory
of an older installation. Unfortunately, the Mac OS X Installer does not yet
offer the functionality required to properly upgrade previously installed
packages.

</P>
<P>
To use your existing databases with the new installation, you'll need to copy
the contents of the old data directory to the new data directory. Make sure
that neither the old server nor the new one is running when you do this.
After you have copied over the MySQL database files from the
previous installation and have successfully started the new server, you should
consider removing the old installation files to save disk space.
Additionally, you should also remove older versions of the Package Receipt
directories located in <tt>`/Library/Receipts/mysql-<var>VERSION</var>.pkg'</tt>.

</P>


<H2><A NAME="NetWare_installation" HREF="manual_toc.html#NetWare_installation">2.6  Installing MySQL on NetWare</A></H2>

<P>
<A NAME="IDX166"></A>
<A NAME="IDX167"></A>

</P>
<P>
Porting MySQL to NetWare was an effort spearheaded by
Novell. Novell customers will be pleased to note that NetWare 6.5
ships with bundled MySQL binaries, complete with an automatic
commercial use license for all servers running that version of NetWare.

</P>
<P>
MySQL for NetWare is compiled using a combination of <code>Metrowerks
CodeWarrior for NetWare</code> and special cross-compilation versions of the
GNU autotools.

</P>
<P>
The latest binary packages for NetWare can be obtained at
<a HREF="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.
See section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.

</P>
<P>
In order to host MySQL, the NetWare server must meet these requirements:

</P>

<UL>
<LI>

NetWare 6.5 Support Pack 2 installed and updated with the latest LibC,
or NetWare 6.0 with Support Pack 4 installed and updated with the latest LibC.
NetWare 6.5 Support Pack 2 and other updates are available at
<a HREF="http://support.novell.com/filefinder/18197/index.html">http://support.novell.com/filefinder/18197/index.html</a>.
NetWare 6.0 Support Pack 4 and other updates are available at
<a HREF="http://support.novell.com/filefinder/13659/index.html">http://support.novell.com/filefinder/13659/index.html</a>.
The latest LibC is available at <a HREF="http://developer.novell.com/ndk/libc.htm">http://developer.novell.com/ndk/libc.htm</a>.
Steps to update LibC can be found here:
<a HREF="http://developer.novell.com/ndk/doc/libc/index.html?page=/ndk/doc/libc/libc_enu/data/ajjl0r0.html">http://developer.novell.com/ndk/doc/libc/index.html?page=/ndk/doc/libc/libc_enu/data/ajjl0r0.html</a>

<LI>

The system must meet Novell's minimum requirements to run the respective
version of NetWare.
<LI>

MySQL data, as well as the binaries themselves, must be installed on an
NSS volume; traditional volumes are not supported.
</UL>

<P>
To install MySQL for NetWare, use the following procedure:

</P>

<OL>
<LI>

If you are upgrading from a prior installation, stop the MySQL server.
This is done from the server console, using the following command:


<PRE>
SERVER:  mysqladmin -u root shutdown
</PRE>

<LI>

Log on to the target server from a client machine with access to the
location where you will install MySQL.

<LI>

Extract the binary package Zip file onto the server. Be sure to allow
the paths in the Zip file to be used. It is safe to simply extract the
file to <tt>`SYS:\'</tt>.

If you are upgrading from a prior installation, you may need to copy the
data directory (for example, <tt>`SYS:MYSQL\DATA'</tt>) now, as well as
<tt>`my.cnf'</tt>, if you have customized it. You can then delete the old copy
of MySQL.

<LI>

You might want to rename the directory to something more consistent and easy
to use. We recommend using <tt>`SYS:MYSQL'</tt>; examples in this manual
use this name to refer to the installation directory in general.

<LI>

At the server console, add a search path for the directory containing the
MySQL NLMs. For example:


<PRE>
SERVER:  SEARCH ADD SYS:MYSQL\BIN
</PRE>

<LI>

Initialize the data directory and the grant tables, if needed, by executing
<code>mysql_install_db</code> at the server console.

<LI>

Start the MySQL server using <code>mysqld_safe</code> at the server console.

<LI>

To finish the installation, you should also add the following commands to
<code>autoexec.ncf</code>. For example, if your MySQL installation is in
<tt>`SYS:MYSQL'</tt> and you want MySQL to start automatically, you could
add these lines:


<PRE>
#Starts the MySQL 4.0.x database server
SEARCH ADD SYS:MYSQL\BIN
MYSQLD_SAFE
</PRE>

If you are running MySQL on NetWare 6.0, we strongly suggest that you use the
<code>--skip-external-locking</code> option on the command line:


<PRE>
#Starts the MySQL 4.0.x database server
SEARCH ADD SYS:MYSQL\BIN
MYSQLD_SAFE --skip-external-locking
</PRE>

It will also be necessary to use <code>CHECK TABLE</code> and <code>REPAIR
TABLE</code> instead of <code>myisamchk</code>, because <code>myisamchk</code> makes use
of external locking.  External locking is known to have problems on
NetWare 6.0; the problem has been eliminated in NetWare 6.5.

<code>mysqld_safe</code> on NetWare provides a screen presence. When you unload
(shut down) the <code>mysqld_safe</code> NLM, the screen does not by default go
away.  Instead, it prompts for user input:


<PRE>
*&#60;NLM has terminated; Press any key to close the screen&#62;*
</PRE>

If you want NetWare to close the screen automatically instead, use the
<code>--autoclose</code> option to <code>mysqld_safe</code>. For example:


<PRE>
#Starts the MySQL 4.0.x database server
SEARCH ADD SYS:MYSQL\BIN
MYSQLD_SAFE --autoclose
</PRE>

<LI>

When installing the 4.1.x version either for the first time or upgrading the
4.0.x version to 4.1.x, download and install Perl module for MySQL 4.1 from
<a HREF="http://forge.novell.com/modules/xfmod/project/showfiles.php?group_id=1126">http://forge.novell.com/modules/xfmod/project/showfiles.php?group_id=1126</a>
and PHP Extension for MySQL 4.1 from
<a HREF="http://forge.novell.com/modules/xfmod/project/showfiles.php?group_id=1078">http://forge.novell.com/modules/xfmod/project/showfiles.php?group_id=1078</a>

</OL>

<P>
The behavior of <code>mysqld_safe</code> on NetWare is described further in
section <A HREF="manual_MySQL_Database_Administration.html#mysqld_safe">5.1.3  The <code>mysqld_safe</code> Server Startup Script</A>.

</P>
<P>
If there was an existing installation of MySQL on the server, be sure
to check for existing MySQL startup commands in <code>autoexec.ncf</code>,
and edit or delete them as necessary.

</P>
<P>
<strong>Note</strong>:
The accounts that are listed in the MySQL grant tables initially have no
passwords.  After starting the server, you should set up passwords for
them using the instructions in section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.

</P>



<H2><A NAME="Installing_binary" HREF="manual_toc.html#Installing_binary">2.7  Installing MySQL on Other Unix-Like Systems</A></H2>

<P>
<A NAME="IDX168"></A>
<A NAME="IDX169"></A>

</P>
<P>
This section covers the installation of MySQL binary distributions that are
provided for various platforms in the form of compressed <code>tar</code> files
(files with a <code>.tar.gz</code> extension).  See section <A HREF="manual_Installing.html#MySQL_binaries">2.1.2.5  MySQL Binaries Compiled by MySQL AB</A> for a
detailed list.

</P>
<P>
To obtain MySQL, see section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.

</P>
<P>
MySQL <code>tar</code> file binary distributions have names of the form
<tt>`mysql-<var>VERSION</var>-<var>OS</var>.tar.gz'</tt>, where <code><var>VERSION</var></code> is a number (for
example, <code>4.0.17</code>), and <var>OS</var> indicates the type of operating
system for which the distribution is intended (for example,
<code>pc-linux-i686</code>).

</P>
<P>
In addition to these generic packages, we also offer binaries in
platform-specific package formats for selected platforms.
See section <A HREF="manual_Installing.html#Quick_Standard_Installation">2.2  Standard MySQL Installation Using a Binary Distribution</A> for more information on how to install
these.

</P>
<P>
You need the following tools to install a MySQL <code>tar</code> file binary
distribution:

</P>

<UL>
<LI>

GNU <code>gunzip</code> to uncompress the distribution.

<LI>

A reasonable <code>tar</code> to unpack the distribution. GNU <code>tar</code> is known
to work. Some operating systems come with a pre-installed version of
<code>tar</code> that is known to have problems.  For example, Mac OS X <code>tar</code>
and Sun <code>tar</code> are known to have problems with long filenames.  On Mac
OS X, you can use the pre-installed <code>gnutar</code> program.  On other systems
with a deficient <code>tar</code>, you should install GNU <code>tar</code> first.
</UL>

<P>
If you run into problems, <em>please always use <code>mysqlbug</code></em> when
posting questions to a MySQL mailing list.  Even if the problem
isn't a bug, <code>mysqlbug</code> gathers system information that will help others
solve your problem.  By not using <code>mysqlbug</code>, you lessen the likelihood
of getting a solution to your problem.  You will find <code>mysqlbug</code> in the
<tt>`bin'</tt> directory after you unpack the distribution.  See section <A HREF="manual_Introduction.html#Bug_reports">1.4.1.3  How to Report Bugs or Problems</A>.

</P>
<P>
<A NAME="IDX170"></A>
The basic commands you must execute to install and use a MySQL
binary distribution are:

</P>

<PRE>
shell&#62; groupadd mysql
shell&#62; useradd -g mysql mysql
shell&#62; cd /usr/local
shell&#62; gunzip &#60; <var>/path/to/mysql-VERSION-OS</var>.tar.gz | tar xvf -
shell&#62; ln -s <var>full-path-to-mysql-VERSION-OS</var> mysql
shell&#62; cd mysql
shell&#62; scripts/mysql_install_db --user=mysql
shell&#62; chown -R root  .
shell&#62; chown -R mysql data
shell&#62; chgrp -R mysql .
shell&#62; bin/mysqld_safe --user=mysql &#38;
</PRE>

<P>
For versions of MySQL older than 4.0, substitute <code>bin/safe_mysqld</code>
for <code>bin/mysqld_safe</code> in the final command.

</P>
<P>
<strong>Note</strong>: This procedure does not set up any passwords for MySQL
accounts.  After following the procedure, proceed to section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.

</P>
<P>
A more detailed version of the preceding description for installing
a binary distribution follows:

</P>

<OL>

<LI>

Add a login user and group for <code>mysqld</code> to run as:


<PRE>
shell&#62; groupadd mysql
shell&#62; useradd -g mysql mysql
</PRE>

These commands add the <code>mysql</code> group and the <code>mysql</code> user.  The
syntax for <code>useradd</code> and <code>groupadd</code> may differ slightly on different
versions of Unix.  They may also be called <code>adduser</code> and <code>addgroup</code>.

You might want to call the user and group something else instead
of <code>mysql</code>.  If so, substitute the appropriate name in the
following steps.

<LI>

Pick the directory under which you want to unpack the distribution, and
change location into it. In the following example, we unpack the
distribution under <tt>`/usr/local'</tt>. (The instructions, therefore, assume
that you have permission to create files and directories in
<tt>`/usr/local'</tt>.  If that directory is protected, you will need to perform
the installation as <code>root</code>.)


<PRE>
shell&#62; cd /usr/local
</PRE>

<LI>

Obtain a distribution file from one of the sites listed in
section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.
For a given release, binary distributions for all platforms
are built from the same MySQL source distribution.

<LI>

Unpack the distribution, which will create the installation directory.
Then create a symbolic link to that directory:


<PRE>
shell&#62; gunzip &#60; <var>/path/to/mysql-VERSION-OS</var>.tar.gz | tar xvf -
shell&#62; ln -s <var>full-path-to-mysql-VERSION-OS</var> mysql
</PRE>

The <code>tar</code> command creates a directory named
<tt>`mysql-<var>VERSION</var>-<var>OS</var>'</tt>.  The
<code>ln</code> command makes a symbolic link to that directory.  This lets you refer
more easily to the installation directory as <tt>`/usr/local/mysql'</tt>.

With GNU <code>tar</code>, no separate invocation of <code>gunzip</code> is necessary.
You can replace the first line with the following
alternative command to uncompress and extract the distribution:


<PRE>
shell&#62; tar zxvf <var>/path/to/mysql-VERSION-OS</var>.tar.gz
</PRE>

<LI>

Change location into the installation directory:


<PRE>
shell&#62; cd mysql
</PRE>

You will find several files and subdirectories in the <code>mysql</code> directory.
The most important for installation purposes are the <tt>`bin'</tt> and
<tt>`scripts'</tt> subdirectories.

<DL COMPACT>

<DT><tt>`bin'</tt>
<DD>
<A NAME="IDX171"></A>
<A NAME="IDX172"></A>
This directory contains client programs and the server.
You should add the full pathname of this directory to your
<code>PATH</code> environment variable so that your shell finds the MySQL
programs properly. See section <A HREF="manual_Environment_variables.html#Environment_variables">F  Environment Variables</A>.

<DT><tt>`scripts'</tt>
<DD>
This directory contains the <code>mysql_install_db</code> script used to initialize
the <code>mysql</code> database containing the grant tables that store the server
access permissions.
</DL>

<LI>

If you haven't installed MySQL before, you must create the MySQL grant tables:


<PRE>
shell&#62; scripts/mysql_install_db --user=mysql
</PRE>

If you run the command as <code>root</code>, you should use the <code>--user</code>
option as shown.  The value of the option should be the name of the login
account that you created in the first step to use for running the server.
If you run the command while logged in as that user, you can omit the
<code>--user</code> option.

Note that for MySQL versions older than 3.22.10,
<code>mysql_install_db</code> left the server running after creating the grant
tables.  This is no longer true; you will need to restart the server after
performing the remaining steps in this procedure.

<LI>

Change the ownership of program binaries to <code>root</code> and ownership of the
data directory to the user that you will run <code>mysqld</code> as.  Assuming
that you are located in the installation directory
(<tt>`/usr/local/mysql'</tt>), the commands look like this:


<PRE>
shell&#62; chown -R root  .
shell&#62; chown -R mysql data
shell&#62; chgrp -R mysql .
</PRE>

The first command changes the owner attribute of the files to the
<code>root</code> user. The second changes the owner attribute of the
data directory to the <code>mysql</code> user. The third changes the
group attribute to the <code>mysql</code> group.

<LI>

If you would like MySQL to start automatically when you boot your
machine, you can copy <code>support-files/mysql.server</code> to the location where
your system has its startup files.  More information can be found in the
<code>support-files/mysql.server</code> script itself and in
section <A HREF="manual_Installing.html#Automatic_start">2.9.2.2  Starting and Stopping MySQL Automatically</A>.

<LI>

<A NAME="IDX173"></A>
<A NAME="IDX174"></A>
<A NAME="IDX175"></A>
You can set up new accounts using the <code>bin/mysql_setpermission</code> script if
you install the <code>DBI</code> and <code>DBD::mysql</code> Perl modules.
For instructions, see section <A HREF="manual_Installing.html#Perl_support">2.13  Perl Installation Notes</A>.

<LI>

If you would like to use <code>mysqlaccess</code> and have the MySQL
distribution in some non-standard place, you must change the location where
<code>mysqlaccess</code> expects to find the <code>mysql</code> client.  Edit the
<tt>`bin/mysqlaccess'</tt> script at approximately line 18.  Search for a line
that looks like this:


<PRE>
$MYSQL     = '/usr/local/bin/mysql';    # path to mysql executable
</PRE>

Change the path to reflect the location where <code>mysql</code> actually is
stored on your system.  If you do not do this, you will get a <code>Broken
pipe</code> error when you run <code>mysqlaccess</code>.

</OL>

<P>
After everything has been unpacked and installed, you should
test your distribution.

</P>
<P>
You can start the MySQL server with the following command:

</P>

<PRE>
shell&#62; bin/mysqld_safe --user=mysql &#38;
</PRE>

<P>
For versions of MySQL older than 4.0, substitute <code>bin/safe_mysqld</code>
for <code>bin/mysqld_safe</code> in the command.

</P>
<P>
More information about <code>mysqld_safe</code> is given in
section <A HREF="manual_MySQL_Database_Administration.html#mysqld_safe">5.1.3  The <code>mysqld_safe</code> Server Startup Script</A>.

</P>
<P>
<strong>Note</strong>:
The accounts that are listed in the MySQL grant tables initially have no
passwords.  After starting the server, you should set up passwords for
them using the instructions in section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.

</P>



<H2><A NAME="Installing_source" HREF="manual_toc.html#Installing_source">2.8  MySQL Installation Using a Source Distribution</A></H2>

<P>
<A NAME="IDX176"></A>
<A NAME="IDX177"></A>
<A NAME="IDX178"></A>

</P>

<P>
Before you proceed with the source installation, check first to see whether our
binary is available for your platform and whether it will work for you. We
put a lot of effort into making sure that our binaries are built with the
best possible options.

</P>
<P>
To obtain a source distribution for MySQL, section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.

</P>
<P>
MySQL source distributions are provided as compressed <code>tar</code>
archives and have names of the form <tt>`mysql-<var>VERSION</var>.tar.gz'</tt>, where
<var>VERSION</var> is a number like <code>5.0.3-alpha</code>.

</P>
<P>
You need the following tools to build and install MySQL from source:

</P>

<UL>
<LI>

GNU <code>gunzip</code> to uncompress the distribution.

<LI>

A reasonable <code>tar</code> to unpack the distribution. GNU <code>tar</code> is known
to work. Some operating systems come with a pre-installed version of
<code>tar</code> that is known to have problems.  For example, Mac OS X <code>tar</code>
and Sun <code>tar</code> are known to have problems with long filenames.  On Mac
OS X, you can use the pre-installed <code>gnutar</code> program.  On other systems
with a deficient <code>tar</code>, you should install GNU <code>tar</code> first.

<LI>

A working ANSI C++ compiler.  <code>gcc</code> 2.95.2 or later, <code>egcs</code> 1.0.2
or later or <code>egcs 2.91.66</code>, SGI C++, and SunPro C++ are some of the
compilers that are known to work.  <code>libg++</code> is not needed when
using <code>gcc</code>.  <code>gcc</code> 2.7.x has a bug that makes it impossible
to compile some perfectly legal C++ files, such as
<tt>`sql/sql_base.cc'</tt>.  If you have only <code>gcc</code> 2.7.x, you must
upgrade your <code>gcc</code> to be able to compile MySQL. <code>gcc</code>
2.8.1 is also known to have problems on some platforms, so it should be
avoided if a new compiler exists for the platform.

<code>gcc</code> 2.95.2 or later is recommended when compiling MySQL
3.23.x.

<LI>

A good <code>make</code> program.  GNU <code>make</code> is always recommended and is
sometimes required.  If you have problems, we recommend trying GNU
<code>make</code> 3.75 or newer.
</UL>

<P>
If you are using a version of <code>gcc</code> recent enough to understand the
<code>-fno-exceptions</code> option, it is <em>very important</em> that you use
this option. Otherwise, you may compile a binary that crashes randomly. We also
recommend that you use <code>-felide-constructors</code> and <code>-fno-rtti</code> along
with <code>-fno-exceptions</code>. When in doubt, do the following:

</P>

<PRE>
CFLAGS="-O3" CXX=gcc CXXFLAGS="-O3 -felide-constructors \
       -fno-exceptions -fno-rtti" ./configure \
       --prefix=/usr/local/mysql --enable-assembler \
       --with-mysqld-ldflags=-all-static
</PRE>

<P>
On most systems, this will give you a fast and stable binary.

</P>
<P>
If you run into problems, <em>please always use <code>mysqlbug</code></em> when
posting questions to a MySQL mailing list.  Even if the problem
isn't a bug, <code>mysqlbug</code> gathers system information that will help others
solve your problem.  By not using <code>mysqlbug</code>, you lessen the likelihood
of getting a solution to your problem.  You will find <code>mysqlbug</code> in the
<tt>`scripts'</tt> directory after you unpack the distribution.
See section <A HREF="manual_Introduction.html#Bug_reports">1.4.1.3  How to Report Bugs or Problems</A>.

</P>



<H3><A NAME="Quick_install" HREF="manual_toc.html#Quick_install">2.8.1  Source Installation Overview</A></H3>

<P>
The basic commands you must execute to install a MySQL source
distribution are:

</P>

<PRE>
shell&#62; groupadd mysql
shell&#62; useradd -g mysql mysql
shell&#62; gunzip &#60; mysql-<var>VERSION</var>.tar.gz | tar -xvf -
shell&#62; cd mysql-<var>VERSION</var>
shell&#62; ./configure --prefix=/usr/local/mysql
shell&#62; make
shell&#62; make install
shell&#62; cp support-files/my-medium.cnf /etc/my.cnf
shell&#62; cd /usr/local/mysql
shell&#62; bin/mysql_install_db --user=mysql
shell&#62; chown -R root  .
shell&#62; chown -R mysql var
shell&#62; chgrp -R mysql .
shell&#62; bin/mysqld_safe --user=mysql &#38;
</PRE>

<P>
For versions of MySQL older than 4.0, substitute <code>bin/safe_mysqld</code>
for <code>bin/mysqld_safe</code> in the final command.

</P>
<P>
If you start from a source RPM, do the following:

</P>

<PRE>
shell&#62; rpmbuild --rebuild --clean MySQL-<var>VERSION</var>.src.rpm
</PRE>

<P>
This will make a binary RPM that you can install. For older versions of RPM,
you may have to replace the command <code>rpmbuild</code> with <code>rpm</code> instead.

</P>
<P>
<strong>Note</strong>: This procedure does not set up any passwords for MySQL
accounts.  After following the procedure, proceed to section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>,
for post-installation setup and testing.

</P>
<P>
A more detailed version of the preceding description for installing
MySQL from a source distribution follows:

</P>

<OL>

<LI>

Add a login user and group for <code>mysqld</code> to run as:


<PRE>
shell&#62; groupadd mysql
shell&#62; useradd -g mysql mysql
</PRE>

These commands add the <code>mysql</code> group and the <code>mysql</code> user.  The
syntax for <code>useradd</code> and <code>groupadd</code> may differ slightly on different
versions of Unix.  They may also be called <code>adduser</code> and <code>addgroup</code>.

You might want to call the user and group something else instead
of <code>mysql</code>.  If so, substitute the appropriate name in the
following steps.

<LI>

Pick the directory under which you want to unpack the distribution, and
change location into it.

<LI>

Obtain a distribution file from one of the sites listed in
section <A HREF="manual_Installing.html#Getting_MySQL">2.1.3  How to Get MySQL</A>.

<LI>

Unpack the distribution into the current directory:

<PRE>
shell&#62; gunzip &#60; <var>/path/to/mysql-VERSION</var>.tar.gz | tar xvf -
</PRE>

This command creates a directory named <tt>`mysql-<var>VERSION</var>'</tt>.

With GNU <code>tar</code>, no separate invocation of <code>gunzip</code> is necessary.
You can use the following alternative command to uncompress and extract
the distribution:


<PRE>
shell&#62; tar zxvf <var>/path/to/mysql-VERSION-OS</var>.tar.gz
</PRE>

<LI>

Change location into the top-level directory of the unpacked distribution:


<PRE>
shell&#62; cd mysql-<var>VERSION</var>
</PRE>

Note that currently you must configure and build MySQL from
this top-level directory.  You cannot build it in a different
directory.

<LI>

Configure the release and compile everything:


<PRE>
shell&#62; ./configure --prefix=/usr/local/mysql
shell&#62; make
</PRE>

When you run <code>configure</code>, you might want to specify some options.
Run <code>./configure --help</code> for a list of options.
section <A HREF="manual_Installing.html#configure_options">2.8.2  Typical <code>configure</code> Options</A>, discusses some of the
more useful options.

If <code>configure</code> fails and you are going to send mail to a MySQL mailing
list to ask for assistance, please include any
lines from <tt>`config.log'</tt> that you think can help solve the problem.  Also
include the last couple of lines of output from <code>configure</code>.
Post the bug report using the <code>mysqlbug</code>
script.  See section <A HREF="manual_Introduction.html#Bug_reports">1.4.1.3  How to Report Bugs or Problems</A>.

If the compile fails, see section <A HREF="manual_Installing.html#Compilation_problems">2.8.4  Dealing with Problems Compiling MySQL</A> for help.

<LI>

Install the distribution:


<PRE>
shell&#62; make install
</PRE>

If you want to set up an option file, use one of those present in the
<tt>`support-files'</tt> directory as a template. For example:


<PRE>
shell&#62; cp support-files/my-medium.cnf /etc/my.cnf
</PRE>

You might need to run these commands as <code>root</code>.

If you want to configure support for <code>InnoDB</code> tables, you should edit the
<code>/etc/my.cnf</code> file, remove the <code>#</code> character before the
option lines that start with <code>innodb_...</code>, and modify the option values
to be what you want.
See section <A HREF="manual_Using_MySQL_Programs.html#Option_files">4.3.2  Using Option Files</A>
and section <A HREF="manual_InnoDB.html#InnoDB_configuration">15.4  <code>InnoDB</code> Configuration</A>.

<LI>

Change location into the installation directory:


<PRE>
shell&#62; cd /usr/local/mysql
</PRE>

<LI>

If you haven't installed MySQL before, you must create the MySQL grant tables:


<PRE>
shell&#62; bin/mysql_install_db --user=mysql
</PRE>

If you run the command as <code>root</code>, you should use the <code>--user</code>
option as shown.  The value of the option should be the name of the login
account that you created in the first step to use for running the server.
If you run the command while logged in as that user, you can omit the
<code>--user</code> option.

Note that for MySQL versions older than 3.22.10,
<code>mysql_install_db</code> left the server running after creating the grant
tables.  This is no longer true; you will need to restart the server after
performing the remaining steps in this procedure.

<LI>

Change the ownership of program binaries to <code>root</code> and ownership of the
data directory to the user that you will run <code>mysqld</code> as.  Assuming
that you are located in the installation directory
(<tt>`/usr/local/mysql'</tt>), the commands look like this:


<PRE>
shell&#62; chown -R root  .
shell&#62; chown -R mysql var
shell&#62; chgrp -R mysql .
</PRE>

The first command changes the owner attribute of the files to the
<code>root</code> user. The second changes the owner attribute of the
data directory to the <code>mysql</code> user. The third changes the
group attribute to the <code>mysql</code> group.

<LI>

If you would like MySQL to start automatically when you boot your
machine, you can copy <code>support-files/mysql.server</code> to the location where
your system has its startup files.  More information can be found in the
<code>support-files/mysql.server</code> script itself and in
section <A HREF="manual_Installing.html#Automatic_start">2.9.2.2  Starting and Stopping MySQL Automatically</A>.

<LI>

<A NAME="IDX179"></A>
<A NAME="IDX180"></A>
<A NAME="IDX181"></A>
You can set up new accounts using the <code>bin/mysql_setpermission</code> script if
you install the <code>DBI</code> and <code>DBD::mysql</code> Perl modules.
For instructions, see section <A HREF="manual_Installing.html#Perl_support">2.13  Perl Installation Notes</A>.

</OL>

<P>
After everything has been installed, you should initialize and test your
distribution using this command:

</P>

<PRE>
shell&#62; /usr/local/mysql/bin/mysqld_safe --user=mysql &#38;
</PRE>

<P>
For versions of MySQL older than 4.0, substitute <code>safe_mysqld</code>
for <code>mysqld_safe</code> in the command.

</P>
<P>
If that command fails immediately and prints <code>mysqld ended</code>, you can
find some information in the <tt>`<var>host_name</var>.err'</tt> file in the data directory.

</P>
<P>
More information about <code>mysqld_safe</code> is given in
section <A HREF="manual_MySQL_Database_Administration.html#mysqld_safe">5.1.3  The <code>mysqld_safe</code> Server Startup Script</A>.

</P>
<P>
<strong>Note</strong>:
The accounts that are listed in the MySQL grant tables initially have no
passwords.  After starting the server, you should set up passwords for
them using the instructions in section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.

</P>



<H3><A NAME="configure_options" HREF="manual_toc.html#configure_options">2.8.2  Typical <code>configure</code> Options</A></H3>

<P>
<A NAME="IDX182"></A>
<A NAME="IDX183"></A>
<A NAME="IDX184"></A>
<A NAME="IDX185"></A>
<A NAME="IDX186"></A>
<A NAME="IDX187"></A>

</P>
<P>
The <code>configure</code> script gives you a great deal of control over how
you configure a MySQL source distribution.  Typically you do this
using options on the <code>configure</code> command line.  You can also affect
<code>configure</code> using certain environment variables.  See section <A HREF="manual_Environment_variables.html#Environment_variables">F  Environment Variables</A>.  For a list of options supported by <code>configure</code>, run
this command:

</P>

<PRE>
shell&#62; ./configure --help
</PRE>

<P>
Some of the more commonly used <code>configure</code> options are described here:

</P>

<UL>
<LI>

To compile just the MySQL client libraries and client programs and
not the server, use the <code>--without-server</code> option:


<PRE>
shell&#62; ./configure --without-server
</PRE>

If you don't have a C++ compiler, <code>mysql</code> will not compile (it is the
one client program that requires C++).  In this case,
you can remove the code in <code>configure</code> that tests for the C++ compiler
and then run <code>./configure</code> with the <code>--without-server</code> option. The
compile step will still try to build <code>mysql</code>, but you can ignore any
warnings about <tt>`mysql.cc'</tt>.  (If <code>make</code> stops, try <code>make -k</code>
to tell it to continue with the rest of the build even if errors occur.)

<LI>

If you want to build the embedded MySQL library (<code>libmysqld.a</code>) you should
use the <code>--with-embedded-server</code> option.

<LI>

If you don't want your log files and database directories located under
<tt>`/usr/local/var'</tt>, use a <code>configure</code> command something like one
of these:


<PRE>
shell&#62; ./configure --prefix=/usr/local/mysql
shell&#62; ./configure --prefix=/usr/local \
           --localstatedir=/usr/local/mysql/data
</PRE>

The first command changes the installation prefix so that everything is
installed under <tt>`/usr/local/mysql'</tt> rather than the default of
<tt>`/usr/local'</tt>.  The second command preserves the default installation
prefix, but overrides the default location for database directories
(normally <tt>`/usr/local/var'</tt>) and changes it to
<code>/usr/local/mysql/data</code>.  After you have compiled MySQL, you can
change these options with option files. See section <A HREF="manual_Using_MySQL_Programs.html#Option_files">4.3.2  Using Option Files</A>.

<A NAME="IDX188"></A>
<A NAME="IDX189"></A>
<A NAME="IDX190"></A>
<LI>

If you are using Unix and you want the MySQL socket located somewhere
other than the default location (normally in the directory <tt>`/tmp'</tt> or
<tt>`/var/run'</tt>), use a <code>configure</code> command like this:


<PRE>
shell&#62; ./configure \
           --with-unix-socket-path=/usr/local/mysql/tmp/mysql.sock
</PRE>

The socket filename must be an absolute pathname.
You can also change the location of <tt>`mysql.sock'</tt> later by using a MySQL
option file. See section <A HREF="manual_Problems.html#Problems_with_mysql.sock">A.4.5  How to Protect or Change the MySQL Socket File <tt>`/tmp/mysql.sock'</tt></A>.

<A NAME="IDX191"></A>
<A NAME="IDX192"></A>
<LI>

If you want to compile statically linked programs (for example, to make a
binary distribution, to get more speed, or to work around problems with some
Red Hat Linux distributions), run <code>configure</code> like this:


<PRE>
shell&#62; ./configure --with-client-ldflags=-all-static \
           --with-mysqld-ldflags=-all-static
</PRE>

<A NAME="IDX193"></A>
<A NAME="IDX194"></A>
<A NAME="IDX195"></A>
<A NAME="IDX196"></A>
<A NAME="IDX197"></A>
<A NAME="IDX198"></A>
<A NAME="IDX199"></A>
<LI>

If you are using <code>gcc</code> and don't have <code>libg++</code> or <code>libstdc++</code>
installed, you can tell <code>configure</code> to use <code>gcc</code> as your C++
compiler:


<PRE>
shell&#62; CC=gcc CXX=gcc ./configure
</PRE>

When you use <code>gcc</code> as your C++ compiler, it will not attempt to link in
<code>libg++</code> or <code>libstdc++</code>.  This may be a good idea to do even if you
have these libraries installed, because some versions of them have
caused strange problems for MySQL users in the past.

The following list indicates some compilers and environment variable settings
that are commonly used with each one.

<A NAME="IDX200"></A>
<A NAME="IDX201"></A>
<A NAME="IDX202"></A>
<A NAME="IDX203"></A>
<A NAME="IDX204"></A>
<A NAME="IDX205"></A>
<A NAME="IDX206"></A>
<A NAME="IDX207"></A>

<DL COMPACT>

<DT><code>gcc</code> 2.7.2:
<DD>

<PRE>
CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors"
</PRE>

<DT><code>egcs</code> 1.0.3a:
<DD>

<PRE>
CC=gcc CXX=gcc CXXFLAGS="-O3 -felide-constructors \
-fno-exceptions -fno-rtti"
</PRE>

<DT><code>gcc</code> 2.95.2:
<DD>

<PRE>
CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro \
-felide-constructors -fno-exceptions -fno-rtti"
</PRE>

<DT><code>pgcc</code> 2.90.29 or newer:
<DD>

<PRE>
CFLAGS="-O3 -mpentiumpro -mstack-align-double" CXX=gcc \
CXXFLAGS="-O3 -mpentiumpro -mstack-align-double \
-felide-constructors -fno-exceptions -fno-rtti"
</PRE>

</DL>

In most cases, you can get a reasonably optimized MySQL binary by using the
options from the preceding list and adding the following options to the
<code>configure</code> line:


<PRE>
--prefix=/usr/local/mysql --enable-assembler \
--with-mysqld-ldflags=-all-static
</PRE>

The full <code>configure</code> line would, in other words, be something like the
following for all recent <code>gcc</code> versions:


<PRE>
CFLAGS="-O3 -mpentiumpro" CXX=gcc CXXFLAGS="-O3 -mpentiumpro \
-felide-constructors -fno-exceptions -fno-rtti" ./configure \
--prefix=/usr/local/mysql --enable-assembler \
--with-mysqld-ldflags=-all-static
</PRE>

The binaries we provide on the MySQL Web site at
<a HREF="http://www.mysql.com/">http://www.mysql.com/</a> are all compiled with full optimization and
should be perfect for most users.  See section <A HREF="manual_Installing.html#MySQL_binaries">2.1.2.5  MySQL Binaries Compiled by MySQL AB</A>.  There are some
configuration settings you can tweak to make an even faster binary, but these
are only for advanced users.  See section <A HREF="manual_MySQL_Optimization.html#Compile_and_link_options">7.5.4  How Compiling and Linking Affects the Speed of MySQL</A>.

If the build fails and produces errors about your compiler or linker not
being able to create the shared library <tt>`libmysqlclient.so.#'</tt> (where
<samp>`#'</samp> is a version number), you can work around this problem by giving the
<code>--disable-shared</code> option to <code>configure</code>.  In this case,
<code>configure</code> will not build a shared <tt>`libmysqlclient.so.#'</tt> library.

<A NAME="IDX208"></A>
<A NAME="IDX209"></A>
<A NAME="IDX210"></A>
<A NAME="IDX211"></A>
<LI>

By default, MySQL uses the <code>latin1</code> (ISO-8859-1) character set. To
change the default set, use the <code>--with-charset</code> option:

<PRE>
shell&#62; ./configure --with-charset=<var>CHARSET</var>
</PRE>

<var>CHARSET</var> may be one of <code>big5</code>, <code>cp1251</code>, <code>cp1257</code>,
<code>czech</code>, <code>danish</code>, <code>dec8</code>, <code>dos</code>, <code>euc_kr</code>,
<code>gb2312</code>, <code>gbk</code>, <code>german1</code>, <code>hebrew</code>, <code>hp8</code>,
<code>hungarian</code>, <code>koi8_ru</code>, <code>koi8_ukr</code>, <code>latin1</code>,
<code>latin2</code>, <code>sjis</code>, <code>swe7</code>, <code>tis620</code>, <code>ujis</code>,
<code>usa7</code>, or <code>win1251ukr</code>.
See section <A HREF="manual_MySQL_Database_Administration.html#Character_sets">5.8.1  The Character Set Used for Data and Sorting</A>.

As of MySQL 4.1.1, the default collation may also be specified. MySQL uses
the <code>latin1_swedish_ci</code> collation. To change this, use the
<code>--with-collation</code> option:


<PRE>
shell&#62; ./configure --with-collation=COLLATION
</PRE>

To change both the character set and the collation, use both the
<code>--with-charset</code> and <code>--with-collation</code> options.
The collation must be a legal collation for the character set.
(Use the <code>SHOW COLLATION</code> statement to determine which collations are
available for each character set.)

If you want to convert characters between the server and the client,
you should take a look at the <code>SET CHARACTER SET</code> statement.
See section <A HREF="manual_SQL_Syntax.html#SET_OPTION">13.5.3  <code>SET</code> Syntax</A>.

<A NAME="IDX212"></A>
<strong>Warning:</strong> If you change character sets after having created any
tables, you will have to run <code>myisamchk -r -q --set-character-set=<var>charset</var></code>
on every table. Your
indexes may be sorted incorrectly otherwise.  (This can happen if you
install MySQL, create some tables, then reconfigure
MySQL to use a different character set and reinstall it.)

With the <code>configure</code> option <code>--with-extra-charsets=<var>LIST</var></code>, you can
define which additional character sets should be compiled into the server.
<var>LIST</var> is either a list of character set names separated by spaces,
<code>complex</code> to include all character sets that can't be dynamically loaded,
or <code>all</code> to include all character sets into the binaries.

<LI>

To configure MySQL with debugging code, use the <code>--with-debug</code>
option:

<PRE>
shell&#62; ./configure --with-debug
</PRE>

This causes a safe memory allocator to be included that can find some errors
and that provides output about what is happening.
See section <A HREF="manual_Porting.html#Debugging_server">E.1  Debugging a MySQL Server</A>.

<LI>

If your client programs are using threads, you also must compile a
thread-safe version of the MySQL client library with the
<code>--enable-thread-safe-client</code> configure option. This will create a
<code>libmysqlclient_r</code> library with which you should link your threaded
applications.  See section <A HREF="manual_MySQL_APIs.html#Threaded_clients">21.2.15  How to Make a Threaded Client</A>.

<LI>

Options that pertain to particular systems can be found in the
system-specific section of this manual.
See section <A HREF="manual_Installing.html#Operating_System_Specific_Notes">2.12  Operating System-Specific Notes</A>.
</UL>



<H3><A NAME="Installing_source_tree" HREF="manual_toc.html#Installing_source_tree">2.8.3  Installing from the Development Source Tree</A></H3>

<P>
<A NAME="IDX213"></A>
<A NAME="IDX214"></A>

</P>
<P>
<strong>Caution</strong>: You should read this section only if you are interested
in helping us test our new code. If you just want to get MySQL up
and running on your system, you should use a standard release distribution
(either a binary or source distribution will do).

</P>
<P>
To obtain our most recent development source tree, use these instructions:

</P>

<OL>
<LI>

Download BitKeeper from
<a HREF="http://www.bitmover.com/cgi-bin/download.cgi">http://www.bitmover.com/cgi-bin/download.cgi</a>.  You will need
Bitkeeper 3.0 or newer to access our repository.

<LI>

Follow the instructions to install it.

<LI>

After BitKeeper has been installed, first go to the directory you
want to work from, and then use one of the following commands to clone
the MySQL version branch of your choice:

To clone the old 3.23 branch, use this command:


<PRE>
shell&#62; bk clone bk://mysql.bkbits.net/mysql-3.23 mysql-3.23
</PRE>

To clone the 4.0 stable (production) branch, use this command:


<PRE>
shell&#62; bk clone bk://mysql.bkbits.net/mysql-4.0 mysql-4.0
</PRE>

To clone the 4.1 stable (production) branch, use this command:


<PRE>
shell&#62; bk clone bk://mysql.bkbits.net/mysql-4.1 mysql-4.1
</PRE>

To clone the 5.0 development branch, use this command:


<PRE>
shell&#62; bk clone bk://mysql.bkbits.net/mysql-5.0 mysql-5.0
</PRE>

In the preceding examples, the source tree will be set up in the
<tt>`mysql-3.23/'</tt>, <tt>`mysql-4.0/'</tt>, <tt>`mysql-4.1/'</tt>, or <tt>`mysql-5.0/'</tt>
subdirectory of your current directory.

If you are behind a firewall and can only initiate HTTP connections,
you can also use BitKeeper via HTTP.

If you are required to use a proxy server, set the environment
variable <code>http_proxy</code> to point to your proxy:


<PRE>
shell&#62; export http_proxy="http://your.proxy.server:8080/"
</PRE>

Now, simply replace the <code>bk://</code> with <code>http://</code> when doing
a clone. Example:


<PRE>
shell&#62; bk clone http://mysql.bkbits.net/mysql-4.1 mysql-4.1
</PRE>

The initial download of the source tree may take a while, depending on the
speed of your connection. Please be patient.

<LI>

You will need GNU <code>make</code>, <code>autoconf</code> 2.58 (or newer),
<code>automake</code> 1.8, <code>libtool</code> 1.5, and <code>m4</code> to run the next
set of commands. Even though many operating systems already come with their
own implementation of <code>make</code>, chances are high that the compilation
will fail with strange error messages. Therefore, it is highly recommended
that you use GNU <code>make</code> (sometimes named <code>gmake</code>) instead.

Fortunately, a large number of operating systems already ship with the GNU
toolchain preinstalled or supply installable packages of these. In any case,
they can also be downloaded from the following locations:


<UL>
<LI>

<a HREF="http://www.gnu.org/software/autoconf/">http://www.gnu.org/software/autoconf/</a>
<LI>

<a HREF="http://www.gnu.org/software/automake/">http://www.gnu.org/software/automake/</a>
<LI>

<a HREF="http://www.gnu.org/software/libtool/">http://www.gnu.org/software/libtool/</a>
<LI>

<a HREF="http://www.gnu.org/software/m4/">http://www.gnu.org/software/m4/</a>
<LI>

<a HREF="http://www.gnu.org/software/make/">http://www.gnu.org/software/make/</a>
</UL>

If you are trying to configure MySQL 4.1 or later, you will also need GNU
<code>bison</code> 1.75 or later.  Older versions of <code>bison</code> may report this
error:


<PRE>
sql_yacc.yy:#####: fatal error: maximum table size (32767) exceeded
</PRE>

Note: The maximum table size is not actually exceeded;
the error is caused by bugs in older versions of <code>bison</code>.

Versions of MySQL before version 4.1 may also compile with other
<code>yacc</code> implementations (for example, BSD <code>yacc</code> 91.7.30). For later
versions, GNU <code>bison</code> is required.

The following example shows the typical commands required to configure a
source tree. The first <code>cd</code> command changes location into the top-level
directory of the tree; replace <tt>`mysql-4.0'</tt> with the appropriate directory
name.


<PRE>
shell&#62; cd mysql-4.0
shell&#62; bk -r edit
shell&#62; aclocal; autoheader; autoconf; automake
shell&#62; (cd innobase; aclocal; autoheader; autoconf; automake)
shell&#62; (cd bdb/dist; sh s_all)
shell&#62; ./configure  # Add your favorite options here
make
</PRE>

The command lines that change directory into the <tt>`innobase'</tt> and
<tt>`bdb/dist'</tt> directories are used to configure the <code>InnoDB</code> and
Berkeley DB (<code>BDB</code>) storage engines.  You can omit these command lines if
you to not require <code>InnoDB</code> or <code>BDB</code> support.

If you get some strange errors during this stage, verify that you really
have <code>libtool</code> installed.

A collection of our standard configuration scripts is located in the
<tt>`BUILD/'</tt> subdirectory.  You may find it more convenient to use the
<tt>`BUILD/compile-pentium-debug'</tt> script than the preceding set of
shell commands. To compile on a different architecture,
modify the script by removing flags that are Pentium-specific.

<LI>

When the build is done, run <code>make install</code>.  Be careful with this
on a production machine; the command may overwrite your live release
installation.  If you have another installation of MySQL, we
recommend that you run <code>./configure</code> with different values for the
<code>--prefix</code>, <code>--with-tcp-port</code>, and <code>--unix-socket-path</code> options
than those used for your production server.

<LI>

Play hard with your new installation and try to make the new features
crash.  Start by running <code>make test</code>.  See section <A HREF="manual_Extending_MySQL.html#MySQL_test_suite">24.1.2  MySQL Test Suite</A>.

<LI>

If you have gotten to the <code>make</code> stage and the distribution does
not compile, please report it in our bugs database at
<a HREF="http://bugs.mysql.com/">http://bugs.mysql.com/</a>.  If you
have installed the latest versions of the required GNU tools, and they
crash trying to process our configuration files, please report that also.
However, if you execute <code>aclocal</code> and get a <code>command not found</code>
error or a similar problem, do not report it.  Instead, make sure that all
the necessary tools are installed and that your <code>PATH</code> variable is
set correctly so that your shell can find them.

<LI>

After the initial <code>bk clone</code> operation to obtain the source tree, you
should run <code>bk pull</code> periodically to get updates.

<LI>

You can examine the change history for the tree with all the diffs by using
<code>bk revtool</code>.  If you see some funny diffs or code that you have a
question about, do not hesitate to send email to the MySQL <code>internals</code>
mailing list.
See section <A HREF="manual_Introduction.html#Mailing-list">1.4.1.1  The MySQL Mailing Lists</A>.
Also, if you think you have a better idea
on how to do something, send an email message to the same address with a patch.
<code>bk diffs</code> will produce a patch for you after you have made changes
to the source. If you do not have the time to code your idea, just send
a description.

<LI>

BitKeeper has a nice help utility that you can access via
<code>bk helptool</code>.

<LI>

Please note that any commits (made via <code>bk ci</code> or <code>bk citool</code>) will
trigger the posting of a message with the changeset to our internals
mailing list, as well as the usual openlogging.org submission with
just the changeset comments.
Generally, you wouldn't need to use commit (since the public tree will
not allow <code>bk push</code>), but rather use the <code>bk diffs</code> method
described previously.

</OL>

<P>
You can also browse changesets, comments, and source code online. For example,
to browse this information for MySQL 4.1, go to
<a HREF="http://mysql.bkbits.net:8080/mysql-4.1">http://mysql.bkbits.net:8080/mysql-4.1</a>.

</P>
<P>
The manual is in a separate tree that can be cloned with:

</P>

<PRE>
shell&#62; bk clone bk://mysql.bkbits.net/mysqldoc mysqldoc
</PRE>

<P>
There are also public BitKeeper trees for MySQL Control Center and
MyODBC. They can be cloned respectively as follows.

</P>
<P>
To clone MySQL Control center, use this command:

</P>

<PRE>
shell&#62; bk clone http://mysql.bkbits.net/mysqlcc mysqlcc
</PRE>

<P>
To clone MyODBC, use this command:

</P>

<PRE>
shell&#62; bk clone http://mysql.bkbits.net/myodbc3 myodbc3
</PRE>

<P>
To clone Connector/NET, use this command:

</P>

<PRE>
shell&#62; bk clone http://mysql.bkbits.net/connector-net connector-net
</PRE>



<H3><A NAME="Compilation_problems" HREF="manual_toc.html#Compilation_problems">2.8.4  Dealing with Problems Compiling MySQL</A></H3>

<P>
<A NAME="IDX215"></A>
<A NAME="IDX216"></A>
<A NAME="IDX217"></A>
<A NAME="IDX218"></A>
<A NAME="IDX219"></A>

</P>
<P>
All MySQL programs compile cleanly for us with no warnings on
Solaris or Linux using <code>gcc</code>.  On other systems, warnings may occur due to
differences in system include files.  See section <A HREF="manual_Installing.html#MIT-pthreads">2.8.5  MIT-pthreads Notes</A> for warnings
that may occur when using MIT-pthreads.  For other problems, check
the following list.

</P>
<P>
The solution to many problems involves reconfiguring.  If you do need to
reconfigure, take note of the following:

</P>
<P>
<A NAME="IDX220"></A>
<A NAME="IDX221"></A>
<A NAME="IDX222"></A>
<A NAME="IDX223"></A>

<UL>
<LI>

If <code>configure</code> is run after it already has been run, it may use
information that was gathered during its previous invocation.  This
information is stored in <tt>`config.cache'</tt>.  When <code>configure</code> starts
up, it looks for that file and reads its contents if it exists, on the
assumption that the information is still correct.  That assumption is invalid
when you reconfigure.

<LI>

Each time you run <code>configure</code>, you must run <code>make</code> again
to recompile.  However, you may want to remove old object files from previous
builds first because they were compiled using different configuration options.
</UL>

<P>
To prevent old configuration information or object files from being used,
run these commands before re-running <code>configure</code>:

</P>

<PRE>
shell&#62; rm config.cache
shell&#62; make clean
</PRE>

<P>
Alternatively, you can run <code>make distclean</code>.

</P>
<P>
The following list describes some of the problems when compiling MySQL
that have been found to occur most often:

</P>

<UL>
<LI>

<A NAME="IDX224"></A>
<A NAME="IDX225"></A>
<A NAME="IDX226"></A>
<A NAME="IDX227"></A>
<A NAME="IDX228"></A>
<A NAME="IDX229"></A>
If you get errors such as the ones shown here when compiling
<tt>`sql_yacc.cc'</tt>, you probably have run out of memory or swap space:


<PRE>
Internal compiler error: program cc1plus got fatal signal 11
Out of virtual memory
Virtual memory exhausted
</PRE>

The problem is that <code>gcc</code> requires a huge amount of memory to compile
<tt>`sql_yacc.cc'</tt> with inline functions.  Try running <code>configure</code> with
the <code>--with-low-memory</code> option:


<PRE>
shell&#62; ./configure --with-low-memory
</PRE>

This option causes <code>-fno-inline</code> to be added to the compile line if you
are using <code>gcc</code> and <code>-O0</code> if you are using something else.  You
should try the <code>--with-low-memory</code> option even if you have so much
memory and swap space that you think you can't possibly have run out.  This
problem has been observed to occur even on systems with generous hardware
configurations and the <code>--with-low-memory</code> option usually fixes it.

<LI>

By default, <code>configure</code> picks <code>c++</code> as the compiler name and
GNU <code>c++</code> links with <code>-lg++</code>.  If you are using <code>gcc</code>,
that behavior can cause problems during configuration such as this:

<A NAME="IDX230"></A>

<PRE>
configure: error: installation or configuration problem:
C++ compiler cannot create executables.
</PRE>

<A NAME="IDX231"></A>
<A NAME="IDX232"></A>
You might also observe problems during compilation related to
<code>g++</code>, <code>libg++</code>, or <code>libstdc++</code>.

One cause of these problems is that you may not have <code>g++</code>, or you may
have <code>g++</code> but not <code>libg++</code>, or <code>libstdc++</code>.  Take a look at
the <tt>`config.log'</tt> file.  It should contain the exact reason why your C++
compiler didn't work.  To work around these problems, you can use <code>gcc</code>
as your C++ compiler.  Try setting the environment variable <code>CXX</code> to
<code>"gcc -O3"</code>.  For example:

<A NAME="IDX233"></A>
<A NAME="IDX234"></A>

<PRE>
shell&#62; CXX="gcc -O3" ./configure
</PRE>

This works because <code>gcc</code> compiles C++ sources as well as <code>g++</code>
does, but does not link in <code>libg++</code> or <code>libstdc++</code> by default.

Another way to fix these problems is to install <code>g++</code>,
<code>libg++</code>, and <code>libstdc++</code>.  We would, however, like to recommend
that you not use <code>libg++</code> or <code>libstdc++</code> with MySQL because this will
only increase the binary size of <code>mysqld</code> without giving you any benefits.
Some versions of these libraries have also caused strange problems for
MySQL users in the past.

<A NAME="IDX235"></A>
<A NAME="IDX236"></A>
Using <code>gcc</code> as the C++ compiler is also required if you want to
compile MySQL with RAID functionality (see section <A HREF="manual_SQL_Syntax.html#CREATE_TABLE">13.2.6  <code>CREATE TABLE</code> Syntax</A> for more info
on RAID table type) and you are using GNU <code>gcc</code> version 3 and above. If
you get errors like those following during the linking stage when you
configure MySQL to compile with the option <code>--with-raid</code>, try to use
<code>gcc</code> as your C++ compiler by defining the <code>CXX</code> environment
variable:


<PRE>
gcc -O3 -DDBUG_OFF -rdynamic -o isamchk isamchk.o sort.o  libnisam.a
../mysys/libmysys.a ../dbug/libdbug.a ../strings/libmystrings.a
 -lpthread -lz -lcrypt -lnsl -lm -lpthread
../mysys/libmysys.a(raid.o)(.text+0x79): In function
`my_raid_create':: undefined reference to `operator new(unsigned)'
../mysys/libmysys.a(raid.o)(.text+0xdd): In function
`my_raid_create':: undefined reference to `operator delete(void*)'
../mysys/libmysys.a(raid.o)(.text+0x129): In function
`my_raid_open':: undefined reference to `operator new(unsigned)'
../mysys/libmysys.a(raid.o)(.text+0x189): In function
`my_raid_open':: undefined reference to `operator delete(void*)'
../mysys/libmysys.a(raid.o)(.text+0x64b): In function
`my_raid_close':: undefined reference to `operator delete(void*)'
collect2: ld returned 1 exit status
</PRE>

<LI>

If your compile fails with errors such as any of the following,
you must upgrade your version of <code>make</code> to GNU <code>make</code>:


<PRE>
making all in mit-pthreads
make: Fatal error in reader: Makefile, line 18:
Badly formed macro assignment
</PRE>

Or:

<PRE>
make: file `Makefile' line 18: Must be a separator (:
</PRE>

Or:

<PRE>
pthread.h: No such file or directory
</PRE>

<A NAME="IDX237"></A>
<A NAME="IDX238"></A>
<A NAME="IDX239"></A>
<A NAME="IDX240"></A>
Solaris and FreeBSD are known to have troublesome <code>make</code> programs.

GNU <code>make</code> Version 3.75 is known to work.

<A NAME="IDX241"></A>
<A NAME="IDX242"></A>
<A NAME="IDX243"></A>
<A NAME="IDX244"></A>
<A NAME="IDX245"></A>
<A NAME="IDX246"></A>
<A NAME="IDX247"></A>
<A NAME="IDX248"></A>
<LI>

If you want to define flags to be used by your C or C++ compilers, do so by
adding the flags to the <code>CFLAGS</code> and <code>CXXFLAGS</code> environment
variables.  You can also specify the compiler names this way using <code>CC</code>
and <code>CXX</code>.  For example:


<PRE>
shell&#62; CC=gcc
shell&#62; CFLAGS=-O3
shell&#62; CXX=gcc
shell&#62; CXXFLAGS=-O3
shell&#62; export CC CFLAGS CXX CXXFLAGS
</PRE>

See section <A HREF="manual_Installing.html#MySQL_binaries">2.1.2.5  MySQL Binaries Compiled by MySQL AB</A>, for a list of flag definitions that have been found
to be useful on various systems.

<LI>

If you get an error message like this,
you need to upgrade your <code>gcc</code> compiler:


<PRE>
client/libmysql.c:273: parse error before `__attribute__'
</PRE>

<code>gcc</code> 2.8.1 is known to work, but we recommend using <code>gcc</code> 2.95.2 or
<code>egcs</code> 1.0.3a instead.

<LI>

If you get errors such as those shown here when compiling <code>mysqld</code>,
<code>configure</code> didn't correctly detect the type of the last argument to
<code>accept()</code>, <code>getsockname()</code>, or <code>getpeername()</code>:


<PRE>
cxx: Error: mysqld.cc, line 645: In this statement, the referenced
     type of the pointer value ''length'' is ''unsigned long'',
     which is not compatible with ''int''.
new_sock = accept(sock, (struct sockaddr *)&#38;cAddr, &#38;length);
</PRE>

To fix this, edit the <tt>`config.h'</tt> file (which is generated by
<code>configure</code>).  Look for these lines:


<PRE>
/* Define as the base type of the last arg to accept */
#define SOCKET_SIZE_TYPE XXX
</PRE>

Change <code>XXX</code> to <code>size_t</code> or <code>int</code>, depending on your
operating system.  (Note that you will have to do this each time you run
<code>configure</code> because <code>configure</code> regenerates <tt>`config.h'</tt>.)

<LI>

The <tt>`sql_yacc.cc'</tt> file is generated from <tt>`sql_yacc.yy'</tt>.  Normally
the build process doesn't need to create <tt>`sql_yacc.cc'</tt>, because
MySQL comes with an already generated copy.  However, if you do need
to re-create it, you might encounter this error:


<PRE>
"sql_yacc.yy", line <var>xxx</var> fatal: default action causes potential...
</PRE>

This is a sign that your version of <code>yacc</code> is deficient.
You probably need to install <code>bison</code> (the GNU version of <code>yacc</code>)
and use that instead.

<LI>

On Debian Linux 3.0, you need to install <code>gawk</code> instead of the default
<code>mawk</code> if you want to compile MySQL 4.1 or higher with Berkeley DB
support.

<LI>

If you need to debug <code>mysqld</code> or a MySQL client, run
<code>configure</code> with the <code>--with-debug</code> option, then recompile and
link your clients with the new client library.  See section <A HREF="manual_Porting.html#Debugging_client">E.2  Debugging a MySQL Client</A>.

<LI>

If you get a compilation error on Linux (for example, SuSE Linux 8.1 or Red Hat
Linux 7.3) similar to the following one:


<PRE>
libmysql.c:1329: warning: passing arg 5 of `gethostbyname_r' from
incompatible pointer type
libmysql.c:1329: too few arguments to function `gethostbyname_r'
libmysql.c:1329: warning: assignment makes pointer from integer
without a cast
make[2]: *** [libmysql.lo] Error 1
</PRE>

By default, the <code>configure</code> script attempts to determine the correct
number of arguments by using <code>g++</code> the GNU C++ compiler. This test
yields wrong results if <code>g++</code> is not installed. There are two ways
to work around this problem:


<UL>
<LI>

Make sure that the GNU C++ <code>g++</code> is installed. On some Linux
distributions, the required package is called <code>gpp</code>; on others, it
is named <code>gcc-c++</code>.
<LI>

Use <code>gcc</code> as your C++ compiler by setting the <code>CXX</code> environment
variable to <code>gcc</code>:

<PRE>
export CXX="gcc"
</PRE>

</UL>

Please note that you need to run <code>configure</code> again afterward.

</UL>



<H3><A NAME="MIT-pthreads" HREF="manual_toc.html#MIT-pthreads">2.8.5  MIT-pthreads Notes</A></H3>

<P>
<A NAME="IDX249"></A>
<A NAME="IDX250"></A>

</P>
<P>
This section describes some of the issues involved in using MIT-pthreads.

</P>
<P>
On Linux, you should <em>not</em> use MIT-pthreads. Use the
installed LinuxThreads implementation instead.
See section <A HREF="manual_Installing.html#Linux">2.12.1  Linux Notes</A>.

</P>
<P>
If your system does not provide native thread support, you will need to
build MySQL using the MIT-pthreads package.  This includes
older FreeBSD systems, SunOS 4.x, Solaris 2.4 and earlier, and some others.
See section <A HREF="manual_Installing.html#Which_OS">2.1.1  Operating Systems Supported by MySQL</A>.

</P>
<P>
Beginning with MySQL 4.0.2, MIT-pthreads is no longer part of
the source distribution. If you require this package, you need to download
it separately from
<a HREF="http://www.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz">http://www.mysql.com/Downloads/Contrib/pthreads-1_60_beta6-mysql.tar.gz</a>

</P>
<P>
After downloading, extract this source archive into the top level of the
MySQL source directory. It will create a new subdirectory named
<code>mit-pthreads</code>.

</P>

<UL>
<LI>

On most systems, you can force MIT-pthreads to be used by running
<code>configure</code> with the <code>--with-mit-threads</code> option:


<PRE>
shell&#62; ./configure --with-mit-threads
</PRE>

Building in a non-source directory is not supported when using
MIT-pthreads because we want to minimize our changes to this code.

<LI>

The checks that determine whether to use MIT-pthreads occur only
during the part of the configuration process that deals with the server
code.  If you have configured the distribution using <code>--without-server</code>
to build only the client code, clients will not know whether
MIT-pthreads is being used and will use Unix socket connections by default.
Because Unix socket files do not work under MIT-pthreads on some platforms, this
means you will need to use <code>-h</code> or <code>--host</code> when you run client
programs.

<LI>

When MySQL is compiled using MIT-pthreads, system locking is
disabled by default for performance reasons.  You can tell the server to use
system locking with the <code>--external-locking</code> option.  This is needed
only if you want to be able to run two MySQL servers against the same data
files, which is not recommended.

<LI>

Sometimes the pthread <code>bind()</code> command fails to bind to a socket without
any error message (at least on Solaris).  The result is that all connections
to the server fail.  For example:


<PRE>
shell&#62; mysqladmin version
mysqladmin: connect to server at '' failed;
error: 'Can't connect to mysql server on localhost (146)'
</PRE>

The solution to this is to kill the <code>mysqld</code> server and restart it.
This has only happened to us when we have forced down the server and done
a restart immediately.

<LI>

With MIT-pthreads, the <code>sleep()</code> system call isn't interruptible with
<code>SIGINT</code> (break).  This is only noticeable when you run
<code>mysqladmin --sleep</code>.  You must wait for the <code>sleep()</code> call to
terminate before the interrupt is served and the process stops.

<LI>

When linking, you may receive warning messages like these (at least on
Solaris); they can be ignored:


<PRE>
ld: warning: symbol `_iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
ld: warning: symbol `__iob' has differing sizes:
    (file /my/local/pthreads/lib/libpthread.a(findfp.o) value=0x4;
file /usr/lib/libc.so value=0x140);
    /my/local/pthreads/lib/libpthread.a(findfp.o) definition taken
</PRE>

<LI>

Some other warnings also can be ignored:


<PRE>
implicit declaration of function `int strtoll(...)'
implicit declaration of function `int strtoul(...)'
</PRE>

<LI>

We haven't gotten <code>readline</code> to work with MIT-pthreads.  (This isn't
needed, but may be interesting for someone.)
</UL>



<H3><A NAME="Windows_source_build" HREF="manual_toc.html#Windows_source_build">2.8.6  Installing MySQL from Source on Windows</A></H3>

<P>
These instructions describe how to build MySQL binaries from source
for versions 4.1 and above on Windows. Instructions are provided
for building binaries from a standard source distribution or from
the BitKeeper tree that contains the latest development source.

</P>
<P>
<strong>Note</strong>:
The instructions in this document are strictly for users who want
to test MySQL on Windows from the latest source distribution or
from the BitKeeper tree.  For production use, MySQL AB does not
advise using a MySQL server built by yourself from source.  Normally,
it is best to use precompiled binary distributions of MySQL that
are built specifically for optimal performance on Windows by MySQL
AB.  Instructions for installing a binary distributions are available
at section <A HREF="manual_Installing.html#Windows_installation">2.3  Installing MySQL on Windows</A>.

</P>
<P>
To build MySQL on Windows from source, you need the following
compiler and resources available on your Windows system:

</P>

<UL>
<LI>

VC++ 6.0 compiler (updated with 4 or 5 SP and pre-processor package).
The pre-processor package is necessary for the macro assembler.
More details can be found at
<a HREF="http://msdn.microsoft.com/vstudio/downloads/updates/sp/vs6/sp5/faq.aspx">http://msdn.microsoft.com/vstudio/downloads/updates/sp/vs6/sp5/faq.aspx</a>.

<LI>

Approximately 45MB disk space.

<LI>

64MB RAM.

</UL>

<P>
You'll also need a MySQL source distribution for Windows.  There
are two ways you can get a source distribution for MySQL version
4.1 and above:

</P>

<OL>
<LI>

Obtain a source distribution packaged by MySQL AB for the particular
version of MySQL in which you are interested.  Prepackaged source
distributions are available for released versions of MySQL and can
be obtained from <a HREF="http://dev.mysql.com/downloads/">http://dev.mysql.com/downloads/</a>.

<LI>

You can package a source distribution yourself from the latest
BitKeeper developer source tree. If you plan to do this, you must
create the package on a Unix system and then transfer it to your
Windows system.  (The reason for this is that some of the configuration
and build steps require tools that work only on Unix.)  The BitKeeper
approach thus requires:


<UL>
<LI>

A system running Unix, or a Unix-like system such as Linux.

<LI>

BitKeeper 3.0 installed on that system. You can obtain
BitKeeper from <a HREF="http://www.bitkeeper.com/">http://www.bitkeeper.com/</a>.

</UL>

</OL>

<P>
If you are using a Windows source distribution, you can go directly to
section <A HREF="manual_Installing.html#Windows_VC++_Build">2.8.6.1  Building MySQL Using VC++</A>. To build from the BitKeeper tree, proceed to
section <A HREF="manual_Installing.html#Windows_BitKeeper_Build">2.8.6.2  Creating a Windows Source Package from the Latest Development Source</A>.

</P>
<P>
If you find something not working as expected, or you have
suggestions about ways to improve the current build process
on Windows, please send a message to the <code>win32</code> mailing list.
See section <A HREF="manual_Introduction.html#Mailing-list">1.4.1.1  The MySQL Mailing Lists</A>.

</P>



<H4><A NAME="Windows_VC++_Build" HREF="manual_toc.html#Windows_VC++_Build">2.8.6.1  Building MySQL Using VC++</A></H4>

<P>
<strong>Note</strong>:
VC++ workspace files for MySQL 4.1 and above are compatible with
Microsoft Visual Studio 6.0 and above (7.0/.NET) editions and tested
by MySQL AB staff before each release.

</P>
<P>
Follow this procedure to build MySQL:

</P>

<OL>
<LI>

Create a work directory (for example, <tt>`C:\workdir'</tt>).
<LI>

Unpack the source distribution in the aforementioned directory using
<code>WinZip</code> or other Windows tool that can read <tt>`.zip'</tt> files.
<LI>

Start the VC++ 6.0 compiler.
<LI>

In the <code>File</code> menu, select <code>Open Workspace</code>.
<LI>

Open the <tt>`mysql.dsw'</tt> workspace you find in the work directory.
<LI>

From the <code>Build</code> menu,
select the <code>Set Active Configuration</code> menu.
<LI>

Click over the screen selecting <code>mysqld - Win32 Debug</code>
and click OK.
<LI>

Press <code>F7</code> to begin the build of the debug server, libraries, and
some client applications.
<LI>

Compile the release versions that you want in the same way.
<LI>

Debug versions of the programs and libraries are placed in the
<tt>`client_debug'</tt> and <tt>`lib_debug'</tt> directories.
Release versions of the programs and libraries are placed in the
<tt>`client_release'</tt> and <tt>`lib_release'</tt> directories.
Note that if you want to build both debug and release versions,
you can select the <code>Build All</code> option from the <code>Build</code> menu.
<LI>

Test the server.  The server built using the preceding instructions
will expect that the MySQL base directory and data directory are
<tt>`C:\mysql'</tt> and <tt>`C:\mysql\data'</tt> by default. If you want
to test your server using the source tree root directory and its
data directory as the base directory and data directory, you will
need to tell the server their pathnames. You can either do this on
the command line with the <code>--basedir</code> and <code>--datadir</code>
options, or place appropriate options in an option file (the <tt>`my.ini'</tt>
file in your Windows directory or <tt>`C:\my.cnf'</tt>).  If you have
an existing data directory elsewhere that you want to use, you can
specify its pathname instead.
<LI>

Start your server from the <tt>`client_release'</tt> or <tt>`client_debug'</tt>
directory, depending on which server you want to use. The
general server startup instructions are at section <A HREF="manual_Installing.html#Windows_installation">2.3  Installing MySQL on Windows</A>.
You'll need to adapt the instructions appropriately if you
want to use a different base directory or data directory.
<LI>

When the server is running in standalone fashion or as a service
based on your configuration, try to connect to it from the <code>mysql</code>
interactive command-line utility that exists in your <tt>`client_release'</tt>
or <tt>`client_debug'</tt> directory.

</OL>

<P>
When you are satisfied that the programs you have built are working
correctly, stop the server. Then install MySQL as follows:

</P>

<OL>
<LI>

Create the directories where you want to install MySQL.  For example,
to install into
<tt>`C:\mysql'</tt>, use these commands:


<PRE>
C:\&#62; mkdir C:\mysql
C:\&#62; mkdir C:\mysql\bin
C:\&#62; mkdir C:\mysql\data
C:\&#62; mkdir C:\mysql\share
C:\&#62; mkdir C:\mysql\scripts
</PRE>

If you want to compile other clients and link them to MySQL, you should
also create several additional directories:


<PRE>
C:\&#62; mkdir C:\mysql\include
C:\&#62; mkdir C:\mysql\lib
C:\&#62; mkdir C:\mysql\lib\debug
C:\&#62; mkdir C:\mysql\lib\opt
</PRE>

If you want to benchmark MySQL, create this directory:


<PRE>
C:\&#62; mkdir C:\mysql\sql-bench
</PRE>

Benchmarking requires Perl support.

<LI>

From the <tt>`workdir'</tt> directory, copy into the <code>C:\mysql</code> directory the
following directories:


<PRE>
C:\&#62; cd \workdir
C:\workdir&#62; copy client_release\*.exe C:\mysql\bin
C:\workdir&#62; copy client_debug\mysqld.exe C:\mysql\bin\mysqld-debug.exe
C:\workdir&#62; xcopy scripts\*.* C:\mysql\scripts /E
C:\workdir&#62; xcopy share\*.* C:\mysql\share /E
</PRE>

If you want to compile other clients and link them to MySQL, you should
also copy several libraries and header files:


<PRE>
C:\workdir&#62; copy lib_debug\mysqlclient.lib C:\mysql\lib\debug
C:\workdir&#62; copy lib_debug\libmysql.* C:\mysql\lib\debug
C:\workdir&#62; copy lib_debug\zlib.* C:\mysql\lib\debug
C:\workdir&#62; copy lib_release\mysqlclient.lib C:\mysql\lib\opt
C:\workdir&#62; copy lib_release\libmysql.* C:\mysql\lib\opt
C:\workdir&#62; copy lib_release\zlib.* C:\mysql\lib\opt
C:\workdir&#62; copy include\*.h C:\mysql\include
C:\workdir&#62; copy libmysql\libmysql.def C:\mysql\include
</PRE>

If you want to benchmark MySQL, you should also do this:


<PRE>
C:\workdir&#62; xcopy sql-bench\*.* C:\mysql\bench /E
</PRE>

</OL>

<P>
Set up and start the server in the same way as for the binary
Windows distribution.
See section <A HREF="manual_Installing.html#Windows_installation">2.3  Installing MySQL on Windows</A>.

</P>



<H4><A NAME="Windows_BitKeeper_Build" HREF="manual_toc.html#Windows_BitKeeper_Build">2.8.6.2  Creating a Windows Source Package from the Latest Development Source</A></H4>

<P>
To create a Windows source package from the current
BitKeeper source tree, use the following instructions. Please
note that this procedure must be performed on a system
running a Unix or Unix-like operating system.  For example, the procedure
is known to work well on Linux.

</P>

<OL>
<LI>

Clone the BitKeeper source tree for MySQL (version 4.1 or above,
as desired).  For more information on how to clone the source tree,
see the instructions at section <A HREF="manual_Installing.html#Installing_source_tree">2.8.3  Installing from the Development Source Tree</A>.

<LI>

Configure and build the distribution so that you have a server
binary to work with.  One way to do this is to run the following
command in the top-level directory of your source tree:


<PRE>
shell&#62; ./BUILD/compile-pentium-max
</PRE>

<LI>

After making sure that the build process completed successfully,
run the following utility script from top-level directory of your
source tree:


<PRE>
shell&#62; ./scripts/make_win_src_distribution
</PRE>

This script creates a Windows source package to be used on your
Windows system.  You can supply different options to the script
based on your needs. It accepts the following options:

<DL COMPACT>

<DT><code>--help</code>
<DD>
Display a help message.

<DT><code>--debug</code>
<DD>
Print information about script operations, do not create package.

<DT><code>--tmp</code>
<DD>
Specify the temporary location.

<DT><code>--suffix</code>
<DD>
Suffix name for the package.

<DT><code>--dirname</code>
<DD>
Directory name to copy files (intermediate).

<DT><code>--silent</code>
<DD>
Do not print verbose list of files processed.

<DT><code>--tar</code>
<DD>
Create <tt>`tar.gz'</tt> package instead of <tt>`.zip'</tt> package.
</DL>

By default, <code>make_win_src_distribution</code> creates a Zip-format
archive with the name <tt>`mysql-<var>VERSION</var>-win-src.zip'</tt>, where
<var>VERSION</var> represents the version of your MySQL source tree.

<LI>

Copy or upload to your Windows machine the Windows source package
that you have just created. To compile it, use the instructions in
section <A HREF="manual_Installing.html#Windows_VC++_Build">2.8.6.1  Building MySQL Using VC++</A>.

</OL>



<H3><A NAME="Windows_client_compiling" HREF="manual_toc.html#Windows_client_compiling">2.8.7  Compiling MySQL Clients on Windows</A></H3>

<P>
<A NAME="IDX251"></A>
<A NAME="IDX252"></A>

</P>
<P>
In your source files, you should include <tt>`my_global.h'</tt> before
<tt>`mysql.h'</tt>:

</P>

<PRE>
#include &#60;my_global.h&#62;
#include &#60;mysql.h&#62;
</PRE>

<P>
<tt>`my_global.h'</tt> includes any other files needed for Windows compatibility
(such as <tt>`windows.h'</tt>) if you compile your program on Windows.

</P>
<P>
You can either link your code with the dynamic <tt>`libmysql.lib'</tt> library,
which is just a wrapper to load in <tt>`libmysql.dll'</tt> on demand, or link
with the static <tt>`mysqlclient.lib'</tt> library.

</P>
<P>
The MySQL client libraries are compiled as threaded
libraries, so you should also compile your code to be multi-threaded.

</P>



<H2><A NAME="Post-installation" HREF="manual_toc.html#Post-installation">2.9  Post-Installation Setup and Testing</A></H2>

<P>
<A NAME="IDX253"></A>
<A NAME="IDX254"></A>
<A NAME="IDX255"></A>

</P>
<P>
After installing MySQL, there are some issues you should address.  For
example, on Unix, you should initialize the data directory and create the
MySQL grant tables.  On all platforms, an important security concern is that
the initial accounts in the grant tables have no passwords.  You should
assign passwords to prevent unauthorized access to the MySQL server.
For MySQL 4.1.3 and up, you can create time zone tables to enable recognition
of named time zones. (Currently, these tables can be populated only on
Unix. This problem will be addressed soon for Windows.)

</P>
<P>
The following sections include post-installation procedures that are specific
to Windows systems and to Unix systems. Another section, section <A HREF="manual_Installing.html#Starting_server">2.9.2.3  Starting and Troubleshooting the MySQL Server</A>, applies to all platforms; it describes what to do if you have
trouble getting the server to start.  section <A HREF="manual_Installing.html#Default_privileges">2.9.3  Securing the Initial MySQL Accounts</A> also applies
to all platforms. You should follow its instructions to make sure that you
have properly protected your MySQL accounts by assigning passwords to them.

</P>
<P>
When you are ready to create additional user accounts, you can find
information on the MySQL access control system and account management in
section <A HREF="manual_MySQL_Database_Administration.html#Privilege_system">5.5  The MySQL Access Privilege System</A> and section <A HREF="manual_MySQL_Database_Administration.html#User_Account_Management">5.6  MySQL User Account Management</A>.

</P>



<H3><A NAME="Windows_post-installation" HREF="manual_toc.html#Windows_post-installation">2.9.1  Windows Post-Installation Procedures</A></H3>

<P>
On Windows, the data directory and the grant tables do not have to be
created. MySQL Windows distributions include the grant tables already set up
with a set of preinitialized accounts in the <code>mysql</code> database under the
data directory. You do not run the <code>mysql_install_db</code> script that
is used on Unix.  However, if you did not install MySQL using the Windows Installation Wizard,
you should assign passwords to the accounts. See section <A HREF="manual_Installing.html#mysql-install-wizard-introduction">2.3.4.1  Introduction</A>.
The procedure for this is given in section <A HREF="manual_Installing.html#Default_privileges">2.9.3  Securing the Initial MySQL Accounts</A>.

</P>
<P>
Before setting up passwords, you might want to try running some client
programs to make sure that you can connect to the server and that it is
operating properly.  Make sure the server is running (see section <A HREF="manual_Installing.html#Windows_server_first_start">2.3.10  Starting the Server for the First Time</A>), then issue the following commands to verify that you can
retrieve information from the server.  The output should be similar to
what is shown here:

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysqlshow
+-----------+
| Databases |
+-----------+
| mysql     |
| test      |
+-----------+

C:\&#62; C:\mysql\bin\mysqlshow mysql
Database: mysql
+--------------+
|    Tables    |
+--------------+
| columns_priv |
| db           |
| func         |
| host         |
| tables_priv  |
| user         |
+--------------+

C:\&#62; C:\mysql\bin\mysql -e "SELECT Host,Db,User FROM db" mysql
+------+-------+------+
| host | db    | user |
+------+-------+------+
| %    | test% |      |
+------+-------+------+
</PRE>

<P>
If you are running a version of Windows that supports services and you want
the MySQL server to run automatically when Windows starts, see section <A HREF="manual_Installing.html#Windows_start_service">2.3.12  Starting MySQL as a Windows Service</A>.

</P>



<H3><A NAME="Unix_post-installation" HREF="manual_toc.html#Unix_post-installation">2.9.2  Unix Post-Installation Procedures</A></H3>

<P>
After installing MySQL on Unix, you need to initialize the grant tables,
start the server, and make sure that the server works okay.  You may also
wish to arrange for the server to be started and stopped automatically when
your system starts and stops.  You should also assign passwords to the
accounts in the grant tables.

</P>
<P>
On Unix, the grant tables are set up by the <code>mysql_install_db</code> program.
For some installation methods, this program is run for you automatically:

</P>

<UL>
<LI>

If you install MySQL on Linux using RPM distributions, the server RPM runs
<code>mysql_install_db</code>.
<LI>

If you install MySQL on Mac OS X using a PKG distribution, the installer runs
<code>mysql_install_db</code>.
</UL>

<P>
Otherwise, you'll need to run <code>mysql_install_db</code> yourself.

</P>
<P>
The following procedure describes how to initialize the grant tables (if
that has not already been done) and then start the server. It also suggests
some commands that you can use to test whether the server is accessible
and working properly.  For information about starting and stopping the
server automatically, see section <A HREF="manual_Installing.html#Automatic_start">2.9.2.2  Starting and Stopping MySQL Automatically</A>.

</P>
<P>
After you complete the procedure and have the server running, you should
assign passwords to the accounts created by <code>mysql_install_db</code>.
Instructions for doing so are given in section <A HREF="manual_Installing.html#Default_privileges">2.9.3  Securing the Initial MySQL Accounts</A>.

</P>
<P>
In the examples shown here, the server runs under the user ID of the
<code>mysql</code> login account. This assumes that such an account exists.
Either create the account if it does not exist, or substitute the name of a
different existing login account that you plan to use for running the
server.

</P>
<P>
<A NAME="IDX256"></A>
<A NAME="IDX257"></A>
<A NAME="IDX258"></A>

</P>

<OL>
<LI>

Change location into the top-level directory of your MySQL installation,
represented here by <var>BASEDIR</var>:


<PRE>
shell&#62; cd <var>BASEDIR</var>
</PRE>

<var>BASEDIR</var> is likely to be something like <tt>`/usr/local/mysql'</tt> or
<tt>`/usr/local'</tt>.  The following steps assume that you are located in this
directory.

<LI>

If necessary, run the <code>mysql_install_db</code> program to set up the initial
MySQL grant tables containing the privileges that determine how users are
allowed to connect to the server. You'll need to do this if you used a
distribution type that doesn't run the program for you.

Typically, <code>mysql_install_db</code> needs to be run only the first time you
install MySQL, so you can skip this step if you are upgrading an existing
installation, However, <code>mysql_install_db</code> does not overwrite any
existing privilege tables, so it should be safe to run in any circumstances.

To initialize the grant tables, use one of the following commands,
depending on whether <code>mysql_install_db</code> is located in the <code>bin</code>
or <code>scripts</code> directory:


<PRE>
shell&#62; bin/mysql_install_db --user=mysql
shell&#62; scripts/mysql_install_db --user=mysql
</PRE>

The <code>mysql_install_db</code> script creates the data directory, the
<code>mysql</code> database that holds all database privileges, and the <code>test</code>
database that you can use to test MySQL. The script also creates privilege
table entries for <code>root</code> accounts and anonymous-user accounts.
The accounts have no passwords initially.  A description of their initial
privileges is given in section <A HREF="manual_Installing.html#Default_privileges">2.9.3  Securing the Initial MySQL Accounts</A>.  Briefly, these privileges
allow the MySQL <code>root</code> user to do anything, and allow anybody to create
or use databases with a name of <code>test</code> or starting with <code>test_</code>.

It is important to make sure that the database directories and files are
owned by the <code>mysql</code> login account so that the server has read and
write access to them when you run it later. To ensure this, the <code>--user</code>
option should be used as shown if you run <code>mysql_install_db</code> as
<code>root</code>. Otherwise, you should execute the script while logged in as
<code>mysql</code>, in which case you can omit the <code>--user</code> option from the
command.

<code>mysql_install_db</code> creates several tables in the <code>mysql</code> database:
<code>user</code>, <code>db</code>, <code>host</code>, <code>tables_priv</code>,
<code>columns_priv</code>, <code>func</code>, and possibly others depending on your
version of MySQL.

If you don't want to have the <code>test</code> database, you can remove it with
<code>mysqladmin -u root drop test</code> after starting the server.

If you have problems with <code>mysql_install_db</code>, see
section <A HREF="manual_Installing.html#mysql_install_db">2.9.2.1  Problems Running <code>mysql_install_db</code></A>.

There are some alternatives to running the <code>mysql_install_db</code>
script as it is provided in the MySQL distribution:

<A NAME="IDX259"></A>
<A NAME="IDX260"></A>


<UL>
<LI>

If you want the initial privileges to be different from the standard
defaults, you can modify <code>mysql_install_db</code> before you run it.
However, a preferable technique is to use <code>GRANT</code> and <code>REVOKE</code> to
change the privileges after the grant tables have been set up.  In other
words, you can run <code>mysql_install_db</code>, and then use <code>mysql -u root
mysql</code> to connect to the server as the MySQL <code>root</code> user so that you
can issue the <code>GRANT</code> and <code>REVOKE</code> statements.

If you want to install MySQL on a lot of machines with the
same privileges, you can put the <code>GRANT</code> and <code>REVOKE</code> statements in
a file and execute the file as a script using <code>mysql</code> after running
<code>mysql_install_db</code>. For example:


<PRE>
shell&#62; bin/mysql_install_db --user=mysql
shell&#62; bin/mysql -u root &#60; your_script_file
</PRE>

By doing this, you can avoid having to issue the statements manually on each
machine.

<LI>

It is possible to re-create the grant tables completely after they have
already been created.  You might want to do this if you're just learning how
to use <code>GRANT</code> and <code>REVOKE</code> and have made so many modifications
after running <code>mysql_install_db</code> that you want to wipe out the tables
and start over.

To re-create the grant tables, remove all the <tt>`.frm'</tt>, <tt>`.MYI'</tt>, and
<tt>`.MYD'</tt> files in the directory containing the <code>mysql</code> database.
(This is the directory named <tt>`mysql'</tt> under the data directory, which is
listed as the <code>datadir</code> value when you run <code>mysqld --help</code>.) Then
run the <code>mysql_install_db</code> script again.

<strong>Note</strong>: For MySQL versions older than 3.22.10, you should not
delete the <tt>`.frm'</tt> files.  If you accidentally do this, you should copy
them back into the <tt>`mysql'</tt> directory from your MySQL distribution
before running <code>mysql_install_db</code>.

<LI>

You can start <code>mysqld</code> manually using the <code>--skip-grant-tables</code>
option and add the privilege information yourself using <code>mysql</code>:


<PRE>
shell&#62; bin/mysqld_safe --user=mysql --skip-grant-tables &#38;
shell&#62; bin/mysql mysql
</PRE>

From <code>mysql</code>, manually execute the SQL commands contained in
<code>mysql_install_db</code>.  Make sure that you run <code>mysqladmin
flush-privileges</code> or <code>mysqladmin reload</code> afterward to tell the server to
reload the grant tables.

Note that by not using <code>mysql_install_db</code>, you not only have to
populate the grant tables manually, you also have to create them first.
</UL>

<LI>

Start the MySQL server:


<PRE>
shell&#62; bin/mysqld_safe --user=mysql &#38;
</PRE>

For versions of MySQL older than 4.0, substitute <code>bin/safe_mysqld</code>
for <code>bin/mysqld_safe</code> in this command.

It is important that the MySQL server be run using an unprivileged
(non-<code>root</code>) login account.  To ensure this, the <code>--user</code>
option should be used as shown if you run <code>mysql_safe</code> as
<code>root</code>. Otherwise, you should execute the script while logged in as
<code>mysql</code>, in which case you can omit the <code>--user</code> option from the
command.

Further instructions for running MySQL as an unprivileged user are given in
section <A HREF="manual_Problems.html#Changing_MySQL_user">A.3.2  How to Run MySQL as a Normal User</A>.

If you neglected to create the grant tables before proceeding to this step,
the following message will appear in the error log file when you start the
server:

<A NAME="IDX261"></A>

<PRE>
mysqld: Can't find file: 'host.frm'
</PRE>

If you have other problems starting the server, see section <A HREF="manual_Installing.html#Starting_server">2.9.2.3  Starting and Troubleshooting the MySQL Server</A>.

<LI>

Use <code>mysqladmin</code> to verify that the server is running.  The following
commands provide simple tests to check whether the server is up and responding
to connections:


<PRE>
shell&#62; bin/mysqladmin version
shell&#62; bin/mysqladmin variables
</PRE>

The output from <code>mysqladmin version</code> varies slightly depending on your
platform and version of MySQL, but should be similar to that shown here:


<PRE>
shell&#62; bin/mysqladmin version
mysqladmin  Ver 8.40 Distrib 4.0.18, for linux on i586
Copyright (C) 2000 MySQL AB &#38; MySQL Finland AB &#38; TCX DataKonsult AB
This software comes with ABSOLUTELY NO WARRANTY. This is free software,
and you are welcome to modify and redistribute it under the GPL license

Server version          4.0.18-log
Protocol version        10
Connection              Localhost via Unix socket
TCP port                3306
UNIX socket             /tmp/mysql.sock
Uptime:                 16 sec

Threads: 1  Questions: 9  Slow queries: 0
Opens: 7  Flush tables: 2  Open tables: 0
Queries per second avg: 0.000
Memory in use: 132K  Max memory used: 16773K
</PRE>

To see what else you can do with <code>mysqladmin</code>,
invoke it with the <code>--help</code> option.

<LI>

Verify that you can shut down the server:
<A NAME="IDX262"></A>
<A NAME="IDX263"></A>


<PRE>
shell&#62; bin/mysqladmin -u root shutdown
</PRE>

<LI>

Verify that you can restart the server.  Do this by using <code>mysqld_safe</code> or
by invoking <code>mysqld</code> directly.  For example:

<A NAME="IDX264"></A>
<A NAME="IDX265"></A>


<PRE>
shell&#62; bin/mysqld_safe --user=mysql --log &#38;
</PRE>

If <code>mysqld_safe</code> fails, see section <A HREF="manual_Installing.html#Starting_server">2.9.2.3  Starting and Troubleshooting the MySQL Server</A>.

<LI>

Run some simple tests to verify that you can retrieve information from the
server.  The output should be similar to what is shown here:


<PRE>
shell&#62; bin/mysqlshow
+-----------+
| Databases |
+-----------+
| mysql     |
| test      |
+-----------+

shell&#62; bin/mysqlshow mysql
Database: mysql
+--------------+
|    Tables    |
+--------------+
| columns_priv |
| db           |
| func         |
| host         |
| tables_priv  |
| user         |
+--------------+

shell&#62; bin/mysql -e "SELECT Host,Db,User FROM db" mysql
+------+--------+------+
| host | db     | user |
+------+--------+------+
| %    | test   |      |
| %    | test_% |      |
+------+--------+------+
</PRE>

<LI>

There is a benchmark suite in the <tt>`sql-bench'</tt> directory (under the
MySQL installation directory) that you can use to compare how
MySQL performs on different platforms. The benchmark suite is written in
Perl. It uses the Perl DBI module to provide a database-independent interface
to the various databases, and some other additional Perl modules are required
to run the benchmark suite. You must have the following modules installed:


<PRE>
DBI
DBD::mysql
Data::Dumper
Data::ShowTable
</PRE>

These modules can be obtained from CPAN (<a HREF="http://www.cpan.org/">http://www.cpan.org/</a>).
See section <A HREF="manual_Installing.html#Perl_installation">2.13.1  Installing Perl on Unix</A>.

The <tt>`sql-bench/Results'</tt> directory contains the results from many runs
against different databases and platforms.  To run all tests, execute these
commands:


<PRE>
shell&#62; cd sql-bench
shell&#62; perl run-all-tests
</PRE>

If you don't have the <tt>`sql-bench'</tt> directory, you probably installed MySQL
using RPM files other than the source RPM.  (The source RPM includes the
<tt>`sql-bench'</tt> benchmark directory.)  In this case, you must first install
the benchmark suite before you can use it.  Beginning with MySQL 3.22,
there are separate benchmark RPM files named
<tt>`mysql-bench-<var>VERSION</var>-i386.rpm'</tt> that contain benchmark code and data.

If you have a source distribution, there are also tests in its <tt>`tests'</tt>
subdirectory that you can run. For example, to run <tt>`auto_increment.tst'</tt>,
execute this command from the top-level directory of your source distribution:


<PRE>
shell&#62; mysql -vvf test &#60; ./tests/auto_increment.tst
</PRE>

The expected result of the test can be found in the
<tt>`./tests/auto_increment.res'</tt> file.

<LI>

At this point, you should have the server running. However, none of the
initial MySQL accounts have a password, so you should assign passwords
using the instructions in section <A HREF="manual_Installing.html#Default_privileges">2.9.3  Securing the Initial MySQL Accounts</A>.
</OL>

<P>
As of MySQL 4.1.3, the installation procedure creates time zone tables
in the <code>mysql</code> database. However, you must populate the tables manually.
Instructions to do this are given in section <A HREF="manual_MySQL_Database_Administration.html#Time_zone_support">5.8.8  MySQL Server Time Zone Support</A>.

</P>



<H4><A NAME="mysql_install_db" HREF="manual_toc.html#mysql_install_db">2.9.2.1  Problems Running <code>mysql_install_db</code></A></H4>
<P>
<A NAME="IDX266"></A>
<A NAME="IDX267"></A>

</P>
<P>
The purpose of the <code>mysql_install_db</code> script is to generate new MySQL
privilege tables.  It will not overwrite existing MySQL privilege tables,
and it will not affect any other data.

</P>
<P>
If you want to re-create your privilege tables, first stop
the <code>mysqld</code> server if it's running. Then rename the <tt>`mysql'</tt>
directory under the data directory to save it, and then run
<code>mysql_install_db</code>.  For example:

</P>

<PRE>
shell&#62; mv mysql-data-directory/mysql mysql-data-directory/mysql-old
shell&#62; mysql_install_db --user=mysql
</PRE>

<P>
This section lists problems you might encounter when you run
<code>mysql_install_db</code>:

</P>
<DL COMPACT>

<DT><strong><code>mysql_install_db</code> doesn't install the grant tables</strong>
<DD>
You may find that <code>mysql_install_db</code> fails to install the grant
tables and terminates after displaying the following messages:


<PRE>
Starting mysqld daemon with databases from XXXXXX
mysqld ended
</PRE>

In this case, you should examine the error log file very carefully.  The log
should be located in the directory <tt>`XXXXXX'</tt> named by the error message,
and should indicate why <code>mysqld</code> didn't start.  If you don't understand
what happened, include the log when you post a bug report.
See section <A HREF="manual_Introduction.html#Bug_reports">1.4.1.3  How to Report Bugs or Problems</A>.

<DT><strong>There is already a <code>mysqld</code> process running</strong>
<DD>
This indicates that the server is already running, in which case the grant
tables probably have already been created. If so, you don't have to run
<code>mysql_install_db</code> at all because it need be run only once (when you
install MySQL the first time).

<DT><strong>Installing a second <code>mysqld</code> server doesn't work when one server is running</strong>
<DD>
This can happen when you already have an existing MySQL installation, but
want to put a new installation in a different location.  For example, you
might have a production installation already, but you want to create a
second installation for testing purposes.  Generally the problem that occurs
when you try to run a second server is that it tries to use a network
interface that is already in use by the first server.  In this case, you
will see one of the following error messages:


<PRE>
Can't start server: Bind on TCP/IP port:
Address already in use
Can't start server: Bind on unix socket...
</PRE>

For instructions on setting up multiple servers, see section <A HREF="manual_MySQL_Database_Administration.html#Multiple_servers">5.10  Running Multiple MySQL Servers on the Same Machine</A>.

<DT><strong>You don't have write access to <tt>`/tmp'</tt></strong>
<DD>
<A NAME="IDX268"></A>
<A NAME="IDX269"></A>
<A NAME="IDX270"></A>

If you don't have write access to create temporary files or a Unix socket
file in the default location (the <tt>`/tmp'</tt> directory), an error will
occur when you run <code>mysql_install_db</code> or the <code>mysqld</code> server.

You can specify different temporary directory and Unix socket file locations
by executing these commands prior to starting <code>mysql_install_db</code> or
<code>mysqld</code>:

<A NAME="IDX271"></A>
<A NAME="IDX272"></A>
<A NAME="IDX273"></A>
<A NAME="IDX274"></A>

<PRE>
shell&#62; TMPDIR=/some_tmp_dir/
shell&#62; MYSQL_UNIX_PORT=/some_tmp_dir/mysql.sock
shell&#62; export TMPDIR MYSQL_UNIX_PORT
</PRE>

<tt>`some_tmp_dir'</tt> should be the full pathname to some directory for which you
have write permission.

After this, you should be able to run <code>mysql_install_db</code> and start
the server with these commands:


<PRE>
shell&#62; bin/mysql_install_db --user=mysql
shell&#62; bin/mysqld_safe --user=mysql &#38;
</PRE>

If <code>mysql_install_db</code> is located in the <tt>`scripts'</tt> directory,
modify the first command to use <code>scripts/mysql_install_db</code>.

See section <A HREF="manual_Problems.html#Problems_with_mysql.sock">A.4.5  How to Protect or Change the MySQL Socket File <tt>`/tmp/mysql.sock'</tt></A>.
See section <A HREF="manual_Environment_variables.html#Environment_variables">F  Environment Variables</A>.

</DL>



<H4><A NAME="Automatic_start" HREF="manual_toc.html#Automatic_start">2.9.2.2  Starting and Stopping MySQL Automatically</A></H4>

<P>
<A NAME="IDX275"></A>
<A NAME="IDX276"></A>
<A NAME="IDX277"></A>

</P>
<P>
Generally, you start the <code>mysqld</code> server in one of these ways:

</P>

<UL>

<LI>

By invoking <code>mysqld</code> directly. This works on any platform.

<LI>

By running the MySQL server as a Windows service.
This can be done on versions of Windows that support services (such as
NT, 2000, XP, and 2003). The service can be set to start the server automatically
when Windows starts, or as a manual service that you start on request.
For instructions, see section <A HREF="manual_Installing.html#Windows_start_service">2.3.12  Starting MySQL as a Windows Service</A>.

<LI>

By invoking <code>mysqld_safe</code>, which tries to determine the proper options
for <code>mysqld</code> and then runs it with those options.  This script is
used on systems based on BSD Unix.
See section <A HREF="manual_MySQL_Database_Administration.html#mysqld_safe">5.1.3  The <code>mysqld_safe</code> Server Startup Script</A>.

<LI>

By invoking <code>mysql.server</code>.  This script is used primarily at
system startup and shutdown on systems that use System V-style run
directories, where it usually is installed under the name <code>mysql</code>.
The <code>mysql.server</code> script starts the server by invoking <code>mysqld_safe</code>.
See section <A HREF="manual_MySQL_Database_Administration.html#mysql.server">5.1.4  The <code>mysql.server</code> Server Startup Script</A>.

<LI>

On Mac OS X, you can install a separate MySQL Startup Item package to
enable the automatic startup of MySQL on system startup.
The Startup Item starts the server by invoking <code>mysql.server</code>.
See section <A HREF="manual_Installing.html#Mac_OS_X_installation">2.5  Installing MySQL on Mac OS X</A> for details.

</UL>

<P>
The <code>mysql.server</code> and <code>mysqld_safe</code> scripts and the Mac OS X
Startup Item can be used to start the server manually, or automatically at
system startup time. <code>mysql.server</code> and the Startup Item also can be
used to stop the server.

</P>
<P>
To start or stop the server manually using the <code>mysql.server</code> script,
invoke it with <code>start</code> or <code>stop</code> arguments:

</P>

<PRE>
shell&#62; mysql.server start
shell&#62; mysql.server stop
</PRE>

<P>
Before <code>mysql.server</code> starts the server, it changes location to the
MySQL installation directory, and then invokes <code>mysqld_safe</code>.  If you
want the server to run as some specific user, add an appropriate <code>user</code>
option to the <code>[mysqld]</code> group of the <tt>`/etc/my.cnf'</tt> option file,
as shown later in this section.
(It is possible that you'll need to edit <code>mysql.server</code>
if you've installed a binary distribution of MySQL in a non-standard
location.  Modify it to <code>cd</code> into the proper directory before it runs
<code>mysqld_safe</code>.  If you do this, your modified version of
<code>mysql.server</code> may be overwritten if you upgrade MySQL in the future,
so you should make a copy of your edited version that you can reinstall.)

</P>
<P>
<code>mysql.server stop</code> brings down the server by sending a signal to it.
You can also stop the server manually by executing <code>mysqladmin
shutdown</code>.

</P>
<P>
To start and stop MySQL automatically on your server, you need to add start
and stop commands to the appropriate places in your <tt>`/etc/rc*'</tt> files.

</P>
<P>
If you use the Linux server RPM package (<code>MySQL-server-<var>VERSION</var>.rpm</code>),
the <code>mysql.server</code> script will already have been installed in the
<tt>`/etc/init.d'</tt> directory with the name <tt>`mysql'</tt>. You need not
install it manually. See section <A HREF="manual_Installing.html#Linux-RPM">2.4  Installing MySQL on Linux</A> for more information on the Linux
RPM packages.

</P>
<P>
Some vendors provide RPM packages that install a startup script under a
different name such as <code>mysqld</code>.

</P>
<P>
If you install MySQL from a source distribution or using a binary
distribution format that does not install <code>mysql.server</code> automatically,
you can install it manually. The script can be found in the
<tt>`support-files'</tt> directory under the MySQL installation directory or in
a MySQL source tree.

</P>
<P>
To install <code>mysql.server</code> manually, copy it to the <tt>`/etc/init.d'</tt>
directory with the name <code>mysql</code>, and then make it executable.  Do this
by changing location into the appropriate directory where
<code>mysql.server</code> is located and executing these commands:

</P>

<PRE>
shell&#62; cp mysql.server /etc/init.d/mysql
shell&#62; chmod +x /etc/init.d/mysql
</PRE>

<P>
Older Red Hat systems use the <tt>`/etc/rc.d/init.d'</tt> directory rather than
<tt>`/etc/init.d'</tt>. Adjust the preceding commands accordingly. Alternatively,
first create <tt>`/etc/init.d'</tt> as a symbolic link that points to
<tt>`/etc/rc.d/init.d'</tt>:

</P>

<PRE>
shell&#62; cd /etc
shell&#62; ln -s rc.d/init.d .
</PRE>

<P>
After installing the script, the commands needed to activate it to run
at system startup depend on your operating system.  On Linux, you can use
<code>chkconfig</code>:

</P>

<PRE>
shell&#62; chkconfig --add mysql
</PRE>

<P>
On some Linux systems, the following command also seems to be necessary to
fully enable the <code>mysql</code> script:

</P>

<PRE>
shell&#62; chkconfig --level 345 mysql on
</PRE>

<P>
On FreeBSD, startup scripts generally should go in
<tt>`/usr/local/etc/rc.d/'</tt>. The <code>rc(8)</code> manual page states that
scripts in this directory are executed only if their basename matches the
<code>*.sh</code> shell filename pattern.  Any other files or directories present
within the directory are silently ignored. In other words, on FreeBSD, you
should install the <tt>`mysql.server'</tt> script as
<tt>`/usr/local/etc/rc.d/mysql.server.sh'</tt> to enable automatic startup.

</P>
<P>
As an alternative to the preceding setup, some operating systems also use
<tt>`/etc/rc.local'</tt> or <tt>`/etc/init.d/boot.local'</tt> to start additional
services on startup. To start up MySQL using this method, you could append
a command like the one following to the appropriate startup file:

</P>

<PRE>
/bin/sh -c 'cd /usr/local/mysql; ./bin/mysqld_safe --user=mysql &#38;'
</PRE>

<P>
For other systems, consult your operating system documentation to see how
to install startup scripts.

</P>
<P>
<A NAME="IDX278"></A>
You can add options for <code>mysql.server</code> in a global
<tt>`/etc/my.cnf'</tt> file.  A typical <tt>`/etc/my.cnf'</tt> file might look like
this:

</P>

<PRE>
[mysqld]
datadir=/usr/local/mysql/var
socket=/var/tmp/mysql.sock
port=3306
user=mysql

[mysql.server]
basedir=/usr/local/mysql
</PRE>

<P>
The <code>mysql.server</code> script understands the following options:
<code>basedir</code>, <code>datadir</code>, and <code>pid-file</code>.  If specified, they
<em>must</em> be placed in an option file, not on the command line.
<code>mysql.server</code> understands only <code>start</code> and <code>stop</code> as
command-line arguments.

</P>
<P>
The following table shows which option groups the server and each startup
script read from option files:

</P>

<TABLE BORDER>
<TR><TD><strong>Script</strong> </TD><TD> <strong>Option Groups</strong>
</TD></TR>
<TR><TD><code>mysqld</code> </TD><TD> <code>[mysqld]</code>, <code>[server]</code>, <code>[mysqld-major-version]</code>
</TD></TR>
<TR><TD><code>mysql.server</code> </TD><TD> <code>[mysqld]</code>, <code>[mysql.server]</code>
</TD></TR>
<TR><TD><code>mysqld_safe</code> </TD><TD> <code>[mysqld]</code>, <code>[server]</code>, <code>[mysqld_safe]</code>
</TD></TR>
</TABLE>

<P>
<code>[mysqld-major-version]</code> means that groups with names like
<code>[mysqld-4.0]</code>, <code>[mysqld-4.1]</code>, and <code>[mysqld-5.0]</code> will be
read by servers having versions 4.0.x, 4.1.x, 5.0.x, and so forth.  This
feature was added in MySQL 4.0.14. It can be used to specify options that will
be read only by servers within a given release series.

</P>
<P>
For backward compatibility, <code>mysql.server</code> also reads the
<code>[mysql_server]</code> group and <code>mysqld_safe</code> also reads the
<code>[safe_mysqld]</code> group. However, you should update your option
files to use the <code>[mysql.server]</code> and <code>[mysqld_safe]</code> groups instead
when you begin using MySQL 4.0 or later.

</P>
<P>
See section <A HREF="manual_Using_MySQL_Programs.html#Option_files">4.3.2  Using Option Files</A>.

</P>



<H4><A NAME="Starting_server" HREF="manual_toc.html#Starting_server">2.9.2.3  Starting and Troubleshooting the MySQL Server</A></H4>
<P>
<A NAME="IDX279"></A>
<A NAME="IDX280"></A>

</P>
<P>
If you have problems starting the server, here are some things you can try:

</P>

<UL>
<LI>

Specify any special options needed by the storage engines you are using.

<LI>

Make sure that the server knows where to find the data directory.

<LI>

Make sure the server can use the data directory.  The ownership and
permissions of the data directory and its contents must be set such that
the server can access and modify them.

<LI>

Check the error log to see why the server doesn't start.

<LI>

Verify that the network interfaces the server wants to use are available.

</UL>

<P>
Some storage engines have options that control their behavior.
You can create a <tt>`my.cnf'</tt> file and set startup options
for the engines you plan to use.
If you are going to use storage engines that support transactional tables
(<code>InnoDB</code>, <code>BDB</code>), be sure that you have them configured the
way you want before starting the server:

</P>

<UL>
<LI>

If you are using <code>InnoDB</code> tables, refer to the <code>InnoDB</code>-specific
startup options.  In MySQL 3.23, you must configure <code>InnoDB</code> explicitly
or the server will fail to start.  From MySQL 4.0 on, <code>InnoDB</code> uses default
values for its configuration options if you specify none.
See section <A HREF="manual_InnoDB.html#InnoDB_configuration">15.4  <code>InnoDB</code> Configuration</A>.

<LI>

If you are using <code>BDB</code> (Berkeley DB) tables, you should familiarize
yourself with the different <code>BDB</code>-specific startup options.
See section <A HREF="manual_Storage_engines.html#BDB_start">14.4.3  <code>BDB</code> Startup Options</A>.

</UL>

<P>
When the <code>mysqld</code> server starts, it changes location to the data
directory.  This is where it expects to find databases and where it expects
to write log files. On Unix, the server also writes the pid (process ID)
file in the data directory.

</P>
<P>
The data directory location is hardwired in when the server is compiled.
This is where the server looks for the data directory by default. If
the data directory is located somewhere else on your system, the server will
not work properly.  You can find out what the default path settings are by
invoking <code>mysqld</code> with the <code>--verbose</code> and <code>--help</code> options.
(Prior to MySQL 4.1, omit the <code>--verbose</code> option.)

</P>
<P>
If the defaults don't match the MySQL installation layout on your system,
you can override them by specifying options on the command line to
<code>mysqld</code> or <code>mysqld_safe</code>. You can also list the options in an
option file.

</P>
<P>
To specify the location of the data directory explicitly, use the
<code>--datadir</code> option. However, normally you can tell <code>mysqld</code> the
location of the base directory under which MySQL is installed and it will
look for the data directory there.  You can do this with the <code>--basedir</code>
option.

</P>
<P>
To check the effect of specifying path options, invoke <code>mysqld</code> with
those options followed by the <code>--verbose</code> and <code>--help</code> options.
For example, if you change location into the directory where <code>mysqld</code> is
installed, and then run the following command, it
will show the effect of starting the server with a base
directory of <tt>`/usr/local'</tt>:

</P>

<PRE>
shell&#62; ./mysqld --basedir=/usr/local --verbose --help
</PRE>

<P>
You can specify other options such as <code>--datadir</code> as well, but note
that <code>--verbose</code> and <code>--help</code> must be the last options.  (Prior to
MySQL 4.1, omit the <code>--verbose</code> option.)

</P>
<P>
Once you determine the path settings you want, start the server without
<code>--verbose</code> and <code>--help</code>.

</P>
<P>
If <code>mysqld</code> is currently running, you can find out what path settings
it is using by executing this command:

</P>

<PRE>
shell&#62; mysqladmin variables
</PRE>

<P>
Or:

</P>

<PRE>
shell&#62; mysqladmin -h <var>host_name</var> variables
</PRE>

<P>
<var>host_name</var> is the name of the MySQL server host.

</P>
<P>
If you get <code>Errcode 13</code> (which means <code>Permission denied</code>) when
starting <code>mysqld</code>, this means that the access privileges of the data
directory or its contents do not allow the server access.  In this case, you
change the permissions for the involved files and directories so that the
server has the right to use them.  You can also start the server as
<code>root</code>, but this can raise security issues and should be avoided.

</P>
<P>
On Unix, change location into the data directory and check the ownership of
the data directory and its contents to make sure the server has access. For
example, if the data directory is <tt>`/usr/local/mysql/var'</tt>, use this
command:

</P>

<PRE>
shell&#62; ls -la /usr/local/mysql/var
</PRE>

<P>
If the data directory or its files or subdirectories are not owned by the
account that you use for running the server, change their ownership
to that account:

</P>

<PRE>
shell&#62; chown -R mysql /usr/local/mysql/var
shell&#62; chgrp -R mysql /usr/local/mysql/var
</PRE>

<P>
If the server fails to start up correctly, check the error log file to
see if you can find out why.  Log files are located in the data directory
(typically <tt>`C:\mysql\data'</tt> on Windows, <tt>`/usr/local/mysql/data'</tt>
for a Unix binary distribution, and <tt>`/usr/local/var'</tt> for a Unix source
distribution).  Look in the data directory for files with names of the form
<tt>`<var>host_name</var>.err'</tt> and <tt>`<var>host_name</var>.log'</tt>, where <var>host_name</var> is the
name of your server host. (Older servers on Windows use <tt>`mysql.err'</tt>
as the error log name.)  Then check the last few lines of these files.
On Unix, you can use <code>tail</code> to display the last few lines:

</P>

<PRE>
shell&#62; tail <var>host_name</var>.err
shell&#62; tail <var>host_name</var>.log
</PRE>

<P>
The error log contains information that indicates why the server couldn't
start.  For example, you might see something like this in the log:

</P>

<PRE>
000729 14:50:10  bdb:  Recovery function for LSN 1 27595 failed
000729 14:50:10  bdb:  warning: ./test/t1.db: No such file or directory
000729 14:50:10  Can't init databases
</PRE>

<P>
This means that you didn't start <code>mysqld</code> with the
<code>--bdb-no-recover</code> option and Berkeley DB found something wrong with
its own log files when it tried to recover your databases.  To be able to
continue, you should move away the old Berkeley DB log files from the
database directory to some other place, where you can later examine them.
The <code>BDB</code> log files are named in sequence beginning with
<tt>`log.0000000001'</tt>, where the number increases over time.

</P>
<P>
If you are running <code>mysqld</code> with <code>BDB</code> table support and
<code>mysqld</code> dumps core at startup, this could be due to problems with the
<code>BDB</code> recovery log.  In this case, you can try starting <code>mysqld</code>
with <code>--bdb-no-recover</code>.  If that helps, then you should remove
all <code>BDB</code> log files from the data directory and try starting <code>mysqld</code>
again without the <code>--bdb-no-recover</code> option.

</P>
<P>
If either of the following errors occur, it means that some other program
(perhaps another <code>mysqld</code> server) is already using the TCP/IP port or
Unix socket file that <code>mysqld</code> is trying to use:

</P>

<PRE>
Can't start server: Bind on TCP/IP port: Address already in use
Can't start server: Bind on unix socket...
</PRE>

<P>
Use <code>ps</code> to determine whether you have another <code>mysqld</code> server
running. If so, shut down the server before starting <code>mysqld</code> again.
(If another server is running, and you really want to run multiple servers,
you can find information about how to do so in section <A HREF="manual_MySQL_Database_Administration.html#Multiple_servers">5.10  Running Multiple MySQL Servers on the Same Machine</A>.)

</P>
<P>
If no other server is running, try to execute the command <code>telnet
your-host-name tcp-ip-port-number</code>.  (The default MySQL port number is
3306.) Then press Enter a couple of times.  If you don't get an error
message like <code>telnet: Unable to connect to remote host: Connection
refused</code>, some other program is using the TCP/IP port that <code>mysqld</code> is
trying to use.  You'll need to track down what program this is and disable
it, or else tell <code>mysqld</code> to listen to a different port with the
<code>--port</code> option.  In this case, you'll also need to specify the port
number for client programs when connecting to the server via TCP/IP.

</P>
<P>
Another reason the port might be inaccessible is that you have a firewall
running that blocks connections to it. If so, modify the firewall settings to
allow access to the port.

</P>
<P>
If the server starts but you can't connect to it, you should make sure
that you have an entry in <tt>`/etc/hosts'</tt> that looks like this:

</P>

<PRE>
127.0.0.1       localhost
</PRE>

<P>
This problem occurs only on systems that don't have a working thread
library and for which MySQL must be configured to use MIT-pthreads.

</P>
<P>
If you can't get <code>mysqld</code> to start, you can try to make a trace file
to find the problem by using the <code>--debug</code> option.
See section <A HREF="manual_Porting.html#Making_trace_files">E.1.2  Creating Trace Files</A>.

</P>
<P>
See section <A HREF="manual_Installing.html#Windows_troubleshooting">2.3.14  Troubleshooting a MySQL Installation Under Windows</A>, for more information on troubleshooting
Windows installations.

</P>


<H3><A NAME="Default_privileges" HREF="manual_toc.html#Default_privileges">2.9.3  Securing the Initial MySQL Accounts</A></H3>

<P>
<A NAME="IDX281"></A>
<A NAME="IDX282"></A>
<A NAME="IDX283"></A>
<A NAME="IDX284"></A>
<A NAME="IDX285"></A>
<A NAME="IDX286"></A>
<A NAME="IDX287"></A>
<A NAME="IDX288"></A>
<A NAME="IDX289"></A>

</P>
<P>
Part of the MySQL installation process is to set up the <code>mysql</code> database
containing the grant tables:

</P>

<UL>
<LI>

Windows distributions contain preinitialized grant tables that are installed
automatically.
<LI>

On Unix, the grant tables are populated by the <code>mysql_install_db</code>
program. Some installation methods run this program for you. Others require
that you execute it manually. For details, see section <A HREF="manual_Installing.html#Unix_post-installation">2.9.2  Unix Post-Installation Procedures</A>.
</UL>

<P>
The grant tables define the initial MySQL user accounts and their access
privileges.  These accounts are set up as follows:

</P>

<UL>

<LI>

Two accounts are created with a username of <code>root</code>.  These are
superuser accounts that can do anything.  The initial <code>root</code> account
passwords are empty, so anyone can connect to the MySQL server as <code>root</code>
<em>without a password</em> and be granted all privileges.


<UL>

<LI>

On Windows, one <code>root</code> account is for connecting from the local host
and the other allows connections from any host.

<LI>

On Unix, both <code>root</code> accounts are for connections from the local host.
Connections must be made from the local host by specifying a hostname of
<code>localhost</code> for one account, or the actual hostname or IP number for
the other.

</UL>

<LI>

<A NAME="IDX290"></A>
Two anonymous-user accounts are created, each with an empty username.
The anonymous accounts have no passwords, so anyone can use them to connect
to the MySQL server.


<UL>

<LI>

On Windows, one anonymous account is for connections from the local host.
It has all privileges, just like the <code>root</code> accounts.
The other is for connections from any host and has all privileges for the
<code>test</code> database or other databases with names that start with <code>test</code>.

<LI>

On Unix, both anonymous accounts are for connections from the local host.
Connections must be made from the local host by specifying a hostname of
<code>localhost</code> for one account, or the actual hostname or IP number for
the other.  These accounts have all privileges for the <code>test</code> database
or other databases with names that start with <code>test_</code>.

</UL>

</UL>

<P>
As noted, none of the initial accounts have passwords.  This means that
your MySQL installation is unprotected until you do something about it:

</P>

<UL>

<LI>

If you want to prevent clients from connecting as anonymous users without a
password, you should either assign passwords to the anonymous accounts or else
remove them.

<LI>

You should assign passwords to the MySQL <code>root</code> accounts.

</UL>

<P>
The following instructions describe how to set up passwords for the
initial MySQL accounts, first for the anonymous accounts and then for the
<code>root</code> accounts.  Replace ``<var>newpwd</var>'' in the examples with the
actual password that you want to use.  The instructions also cover how
to remove the anonymous accounts, should you prefer not to allow anonymous
access at all.

</P>
<P>
You might want to defer setting the passwords until later, so that you
don't need to specify them while you perform additional setup or testing.
However, be sure to set them before using your installation for any real
production work.

</P>
<P>
To assign passwords to the anonymous accounts, you can use either
<code>SET PASSWORD</code> or <code>UPDATE</code>.  In both cases, be sure to encrypt the
password using the <code>PASSWORD()</code> function.

</P>
<P>
To use <code>SET PASSWORD</code> on Windows, do this:

</P>

<PRE>
shell&#62; mysql -u root
mysql&#62; SET PASSWORD FOR ''@'localhost' = PASSWORD('<var>newpwd</var>');
mysql&#62; SET PASSWORD FOR ''@'%' = PASSWORD('<var>newpwd</var>');
</PRE>

<P>
To use <code>SET PASSWORD</code> on Unix, do this:

</P>

<PRE>
shell&#62; mysql -u root
mysql&#62; SET PASSWORD FOR ''@'localhost' = PASSWORD('<var>newpwd</var>');
mysql&#62; SET PASSWORD FOR ''@'<var>host_name</var>' = PASSWORD('<var>newpwd</var>');
</PRE>

<P>
In the second <code>SET PASSWORD</code> statement, replace <var>host_name</var>
with the name of the server host.  This is the name that is specified in
the <code>Host</code> column of the non-<code>localhost</code> record for <code>root</code>
in the <code>user</code> table.  If you don't know what hostname this is, issue
the following statement before using <code>SET PASSWORD</code>:

</P>

<PRE>
mysql&#62; SELECT Host, User FROM mysql.user;
</PRE>

<P>
Look for the record that has <code>root</code> in the <code>User</code> column and
something other than <code>localhost</code> in the <code>Host</code> column. Then use that
<code>Host</code> value in the second <code>SET PASSWORD</code> statement.

</P>
<P>
The other way to assign passwords to the anonymous accounts is by using
<code>UPDATE</code> to modify the <code>user</code> table directly.  Connect to the
server as <code>root</code> and issue an <code>UPDATE</code> statement that assigns a
value to the <code>Password</code> column of the appropriate <code>user</code> table
records.  The procedure is the same for Windows and Unix.  The following
<code>UPDATE</code> statement assigns a password to both anonymous accounts at
once:

</P>

<PRE>
shell&#62; mysql -u root
mysql&#62; UPDATE mysql.user SET Password = PASSWORD('<var>newpwd</var>')
    -&#62;     WHERE User = '';
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
After you update the passwords in the <code>user</code> table directly using
<code>UPDATE</code>, you must tell the server to re-read the grant tables with
<code>FLUSH PRIVILEGES</code>. Otherwise, the change will go unnoticed until you
restart the server.

</P>
<P>
If you prefer to remove the anonymous accounts instead, do so as follows:

</P>

<PRE>
shell&#62; mysql -u root
mysql&#62; DELETE FROM mysql.user WHERE User = '';
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
The <code>DELETE</code> statement applies both to Windows and to Unix.
On Windows, if you want to remove only the anonymous account that has the same
privileges as <code>root</code>, do this instead:

</P>

<PRE>
shell&#62; mysql -u root
mysql&#62; DELETE FROM mysql.user WHERE Host='localhost' AND User='';
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
This account allows anonymous access but has full privileges, so removing
it improves security.

</P>
<P>
You can assign passwords to the <code>root</code> accounts in several ways. The
following discussion demonstrates three methods:

</P>

<UL>
<LI>

Use the <code>SET PASSWORD</code> statement
<LI>

Use the <code>mysqladmin</code> command-line client program
<LI>

Use the <code>UPDATE</code> statement
</UL>

<P>
To assign passwords using <code>SET PASSWORD</code>, connect to the server as
<code>root</code> and issue two <code>SET PASSWORD</code> statements.
Be sure to encrypt the password using the <code>PASSWORD()</code> function.

</P>
<P>
For Windows, do this:

</P>

<PRE>
shell&#62; mysql -u root
mysql&#62; SET PASSWORD FOR 'root'@'localhost' = PASSWORD('<var>newpwd</var>');
mysql&#62; SET PASSWORD FOR 'root'@'%' = PASSWORD('<var>newpwd</var>');
</PRE>

<P>
For Unix, do this:

</P>

<PRE>
shell&#62; mysql -u root
mysql&#62; SET PASSWORD FOR 'root'@'localhost' = PASSWORD('<var>newpwd</var>');
mysql&#62; SET PASSWORD FOR 'root'@'<var>host_name</var>' = PASSWORD('<var>newpwd</var>');
</PRE>

<P>
In the second <code>SET PASSWORD</code> statement, replace <var>host_name</var> with
the name of the server host.  This is the same hostname that you used when
you assigned the anonymous account passwords.

</P>
<P>
To assign passwords to the <code>root</code> accounts using <code>mysqladmin</code>,
execute the following commands:

</P>

<PRE>
shell&#62; mysqladmin -u root password "<var>newpwd</var>"
shell&#62; mysqladmin -u root -h <var>host_name</var> password "<var>newpwd</var>"
</PRE>

<P>
These commands apply both to Windows and to Unix.  In the second command,
replace <var>host_name</var> with the name of the server host.  The double
quotes around the password are not always necessary, but you should use
them if the password contains spaces or other characters that are special
to your command interpreter.

</P>
<P>
If you are using a server from a <em>very</em> old version of MySQL, the
<code>mysqladmin</code> commands to set the password will fail with the message
<code>parse error near 'SET password'</code>.  The solution to this problem is
to upgrade the server to a newer version of MySQL.

</P>
<P>
You can also use <code>UPDATE</code> to modify the <code>user</code> table directly.
The following <code>UPDATE</code> statement assigns a password to both <code>root</code>
accounts at once:

</P>

<PRE>
shell&#62; mysql -u root
mysql&#62; UPDATE mysql.user SET Password = PASSWORD('<var>newpwd</var>')
    -&#62;     WHERE User = 'root';
mysql&#62; FLUSH PRIVILEGES;
</PRE>

<P>
The <code>UPDATE</code> statement applies both to Windows and to Unix.

</P>
<P>
After the passwords have been set, you must supply the appropriate
password whenever you connect to the server.
For example, if you want to use <code>mysqladmin</code> to shut
down the server, you can do so using this command:

</P>

<PRE>
shell&#62; mysqladmin -u root -p shutdown
Enter password: (enter root password here)
</PRE>

<P>
<strong>Note</strong>: If you forget your <code>root</code> password after setting it up,
the procedure for resetting it is covered in section <A HREF="manual_Problems.html#Resetting_permissions">A.4.1  How to Reset the Root Password</A>.

</P>
<P>
To set up new accounts, you can use the <code>GRANT</code> statement. For
instructions, see section <A HREF="manual_MySQL_Database_Administration.html#Adding_users">5.6.2  Adding New User Accounts to MySQL</A>.

</P>



<H2><A NAME="Upgrade" HREF="manual_toc.html#Upgrade">2.10  Upgrading MySQL</A></H2>

<P>
<A NAME="IDX291"></A>

</P>
<P>
As a general rule, we recommend that when upgrading from one release series to
another, you should go to the next series rather than skipping a series. For
example, if you currently are running MySQL 3.23 and wish to upgrade to a
newer series, upgrade to MySQL 4.0 rather than to 4.1 or 5.0.

</P>
<P>
The following items form a checklist of things you should do whenever you
perform an upgrade:

</P>

<UL>
<LI>

Read the upgrading section for the release series to which you are upgrading.
Read the change notes as well.
These provide information about new features you can use.
For example, before upgrading from MySQL 4.1 to 5.0, read the 5.0 upgrading
section (see section <A HREF="manual_Installing.html#Upgrading-from-4.1">2.10.1  Upgrading from Version 4.1 to 5.0</A>) and read the 5.0 change notes
(see section <A HREF="manual_News.html#News">D  MySQL Change History</A>).

<LI>

Before you do an upgrade, back up your databases.

<LI>

If you are running MySQL Server on Windows, see section <A HREF="manual_Installing.html#Windows_upgrading">2.3.15  Upgrading MySQL on Windows</A>.

<LI>

An upgrade may involve changes to the grant tables that are stored in the
<code>mysql</code> database. Occasionally new columns or tables are added to
support new features.  To take advantage of these features, be sure that
your grant tables are up to date.  The upgrade procedure is described in
section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.

<LI>

If you are using replication, see section <A HREF="manual_Replication.html#Replication_Upgrade">6.6  Upgrading a Replication Setup</A>
for information on upgrading your replication setup.

<LI>

If you install a MySQL-Max distribution that includes a server named
<code>mysqld-max</code>, then upgrade later to a non-Max version of MySQL,
<code>mysqld_safe</code> will still attempt to run the old <code>mysqld-max</code>
server.  If you perform such an upgrade, you should manually remove the old
<code>mysqld-max</code> server to ensure that <code>mysqld_safe</code> runs the new
<code>mysqld</code> server.

</UL>

<P>
You can always move the MySQL format files and data files between different
versions on the same architecture as long as you stay within versions for
the same release series of MySQL. The current production release series is
4.1. If you change the character set when running MySQL, you must run
<code>myisamchk -r -q --set-character-set=<var>charset</var></code> on all <code>MyISAM</code> tables.
Otherwise, your indexes may not be ordered correctly, because changing the
character set may also change the sort order.

</P>
<P>
Normally you can upgrade MySQL to a newer MySQL version without having
to do any changes to your tables.  Please confirm if the upgrade notes
to the particular version you are upgrading to tells you anything about
this.  If there would be any incompatibilites you can use
<code>mysqldump</code> to dump your tables before upgrading. After
upgrading, reload the dump file using <code>mysql</code> or <code>mysqlimport</code>
to re-create your tables.

</P>
<P>
If you are cautious about using new versions, you can always rename your old
<code>mysqld</code> before installing a newer one. For example, if you are using
MySQL 4.0.18 and want to upgrade to 4.1.1, rename your current server from
<code>mysqld</code> to <code>mysqld-4.0.18</code>.  If your new <code>mysqld</code> then does
something unexpected, you can simply shut it down and restart with your old
<code>mysqld</code>.

</P>
<P>
If, after an upgrade, you experience problems with recompiled client programs,
such as <code>Commands out of sync</code> or unexpected core dumps, you probably have
used old header or library files when compiling your programs.  In this
case, you should check the date for your <tt>`mysql.h'</tt> file and
<tt>`libmysqlclient.a'</tt> library to verify that they are from the new
MySQL distribution.  If not, recompile your programs with the new
headers and libraries.

</P>
<P>
If problems occur, such as that the new <code>mysqld</code> server doesn't want to
start or that you can't connect without a password, verify that you don't
have some old <tt>`my.cnf'</tt> file from your previous installation.  You can
check this with the <code>--print-defaults</code> option (for example,
<code>mysqld --print-defaults</code>).  If this displays
anything other than the program name, you have an active <tt>`my.cnf'</tt>
file that affects server or client operation.

</P>
<P>
It is a good idea to rebuild and reinstall the Perl <code>DBD::mysql</code>
module whenever you install a new release of MySQL. The same applies to other
MySQL interfaces as well, such as the PHP <code>mysql</code> extension and the
Python <code>MySQLdb</code> module.

</P>



<H3><A NAME="Upgrading-from-4.1" HREF="manual_toc.html#Upgrading-from-4.1">2.10.1  Upgrading from Version 4.1 to 5.0</A></H3>

<P>
<A NAME="IDX292"></A>
<A NAME="IDX293"></A>

</P>
<P>
In general, you should do the following when upgrading to MySQL 5.0 from 4.1:

</P>

<UL>

<LI>

Check the items in the change list found later in this section to see whether
any of them might affect your applications.

<LI>

Read the 5.0 news items to see what significant new features you can use in
5.0.
See section <A HREF="manual_News.html#News-5.0.x">D.1  Changes in release 5.0.x (Development)</A>.

<LI>

If you are running MySQL Server on Windows, see section <A HREF="manual_Installing.html#Windows_upgrading">2.3.15  Upgrading MySQL on Windows</A>.
Also, two of the Windows MySQL servers were renamed.
See section <A HREF="manual_Installing.html#Windows_select_server">2.3.9  Selecting a MySQL Server type</A>.

<LI>

MySQL 5.0 adds support for stored procedures. This support requires the
<code>proc</code> table in the <code>mysql</code> database.
To create this file, you should run the <code>mysql_fix_privilege_tables</code>
script as described in section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.

<LI>

MySQL 5.0 adds support for views. This support requires the extra privilege
columns in the <code>user</code> and <code>db</code> tables in the <code>mysql</code> database.
To create these columns, you should run the <code>mysql_fix_privilege_tables</code>
script as described in section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.

<LI>

If you are using replication, see section <A HREF="manual_Replication.html#Replication_Upgrade">6.6  Upgrading a Replication Setup</A>
for information on upgrading your replication setup.

<LI>

MySQL 5.0.2 adds several new SQL modes that allow stricter control over
rejecting records that have invalid or missing values.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_SQL_mode">5.2.2  The Server SQL Mode</A>.
See section <A HREF="manual_Introduction.html#constraint_invalid_data">1.5.6.2  Constraints on Invalid Data</A>.
If you want to enable this control but continue to use MySQL's capability
for storing incorrect dates such as <code>'2004-02-31'</code>, you should start
the server with <code>--sql_mode=TRADITIONAL,ALLOW_INVALID_DATES</code>.

<LI>

As of MySQL 5.0.2, the <code>SCHEMA</code> and <code>SCHEMAS</code> keywords are
accepted as synonyms for <code>DATABASE</code> and <code>DATABASES</code>.

<LI>

The update log is removed in MySQL 5.0.

</UL>

<P>
The following list describes changes that may affect applications and that
you should watch out for when upgrading to version 5.0:

</P>

<UL>
<LI>

The update log is removed, so if you enabled it in the past,
you should enable the binary log instead.
See section <A HREF="manual_News.html#News-5.0.x">D.1  Changes in release 5.0.x (Development)</A>.

<LI>

User variables now are not case sensitive. In MySQL 4.1,
<code>SET @x = 0; SET @X = 1; SELECT @x;</code> creates two variables and
returns <code>0</code>. In MySQL 5.0, it creates one variable and returns
<code>1</code>.

<LI>

API change: the <code>reconnect</code> flag in the <code>MYSQL</code> structure now is set
to 0 by <code>mysql_real_connect()</code>. Only those client programs which didn't
explicitly set this flag to 0 or 1 after <code>mysql_real_connect()</code> will
experience a change. Having automatic reconnection enabled by default was
considered too dangerous (after reconnection, table locks, temporary tables,
user and session variables are lost).

</UL>



<H3><A NAME="Upgrading-from-4.0" HREF="manual_toc.html#Upgrading-from-4.0">2.10.2  Upgrading from Version 4.0 to 4.1</A></H3>

<P>
<A NAME="IDX294"></A>
<A NAME="IDX295"></A>

</P>
<P>
In general, you should do the following when upgrading to MySQL 4.1 from 4.0:

</P>

<UL>
<LI>

Check the items in the change lists found later in this section to see whether
any of them might affect your applications. Some of them result in
incompatibilities with earlier versions.

<LI>

Read the 4.1 news items to see what significant new features you can use in 4.1.
See section <A HREF="manual_News.html#News-4.1.x">D.2  Changes in release 4.1.x (Production)</A>.

<LI>

Character set support has been improved. The server now supports multiple
character sets.

<LI>

<strong>Important note:</strong>
MySQL 4.1 stores table names and column names in <code>UTF8</code>. If you have
table names or column names that use characters outside of the standard 7-bit
US-ASCII range, you may have to do a <code>mysqldump</code> of your tables
in MySQL 4.0 and restore them after upgrading to MySQL 4.1.  The symptom for
this problem is that you get a <code>table not found</code> error when trying to
access your tables. In this case, you should be able to downgrade back to
MySQL 4.0 and access your data.

<LI>

If you are running MySQL Server on Windows, see section <A HREF="manual_Installing.html#Windows_upgrading">2.3.15  Upgrading MySQL on Windows</A>.

<LI>

After upgrading, update the grant tables to have the new longer
<code>Password</code> column that is needed for more secure handling of passwords.
The procedure uses <code>mysql_fix_privilege_tables</code> and is described
in section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.  If you don't do this, MySQL will not
use the new more secure protocol to authenticate.  Implications of the
password-handling change for applications are given later in this section.

<LI>

If you are using replication, see section <A HREF="manual_Replication.html#Replication_Upgrade">6.6  Upgrading a Replication Setup</A>
for information on upgrading your replication setup.

<LI>

The Berkeley DB table handler is updated to DB 4.1 (from 3.2) which has
a new log format. If you have to downgrade back to 4.0 you must use
<code>mysqldump</code> to dump your <code>BDB</code> tables in text format and delete
all <code>log.XXXXXXXXXX</code> files before you start MySQL 4.0 and reload
the data.

<LI>

MySQL 4.1.3 introduces support for per-connection time zones.
See section <A HREF="manual_MySQL_Database_Administration.html#Time_zone_support">5.8.8  MySQL Server Time Zone Support</A>. To enable recognition of named time zones,
you should create the time zone tables in the <code>mysql</code> database.
For instructions, see section <A HREF="manual_Installing.html#Post-installation">2.9  Post-Installation Setup and Testing</A>.

<LI>

If you are using an old <code>DBD-mysql</code> module
(<code>Msql-MySQL-modules</code>) you have to upgrade to use the newer
<code>DBD-mysql</code> module. Anything above <code>DBD-mysql</code> 2.xx should be fine.

If you don't upgrade, some methods (such as <code>DBI-&#62;do()</code>) will not
notice error conditions correctly.

<LI>

The <code>--defaults-file=option-file-name</code> option now will give an error if
the option file doesn't exist.

<LI>

Some notes about upgrading from MySQL 4.0 to MySQL 4.1 on Netware:
Make sure to upgrade Perl and PHP versions. Download and install Perl module for MySQL 4.1 from
<a HREF="http://forge.novell.com/modules/xfmod/project/showfiles.php?group_id=1126">http://forge.novell.com/modules/xfmod/project/showfiles.php?group_id=1126</a>
and PHP Extension for MySQL 4.1 from
<a HREF="http://forge.novell.com/modules/xfmod/project/showfiles.php?group_id=1078">http://forge.novell.com/modules/xfmod/project/showfiles.php?group_id=1078</a>.

</UL>

<P>
Several visible behaviors have changed between MySQL 4.0 and MySQL 4.1 to
fix some critical bugs and make MySQL more compatible with standard SQL.
These changes may affect your applications.

</P>
<P>
Some of the 4.1 behaviors can be tested in 4.0 before performing
a full upgrade to 4.1. We have added to later MySQL 4.0 releases
(from 4.0.12 on) a <code>--new</code> startup option for <code>mysqld</code>.
See section <A HREF="manual_MySQL_Database_Administration.html#Server_options">5.2.1  <code>mysqld</code> Command-Line Options</A>.

</P>
<P>
This option gives you the 4.1 behavior for the most critical changes.
You can also enable these behaviors for a given client connection with
the <code>SET @@new=1</code> command, or turn them off if they are on with
<code>SET @@new=0</code>.

</P>

<P>
If you believe that some of the 4.1 changes will affect you,
we recommend that before upgrading to 4.1, you download
the latest MySQL 4.0 version and run it with the <code>--new</code> option by
adding the following to your config file:

</P>

<PRE>
[mysqld-4.0]
new
</PRE>

<P>
That way you can test the new behaviors in 4.0 to make sure that your
applications work with them. This will help you have a smooth, painless
transition when you perform a full upgrade to 4.1 later. Putting the
<code>--new</code> option in the <code>[mysqld-4.0]</code> option group ensures
that you don't accidentally later run the 4.1
version with the <code>--new</code> option.

</P>
<P>
The following lists describe changes that may affect applications and that
you should watch out for when upgrading to version 4.1:

</P>
<P>
<strong>Server Changes:</strong>

</P>

<UL>

<LI>

All tables and string columns now have a character set.
See section <A HREF="manual_Charset.html#Charset">10  Character Set Support</A>.
Character set information is displayed by
<code>SHOW CREATE TABLE</code> and <code>mysqldump</code>.
(MySQL versions 4.0.6 and above can read the new dump files; older
versions cannot.)
This change should not affect applications that use only one character set.

<LI>

If you have table columns that
store character data represented in a character set that the 4.1 server
now supports directly, you can convert the columns to the proper character
set using the instructions in section <A HREF="manual_Charset.html#Charset-conversion">10.10.2  Converting 4.0 Character Columns to 4.1 Format</A>.  Also, database,
table, and column identifiers now are stored internally using Unicode (UTF8)
regardless of the default character set.
See section <A HREF="manual_Language_Structure.html#Legal_names">9.2  Database, Table, Index, Column, and Alias Names</A>.

<LI>

<strong>Incompatible change:</strong>
There are conditions under which you should rebuild tables.
In general, to rebuild a table, dump it with <code>mysqldump</code>
and reload the dump file.  Some items in the following list indicate
alternatives means for rebuilding.


<UL>
<LI>

If you have created or used <code>InnoDB</code> tables with <code>TIMESTAMP</code>
columns in MySQL versions 4.1.0 to 4.1.3, you have to rebuild those tables
when you upgrade to MySQL 4.1.4 or later. The storage format in those
MySQL versions for a <code>TIMESTAMP</code> column was incorrect. If you upgrade
from MySQL 4.0 to 4.1.4 or later, then no rebuild of tables with
<code>TIMESTAMP</code> columns is needed.

<LI>

Starting from MySQL 4.1.3, <code>InnoDB</code> uses the same character set
comparison functions as MySQL for non-<code>latin1_swedish_ci</code> character
strings that are not <code>BINARY</code>.  This changes the sorting order of
space and characters with a code &#60; ASCII(32) in those character sets.
For <code>latin1_swedish_ci</code> character strings and <code>BINARY</code> strings,
<code>InnoDB</code> uses its own pad-spaces-at-end comparison method, which
stays unchanged.  If you have an <code>InnoDB</code> table created with MySQL
4.1.2 or earlier, with an index on a non-<code>latin1</code> character set
(in the case of 4.1.0 and 4.1.1, with any character set) and the table
contains any <code>CHAR</code>/<code>VARCHAR</code>/or <code>TEXT</code> columns that are
not <code>BINARY</code> but may contain characters with a code &#60; ASCII(32),
then you should do <code>ALTER TABLE</code> or <code>OPTIMIZE TABLE</code> on it to
regenerate the index, after upgrading to MySQL 4.1.3 or later.
Also, <code>MyISAM</code> tables have to be rebuilt or repaired in these cases.

<LI>

If you have used column prefix indexes on UTF8 columns or other multibyte
character set columns in MySQL 4.1.0 to 4.1.5, you must rebuild the tables
when you upgrade to MySQL 4.1.6 or later.

<LI>

If you have used accent characters (characters with byte values of 128 to
255) in database names, table names, constraint names, or column names
in versions of MySQL earlier than 4.1, you cannot upgrade to MySQL 4.1
directly, because 4.1 uses UTF8 to store metadata names. Use <code>RENAME
TABLE</code> to overcome this if the accent character is in the table name or
the database name, or rebuild the table.

</UL>

<LI>

<strong>Incompatible change:</strong>
MySQL now interprets length specifications in character column
definitions in characters. (Earlier versions interpret them in bytes.)
For example, <code>CHAR(<var>N</var>)</code> now means <var>N</var> characters, not <var>N</var>
bytes.

For single-byte character sets, this change makes no difference. However,
if you upgrade to MySQL 4.1 and configure the server to use a multi-byte
character set, the apparent length of character columns will change. Suppose
that a 4.0 table contains a <code>CHAR(8)</code> column used to store <code>ujis</code>
characters. Eight bytes can store from two to four <code>ujis</code> characters.
If you upgrade to 4.1 and configure the server to use <code>ujis</code> as its
default character set, the server interprets character column lengths
based on the maximum size of a <code>ujis</code> character, which is three
bytes.  The number of three-byte characters that fit in eight bytes is
two. Consequently, if you use <code>SHOW CREATE TABLE</code> to view the table
definition, MySQL displays <code>CHAR(2)</code>.  You can retrieve existing
data from the table, but you will be able to store new values containing
only up to two characters. To correct this issue, use <code>ALTER TABLE</code>
to change the column definition. For example:


<PRE>
ALTER TABLE <var>tbl_name</var> MODIFY <var>col_name</var> CHAR(8);
</PRE>

<LI>

The table definition format used in <tt>`.frm'</tt> files
has changed slightly in 4.1.  MySQL 4.0 versions from 4.0.11 on can
read the new <tt>`.frm'</tt> format directly, but older versions cannot.
If you need to move tables from 4.1 to a version earlier than 4.0.11, you
should use <code>mysqldump</code>.
See section <A HREF="manual_Client-Side_Scripts.html#mysqldump">8.8  The <code>mysqldump</code> Database Backup Program</A>.

<LI>

<strong>Important note:</strong> If you upgrade to MySQL 4.1.1 or higher, it is
difficult to downgrade back to 4.0 or 4.1.0! That is because, for earlier
versions, <code>InnoDB</code> is not aware of multiple tablespaces.

<LI>

<strong>Incompatible change:</strong>
In connection with the support for per-connection time zones in MySQL 4.1.3,
the <code>timezone</code> system variable was renamed to <code>system_time_zone</code>.

<LI>

Windows servers now support connections from local clients using shared
memory if run with the <code>--shared-memory</code> option.  If you are running
multiple servers this way on the same Windows machine, you should use a
different <code>--shared-memory-base-name</code> option for each server.

<LI>

The interface to aggregated UDF functions has changed a bit. You must now
declare a <code>xxx_clear()</code> function for each aggregate function <code>XXX()</code>.

</UL>

<P>
<strong>Client Changes:</strong>

</P>

<UL>

<LI>

<code>mysqldump</code> now has the <code>--opt</code> and <code>--quote-names</code> options
enabled by default. You can turn them off with <code>--skip-opt</code> and
<code>--skip-quote-names</code>.

</UL>

<P>
<strong>SQL Changes:</strong>

</P>

<UL>

<LI>

<strong>Incompatible change:</strong>
In MySQL 4.1.2, the <code>Type</code> column in the output from <code>SHOW TABLE
STATUS</code> was renamed to <code>Engine</code>.

<LI>

<strong>Incompatible change:</strong>
String comparison now works according to SQL standard: Instead of
stripping end spaces before comparison, we now extend the shorter string
with spaces.  The problem with this is that now <code>'a' &#62; 'a\t'</code>,
which it wasn't before.  If you have any tables where you
have a <code>CHAR</code> or <code>VARCHAR</code> column in which the last character in the
column may be less than <code>ASCII(32)</code>, you should use <code>REPAIR TABLE</code> or
<code>myisamchk</code> to ensure that the table is correct.

<LI>

When using multiple-table <code>DELETE</code> statements, you should use the
alias of the tables from which you want to delete, not the actual table name.
For example, instead of doing this:


<PRE>
DELETE test FROM test AS t1, test2 WHERE ...
</PRE>

Do this:


<PRE>
DELETE t1 FROM test AS t1, test2 WHERE ...
</PRE>

This corrects a problem that was present in MySQL 4.0.

<LI>

<strong>Incompatible change:</strong>
<code>TIMESTAMP</code> is now returned as a string in <code>'YYYY-MM-DD HH:MM:SS'</code>
format (from 4.0.12 the <code>--new</code> option can be used to make a
4.0 server behave as 4.1 in this respect).
See section <A HREF="manual_Column_types.html#TIMESTAMP_4.1">11.3.1.2  <code>TIMESTAMP</code> Properties as of MySQL 4.1</A>.

If you want to have the value returned as a number (as MySQL 4.0 does) you
should add <code>+0</code> to <code>TIMESTAMP</code> columns when you retrieve them:


<PRE>
mysql&#62; SELECT ts_col + 0 FROM <var>tbl_name</var>;
</PRE>

Display widths for <code>TIMESTAMP</code> columns are no longer supported.
For example, if you declare a column as <code>TIMESTAMP(10)</code>, the <code>(10)</code>
is ignored.

These changes were necessary for SQL standards compliance. In a future
version, a further change will be made (backward compatible with this
change), allowing the timestamp length to indicate the desired number of
digits for fractions of a second.

<LI>

<strong>Incompatible change:</strong>
Binary values such as <code>0xFFDF</code> now are assumed to be strings instead of
numbers.  This fixes some problems with character sets where it's
convenient to input a string as a binary value.  With this change,
you should use <code>CAST()</code> if you want to compare binary values
numerically as integers:


<PRE>
mysql&#62; SELECT CAST(0xFEFF AS UNSIGNED INTEGER)
    -&#62;        &#60; CAST(0xFF AS UNSIGNED INTEGER);
        -&#62; 0
</PRE>

If you don't use <code>CAST()</code>, a lexical string comparison will be done:


<PRE>
mysql&#62; SELECT 0xFEFF &#60; 0xFF;
        -&#62; 1
</PRE>

Using binary items in a numeric context or comparing them using the
<code>=</code> operator should work as before.  (The <code>--new</code> option can
be used from 4.0.13 on to make a 4.0 server behave as 4.1 in this respect.)

<LI>

For functions that produce a <code>DATE</code>, <code>DATETIME</code>, or <code>TIME</code>
value, the result returned to the client now is fixed up to have a temporal
type. For example, in MySQL 4.1, you get this result:


<PRE>
mysql&#62; SELECT CAST('2001-1-1' AS DATETIME);
       -&#62; '2001-01-01 00:00:00'
</PRE>

In MySQL 4.0, the result is different:


<PRE>
mysql&#62; SELECT CAST('2001-1-1' AS DATETIME);
       -&#62; '2001-01-01'
</PRE>

<LI>

<code>DEFAULT</code> values no longer can be specified for <code>AUTO_INCREMENT</code>
columns. (In 4.0, a <code>DEFAULT</code> value is silently ignored; in 4.1,
an error occurs.)

<LI>

<code>LIMIT</code> no longer accepts negative arguments.
Use some large number (maximum 18446744073709551615) instead of -1.

<LI>

<code>SERIALIZE</code> is no longer a valid mode value for the <code>sql_mode</code>
variable.  You should use <code>SET TRANSACTION ISOLATION LEVEL SERIALIZABLE</code>
instead. <code>SERIALIZE</code> is no longer valid for the <code>--sql-mode</code> option
for <code>mysqld</code>, either. Use <code>--transaction-isolation=SERIALIZABLE</code>
instead.

</UL>

<P>
<strong>C API Changes:</strong>

</P>

<UL>

<LI>

<strong>Incompatible change:</strong>
The <code>mysql_shutdown()</code> C API function has an extra parameter
as of MySQL 4.1.3: <code>SHUTDOWN</code>-level. You should convert any
<code>mysql_shutdown(<var>X</var>)</code> call you have in your application to
<code>mysql_shutdown(<var>X</var>,SHUTDOWN_DEFAULT)</code>.

<LI>

Some C API calls such as <code>mysql_real_query()</code> now return <code>1</code> on error,
not <code>-1</code>.  You may have to change some old applications if they use
constructs like this:


<PRE>
if (mysql_real_query(mysql_object, query, query_length) == -1)
{
  printf("Got error");
}
</PRE>

Change the call to test for a non-zero value instead:


<PRE>
if (mysql_real_query(mysql_object, query, query_length) != 0)
{
  printf("Got error");
}
</PRE>

</UL>

<P>
<strong>Password-Handling Changes:</strong>

</P>
<P>
The password hashing mechanism has changed in 4.1 to provide better
security, but this may cause compatibility problems if you still have
clients that use the client library from 4.0 or earlier.  (It is very likely that you will
have 4.0 clients in situations where clients connect from remote hosts
that have not yet upgraded to 4.1.)  The following list indicates some
possible upgrade strategies.  They represent various tradeoffs between
the goal of compatibility with old clients and the goal of security.

</P>

<UL>

<LI>

Only upgrade the client to use 4.1 client libraries (not the server). No
behavior will change (except the return value of some API calls), but
you cannot use any of the new features provided by the 4.1 client/server
protocol, either.  (MySQL 4.1 has an extended client/server protocol
that offers such features as prepared statements and multiple result
sets.)  See section <A HREF="manual_MySQL_APIs.html#C_API_Prepared_statements">21.2.4  C API Prepared Statements</A>.

<LI>

Upgrade to 4.1 and run the <code>mysql_fix_privilege_tables</code> script
to widen the <code>Password</code> column in the <code>user</code> table so
that it can hold long password hashes.  But run the server with the
<code>--old-passwords</code> option to provide backward compatibility that
allows pre-4.1 clients to continue to connect to their short-hash
accounts.
Eventually, when all your clients are upgraded to 4.1, you can stop using the
<code>--old-passwords</code> server option. You can also change the passwords for
your MySQL accounts to use the new more secure format.

<LI>

Upgrade to 4.1 and run the <code>mysql_fix_privilege_tables</code> script to widen the
<code>Password</code> column in the <code>user</code> table.  If you know that all clients
also have been upgraded to 4.1, don't run the server with the
<code>--old-passwords</code> option.  Instead, change the passwords on all existing
accounts so that they have the new format.  A pure-4.1 installation
is the most secure.

<LI>

Some notes about upgrading from MySQL 4.0 to MySQL 4.1 on Netware:
Make sure to upgrade Perl and PHP versions. Download Perl 5 for
Netware from http://forge.novell.com/modules/xfmod/project/?perl5) and
PHP from http://forge.novell.com/modules/xfmod/project/?php.

</UL>

<P>
Further background on password hashing with respect to client authentication
and password-changing operations may be found in section <A HREF="manual_MySQL_Database_Administration.html#Password_hashing">5.5.9  Password Hashing in MySQL 4.1</A> and
section <A HREF="manual_Problems.html#Old_client">A.2.3  <code>Client does not support authentication protocol</code></A>.

</P>



<H3><A NAME="Upgrading-from-3.23" HREF="manual_toc.html#Upgrading-from-3.23">2.10.3  Upgrading from Version 3.23 to 4.0</A></H3>

<P>
<A NAME="IDX296"></A>
<A NAME="IDX297"></A>

</P>
<P>
In general, you should do the following when upgrading to MySQL 4.0 from 3.23:

</P>

<UL>
<LI>

Check the items in the change lists found later in this section to see whether
any of them might affect your applications.

<LI>

Read the 4.0 news items to see what significant new features you can use in 4.0.
See section <A HREF="manual_News.html#News-4.0.x">D.3  Changes in release 4.0.x (Production)</A>.

<LI>

If you are running MySQL Server on Windows, see section <A HREF="manual_Installing.html#Windows_upgrading">2.3.15  Upgrading MySQL on Windows</A>.

<LI>

After upgrading,
update the grant tables to add new privileges and features.  The
procedure uses the <code>mysql_fix_privilege_tables</code> script and is described
in section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.

<LI>

If you are using replication, see section <A HREF="manual_Replication.html#Replication_Upgrade">6.6  Upgrading a Replication Setup</A>
for information on upgrading your replication setup.

<LI>

Edit any MySQL startup scripts or option files to not use any of the
deprecated options described later in this section.

<LI>

Convert your old <code>ISAM</code> files to <code>MyISAM</code> files. One way to do this
is with the
<code>mysql_convert_table_format</code> script. (This is a Perl script;
it requires that DBI be installed.) To convert the tables in a given database,
use this command:


<PRE>
shell&#62; mysql_convert_table_format database <var>db_name</var>
</PRE>

Note that this should be used only if all tables in the given database
are <code>ISAM</code> or <code>MyISAM</code> tables. To avoid converting tables
of other types to <code>MyISAM</code>, you can explicitly list the names
of your <code>ISAM</code> tables after the database name on the command
line.

Individual tables can be changed to <code>MyISAM</code> by using the following
<code>ALTER TABLE</code> statement for each table to be converted:


<PRE>
mysql&#62; ALTER TABLE <var>tbl_name</var> TYPE=MyISAM;
</PRE>

If you are not sure of the table type for a given table, use this statement:


<PRE>
mysql&#62; SHOW TABLE STATUS LIKE '<var>tbl_name</var>';
</PRE>

<LI>

Ensure that you don't have any MySQL clients that use shared libraries
(like the Perl <code>DBD::mysql</code> module). If you do, you should recompile
them, because the data structures used in <tt>`libmysqlclient.so'</tt> have changed.
The same applies to other MySQL interfaces as well, such as the Python
<code>MySQLdb</code> module.

</UL>

<P>
MySQL 4.0 will work even if you don't perform the preceding actions, but you
will not be able to use the new security privileges in MySQL 4.0 and you
may run into problems when upgrading later to MySQL 4.1 or newer.  The
<code>ISAM</code> file format still works in MySQL 4.0, but is deprecated and
is not compiled in by default as of MySQL 4.1. <code>MyISAM</code> tables should
be used instead.

</P>
<P>
Old clients should work with a MySQL 4.0 server without any problems.

</P>
<P>
Even if you perform the preceding actions, you can still downgrade to MySQL
3.23.52 or newer if you run into problems with the MySQL 4.0 series.  In
this case, you must use <code>mysqldump</code> to dump any tables that use
full-text indexes and reload the dump file into the 3.23 server.  This is
necessary because 4.0 uses a new format for full-text indexing.

</P>
<P>
The following lists describe changes that may affect applications and that
you should watch out for when upgrading to version 4.0:

</P>
<P>
<strong>Server Changes:</strong>

</P>

<UL>

<LI>

MySQL 4.0 has a lot of new privileges in the <code>mysql.user</code> table.
See section <A HREF="manual_MySQL_Database_Administration.html#Privileges_provided">5.5.3  Privileges Provided by MySQL</A>.

To get these new privileges to work, you must update the grant tables.
The procedure is described in section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.
Until you do this, all
accounts have the <code>SHOW DATABASES</code>, <code>CREATE TEMPORARY TABLES</code>,
and <code>LOCK TABLES</code> privileges. <code>SUPER</code> and <code>EXECUTE</code>
privileges take their value from <code>PROCESS</code>.
<code>REPLICATION SLAVE</code> and <code>REPLICATION CLIENT</code> take their
values from <code>FILE</code>.

If you have any scripts that create new MySQL user accounts, you may want to change
them to use the new privileges.  If you are not using <code>GRANT</code>
commands in the scripts, this is a good time to change your scripts to use
<code>GRANT</code> instead of modifying the grant tables directly.

From version 4.0.2 on, the option <code>--safe-show-database</code> is deprecated
(and no longer does anything). See section <A HREF="manual_MySQL_Database_Administration.html#Privileges_options">5.4.3  Startup Options for <code>mysqld</code> Concerning Security</A>.

If you get <code>Access denied</code> errors for new users in version 4.0.2 and up, you
should check whether you need some of the new grants that you didn't need
before.  In particular, you will need <code>REPLICATION SLAVE</code>
(instead of <code>FILE</code>) for new slave servers.

<LI>

<code>safe_mysqld</code> has been renamed to <code>mysqld_safe</code>.  For backward
compatibility, binary distributions will for some time include
<code>safe_mysqld</code> as a symlink to <code>mysqld_safe</code>.

<LI>

<code>InnoDB</code> support is now included by default in binary distributions.
If you build MySQL from source, <code>InnoDB</code> is configured in by default.
If you do not use <code>InnoDB</code> and want to save memory when running a
server that has <code>InnoDB</code> support enabled, use the <code>--skip-innodb</code>
server startup option. To compile MySQL without <code>InnoDB</code> support, run
<code>configure</code> with the <code>--without-innodb</code> option.

<LI>

Values for the startup parameters <code>myisam_max_extra_sort_file_size</code> and
<code>myisam_max_extra_sort_file_size</code> now are given in bytes
(they were given in megabytes before 4.0.3).

<LI>

<code>mysqld</code> now has the option <code>--temp-pool</code> enabled by default
because this gives better performance with some operating systems (most
notably Linux).

<LI>

The <code>mysqld</code> startup options <code>--skip-locking</code> and
<code>--enable-locking</code> were renamed to <code>--skip-external-locking</code>
and <code>--external-locking</code>.

<LI>

External system locking of <code>MyISAM</code>/<code>ISAM</code> files is now
turned off by default.  You can turn this on with
<code>--external-locking</code>. (However, this is never needed for most users.)

<LI>

The following startup variables and options have been renamed:

<TABLE BORDER>
<TR><TD><strong>Old Name</strong> </TD><TD> <strong>New Name</strong>
</TD></TR>
<TR><TD><code>myisam_bulk_insert_tree_size</code> </TD><TD> <code>bulk_insert_buffer_size</code>
</TD></TR>
<TR><TD><code>query_cache_startup_type</code> </TD><TD> <code>query_cache_type</code>
</TD></TR>
<TR><TD><code>record_buffer</code> </TD><TD> <code>read_buffer_size</code>
</TD></TR>
<TR><TD><code>record_rnd_buffer</code> </TD><TD> <code>read_rnd_buffer_size</code>
</TD></TR>
<TR><TD><code>sort_buffer</code> </TD><TD> <code>sort_buffer_size</code>
</TD></TR>
<TR><TD><code>warnings</code> </TD><TD> <code>log-warnings</code>
</TD></TR>
<TR><TD><code>--err-log</code> </TD><TD> <code>--log-error</code> (for <code>mysqld_safe</code>)
</TD></TR>
</TABLE>

The startup options <code>record_buffer</code>, <code>sort_buffer</code>, and
<code>warnings</code> will still work in MySQL 4.0 but are deprecated.
</UL>

<P>
<strong>SQL Changes:</strong>

</P>

<UL>

<LI>

The following SQL variables have been renamed:

<TABLE BORDER>
<TR><TD><strong>Old Name</strong> </TD><TD> <strong>New Name</strong>
</TD></TR>
<TR><TD><code>SQL_BIG_TABLES</code> </TD><TD> <code>BIG_TABLES</code>
</TD></TR>
<TR><TD><code>SQL_LOW_PRIORITY_UPDATES</code> </TD><TD> <code>LOW_PRIORITY_UPDATES</code>
</TD></TR>
<TR><TD><code>SQL_MAX_JOIN_SIZE</code> </TD><TD> <code>MAX_JOIN_SIZE</code>
</TD></TR>
<TR><TD><code>SQL_QUERY_CACHE_TYPE</code> </TD><TD> <code>QUERY_CACHE_TYPE</code>
</TD></TR>
</TABLE>
The old names still work in MySQL 4.0 but are deprecated.

<LI>

You have to use <code>SET GLOBAL SQL_SLAVE_SKIP_COUNTER=skip_count</code> instead of
<code>SET SQL_SLAVE_SKIP_COUNTER=skip_count</code>.

<LI>

<code>SHOW MASTER STATUS</code> now returns an empty set if binary logging is not
enabled.

<LI>

<code>SHOW SLAVE STATUS</code> now returns an empty set if the slave is not
initialized.

<LI>

<code>SHOW INDEX</code> has two more columns than it had in 3.23 (<code>Null</code> and
<code>Index_type</code>).

<LI>

The format of <code>SHOW OPEN TABLES</code> has changed.

<LI>

<code>ORDER BY col_name DESC</code> sorts <code>NULL</code> values last, as of
MySQL 4.0.11. In 3.23 and in earlier 4.0 versions, this was not
always consistent.

<LI>

<code>CHECK</code>, <code>LOCALTIME</code>, and <code>LOCALTIMESTAMP</code>
now are reserved words.

<LI>

<code>DOUBLE</code> and <code>FLOAT</code> columns now honor the
<code>UNSIGNED</code> flag on storage (before, <code>UNSIGNED</code> was ignored for
these columns).

<LI>

The result of all bitwise operators (<code>|</code>, <code>&#38;</code>, <code>&#60;&#60;</code>,
<code>&#62;&#62;</code>, and <code>~</code>) is now unsigned.  This may cause problems if you
are using them in a context where you want a signed result.
See section <A HREF="manual_Functions.html#Cast_Functions">12.7  Cast Functions and Operators</A>.

<strong>Note</strong>: When you use subtraction between integer values where
one is of type <code>UNSIGNED</code>, the result will be unsigned.  In other
words, before upgrading to MySQL 4.0, you should check your application
for cases in which you are subtracting a value from an unsigned entity and
want a negative answer or subtracting an unsigned value from an
integer column. You can disable this behavior by using the
<code>--sql-mode=NO_UNSIGNED_SUBTRACTION</code> option when starting
<code>mysqld</code>.  See section <A HREF="manual_MySQL_Database_Administration.html#Server_SQL_mode">5.2.2  The Server SQL Mode</A>.

<LI>

You should use integers to store values in <code>BIGINT</code> columns (instead
of using strings, as you did in MySQL 3.23).  Using strings will still
work, but using integers is more efficient.

<LI>

In MySQL 3.23, <code>INSERT INTO ... SELECT</code> always had <code>IGNORE</code> enabled.
As of 4.0.1, MySQL will stop (and possibly roll back) by default in case of
an error unless you specify <code>IGNORE</code>.

<LI>

You should use <code>TRUNCATE TABLE</code> when you want to delete all rows
from a table and you don't need to obtain a count of the number of rows
that were deleted.  (<code>DELETE FROM <var>tbl_name</var></code> returns a row count in
4.0 and doesn't reset the <code>AUTO_INCREMENT</code> counter, and
<code>TRUNCATE TABLE</code> is faster.)

<LI>

You will get an error if you have an active transaction or <code>LOCK TABLES</code>
statement when trying to execute <code>TRUNCATE TABLE</code> or <code>DROP
DATABASE</code>.

<LI>

To use <code>MATCH ... AGAINST (... IN BOOLEAN MODE)</code> full-text searches
with your tables, you must rebuild their indexes with <code>REPAIR TABLE
tbl_name USE_FRM</code>.  If you attempt a boolean full-text search without
rebuilding the indexes this way, the search will return incorrect results.
See section <A HREF="manual_Functions.html#Fulltext_Fine-tuning">12.6.4  Fine-Tuning MySQL Full-Text Search</A>.

<LI>

<code>LOCATE()</code> and <code>INSTR()</code> are case sensitive if one of the
arguments is a binary string. Otherwise they are case insensitive.

<LI>

<code>STRCMP()</code> now uses the current character set when performing comparisons.
This makes the default comparison behavior not case sensitive unless
one or both of the operands are binary strings.

<LI>

<code>HEX(<var>str</var>)</code> now returns the characters in <var>str</var> converted to
hexadecimal.  If you want to convert a number to hexadecimal, you should
ensure that you call <code>HEX()</code> with a numeric argument.

<LI>

<code>RAND(seed)</code> returns a different random number series in 4.0 than in
3.23; this was done to further differentiate <code>RAND(seed)</code> and
<code>RAND(seed+1)</code>.

<LI>

The default type returned by <code>IFNULL(A,B)</code> is now set to be the
more ``general'' of the types of <code>A</code> and <code>B</code>. (The general-to-specific
order is string, <code>REAL</code>, <code>INTEGER</code>).

</UL>

<P>
<strong>C API Changes:</strong>

</P>

<UL>

<LI>

The old C API functions <code>mysql_drop_db()</code>, <code>mysql_create_db()</code>, and
<code>mysql_connect()</code> are no longer supported unless you compile
MySQL with <code>CFLAGS=-DUSE_OLD_FUNCTIONS</code>.  However, it is preferable
to change client programs to use the new 4.0 API instead.

<LI>

In the <code>MYSQL_FIELD</code> structure, <code>length</code> and <code>max_length</code> have
changed from <code>unsigned int</code> to <code>unsigned long</code>. This should not
cause any problems, except that they may generate warning messages when
used as arguments in the <code>printf()</code> class of functions.

<LI>

Multi-threaded clients should use <code>mysql_thread_init()</code> and
<code>mysql_thread_end()</code>. See section <A HREF="manual_MySQL_APIs.html#Threaded_clients">21.2.15  How to Make a Threaded Client</A>.

</UL>

<P>
<strong>Other Changes:</strong>

</P>

<UL>

<LI>

If you want to recompile the Perl <code>DBD::mysql</code> module, use a recent
version.  Version 2.9003 is recommended. Versions older than 1.2218 should
not be used because they use the deprecated <code>mysql_drop_db()</code> call.

</UL>



<H3><A NAME="Upgrading-from-3.22" HREF="manual_toc.html#Upgrading-from-3.22">2.10.4  Upgrading from Version 3.22 to 3.23</A></H3>

<P>
<A NAME="IDX298"></A>
<A NAME="IDX299"></A>

</P>
<P>
MySQL 3.22 and 3.21 clients will work without any problems with a MySQL
3.23 server.

</P>
<P>
When upgrading to MySQL 3.23 from an earlier version, note the following
changes:

</P>
<P>
<strong>Table Changes:</strong>

</P>

<UL>

<LI>

MySQL 3.23 supports tables of the new <code>MyISAM</code> type and the old
<code>ISAM</code> type.  By default, all new tables are created with type
<code>MyISAM</code> unless you start <code>mysqld</code> with the
<code>--default-table-type=isam</code> option.  You don't have to convert your old
<code>ISAM</code> tables to use them with MySQL 3.23.  You can convert an
<code>ISAM</code> table to <code>MyISAM</code> format with <code>ALTER TABLE <var>tbl_name</var>
TYPE=MyISAM</code> or the Perl script <code>mysql_convert_table_format</code>.

<LI>

All tables that use the <code>tis620</code> character set must be fixed
with <code>myisamchk -r</code> or <code>REPAIR TABLE</code>.

<LI>

If you are using the <code>german</code> character sort order for <code>ISAM</code>
tables, you must repair them with <code>isamchk -r</code>, because we have made
some changes in the sort order.

</UL>

<P>
<strong>Client Program Changes:</strong>

</P>

<UL>
<LI>

The MySQL client <code>mysql</code> is now by default started with the
<code>--no-named-commands (-g)</code> option. This option can be disabled with
<code>--enable-named-commands (-G)</code>. This may cause incompatibility problems in
some cases--for example, in SQL scripts that use named commands without a
semicolon.  Long format commands still work from the first line.

<LI>

If you want your <code>mysqldump</code> files to be compatible between
MySQL 3.22 and 3.23, you should not use the
<code>--opt</code> or <code>--all</code> option to <code>mysqldump</code>.

</UL>

<P>
<strong>SQL Changes:</strong>

</P>

<UL>
<LI>

If you do a <code>DROP DATABASE</code> on a symbolically linked database, both the
link and the original database are deleted.  This didn't happen in MySQL 3.22
because <code>configure</code> didn't detect the availability of the
<code>readlink()</code> system call.

<LI>

<code>OPTIMIZE TABLE</code> now works only for <code>MyISAM</code> tables.
For other table types, you can use <code>ALTER TABLE</code> to optimize the table.
During <code>OPTIMIZE TABLE</code>, the table is now locked to prevent it from being
used by other threads.

<LI>

Date functions that work on parts of dates (such as <code>MONTH()</code>) will now
return 0 for <code>0000-00-00</code> dates. In MySQL 3.22, these functions returned
<code>NULL</code>.

<LI>

The default return type of <code>IF()</code> now depends on both arguments,
not just the first one.

<LI>

<code>AUTO_INCREMENT</code> columns should not be used to store negative
numbers. The reason for this is that negative numbers caused problems
when wrapping from -1 to 0.  You should not store 0 in <code>AUTO_INCREMENT</code>
columns, either; <code>CHECK TABLE</code> will complain about 0 values because
they may change if you dump and restore the table.  <code>AUTO_INCREMENT</code>
for <code>MyISAM</code> tables is now handled at a lower level and is much
faster than before. In addition, for <code>MyISAM</code> tables, old numbers
are no longer reused, even if you delete rows from the table.

<LI>

<code>CASE</code>, <code>DELAYED</code>, <code>ELSE</code>, <code>END</code>, <code>FULLTEXT</code>,
<code>INNER</code>, <code>RIGHT</code>, <code>THEN</code>, and <code>WHEN</code> now are reserved words.

<LI>

<code>FLOAT(p)</code> now is a true floating-point type and not a value with a
fixed number of decimals.

<LI>

When declaring columns using a <code>DECIMAL(length,dec)</code> type, the
<code>length</code> argument no longer includes a place for the sign or the
decimal point.

<LI>

A <code>TIME</code> string must now be of one of the following formats:
<code>[[[DAYS] [H]H:]MM:]SS[.fraction]</code> or
<code>[[[[[H]H]H]H]MM]SS[.fraction]</code>.

<LI>

<code>LIKE</code> now compares strings using the same character comparison rules
as for the <code>=</code> operator.  If you require the old behavior, you can
compile MySQL with the <code>CXXFLAGS=-DLIKE_CMP_TOUPPER</code> flag.

<LI>

<code>REGEXP</code> now is case insensitive if neither of the strings is a binary
string.

<LI>

When you check or repair <code>MyISAM</code> (<tt>`.MYI'</tt>) tables, you should use
the <code>CHECK TABLE</code> statement or the <code>myisamchk</code> command. For
<code>ISAM</code> (<tt>`.ISM'</tt>) tables, use the <code>isamchk</code> command.

<LI>

Check all your calls to <code>DATE_FORMAT()</code> to make sure that there is a
<samp>`%'</samp> before each format character.
(MySQL 3.22 already allowed this syntax, but now <samp>`%'</samp> is required.)

<LI>

In MySQL 3.22, the output of <code>SELECT DISTINCT ...</code> was
almost always sorted.  In MySQL 3.23, you must use <code>GROUP BY</code> or
<code>ORDER BY</code> to obtain sorted output.

<LI>

<code>SUM()</code> now returns <code>NULL</code> instead of 0 if
there are no matching rows. This is required by standard SQL.

<LI>

An <code>AND</code> or <code>OR</code> with <code>NULL</code> values will now return
<code>NULL</code> instead of 0. This mostly affects queries that use <code>NOT</code>
on an <code>AND/OR</code> expression as <code>NOT NULL</code> = <code>NULL</code>.

<LI>

<code>LPAD()</code> and <code>RPAD()</code> now shorten the result string if it's longer
than the length argument.

</UL>

<P>
<strong>C API Changes:</strong>

</P>

<UL>
<LI>

<code>mysql_fetch_fields_direct()</code> now is a function instead of a macro.
It now returns a pointer to a <code>MYSQL_FIELD</code> instead of a
<code>MYSQL_FIELD</code>.

<LI>

<code>mysql_num_fields()</code> no longer can be used on a <code>MYSQL*</code> object (it's
now a function that takes a <code>MYSQL_RES*</code> value as an argument). With a
<code>MYSQL*</code> object, you now should use <code>mysql_field_count()</code> instead.

</UL>



<H3><A NAME="Upgrading-from-3.21" HREF="manual_toc.html#Upgrading-from-3.21">2.10.5  Upgrading from Version 3.21 to 3.22</A></H3>

<P>
<A NAME="IDX300"></A>
<A NAME="IDX301"></A>

</P>
<P>
Nothing that affects compatibility has changed between versions 3.21 and 3.22.
The only pitfall is that new tables that are created with <code>DATE</code> type
columns will use the new way to store the date. You can't access these new
columns from an old version of <code>mysqld</code>.

</P>
<P>
When upgrading to MySQL 3.23 from an earlier version, note the following
changes:

</P>

<UL>
<LI>

After installing MySQL Version 3.22, you should start the new server
and then run the <code>mysql_fix_privilege_tables</code> script. This will add the
new privileges that you need to use the <code>GRANT</code> command.  If you forget
this, you will get <code>Access denied</code> when you try to use <code>ALTER
TABLE</code>, <code>CREATE INDEX</code>, or <code>DROP INDEX</code>. The procedure for updating
the grant tables is described in section <A HREF="manual_Installing.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A>.

<LI>

The C API interface to <code>mysql_real_connect()</code> has changed.  If you have
an old client program that calls this function, you must pass a <code>0</code> for
the new <code>db</code> argument (or recode the client to send the <code>db</code>
element for faster connections).  You must also call <code>mysql_init()</code>
before calling <code>mysql_real_connect()</code>.  This change was done to allow
the new <code>mysql_options()</code> function to save options in the <code>MYSQL</code>
handler structure.

<LI>

The <code>mysqld</code> variable <code>key_buffer</code> has been renamed to
<code>key_buffer_size</code>, but you can still use the old name in your
startup files.

</UL>



<H3><A NAME="Upgrading-from-3.20" HREF="manual_toc.html#Upgrading-from-3.20">2.10.6  Upgrading from Version 3.20 to 3.21</A></H3>

<P>
<A NAME="IDX302"></A>

</P>
<P>
If you are running a version older than Version 3.20.28 and want to
switch to Version 3.21, you need to do the following:

</P>
<P>
You can start the <code>mysqld</code> Version 3.21 server with the
<code>--old-protocol</code> option to use it with clients from a Version 3.20
distribution.  In this case, the server uses the old pre-3.21
<code>password()</code> checking rather than the new method. Also, the new client
function <code>mysql_errno()</code> will not return any server error, only
<code>CR_UNKNOWN_ERROR</code>. The function does work for client errors.

</P>
<P>
If you are <em>not</em> using the <code>--old-protocol</code> option to
<code>mysqld</code>, you will need to make the following changes:

</P>

<UL>

<LI>

All client code must be recompiled. If you are using ODBC, you must get
the MyODBC 2.x driver.

<LI>

The <code>scripts/add_long_password</code> script must be run to convert the
<code>Password</code> field in the <code>mysql.user</code> table to <code>CHAR(16)</code>.

<LI>

All passwords must be reassigned in the <code>mysql.user</code> table to get 62-bit
rather than 31-bit passwords.

<LI>

The table format hasn't changed, so you don't have to convert any tables.

</UL>

<P>
MySQL 3.20.28 and above can handle the new <code>user</code> table
format without affecting clients. If you have a MySQL version earlier
than 3.20.28, passwords will no longer work with it if you convert the
<code>user</code> table. So to be safe, you should first upgrade to at least Version
3.20.28 and then upgrade to Version 3.21.

</P>
<P>
<A NAME="IDX303"></A>
The new client code works with a 3.20.x <code>mysqld</code> server, so
if you experience problems with 3.21.x, you can use the old 3.20.x server
without having to recompile the clients again.

</P>
<P>
If you are not using the <code>--old-protocol</code> option to <code>mysqld</code>,
old clients will be unable to connect and will issue the following error
message:

</P>

<PRE>
ERROR: Protocol mismatch. Server Version = 10 Client Version = 9
</PRE>

<P>
The Perl DBI interface also supports the old
<code>mysqlperl</code> interface.  The only change you have to make if you use
<code>mysqlperl</code> is to change the arguments to the <code>connect()</code> function.
The new arguments are: <code>host</code>, <code>database</code>, <code>user</code>,
and <code>password</code> (note that the <code>user</code> and <code>password</code> arguments
have changed places).

</P>
<P>
The following changes may affect queries in old applications:

</P>

<UL>

<LI>

<code>HAVING</code> must now be specified before any <code>ORDER BY</code> clause.

<LI>

The parameters to <code>LOCATE()</code> have been swapped.

<LI>

There are some new reserved words. The most noticeable are <code>DATE</code>,
<code>TIME</code>, and <code>TIMESTAMP</code>.

</UL>



<H3><A NAME="Upgrading-grant-tables" HREF="manual_toc.html#Upgrading-grant-tables">2.10.7  Upgrading the Grant Tables</A></H3>

<P>
<A NAME="IDX304"></A>
<A NAME="IDX305"></A>

</P>
<P>
Some releases introduce changes to the structure of the grant tables
(the tables in the <code>mysql</code> database)
to add new  privileges or features. To make sure that your grant tables
are current when you update to a new version of MySQL, you should update
your grant tables as well.

</P>
<P>
On Unix or Unix-like systems, update the grant tables by running the
<code>mysql_fix_privilege_tables</code> script:

</P>

<PRE>
shell&#62; mysql_fix_privilege_tables
</PRE>

<P>
You must run this script while the server is running. It attempts to
connect to the server running on the local host as <code>root</code>.
If your <code>root</code> account requires a password, indicate the password
on the command line.  For MySQL 4.1 and up, specify the password like this:

</P>

<PRE>
shell&#62; mysql_fix_privilege_tables --password=root_password
</PRE>

<P>
Prior to MySQL 4.1, specify the password like this:

</P>

<PRE>
shell&#62; mysql_fix_privilege_tables root_password
</PRE>

<P>
The <code>mysql_fix_privilege_tables</code> script performs any actions
necessary to convert your grant tables to the current format. You
might see some <code>Duplicate column name</code> warnings as it runs; you can
ignore them.

</P>
<P>
After running the script, stop the server and restart it.

</P>
<P>
On Windows systems, there isn't an easy way to update the grant tables
until MySQL 4.0.15.  From version 4.0.15 on, MySQL distributions include a
<tt>`mysql_fix_privilege_tables.sql'</tt> SQL script that you can run using
the <code>mysql</code> client.  If your MySQL installation is located at
<tt>`C:\mysql'</tt>, the commands look like this: 

</P>

<PRE>
C:\&#62; C:\mysql\bin\mysql -u root -p mysql
mysql&#62; SOURCE C:\mysql\scripts\mysql_fix_privilege_tables.sql
</PRE>

<P>
If your installation is located in some other directory, adjust the
pathnames appropriately.

</P>
<P>
The <code>mysql</code> command will prompt you for the <code>root</code> password; enter it
when prompted.

</P>
<P>
As with the Unix procedure, you might see some <code>Duplicate column name</code>
warnings as <code>mysql</code> processes the statements in the
<tt>`mysql_fix_privilege_tables.sql'</tt> script; you can ignore them.

</P>
<P>
After running the script, stop the server and restart it.

</P>
<P>
If you are upgrading to MySQL 5.0.1 or later, the grant table upgrade
procedure just described will add view-related columns for the
<code>CREATE VIEW</code> and <code>SHOW VIEW</code> privileges.  These privileges
exist at the global and database levels. Their initial values are assigned
as follows:

</P>

<UL>

<LI>

In MySQL 5.0.2 or later, <code>mysql_fix_privilege_tables</code>
copies the <code>Create_priv</code> value in the <code>user</code> table to the
<code>Create_view_priv</code> and <code>Show_view_priv</code> columns.

<LI>

In 5.0.1, the view-related privileges are not enabled for any accounts, so
you cannot immediately use <code>GRANT</code> to give them to accounts
that should have them. To deal with this, first connect to the server as
<code>root</code> and issue the following statements to give the privileges to
the <code>root</code> accounts manually with <code>UPDATE</code>:


<PRE>
mysql&#62; UPDATE mysql.user SET Show_view_priv = 'Y', Create_view_priv = 'Y'
    -&#62; WHERE User = 'root';
mysql&#62; FLUSH PRIVILEGES;
</PRE>

After this, <code>root</code> can use <code>GRANT</code> to give the view privileges
to other accounts. Note: You should issue the statements just shown,
<code>GRANT ALL</code> will not work at the global and database levels, because
<code>GRANT ALL</code> requires that you actually possess all privileges.

</UL>



<H3><A NAME="Upgrading-to-arch" HREF="manual_toc.html#Upgrading-to-arch">2.10.8  Copying MySQL Databases to Another Machine</A></H3>

<P>
<A NAME="IDX306"></A>
<A NAME="IDX307"></A>
<A NAME="IDX308"></A>

</P>
<P>
If you are using MySQL 3.23 or later, you can copy the <tt>`.frm'</tt>,
<tt>`.MYI'</tt>, and <tt>`.MYD'</tt> files for <code>MyISAM</code> tables between different
architectures that support the same floating-point format.  (MySQL takes care
of any byte-swapping issues.)
See section <A HREF="manual_Storage_engines.html#MyISAM_storage_engine">14.1  The <code>MyISAM</code> Storage Engine</A>.

</P>
<P>
The MySQL <code>ISAM</code> data and index files (<tt>`.ISD'</tt> and <tt>`*.ISM'</tt>,
respectively) are architecture dependent and in some cases operating
system dependent.  If you want to move your applications to another
machine that has a different architecture or operating system than your
current machine, you should not try to move a database by simply copying
the files to the other machine. Use <code>mysqldump</code> instead.

</P>
<P>
By default, <code>mysqldump</code> will create a file containing SQL statements.
You can then transfer the file to the other machine and feed it as input
to the <code>mysql</code> client.

</P>
<P>
Try <code>mysqldump --help</code> to see what options are available.
If you are moving the data to a newer version of MySQL, you should use
<code>mysqldump --opt</code> to take advantage of any optimizations that result
in a dump file that is smaller and can be processed faster.

</P>
<P>
The easiest (although not the fastest) way to move a database between two
machines is to run the following commands on the machine on which the
database is located:

</P>

<PRE>
shell&#62; mysqladmin -h '<var>other_hostname</var>' create <var>db_name</var>
shell&#62; mysqldump --opt <var>db_name</var> | mysql -h '<var>other_hostname</var>' <var>db_name</var>
</PRE>

<P>
If you want to copy a database from a remote machine over a slow network,
you can use:

</P>

<PRE>
shell&#62; mysqladmin create <var>db_name</var>
shell&#62; mysqldump -h '<var>other_hostname</var>' --opt --compress <var>db_name</var> | mysql <var>db_name</var>
</PRE>

<P>
You can also store the result in a file, then transfer the file to the
target machine and load the file into the database there.  For example,
you can dump a database to a file on the source machine like this:

</P>

<PRE>
shell&#62; mysqldump --quick <var>db_name</var> | gzip &#62; <var>db_name.contents</var>.gz
</PRE>

<P>
(The file created in this example is compressed.) Transfer the file
containing the database contents to the target machine and run these commands
there:

</P>

<PRE>
shell&#62; mysqladmin create <var>db_name</var>
shell&#62; gunzip &#60; <var>db_name.contents</var>.gz | mysql <var>db_name</var>
</PRE>

<P>
<A NAME="IDX309"></A>
<A NAME="IDX310"></A>
You can also use <code>mysqldump</code> and <code>mysqlimport</code> to transfer
the database.
For big tables, this is much faster than simply using <code>mysqldump</code>.
In the following commands, <code>DUMPDIR</code> represents the full pathname
of the directory you use to store the output from <code>mysqldump</code>.

</P>
<P>
First, create the directory for the output files and dump the database:

</P>

<PRE>
shell&#62; mkdir DUMPDIR
shell&#62; mysqldump --tab=DUMPDIR <var>db_name</var>
</PRE>

<P>
Then transfer the files in the <code>DUMPDIR</code> directory to some corresponding
directory on the target machine and load the files into MySQL
there:

</P>

<PRE>
shell&#62; mysqladmin create <var>db_name</var>           # create database
shell&#62; cat DUMPDIR/*.sql | mysql <var>db_name</var>   # create tables in database
shell&#62; mysqlimport <var>db_name</var> DUMPDIR/*.txt   # load data into tables
</PRE>

<P>
Also, don't forget to copy the <code>mysql</code> database because that is
where the <code>user</code>, <code>db</code>, and <code>host</code> grant tables are stored.
You might have to run commands as the MySQL <code>root</code> user on the new
machine until you have the <code>mysql</code> database in place.

</P>
<P>
After you import the <code>mysql</code> database on the new machine, execute
<code>mysqladmin flush-privileges</code> so that the server reloads the grant table
information.

</P>


<H2><A NAME="Downgrading" HREF="manual_toc.html#Downgrading">2.11  Downgrading MySQL</A></H2>

<P>
<A NAME="IDX311"></A>

</P>
<P>
This section describes what you should do if you are downgrading to an
older MySQL version in the unlikely case that the previous version worked
better than the new one.

</P>
<P>
If you are downgrading within the same release series (for example, from
4.0.20 to 4.0.19) the general rule is that you just have to install the
new binaries on top of the old ones. There is no need to do anything with
the databases.  As always, however, it's always a good idea to make a backup.

</P>
<P>
The following items form a checklist of things you should do whenever you
perform an downgrade:

</P>

<UL>
<LI>

Read the upgrading section for the release series from which you are
downgrading to be sure that it doesn't have any features you really need.
section <A HREF="manual_Installing.html#Upgrade">2.10  Upgrading MySQL</A>.

<LI>

If there is a downgrading section for that version, please read it, too!
</UL>

<P>
You can always move the MySQL format files and data files between different
versions on the same architecture as long as you stay within versions for
the same release series of MySQL. The current production release series is
4.1.

</P>
<P>
If you downgrade from one release series to another, there may be
incompatibilities in table storage formats. In this case, you can use
<code>mysqldump</code> to dump your tables before dowgnrading.  After
downgrading, reload the dump file using <code>mysql</code> or <code>mysqlimport</code>
to re-create your tables.  See section <A HREF="manual_Installing.html#Upgrading-to-arch">2.10.8  Copying MySQL Databases to Another Machine</A> for examples.

</P>
<P>
The normal symptom of a downward-incompatible table format change when you
downgrade is you can't open tables.  In that case, use the follwing procedure:

</P>

<OL>
<LI>

Stop the older MySQL server that you are trying to downgrade to.
<LI>

Restart the newer MySQL server you are trying to downgrade from.
<LI>

Dump any tables that were inaccessible to the older server by using
<code>mysqldump</code> to create a dump file.
<LI>

Stop the newer MySQL server and restart the older one.
<LI>

Reload the dump file into the older server. Your tables now should be
accessible.
</OL>



<H3><A NAME="Downgrading_to-4.0" HREF="manual_toc.html#Downgrading_to-4.0">2.11.1  Downgrading to 4.0</A></H3>

<P>
The table format in 4.1 changed to include more and new character set
information. Because of this, you must use <code>mysqldump</code> to dump any tables
you have created with the newer MySQL server.  For example, if all the tables
in a particular database need to be dumped to be reverted back to MySQL 4.0
format, use this command:

</P>

<PRE>
shell&#62; mysqldump --create-options --compatible=mysql40 <var>db_name</var> &#62; <var>dump_file</var>
</PRE>

<P>
Then stop the newer server, restart the older server, and read in the dump
file:

</P>

<PRE>
shell&#62; mysql <var>db_name</var> &#60; <var>dump_file</var>
</PRE>

<P>
If you used the <code>mysql_fix_privilege_tables</code> script to upgrade the
grant tables, you can either use the preceding method to convert them to back to
MySQL 4.0 or do the following in MySQL 4.1 (or above):

</P>

<PRE>
ALTER TABLE mysql.user CONVERT TO CHARACTER SET latin1 COLLATE latin1_swedish_ci;
ALTER TABLE mysql.db CONVERT TO CHARACTER SET latin1 COLLATE latin1_swedish_ci;
ALTER TABLE mysql.host CONVERT TO CHARACTER SET latin1 COLLATE latin1_swedish_ci;
ALTER TABLE mysql.tables_priv CONVERT TO CHARACTER SET latin1 COLLATE latin1_swedish_ci;
ALTER TABLE mysql.columns_priv CONVERT TO CHARACTER SET latin1 COLLATE latin1_swedish_ci;
ALTER TABLE mysql.func CONVERT TO CHARACTER SET latin1 COLLATE latin1_swedish_ci;
</PRE>



<H2><A NAME="Operating_System_Specific_Notes" HREF="manual_toc.html#Operating_System_Specific_Notes">2.12  Operating System-Specific Notes</A></H2>



<H3><A NAME="Linux" HREF="manual_toc.html#Linux">2.12.1  Linux Notes</A></H3>

<P>
This section discusses issues that have been found to occur on Linux.
The first few subsections describe general operating system-related issues,
problems that can occur when using binary or source distributions, and
post-installation issues. The remaining subsections discuss problems that occur
with Linux on specific platforms.

</P>
<P>
Note that most of these problems occur on older versions of Linux. If you are
running a recent version, you likely will see none of them.

</P>



<H4><A NAME="Linux-OS" HREF="manual_toc.html#Linux-OS">2.12.1.1  Linux Operating System Notes</A></H4>

<P>
MySQL needs at least Linux Version 2.0.

</P>
<P>
<strong>Warning:</strong>
We have seen some strange problems with Linux 2.2.14 and MySQL on SMP
systems.  We also have reports from some MySQL users that they have
encountered serious stability problems using MySQL with kernel 2.2.14.
If you are using this kernel, you should upgrade to 2.2.19 (or newer) or to
a 2.4 kernel.  If you have a multiple-CPU box, then you should seriously
consider using 2.4 because it will give you a significant speed boost.
Your system also will be more stable.

</P>

<P>
When using LinuxThreads, you will see a minimum of three <code>mysqld</code> processes
running.  These are in fact threads.  There will be one thread for the
LinuxThreads manager, one thread to handle connections, and one thread
to handle alarms and signals.

</P>



<H4><A NAME="Binary_notes-Linux" HREF="manual_toc.html#Binary_notes-Linux">2.12.1.2  Linux Binary Distribution Notes</A></H4>

<P>
<A NAME="IDX312"></A>
<A NAME="IDX313"></A>

</P>
<P>
The Linux-Intel binary and RPM releases of MySQL are configured
for the highest possible speed.  We are always trying to use the fastest
stable compiler available.

</P>
<P>
The binary release is linked with <code>-static</code>, which means you do not
normally need to worry about which version of the system libraries you
have. You need not install LinuxThreads, either.  A program linked with
<code>-static</code> is slightly larger than a dynamically linked program,
but also slightly faster (3-5%).  However, one problem with a statically
linked program is that you can't use user-defined functions (UDFs).
If you are going to write or use UDFs (this is something for C or C++
programmers only), you must compile MySQL yourself using dynamic linking.

</P>
<P>
A known issue with binary distributions is that on older Linux
systems that use <code>libc</code> (such as Red Hat 4.x or Slackware), you will get
some non-fatal problems with hostname resolution. If your system uses
<code>libc</code> rather than <code>glibc2</code>,
you probably will encounter some difficulties with hostname resolution and
<code>getpwnam()</code>. This happens because <code>glibc</code>
unfortunately depends on some external libraries to implement hostname
resolution and <code>getpwent()</code>, even when compiled with <code>-static</code>.
These problems manifest themselves in two ways:

</P>

<UL>
<LI>

You probably will see  the following error message when you run
<code>mysql_install_db</code>:


<PRE>
Sorry, the host '<var>xxxx</var>' could not be looked up
</PRE>

You can deal with this by executing
<code>mysql_install_db --force</code>, which will not execute the
<code>resolveip</code> test in <code>mysql_install_db</code>.  The downside is that
you can't use hostnames in the grant tables: Except for <code>localhost</code>,
you must use IP numbers instead.  If you are using an old version of MySQL
that doesn't support <code>--force</code>, you must manually remove the
<code>resolveip</code> test in <code>mysql_install</code> using an editor.

<LI>

You also may see
the following error when you try to run <code>mysqld</code> with the <code>--user</code>
option:


<PRE>
getpwnam: No such file or directory
</PRE>

To work around this, start <code>mysqld</code> by using
the <code>su</code> command rather than by specifying the <code>--user</code>
option. This causes the system itself to change the user ID of the
<code>mysqld</code> process so that <code>mysqld</code> need not do so.

</UL>

<P>
Another solution, which solves both problems, is to not use a binary
distribution.  Get a MySQL source distribution (in RPM or <code>tar.gz</code>
format) and install that instead.

</P>
<P>
On some Linux 2.2 versions, you may get the error <code>Resource
temporarily unavailable</code> when clients make a lot of new connections to
a <code>mysqld</code> server over TCP/IP.  The problem is that Linux has a
delay between the time that you close a TCP/IP socket and the time that
the system actually frees it.  There is room for only a finite number
of TCP/IP slots, so you will encounter the resource-unavailable error if
clients attempt too many new TCP/IP connections during a short time. For
example, you may see the error when you run the MySQL <tt>`test-connect'</tt>
benchmark over TCP/IP.

</P>
<P>
We have inquired about this problem a few times on different Linux mailing
lists but have never been able to find a suitable resolution.  The only
known ``fix'' is for the clients to use persistent connections, or,
if you are running the database server and clients on the same machine,
to use Unix socket file connections rather than TCP/IP connections.

</P>



<H4><A NAME="Source_notes-Linux" HREF="manual_toc.html#Source_notes-Linux">2.12.1.3  Linux Source Distribution Notes</A></H4>

<P>
<A NAME="IDX314"></A>
<A NAME="IDX315"></A>

</P>
<P>
The following notes regarding <code>glibc</code> apply only to the situation
when you build MySQL
yourself. If you are running Linux on an x86 machine, in most cases it is
much better for you to just use our binary. We link our binaries against
the best patched version of <code>glibc</code> we can come up with and with the
best compiler options, in an attempt to make it suitable for a high-load
server.  For a typical user, even for setups with a lot of concurrent
connections or tables exceeding the 2GB limit, our binary is
the best choice in most cases.  After reading the following text, if you
are in doubt about what to do, try our binary first to see whether it meets
your needs.  If you discover that it is not good enough, then
you may want to try your own build.  In that case, we would appreciate
a note about it so that we can build a better binary next time.

</P>
<P>
MySQL uses LinuxThreads on Linux.  If you are using an old
Linux version that doesn't have <code>glibc2</code>, you must install
LinuxThreads before trying to compile MySQL.   You can get
LinuxThreads at <a HREF="http://dev.mysql.com/downloads/os-linux.html">http://dev.mysql.com/downloads/os-linux.html</a>.

</P>
<P>
Note that <code>glibc</code> versions before and including Version 2.1.1 have
a fatal bug in <code>pthread_mutex_timedwait()</code> handling, which is used
when you issue <code>INSERT DELAYED</code> statements.  We recommend that you not use
<code>INSERT DELAYED</code> before upgrading <code>glibc</code>.

</P>
<P>
Note that Linux kernel and the LinuxThread library can by default
only have 1,024 threads.  If you plan to have more than 1,000 concurrent
connections, you will need to make some changes to LinuxThreads:

</P>

<UL>
<LI>

Increase <code>PTHREAD_THREADS_MAX</code> in
<tt>`sysdeps/unix/sysv/linux/bits/local_lim.h'</tt> to 4096 and decrease
<code>STACK_SIZE</code> in <tt>`linuxthreads/internals.h'</tt> to 256KB. The
paths are relative to the root of <code>glibc</code>. (Note that MySQL will
not be stable with around 600-1000 connections if <code>STACK_SIZE</code>
is the default of 2MB.)

<LI>

Recompile LinuxThreads to produce a new <tt>`libpthread.a'</tt> library,
and relink MySQL against it.

</UL>

<P>
The page <a HREF="http://www.volano.com/linuxnotes.html">http://www.volano.com/linuxnotes.html</a> contains additional
information about circumventing thread limits in LinuxThreads.

</P>
<P>
There is another issue that greatly hurts MySQL performance, especially on
SMP systems.  The mutex implementation in LinuxThreads in <code>glibc</code>
2.1 is very bad for programs with many threads that hold the mutex
only for a short time.  This produces a paradoxical result: If you link
MySQL against an unmodified LinuxThreads, removing processors from an
SMP actually improves MySQL performance in many cases.  We have made a
patch available for <code>glibc</code> 2.1.3 to correct this behavior
(<a HREF="http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch">http://www.mysql.com/Downloads/Linux/linuxthreads-2.1-patch</a>).

</P>
<P>
With <code>glibc</code> 2.2.2,
MySQL 3.23.36 will use the adaptive mutex, which is much
better than even the patched one in <code>glibc</code> 2.1.3. Be warned, however,
that under some conditions, the current mutex code in <code>glibc</code> 2.2.2
overspins, which hurts MySQL performance. The likelihood that this condition
will occur can be reduced by renicing the <code>mysqld</code> process to the highest
priority. We have also been able to correct the overspin behavior with
a patch, available at
<a HREF="http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch">http://www.mysql.com/Downloads/Linux/linuxthreads-2.2.2.patch</a>.
It combines the correction of overspin, maximum number of
threads, and stack spacing all in one. You will need to apply it in the
<code>linuxthreads</code> directory with
<code>patch -p0 &#60;/tmp/linuxthreads-2.2.2.patch</code>.
We hope it will be included in
some form in future releases of <code>glibc</code> 2.2. In any case, if
you link against <code>glibc</code> 2.2.2, you still need to correct
<code>STACK_SIZE</code> and <code>PTHREAD_THREADS_MAX</code>. We hope that the defaults
will be corrected to some more acceptable values for high-load
MySQL setup in the future, so that the commands needed to produce
your own build can be reduced to <code>./configure; make; make install</code>.

</P>
<P>
We recommend that you use these patches to build a special static
version of <code>libpthread.a</code> and use it only for statically linking
against MySQL. We know that the patches are safe for MySQL
and significantly improve its performance, but we cannot say anything
about other applications. If you link other applications that require
LinuxThreads against the
patched static version of the library, or build a patched shared version and
install it on your system, you do so at your own risk.

</P>
<P>
If you experience any strange problems during the installation of
MySQL, or with some common utilities hanging, it is very likely that
they are either library or compiler related. If this is the case, using our
binary will resolve them.

</P>
<P>
If you link your own MySQL client programs, you may see the following error at
runtime:

</P>

<PRE>
ld.so.1: fatal: libmysqlclient.so.#:
open failed: No such file or directory
</PRE>

<P>
This problem can be avoided by one of the following methods:

</P>

<UL>
<LI>

Link clients with the <code>-Wl,r/full/path/to/libmysqlclient.so</code>
flag rather than with <code>-Lpath</code>).

<LI>

Copy <code>libmysqclient.so</code> to <tt>`/usr/lib'</tt>.

<A NAME="IDX316"></A>
<A NAME="IDX317"></A>
<LI>

Add the pathname of the directory where <tt>`libmysqlclient.so'</tt> is located
to the <code>LD_RUN_PATH</code> environment variable before running your client.
</UL>

<P>
If you are using the Fujitsu compiler (<code>fcc/FCC</code>), you will have
some problems compiling MySQL because the Linux header files are very
<code>gcc</code> oriented.
The following <code>configure</code> line should work with <code>fcc/FCC</code>:

</P>

<PRE>
CC=fcc CFLAGS="-O -K fast -K lib -K omitfp -Kpreex -D_GNU_SOURCE \
    -DCONST=const -DNO_STRTOLL_PROTO" \
CXX=FCC CXXFLAGS="-O -K fast -K lib \
    -K omitfp -K preex --no_exceptions --no_rtti -D_GNU_SOURCE \
    -DCONST=const -Dalloca=__builtin_alloca -DNO_STRTOLL_PROTO \
    '-D_EXTERN_INLINE=static __inline'" \
./configure \
    --prefix=/usr/local/mysql --enable-assembler \
    --with-mysqld-ldflags=-all-static --disable-shared \
    --with-low-memory
</PRE>



<H4><A NAME="Linux-post-install" HREF="manual_toc.html#Linux-post-install">2.12.1.4  Linux Post-Installation Notes</A></H4>

<P>
<code>mysql.server</code> can be found in the <tt>`support-files'</tt> directory under
the MySQL installation directory or in a MySQL source tree.  You can install
it as <tt>`/etc/init.d/mysql'</tt> for automatic MySQL startup and shutdown.
See section <A HREF="manual_Installing.html#Automatic_start">2.9.2.2  Starting and Stopping MySQL Automatically</A>.

</P>
<P>
If MySQL can't open enough files or connections, it may be that
you haven't configured Linux to handle enough files.

</P>
<P>
In Linux 2.2 and onward, you can check the number of allocated
file handles as follows:

</P>

<PRE>
shell&#62; cat /proc/sys/fs/file-max
shell&#62; cat /proc/sys/fs/dquot-max
shell&#62; cat /proc/sys/fs/super-max
</PRE>

<P>
If you have more than 16MB of memory, you should add something like the
following to your init scripts (for example, <tt>`/etc/init.d/boot.local'</tt> on SuSE Linux):

</P>

<PRE>
echo 65536 &#62; /proc/sys/fs/file-max
echo 8192 &#62; /proc/sys/fs/dquot-max
echo 1024 &#62; /proc/sys/fs/super-max
</PRE>

<P>
You can also run the <code>echo</code> commands from the command line as <code>root</code>,
but these settings will be lost the next time your computer restarts.

</P>
<P>
Alternatively, you can set these parameters on startup by using the
<code>sysctl</code> tool, which is used by many Linux distributions (SuSE has
added it as well, beginning with SuSE Linux 8.0). Just put the following
values into a file named <tt>`/etc/sysctl.conf'</tt>:

</P>

<PRE>
# Increase some values for MySQL
fs.file-max = 65536
fs.dquot-max = 8192
fs.super-max = 1024
</PRE>

<P>
You should also add the following to <tt>`/etc/my.cnf'</tt>:

</P>

<PRE>
[mysqld_safe]
open-files-limit=8192
</PRE>

<P>
This should allow the server a limit of 8,192 for the combined number of
connections and open files.

</P>
<P>
The <code>STACK_SIZE</code> constant in LinuxThreads controls the spacing of thread
stacks in the address space.  It needs to be large enough so that there will
be plenty of room for each individual thread stack, but small enough
to keep the stack of some threads from running into the global <code>mysqld</code>
data.  Unfortunately, as we have experimentally discovered, the Linux
implementation of <code>mmap()</code> will successfully unmap an already mapped
region if you ask it to map out an address already in use, zeroing out the data
on the entire page instead of returning an error.  So, the safety of
<code>mysqld</code> or any other threaded application depends on ``gentlemanly''
behavior of the code that creates threads.  The user must take measures to
make sure that the number of running threads at any time is sufficiently low for
thread stacks to stay away from the global heap.  With <code>mysqld</code>, you
should enforce this behavior by setting a reasonable value for
the <code>max_connections</code> variable.

</P>
<P>
If you build MySQL yourself, you can patch LinuxThreads for better stack use.
See section <A HREF="manual_Installing.html#Source_notes-Linux">2.12.1.3  Linux Source Distribution Notes</A>.
If you do not want to patch
LinuxThreads, you should set <code>max_connections</code> to a value no higher
than 500.  It should be even less if you have a large key buffer,  large
heap tables, or some other things that make <code>mysqld</code> allocate a lot
of memory, or if you are running a 2.2 kernel with a 2GB patch. If you are
using our binary or RPM version 3.23.25 or later, you can safely set
<code>max_connections</code> at 1500, assuming no large key buffer or heap tables
with lots of data.  The more you reduce <code>STACK_SIZE</code> in LinuxThreads
the more threads you can safely create.  We recommend values between
128KB and 256KB.

</P>
<P>
If you use a lot of concurrent connections, you may suffer from a ``feature''
in the 2.2 kernel that attempts to prevent fork bomb attacks by penalizing
a process for forking or cloning a child.  This causes MySQL
not to scale well as you increase the number of concurrent clients.  On
single-CPU systems, we have seen this manifested as very slow thread
creation: It may take a long time to connect to MySQL
(as long as one minute), and it may take just as long to shut it down.  On
multiple-CPU systems, we have observed a gradual drop in query speed as
the number of clients increases.  In the process of trying to find a
solution, we have received a kernel patch from one of our users who
claimed it made a lot of difference for his site.  The patch is available at
<a HREF="http://www.mysql.com/Downloads/Patches/linux-fork.patch">http://www.mysql.com/Downloads/Patches/linux-fork.patch</a>. We have
now done rather extensive testing of this patch on both development and
production systems.  It has significantly
improved MySQL performance without causing any problems and we now
recommend it to our users who still run high-load servers on
2.2 kernels.

</P>
<P>
This issue has been fixed in the 2.4 kernel, so if you are not satisfied
with the current performance of your system, rather than patching
your 2.2 kernel, it might be easier to upgrade to 2.4. On SMP systems,
upgrading also will give you a nice SMP boost in addition to fixing the
fairness bug.

</P>
<P>
We have tested MySQL on the 2.4 kernel on a two-CPU machine and found MySQL
scales <em>much</em> better. There was virtually no slowdown on query
throughput all the way up to 1,000 clients, and the MySQL scaling factor
(computed as the ratio of maximum throughput to the throughput for one
client) was 180%.  We have observed similar results on a four-CPU system:
Virtually no slowdown as the number of clients was increased up to 1,000,
and a 300% scaling factor. Based on these results, for a high-load SMP
server using a 2.2 kernel, we definitely recommend upgrading to the 2.4
kernel at this point.

</P>
<P>
We have discovered that it is essential to run the <code>mysqld</code> process
with the highest possible priority on the 2.4 kernel to achieve maximum
performance.  This can be done by adding a <code>renice -20 $$</code> command
to <code>mysqld_safe</code>. In our testing on a four-CPU machine, increasing
the priority resulted in a 60% throughput increase with 400 clients.

</P>
<P>
We are currently also trying to collect more information on how well
MySQL performs with a 2.4 kernel on four-way and eight-way systems. If you have
access such a system and have done some benchmarks, please send an email
message to <a HREF="mailto:benchmarks@mysql.com">benchmarks@mysql.com</a> with the results. We will review
them for inclusion in the manual.

</P>
<P>
If you see a dead <code>mysqld</code> server process with <code>ps</code>, this usually
means that you have found a bug in MySQL or you have a corrupted
table. See section <A HREF="manual_Problems.html#Crashing">A.4.2  What to Do If MySQL Keeps Crashing</A>.

</P>
<P>
To get a core dump on Linux if <code>mysqld</code> dies with a <code>SIGSEGV</code> signal,
you can start <code>mysqld</code> with the <code>--core-file</code> option.  Note
that you also probably need to raise the core file size by adding
<code>ulimit -c 1000000</code> to <code>mysqld_safe</code> or starting
<code>mysqld_safe</code> with <code>--core-file-size=1000000</code>.
See section <A HREF="manual_MySQL_Database_Administration.html#mysqld_safe">5.1.3  The <code>mysqld_safe</code> Server Startup Script</A>.

</P>



<H4><A NAME="Linux-x86" HREF="manual_toc.html#Linux-x86">2.12.1.5  Linux x86 Notes</A></H4>

<P>
MySQL requires <code>libc</code> Version 5.4.12 or newer. It's known to
work with <code>libc</code> 5.4.46.  <code>glibc</code> Version 2.0.6 and later should
also work. There have been some problems with the <code>glibc</code> RPMs from
Red Hat, so if you have problems, check whether there are any updates.
The <code>glibc</code> 2.0.7-19 and 2.0.7-29 RPMs are known to work.

</P>
<P>
If you are using Red Hat 8.0 or a new <code>glibc</code> 2.2.x library, you may see
<code>mysqld</code> die in <code>gethostbyaddr()</code>. This happens because the new
<code>glibc</code> library requires a stack size greater than 128KB for this call.
To fix the problem, start <code>mysqld</code> with the <code>--thread-stack=192K</code>
option.  (Use <code>-O thread_stack=192K</code> before MySQL 4.)
This stack size is now the default on MySQL 4.0.10 and above, so you should
not see the problem.

</P>
<P>
If you are using <code>gcc</code> 3.0 and above to compile MySQL, you must install
the <code>libstdc++v3</code> library before compiling MySQL; if you don't do
this, you will get an error about a missing <code>__cxa_pure_virtual</code>
symbol during linking.

</P>
<P>
On some older Linux distributions, <code>configure</code> may produce an error
like this:

</P>

<PRE>
Syntax error in sched.h. Change _P to __P in the
/usr/include/sched.h file.
See the Installation chapter in the Reference Manual.
</PRE>

<P>
Just do what the error message says. Add an extra underscore to the
<code>_P</code> macro name that has only one underscore, then try again.

</P>
<P>
You may get some warnings when compiling. Those shown here can be ignored:

</P>

<PRE>
mysqld.cc -o objs-thread/mysqld.o
mysqld.cc: In function `void init_signals()':
mysqld.cc:315: warning: assignment of negative value `-1' to
`long unsigned int'
mysqld.cc: In function `void * signal_hand(void *)':
mysqld.cc:346: warning: assignment of negative value `-1' to
`long unsigned int'
</PRE>

<P>
If <code>mysqld</code> always dumps core when it starts, the problem may be that
you have an old <tt>`/lib/libc.a'</tt>.  Try renaming it, then remove
<tt>`sql/mysqld'</tt> and do a new <code>make install</code> and try again.  This
problem has been reported on some Slackware installations.

</P>
<P>
If you get the following error when linking <code>mysqld</code>,
it means that your <tt>`libg++.a'</tt> is not installed correctly:

</P>

<PRE>
/usr/lib/libc.a(putc.o): In function `_IO_putc':
putc.o(.text+0x0): multiple definition of `_IO_putc'
</PRE>

<P>
You can avoid using <tt>`libg++.a'</tt> by running <code>configure</code> like this:

</P>

<PRE>
shell&#62; CXX=gcc ./configure
</PRE>

<P>
If <code>mysqld</code> crashes immediately and you are running Red Hat Version 5.0
with a version of <code>glibc</code> older than 2.0.7-5, you should make sure that
you have installed all <code>glibc</code> patches.  There is a lot of information
about this in the MySQL mail archives, available online at
<a HREF="http://lists.mysql.com/">http://lists.mysql.com/</a>.

</P>



<H4><A NAME="Linux-SPARC" HREF="manual_toc.html#Linux-SPARC">2.12.1.6  Linux SPARC Notes</A></H4>

<P>
In some implementations, <code>readdir_r()</code> is broken.  The symptom is
that the <code>SHOW DATABASES</code> statement always returns an empty set.
This can be fixed by removing <code>HAVE_READDIR_R</code> from <tt>`config.h'</tt>
after configuring and before compiling.

</P>



<H4><A NAME="Linux-Alpha" HREF="manual_toc.html#Linux-Alpha">2.12.1.7  Linux Alpha Notes</A></H4>

<P>
MySQL 3.23.12 is the first MySQL version that is
tested on Linux-Alpha.  If you plan to use MySQL on Linux-Alpha,
you should ensure that you have this version or newer.

</P>
<P>
We have tested MySQL on Alpha with our benchmarks and test suite,
and it appears to work nicely. 

</P>
<P>
We currently build the MySQL binary packages on SuSE Linux 7.0 for AXP,
kernel 2.4.4-SMP, Compaq C compiler (V6.2-505) and Compaq C++ compiler
(V6.3-006) on a Compaq DS20 machine with an Alpha EV6 processor.

</P>
<P>
You can find the preceding compilers at
<a HREF="http://www.support.compaq.com/alpha-tools/">http://www.support.compaq.com/alpha-tools/</a>.  By using these compilers
rather than <code>gcc</code>, we get about 9-14% better MySQL performance.

</P>
<P>
Note that until MySQL version 3.23.52 and 4.0.2, we optimized the binary for
the current CPU only (by using the <code>-fast</code> compile option). This means
that for older versions, you can use our Alpha binaries only if you have an
Alpha EV6 processor.

</P>
<P>
For all following releases, we added the <code>-arch generic</code> flag
to our compile options, which makes sure that the binary runs on all Alpha
processors. We also compile statically to avoid library problems.
The <code>configure</code> command looks like this:

</P>

<PRE>
CC=ccc CFLAGS="-fast -arch generic" CXX=cxx \
CXXFLAGS="-fast -arch generic -noexceptions -nortti" \
./configure --prefix=/usr/local/mysql --disable-shared \
    --with-extra-charsets=complex --enable-thread-safe-client \
    --with-mysqld-ldflags=-non_shared --with-client-ldflags=-non_shared
</PRE>

<P>
If you want to use <code>egcs</code>, the following <code>configure</code> line worked
for us:

</P>

<PRE>
CFLAGS="-O3 -fomit-frame-pointer" CXX=gcc \
CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors \
    -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --disable-shared
</PRE>

<P>
Some known problems when running MySQL on Linux-Alpha:

</P>

<UL>
<LI>

Debugging threaded applications like MySQL will not work with
<code>gdb 4.18</code>.  You should use <code>gdb</code> 5.1 instead.

<LI>

If you try linking <code>mysqld</code> statically when using <code>gcc</code>, the
resulting image will dump core at startup time.  In other words, <em>do not</em>
use <code>--with-mysqld-ldflags=-all-static</code> with <code>gcc</code>.
</UL>



<H4><A NAME="Linux-PowerPC" HREF="manual_toc.html#Linux-PowerPC">2.12.1.8  Linux PowerPC Notes</A></H4>

<P>
MySQL should work on MkLinux with the newest <code>glibc</code> package
(tested with <code>glibc</code> 2.0.7).

</P>



<H4><A NAME="Linux-MIPS" HREF="manual_toc.html#Linux-MIPS">2.12.1.9  Linux MIPS Notes</A></H4>

<P>
To get MySQL to work on Qube2 (Linux Mips), you need the
newest <code>glibc</code> libraries. <code>glibc-2.0.7-29C2</code> is known to
work.  You must also use the <code>egcs</code> C++ compiler
(<code>egcs</code> 1.0.2-9, <code>gcc</code> 2.95.2 or newer).

</P>



<H4><A NAME="Linux-IA-64" HREF="manual_toc.html#Linux-IA-64">2.12.1.10  Linux IA-64 Notes</A></H4>

<P>
To get MySQL to compile on Linux IA-64, we use the following <code>configure</code>
command for building with <code>gcc</code> 2.96:

</P>

<PRE>
CC=gcc \
CFLAGS="-O3 -fno-omit-frame-pointer" \
CXX=gcc \
CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors \
    -fno-exceptions -fno-rtti" \
    ./configure --prefix=/usr/local/mysql \
    "--with-comment=Official MySQL binary" \
    --with-extra-charsets=complex
</PRE>

<P>
On IA-64, the MySQL client binaries use shared libraries. This means
that if you install our binary distribution at a location other than
<tt>`/usr/local/mysql'</tt>, you need to add the path of the directory
where you have <tt>`libmysqlclient.so'</tt> installed either to the
<tt>`/etc/ld.so.conf'</tt> file or to the value of your <code>LD_LIBRARY_PATH</code>
environment variable.

</P>
<P>
See section <A HREF="manual_Problems.html#Link_errors">A.3.1  Problems Linking to the MySQL Client Library</A>.

</P>



<H3><A NAME="Mac_OS_X" HREF="manual_toc.html#Mac_OS_X">2.12.2  Mac OS X Notes</A></H3>

<P>
On Mac OS X, <code>tar</code> cannot handle long filenames. If you need to unpack a
<tt>`.tar.gz'</tt> distribution, use <code>gnutar</code> instead.

</P>



<H4><A NAME="Mac_OS_X_10.x" HREF="manual_toc.html#Mac_OS_X_10.x">2.12.2.1  Mac OS X 10.x (Darwin)</A></H4>

<P>
MySQL should work without any problems on Mac OS X 10.x 
(Darwin).

</P>
<P>
Our binary for Mac OS X is compiled on Darwin 6.3 with the following
<code>configure</code> line:

</P>

<PRE>
CC=gcc CFLAGS="-O3 -fno-omit-frame-pointer" CXX=gcc \
CXXFLAGS="-O3 -fno-omit-frame-pointer -felide-constructors \
    -fno-exceptions -fno-rtti" \
    ./configure --prefix=/usr/local/mysql \
    --with-extra-charsets=complex --enable-thread-safe-client \
    --enable-local-infile --disable-shared
</PRE>

<P>
See section <A HREF="manual_Installing.html#Mac_OS_X_installation">2.5  Installing MySQL on Mac OS X</A>.

</P>


<H4><A NAME="Mac_OS_X_Server" HREF="manual_toc.html#Mac_OS_X_Server">2.12.2.2  Mac OS X Server 1.2 (Rhapsody)</A></H4>

<P>
For current versions of Mac OS X Server, no operating system changes are
necessary before compiling MySQL.  Compiling for the Server platform is
the same as for the client version of Mac OS X. (However, note that MySQL
comes preinstalled on Mac OS X Server, so you need not build it yourself.)

</P>
<P>
For older versions (Mac OS X Server 1.2, a.k.a. Rhapsody), you must
first install a pthread package before trying to configure MySQL.

</P>

<P>
See section <A HREF="manual_Installing.html#Mac_OS_X_installation">2.5  Installing MySQL on Mac OS X</A>.

</P>



<H3><A NAME="Solaris" HREF="manual_toc.html#Solaris">2.12.3  Solaris Notes</A></H3>

<P>
<A NAME="IDX318"></A>
<A NAME="IDX319"></A>
<A NAME="IDX320"></A>
<A NAME="IDX321"></A>
<A NAME="IDX322"></A>

</P>
<P>
On Solaris, you may run into trouble even before you get the MySQL
distribution unpacked!  Solaris <code>tar</code> can't handle long filenames, so
you may see an error like this when you unpack MySQL:

</P>

<PRE>
x mysql-3.22.12-beta/bench/Results/ATIS-mysql_odbc-NT_4.0-cmp-db2,
informix,ms-sql,mysql,oracle,solid,sybase, 0 bytes, 0 tape blocks
tar: directory checksum error
</PRE>

<P>
In this case, you must use GNU <code>tar</code> (<code>gtar</code>) to unpack the
distribution.  You can find a precompiled copy for Solaris at
<a HREF="http://dev.mysql.com/downloads/os-solaris.html">http://dev.mysql.com/downloads/os-solaris.html</a>.

</P>
<P>
Sun native threads work only on Solaris 2.5 and higher.  For Version 2.4 and
earlier, MySQL automatically uses MIT-pthreads.
See section <A HREF="manual_Installing.html#MIT-pthreads">2.8.5  MIT-pthreads Notes</A>.

</P>
<P>
If you get the following error from <code>configure</code>,
it means that you have something wrong with your compiler installation:

</P>

<PRE>
checking for restartable system calls... configure: error can not
run test programs while cross compiling
</PRE>

<P>
In this case, you should upgrade your compiler to a newer version.  You may
also be able to solve this problem by inserting the following row into the
<tt>`config.cache'</tt> file:

</P>

<PRE>
ac_cv_sys_restartable_syscalls=${ac_cv_sys_restartable_syscalls='no'}
</PRE>

<P>
If you are using Solaris on a SPARC, the recommended compiler is
<code>gcc</code> 2.95.2 or 3.2. You can find this at <a HREF="http://gcc.gnu.org/">http://gcc.gnu.org/</a>.
Note that <code>egcs</code> 1.1.1 and <code>gcc</code> 2.8.1 don't work reliably on
SPARC!

</P>
<P>
The recommended <code>configure</code> line when using <code>gcc</code> 2.95.2 is:

</P>

<PRE>
CC=gcc CFLAGS="-O3" \
CXX=gcc CXXFLAGS="-O3 -felide-constructors -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --with-low-memory \
    --enable-assembler
</PRE>

<P>
If you have an UltraSPARC system, you can get 4% better performance by adding
<code>-mcpu=v8 -Wa,-xarch=v8plusa</code> to the <code>CFLAGS</code> and <code>CXXFLAGS</code>
environment variables.

</P>
<P>
If you have Sun's Forte 5.0 (or newer) compiler, you can
run <code>configure</code> like this:

</P>

<PRE>
CC=cc CFLAGS="-Xa -fast -native -xstrconst -mt" \
CXX=CC CXXFLAGS="-noex -mt" \
./configure --prefix=/usr/local/mysql --enable-assembler
</PRE>

<P>
To create a 64-bit binary with Sun's Forte compiler, use the
following configuration options:

</P>

<PRE>
CC=cc CFLAGS="-Xa -fast -native -xstrconst -mt -xarch=v9" \
CXX=CC CXXFLAGS="-noex -mt -xarch=v9" ASFLAGS="-xarch=v9" \
./configure --prefix=/usr/local/mysql --enable-assembler
</PRE>

<P>
To create a 64-bit Solaris binary using <code>gcc</code>, add <code>-m64</code> to
<code>CFLAGS</code> and <code>CXXFLAGS</code> and remove <code>--enable-assembler</code> from
the <code>configure</code> line. This works only with MySQL
4.0 and up; MySQL 3.23 does not include the required modifications to
support this.

</P>
<P>
In the MySQL benchmarks, we got a 4% speedup on an UltraSPARC when using
Forte 5.0 in 32-bit mode compared to using <code>gcc</code> 3.2 with the <code>-mcpu</code>
flag.

</P>
<P>
If you create a 64-bit <code>mysqld</code> binary, it is 4% slower than the 32-bit
binary, but can handle more threads and memory.

</P>
<P>
If you get a problem with <code>fdatasync</code> or <code>sched_yield</code>,
you can fix this by adding <code>LIBS=-lrt</code> to the <code>configure</code> line

</P>
<P>
For compilers older than WorkShop 5.3, you might have to edit the
<code>configure</code> script. Change this line:

</P>

<PRE>
#if !defined(__STDC__) || __STDC__ != 1
</PRE>

<P>
To this:

</P>

<PRE>
#if !defined(__STDC__)
</PRE>

<P>
If you turn on <code>__STDC__</code> with the <code>-Xc</code> option, the Sun compiler
can't compile with the Solaris <tt>`pthread.h'</tt> header file.  This is a Sun
bug (broken compiler or broken include file).

</P>
<P>
If <code>mysqld</code> issues the following error message when you run it, you have
tried to compile MySQL with the Sun compiler without enabling the <code>-mt</code>
multi-thread option:

</P>

<PRE>
libc internal error: _rmutex_unlock: rmutex not held
</PRE>

<P>
Add <code>-mt</code> to <code>CFLAGS</code> and <code>CXXFLAGS</code> and recompile.

</P>
<P>
If you are using the SFW version of <code>gcc</code> (which comes with Solaris 8),
you must add <tt>`/opt/sfw/lib'</tt> to the environment variable
<code>LD_LIBRARY_PATH</code> before running <code>configure</code>.

</P>
<P>
If you are using the <code>gcc</code> available from <code>sunfreeware.com</code>, you may
have many problems.  To avoid this, you should recompile <code>gcc</code> and GNU
<code>binutils</code> on the machine where you will be running them.

</P>
<P>
If you get the following error when compiling MySQL with <code>gcc</code>,
it means that your <code>gcc</code> is not configured for your version of Solaris:

</P>

<PRE>
shell&#62; gcc -O3 -g -O2 -DDBUG_OFF  -o thr_alarm ...
./thr_alarm.c: In function `signal_hand':
./thr_alarm.c:556: too many arguments to function `sigwait'
</PRE>

<P>
The proper thing to do in this case is to get the newest version of
<code>gcc</code> and compile it with your current <code>gcc</code> compiler.  At
least for Solaris 2.5, almost all binary versions of <code>gcc</code> have
old, unusable include files that will break all programs that use
threads, and possibly other programs!

</P>
<P>
Solaris doesn't provide static versions of all system libraries
(<code>libpthreads</code> and <code>libdl</code>), so you can't compile MySQL
with <code>--static</code>.  If you try to do so, you will get one of the following
errors:

</P>

<PRE>
ld: fatal: library -ldl: not found
undefined reference to `dlopen'
cannot find -lrt
</PRE>

<P>
If you link your own MySQL client programs, you may see the following error at
runtime:

</P>

<PRE>
ld.so.1: fatal: libmysqlclient.so.#:
open failed: No such file or directory
</PRE>

<P>
This problem can be avoided by one of the following methods:

</P>

<UL>
<LI>

Link clients with the <code>-Wl,r/full/path/to/libmysqlclient.so</code>
flag rather than with <code>-Lpath</code>).

<LI>

Copy <code>libmysqclient.so</code> to <tt>`/usr/lib'</tt>.

<A NAME="IDX323"></A>
<A NAME="IDX324"></A>
<LI>

Add the pathname of the directory where <tt>`libmysqlclient.so'</tt> is located
to the <code>LD_RUN_PATH</code> environment variable before running your client.
</UL>

<P>
If you have problems with <code>configure</code> trying to link with <code>-lz</code> when
you don't have <code>zlib</code> installed, you have two options:

</P>

<UL>
<LI>

If you want to be able to use the compressed communication protocol,
you need to get and install <code>zlib</code> from <code>ftp.gnu.org</code>.

<LI>

Run <code>configure</code> with the <code>--with-named-z-libs=no</code> option when
building MySQL.
</UL>

<P>
If you are using <code>gcc</code> and have problems with loading user-defined
functions (UDFs) into MySQL, try adding <code>-lgcc</code> to the link line
for the UDF.

</P>
<P>
If you would like MySQL to start automatically, you can copy
<tt>`support-files/mysql.server'</tt> to <tt>`/etc/init.d'</tt> and create a
symbolic link to it named <tt>`/etc/rc3.d/S99mysql.server'</tt>.

</P>
<P>
If too many processes try to connect very rapidly to <code>mysqld</code>, you will
see this error in the MySQL log:

</P>

<PRE>
Error in accept: Protocol error
</PRE>

<P>
You might try starting the server with the <code>--back_log=50</code>
option as a workaround for this.  (Use <code>-O back_log=50</code> before MySQL 4.)

</P>
<P>
Solaris doesn't support core files for <code>setuid()</code> applications, so
you can't get a core file from <code>mysqld</code> if you are using the
<code>--user</code> option.

</P>



<H4><A NAME="Solaris_2.7" HREF="manual_toc.html#Solaris_2.7">2.12.3.1  Solaris 2.7/2.8 Notes</A></H4>

<P>
Normally, you can use a Solaris 2.6 binary on Solaris 2.7 and 2.8.  Most
of the Solaris 2.6 issues also apply for Solaris 2.7 and 2.8.

</P>
<P>
MySQL 3.23.4 and above should be able to detect new versions of
Solaris automatically and enable workarounds for the following problems.

</P>
<P>
Solaris 2.7 / 2.8 has some bugs in the include files.  You may see the
following error when you use <code>gcc</code>:

</P>

<PRE>
/usr/include/widec.h:42: warning: `getwc' redefined
/usr/include/wchar.h:326: warning: this is the location of the previous
definition
</PRE>

<P>
If this occurs, you can fix the problem by copying
<code>/usr/include/widec.h</code> to
<code>.../lib/gcc-lib/os/gcc-version/include</code> and changing line 41 from this:

</P>

<PRE>
#if     !defined(lint) &#38;&#38; !defined(__lint)
</PRE>

<P>
To this:

</P>

<PRE>
#if     !defined(lint) &#38;&#38; !defined(__lint) &#38;&#38; !defined(getwc)
</PRE>

<P>
Alternatively, you can edit <tt>`/usr/include/widec.h'</tt> directly.  Either
way, after you make the fix, you should remove <tt>`config.cache'</tt> and run
<code>configure</code> again.

</P>
<P>
If you get the following errors when you run <code>make</code>, it's because
<code>configure</code> didn't detect the <tt>`curses.h'</tt> file (probably
because of the error in <tt>`/usr/include/widec.h'</tt>):

</P>

<PRE>
In file included from mysql.cc:50:
/usr/include/term.h:1060: syntax error before `,'
/usr/include/term.h:1081: syntax error before `;'
</PRE>

<P>
The solution to this problem is to do one of the following:

</P>

<UL>
<LI>

Configure with <code>CFLAGS=-DHAVE_CURSES_H CXXFLAGS=-DHAVE_CURSES_H ./configure</code>.

<LI>

Edit <tt>`/usr/include/widec.h'</tt> as indicated in the preceding discussion
and re-run <code>configure</code>.

<LI>

Remove the <code>#define HAVE_TERM</code> line from the <tt>`config.h'</tt> file and
run <code>make</code> again.
</UL>

<P>
If your linker can't find <code>-lz</code> when linking
client programs, the problem is probably that your <tt>`libz.so'</tt> file is
installed in <tt>`/usr/local/lib'</tt>.  You can fix this problem by one of the
following methods:

</P>

<UL>
<LI>

Add <tt>`/usr/local/lib'</tt> to <code>LD_LIBRARY_PATH</code>.

<LI>

Add a link to <tt>`libz.so'</tt> from <tt>`/lib'</tt>.

<LI>

If you are using Solaris 8, you can install the optional <code>zlib</code> from your
Solaris 8 CD distribution.

<LI>

Run <code>configure</code> with the <code>--with-named-z-libs=no</code> option when
building MySQL.
</UL>



<H4><A NAME="Solaris_x86" HREF="manual_toc.html#Solaris_x86">2.12.3.2  Solaris x86 Notes</A></H4>

<P>
On Solaris 8 on x86, <code>mysqld</code> will dump core if you remove the
debug symbols using <code>strip</code>.

</P>
<P>
If you are using <code>gcc</code> or <code>egcs</code> on Solaris x86 and you
experience problems with core dumps under load, you should use the
following <code>configure</code> command:

</P>

<PRE>
CC=gcc CFLAGS="-O3 -fomit-frame-pointer -DHAVE_CURSES_H" \
CXX=gcc \
CXXFLAGS="-O3 -fomit-frame-pointer -felide-constructors \
    -fno-exceptions -fno-rtti -DHAVE_CURSES_H" \
./configure --prefix=/usr/local/mysql
</PRE>

<P>
This will avoid problems with the <code>libstdc++</code> library and with C++
exceptions.

</P>
<P>
If this doesn't help, you should compile a debug version and run
it with a trace file or under <code>gdb</code>.
See section <A HREF="manual_Porting.html#Using_gdb_on_mysqld">E.1.3  Debugging <code>mysqld</code> under <code>gdb</code></A>.

</P>



<H3><A NAME="BSD_Notes" HREF="manual_toc.html#BSD_Notes">2.12.4  BSD Notes</A></H3>

<P>
This section provides information about using MySQL on variants of BSD Unix.

</P>



<H4><A NAME="FreeBSD" HREF="manual_toc.html#FreeBSD">2.12.4.1  FreeBSD Notes</A></H4>

<P>
FreeBSD 4.x or newer is recommended for running MySQL, because the thread
package is much more integrated.
To get a secure and stable system, you should use only FreeBSD kernels
that are marked <code>-RELEASE</code>.

</P>
<P>
The easiest (and preferred) way to install MySQL is to use the
<code>mysql-server</code> and <code>mysql-client</code> ports available at
<a HREF="http://www.freebsd.org/">http://www.freebsd.org/</a>.
Using these ports gives you the following benefits:

</P>

<UL>
<LI>

A working MySQL with all optimizations enabled that are known to work on your
version of FreeBSD.

<LI>

Automatic configuration and build.

<LI>

Startup scripts installed in <tt>`/usr/local/etc/rc.d'</tt>.

<LI>

The ability to use <code>pkg_info -L</code> to see which files are installed.

<LI>

The ability to use <code>pkg_delete</code> to remove MySQL if you no longer want it
on your machine.
</UL>

<P>
It is recommended you use MIT-pthreads on FreeBSD 2.x, and native threads on
Versions 3 and up. It is possible to run with native threads on some late
2.2.x versions, but you may encounter problems shutting down <code>mysqld</code>.

</P>
<P>
Unfortunately, certain function calls on FreeBSD are not yet fully thread-safe.
Most notably, this includes the <code>gethostbyname()</code> function, which is
used by MySQL to convert hostnames into IP addresses. Under certain
circumstances, the <code>mysqld</code> process will suddenly cause 100%
CPU load and will be unresponsive. If you encounter this problem, try to start
MySQL using the <code>--skip-name-resolve</code> option.

</P>
<P>
Alternatively, you can link MySQL on FreeBSD 4.x against the LinuxThreads
library, which avoids a few of the problems that the native FreeBSD thread
implementation has. For a very good comparison of LinuxThreads versus native
threads, see Jeremy Zawodny's article <cite>FreeBSD or Linux for your
MySQL Server?</cite> at
<a HREF="http://jeremy.zawodny.com/blog/archives/000697.html">http://jeremy.zawodny.com/blog/archives/000697.html</a>.

</P>
<P>
A known problem when using LinuxThreads on FreeBSD is that the
<code>wait_timeout</code> value is not honored (probably a signal handling problem in
FreeBSD/LinuxThreads).  This is supposed to be fixed in FreeBSD 5.0.
The symptom is that persistent connections can hang for a very long
time without getting closed down.

</P>
<P>
The MySQL build process requires GNU make (<code>gmake</code>) to work.  If
GNU <code>make</code> is not available, you must install it first before compiling
MySQL.

</P>
<P>
The recommended way to compile and install MySQL on FreeBSD with
<code>gcc</code> (2.95.2 and up) is:

</P>

<PRE>
CC=gcc CFLAGS="-O2 -fno-strength-reduce" \
    CXX=gcc CXXFLAGS="-O2 -fno-rtti -fno-exceptions \
    -felide-constructors -fno-strength-reduce" \
    ./configure --prefix=/usr/local/mysql --enable-assembler
gmake
gmake install
cd /usr/local/mysql
bin/mysql_install_db --user=mysql
bin/mysqld_safe &#38;
</PRE>

<P>
If you notice that <code>configure</code> will use MIT-pthreads, you should read
the MIT-pthreads notes.  See section <A HREF="manual_Installing.html#MIT-pthreads">2.8.5  MIT-pthreads Notes</A>.

</P>
<P>
If you get an error from <code>make install</code> that it can't find
<tt>`/usr/include/pthreads'</tt>, <code>configure</code> didn't detect that you need
MIT-pthreads. To fix this problem, remove <tt>`config.cache'</tt>, then re-run
<code>configure</code> with the <code>--with-mit-threads</code> option.

</P>

<P>
Be sure that your name resolver setup is correct.  Otherwise, you may
experience resolver delays or failures when connecting to <code>mysqld</code>.
Also make sure that the <code>localhost</code> entry in the <tt>`/etc/hosts'</tt> file is
correct.  The file should start with a line similar to this:

</P>

<PRE>
127.0.0.1       localhost localhost.your.domain
</PRE>

<P>
FreeBSD is known to have a very low default file handle limit.
See section <A HREF="manual_Problems.html#Not_enough_file_handles">A.2.17  File Not Found</A>.  Start the server by using the
<code>--open-files-limit</code> option for <code>mysqld_safe</code>, or raise
the limits for the <code>mysqld</code> user in <tt>`/etc/login.conf'</tt> and
rebuild it with <code>cap_mkdb /etc/login.conf</code>.  Also be sure that you set
the appropriate class for this user in the password file if you are not
using the default (use <code>chpass mysqld-user-name</code>).
See section <A HREF="manual_MySQL_Database_Administration.html#mysqld_safe">5.1.3  The <code>mysqld_safe</code> Server Startup Script</A>.

</P>
<P>
If you have a lot of memory, you should consider rebuilding
the kernel to allow MySQL to use more than 512MB of RAM.
Take a look at <code>option MAXDSIZ</code> in the LINT config
file for more information.

</P>
<P>
If you get problems with the current date in MySQL, setting the
<code>TZ</code> variable will probably help.  See section <A HREF="manual_Environment_variables.html#Environment_variables">F  Environment Variables</A>.

</P>



<H4><A NAME="NetBSD" HREF="manual_toc.html#NetBSD">2.12.4.2  NetBSD Notes</A></H4>

<P>
To compile on NetBSD, you need GNU <code>make</code>. Otherwise, the build process will
fail when <code>make</code> tries to run <code>lint</code> on C++ files.

</P>



<H4><A NAME="OpenBSD" HREF="manual_toc.html#OpenBSD">2.12.4.3  OpenBSD 2.5 Notes</A></H4>

<P>
On OpenBSD Version 2.5, you can compile MySQL with native threads
with the following options:

</P>

<PRE>
CFLAGS=-pthread CXXFLAGS=-pthread ./configure --with-mit-threads=no
</PRE>



<H4><A NAME="OpenBSD_2.8" HREF="manual_toc.html#OpenBSD_2.8">2.12.4.4  OpenBSD 2.8 Notes</A></H4>

<P>
Our users have reported that OpenBSD 2.8 has a threading bug that causes
problems with MySQL.  The OpenBSD Developers have fixed the problem,
but as of January 25, 2001, it's only available in the ``-current'' branch.
The symptoms of this threading bug are slow response, high load, high CPU
usage, and crashes.

</P>
<P>
If you get an error like <code>Error in accept:: Bad file descriptor</code> or
error 9 when trying to open tables or directories, the problem is probably
that you have not allocated enough file descriptors for MySQL.

</P>
<P>
In this case, try starting <code>mysqld_safe</code> as <code>root</code> with the following
options:

</P>

<PRE>
mysqld_safe --user=mysql --open-files-limit=2048 &#38;
</PRE>



<H4><A NAME="BSDI" HREF="manual_toc.html#BSDI">2.12.4.5  BSD/OS Version 2.x Notes</A></H4>

<P>
If you get the following error when compiling MySQL, your
<code>ulimit</code> value for virtual memory is too low:

</P>

<PRE>
item_func.h: In method
`Item_func_ge::Item_func_ge(const Item_func_ge &#38;)':
item_func.h:28: virtual memory exhausted
make[2]: *** [item_func.o] Error 1
</PRE>

<P>
Try using <code>ulimit -v 80000</code> and run <code>make</code> again.  If this
doesn't work and you are using <code>bash</code>, try switching to <code>csh</code>
or <code>sh</code>; some BSDI users have reported problems with <code>bash</code>
and <code>ulimit</code>.

</P>
<P>
If you are using <code>gcc</code>, you may also use have to use the
<code>--with-low-memory</code> flag for <code>configure</code> to be able to compile
<tt>`sql_yacc.cc'</tt>.

</P>
<P>
If you get problems with the current date in MySQL, setting the
<code>TZ</code> variable will probably help.  See section <A HREF="manual_Environment_variables.html#Environment_variables">F  Environment Variables</A>.

</P>



<H4><A NAME="BSDI3" HREF="manual_toc.html#BSDI3">2.12.4.6  BSD/OS Version 3.x Notes</A></H4>

<P>
Upgrade to BSD/OS Version 3.1.  If that is not possible, install
BSDIpatch M300-038.

</P>
<P>
Use the following command when configuring MySQL:

</P>

<PRE>
env CXX=shlicc++ CC=shlicc2 \
./configure \
    --prefix=/usr/local/mysql \
    --localstatedir=/var/mysql \
    --without-perl \
    --with-unix-socket-path=/var/mysql/mysql.sock
</PRE>

<P>
The following is also known to work:

</P>

<PRE>
env CC=gcc CXX=gcc CXXFLAGS=-O3 \
./configure \
    --prefix=/usr/local/mysql \
    --with-unix-socket-path=/var/mysql/mysql.sock
</PRE>

<P>
You can change the directory locations if you wish, or just use the
defaults by not specifying any locations.

</P>
<P>
If you have problems with performance under heavy load, try using the
<code>--skip-thread-priority</code> option to <code>mysqld</code>!  This will run
all threads with the same priority. On BSDI Version 3.1, this gives better
performance, at least until BSDI fixes its thread scheduler.

</P>
<P>
If you get the error <code>virtual memory exhausted</code> while compiling,
you should try using <code>ulimit -v 80000</code> and running <code>make</code> again.
If this doesn't work and you are using <code>bash</code>, try switching to
<code>csh</code> or <code>sh</code>; some BSDI users have reported problems with
<code>bash</code> and <code>ulimit</code>.

</P>



<H4><A NAME="BSDI4" HREF="manual_toc.html#BSDI4">2.12.4.7  BSD/OS Version 4.x Notes</A></H4>

<P>
BSDI Version 4.x has some thread-related bugs.  If you want to use
MySQL on this, you should install all thread-related patches.  At
least M400-023 should be installed.

</P>
<P>
On some BSDI Version 4.x systems, you may get problems with shared libraries.
The symptom is that you can't execute any client programs, for example,
<code>mysqladmin</code>.  In this case, you need to reconfigure not to use
shared libraries with the <code>--disable-shared</code> option to configure.

</P>
<P>
Some customers have had problems on BSDI 4.0.1 that the <code>mysqld</code>
binary after a while can't open tables.  This is because some
library/system-related bug causes <code>mysqld</code> to change current
directory without having asked for that to happen.

</P>
<P>
The fix is to either upgrade MySQL to at least version 3.23.34 or, after
running <code>configure</code>, remove the line <code>#define HAVE_REALPATH</code> from
<code>config.h</code> before running <code>make</code>.

</P>
<P>
Note that this means that you can't symbolically link a database
directories to another database directory or symbolic link a table to
another database on BSDI.  (Making a symbolic link to another disk is okay).

</P>



<H3><A NAME="Other_Unix_Notes" HREF="manual_toc.html#Other_Unix_Notes">2.12.5  Other Unix Notes</A></H3>



<H4><A NAME="HP-UX_10.20" HREF="manual_toc.html#HP-UX_10.20">2.12.5.1  HP-UX Version 10.20 Notes</A></H4>

<P>
There are a couple of small problems when compiling MySQL on
HP-UX.  We recommend that you use <code>gcc</code> instead of the HP-UX native
compiler, because <code>gcc</code> produces better code.

</P>
<P>
We recommend using <code>gcc</code> 2.95 on HP-UX.  Don't use high optimization
flags (such as <code>-O6</code>) because they may not be safe on HP-UX.

</P>
<P>
The following <code>configure</code> line should work with <code>gcc</code> 2.95:

</P>

<PRE>
CFLAGS="-I/opt/dce/include -fpic" \
CXXFLAGS="-I/opt/dce/include -felide-constructors -fno-exceptions \
-fno-rtti" \
CXX=gcc \
./configure --with-pthread \
    --with-named-thread-libs='-ldce' \
    --prefix=/usr/local/mysql --disable-shared
</PRE>

<P>
The following <code>configure</code> line should work with <code>gcc</code> 3.1:

</P>

<PRE>
CFLAGS="-DHPUX -I/opt/dce/include -O3 -fPIC" CXX=gcc \
CXXFLAGS="-DHPUX -I/opt/dce/include -felide-constructors \
    -fno-exceptions -fno-rtti -O3 -fPIC" \
./configure --prefix=/usr/local/mysql \
    --with-extra-charsets=complex --enable-thread-safe-client \
    --enable-local-infile  --with-pthread \
    --with-named-thread-libs=-ldce --with-lib-ccflags=-fPIC
    --disable-shared
</PRE>



<H4><A NAME="HP-UX_11.x" HREF="manual_toc.html#HP-UX_11.x">2.12.5.2  HP-UX Version 11.x Notes</A></H4>

<P>
For HP-UX Version 11.x, we recommend MySQL 3.23.15 or later.

</P>
<P>
Because of some critical bugs in the standard HP-UX libraries, you should
install the following patches before trying to run MySQL on HP-UX 11.0:

</P>

<PRE>
PHKL_22840 Streams cumulative
PHNE_22397 ARPA cumulative
</PRE>

<P>
This will solve the problem of getting <code>EWOULDBLOCK</code> from <code>recv()</code>
and <code>EBADF</code> from <code>accept()</code> in threaded applications.

</P>
<P>
If you are using <code>gcc</code> 2.95.1 on an unpatched HP-UX 11.x system,
you will get the error:

</P>

<PRE>
In file included from /usr/include/unistd.h:11,
                 from ../include/global.h:125,
                 from mysql_priv.h:15,
                 from item.cc:19:
/usr/include/sys/unistd.h:184: declaration of C function ...
/usr/include/sys/pthread.h:440: previous declaration ...
In file included from item.h:306,
                 from mysql_priv.h:158,
                 from item.cc:19:
</PRE>

<P>
The problem is that HP-UX doesn't define <code>pthreads_atfork()</code> consistently.
It has conflicting prototypes in
<tt>`/usr/include/sys/unistd.h'</tt>:184 and
<tt>`/usr/include/sys/pthread.h'</tt>:440.

</P>
<P>
One solution is to copy <tt>`/usr/include/sys/unistd.h'</tt> into
<tt>`mysql/include'</tt> and edit <tt>`unistd.h'</tt> and change it to match
the definition in <tt>`pthread.h'</tt>.  Look for this line:

</P>

<PRE>
extern int pthread_atfork(void (*prepare)(), void (*parent)(),
                                          void (*child)());
</PRE>

<P>
Change it to look like this:

</P>

<PRE>
extern int pthread_atfork(void (*prepare)(void), void (*parent)(void),
                                          void (*child)(void));
</PRE>

<P>
After making the change, the following <code>configure</code> line should work:

</P>

<PRE>
CFLAGS="-fomit-frame-pointer -O3 -fpic" CXX=gcc \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti -O3" \
./configure --prefix=/usr/local/mysql --disable-shared
</PRE>

<P>
If you are using MySQL 4.0.5 with the HP-UX compiler, you can use the following
command (which has been tested with <code>cc</code> B.11.11.04):

</P>

<PRE>
CC=cc CXX=aCC CFLAGS=+DD64 CXXFLAGS=+DD64 ./configure \
    --with-extra-character-set=complex
</PRE>

<P>
You can ignore any errors of the following type:

</P>

<PRE>
aCC: warning 901: unknown option: `-3': use +help for online
documentation
</PRE>

<P>
If you get the following error from <code>configure</code>,
verify that you don't have the path to the K&#38;R compiler before the path
to the HP-UX C and C++ compiler:

</P>

<PRE>
checking for cc option to accept ANSI C... no
configure: error: MySQL requires an ANSI C compiler (and a C++ compiler).
Try gcc. See the Installation chapter in the Reference Manual.
</PRE>

<P>
Another reason for not being able to compile is that you didn't define
the <code>+DD64</code> flags as just described.

</P>
<P>
Another possibility for HP-UX 11 is to use MySQL binaries for HP-UX 10.20.
We have received reports from some users that these binaries work fine on
HP-UX 11.00. If you encounter problems, be sure to check your HP-UX patch
level.

</P>


<H4><A NAME="IBM-AIX" HREF="manual_toc.html#IBM-AIX">2.12.5.3  IBM-AIX notes</A></H4>

<P>
<A NAME="IDX325"></A>

</P>
<P>
Automatic detection of <code>xlC</code> is missing from Autoconf, so a number of
variables need to be set before running <code>configure</code>. The following
example uses the IBM compiler:

</P>

<PRE>
export CC="xlc_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192 "
export CXX="xlC_r -ma -O3 -qstrict -qoptimize=3 -qmaxmem=8192"
export CFLAGS="-I /usr/local/include"
export LDFLAGS="-L /usr/local/lib"
export CPPFLAGS=$CFLAGS
export CXXFLAGS=$CFLAGS

./configure --prefix=/usr/local \
                --localstatedir=/var/mysql \
                --sbindir='/usr/local/bin' \
                --libexecdir='/usr/local/bin' \
                --enable-thread-safe-client \
                --enable-large-files
</PRE>

<P>
The preceding options are used to compile the MySQL distribution that
can be found at <a HREF="http://www-frec.bull.com/">http://www-frec.bull.com/</a>.

</P>
<P>
If you change the <code>-O3</code> to <code>-O2</code> in the preceding <code>configure</code>
line, you must also remove the <code>-qstrict</code> option. This is a limitation in
the IBM C compiler.

</P>
<P>
If you are using <code>gcc</code> or <code>egcs</code> to compile MySQL, you
<em>must</em> use the <code>-fno-exceptions</code> flag, because the exception
handling in <code>gcc</code>/<code>egcs</code> is not thread-safe!  (This is tested with
<code>egcs</code> 1.1.)  There are also some known problems with IBM's assembler
that may cause it to generate bad code when used with <code>gcc</code>.

</P>
<P>
We recommend the following <code>configure</code> line with <code>egcs</code> and
<code>gcc</code> 2.95 on AIX:

</P>

<PRE>
CC="gcc -pipe -mcpu=power -Wa,-many" \
CXX="gcc -pipe -mcpu=power -Wa,-many" \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti" \
./configure --prefix=/usr/local/mysql --with-low-memory
</PRE>

<P>
The <code>-Wa,-many</code> option is necessary for the compile to be successful.
IBM is aware of this problem but is in no hurry to fix it because of the
workaround that is available.  We don't know if the <code>-fno-exceptions</code>
is required with <code>gcc</code> 2.95, but because MySQL doesn't use exceptions
and the option generates faster code, we recommend that you should always
use it with <code>egcs</code> / <code>gcc</code>.

</P>
<P>
If you get a problem with assembler code, try changing the <code>-mcpu=<var>xxx</var></code>
option to match your CPU. Typically <code>power2</code>, <code>power</code>, or
<code>powerpc</code> may need to be used.  Alternatively, you might need to use
<code>604</code> or <code>604e</code>. We are not positive but suspect that
<code>power</code> would likely be safe most of the time, even on
a power2 machine.

</P>
<P>
If you don't know what your CPU is, execute a <code>uname -m</code> command.  It
will produce a string that looks like <code>000514676700</code>, with a format of
<code>xxyyyyyymmss</code> where <code>xx</code> and <code>ss</code> are always <code>00</code>,
<code>yyyyyy</code> is a unique system ID and <code>mm</code> is the ID of the CPU Planar.
A chart of these values can be found at
<a HREF="http://www16.boulder.ibm.com/pseries/en_US/cmds/aixcmds5/uname.htm">http://www16.boulder.ibm.com/pseries/en_US/cmds/aixcmds5/uname.htm</a>.
This will give you a machine type and a machine model you can use to
determine what type of CPU you have.

</P>
<P>
If you have problems with signals (MySQL dies unexpectedly
under high load), you may have found an OS bug with threads and
signals.  In this case, you can tell MySQL not to use signals by
configuring as follows:

</P>

<PRE>
CFLAGS=-DDONT_USE_THR_ALARM CXX=gcc \
CXXFLAGS="-felide-constructors -fno-exceptions -fno-rtti \
-DDONT_USE_THR_ALARM" \
./configure --prefix=/usr/local/mysql --with-debug \
    --with-low-memory
</PRE>

<P>
This doesn't affect the performance of MySQL, but has the side
effect that you can't kill clients that are ``sleeping'' on a connection with
<code>mysqladmin kill</code> or <code>mysqladmin shutdown</code>.  Instead, the client
will die when it issues its next command.

</P>
<P>
On some versions of AIX, linking with <code>libbind.a</code> makes
<code>getservbyname()</code> dump core.  This is an AIX bug and should be reported
to IBM.

</P>
<P>
For AIX 4.2.1 and <code>gcc</code>, you have to make the following changes.

</P>
<P>
After configuring, edit <tt>`config.h'</tt> and <tt>`include/my_config.h'</tt>
and change the line that says this:

</P>

<PRE>
#define HAVE_SNPRINTF 1
</PRE>

<P>
to this:

</P>

<PRE>
#undef HAVE_SNPRINTF
</PRE>

<P>
And finally, in <tt>`mysqld.cc'</tt>, you need to add a prototype for
<code>initgroups()</code>.

</P>

<PRE>
#ifdef _AIX41
extern "C" int initgroups(const char *,int);
#endif
</PRE>

<P>
If you need to allocate a lot of memory to the <code>mysqld</code> process, it's not
enough to just use <code>ulimit -d unlimited</code>. You may also have to modify
<code>mysqld_safe</code> to add a line something like this:

</P>

<PRE>
export LDR_CNTRL='MAXDATA=0x80000000'
</PRE>

<P>
You can find more information about using a lot of memory at
<a HREF="http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm">http://publib16.boulder.ibm.com/pseries/en_US/aixprggd/genprogc/lrg_prg_support.htm</a>.

</P>


<H4><A NAME="SunOS" HREF="manual_toc.html#SunOS">2.12.5.4  SunOS 4 Notes</A></H4>

<P>
On SunOS 4, MIT-pthreads is needed to compile MySQL. This in turn
means you will need GNU <code>make</code>.

</P>
<P>
Some SunOS 4 systems have problems with dynamic libraries and <code>libtool</code>.
You can use the following <code>configure</code> line to avoid this problem:

</P>

<PRE>
./configure --disable-shared --with-mysqld-ldflags=-all-static
</PRE>

<P>
When compiling <code>readline</code>, you may get warnings about duplicate defines.
These can be ignored.

</P>
<P>
When compiling <code>mysqld</code>, there will be some <code>implicit declaration
of function</code> warnings. These can be ignored.

</P>



<H4><A NAME="Alpha-DEC-UNIX" HREF="manual_toc.html#Alpha-DEC-UNIX">2.12.5.5  Alpha-DEC-UNIX Notes (Tru64)</A></H4>

<P>
If you are using <code>egcs</code> 1.1.2 on Digital Unix, you should upgrade to
<code>gcc</code> 2.95.2, because <code>egcs</code> on DEC has some serious bugs!

</P>
<P>
When compiling threaded programs under Digital Unix, the documentation
recommends using the <code>-pthread</code> option for <code>cc</code> and <code>cxx</code> and
the <code>-lmach -lexc</code> libraries (in addition to <code>-lpthread</code>).  You
should run <code>configure</code> something like this:

</P>

<PRE>
CC="cc -pthread" CXX="cxx -pthread -O" \
./configure --with-named-thread-libs="-lpthread -lmach -lexc -lc"
</PRE>

<P>
When compiling <code>mysqld</code>, you may see a couple of warnings like this:

</P>

<PRE>
mysqld.cc: In function void handle_connections()':
mysqld.cc:626: passing long unsigned int *' as argument 3 of
accept(int,sockadddr *, int *)'
</PRE>

<P>
You can safely ignore these warnings.  They occur because <code>configure</code>
can detect only errors, not warnings.

</P>
<P>
If you start the server directly from the command line, you may have problems
with it dying when you log out.  (When you log out, your outstanding processes
receive a <code>SIGHUP</code> signal.)  If so, try starting the server like this:

</P>

<PRE>
nohup mysqld [<var>options</var>] &#38;
</PRE>

<P>
<code>nohup</code> causes the command following it to ignore any <code>SIGHUP</code>
signal sent from the terminal.  Alternatively, start the server by running
<code>mysqld_safe</code>, which invokes <code>mysqld</code> using <code>nohup</code> for you.
See section <A HREF="manual_MySQL_Database_Administration.html#mysqld_safe">5.1.3  The <code>mysqld_safe</code> Server Startup Script</A>.

</P>
<P>
If you get a problem when compiling <tt>`mysys/get_opt.c'</tt>, just remove the
<code>#define _NO_PROTO</code> line from the start of that file.

</P>
<P>
If you are using Compaq's CC compiler, the following <code>configure</code> line
should work:

</P>

<PRE>
CC="cc -pthread"
CFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed all -arch host"
CXX="cxx -pthread"
CXXFLAGS="-O4 -ansi_alias -ansi_args -fast -inline speed all \
    -arch host -noexceptions -nortti"
export CC CFLAGS CXX CXXFLAGS
./configure \
    --prefix=/usr/local/mysql \
    --with-low-memory \
    --enable-large-files \
    --enable-shared=yes \
    --with-named-thread-libs="-lpthread -lmach -lexc -lc"
gnumake
</PRE>

<P>
If you get a problem with <code>libtool</code> when compiling with shared libraries
as just shown, when linking <code>mysql</code>, you should be able to get around
this by issuing these commands:

</P>

<PRE>
cd mysql
/bin/sh ../libtool --mode=link cxx -pthread  -O3 -DDBUG_OFF \
    -O4 -ansi_alias -ansi_args -fast -inline speed \
    -speculate all \ -arch host  -DUNDEF_HAVE_GETHOSTBYNAME_R \
    -o mysql  mysql.o readline.o sql_string.o completion_hash.o \
    ../readline/libreadline.a -lcurses \
    ../libmysql/.libs/libmysqlclient.so  -lm
cd ..
gnumake
gnumake install
scripts/mysql_install_db
</PRE>



<H4><A NAME="Alpha-DEC-OSF1" HREF="manual_toc.html#Alpha-DEC-OSF1">2.12.5.6  Alpha-DEC-OSF/1 Notes</A></H4>

<P>
If you have problems compiling and have DEC <code>CC</code> and <code>gcc</code>
installed, try running <code>configure</code> like this:

</P>

<PRE>
CC=cc CFLAGS=-O CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql
</PRE>

<P>
If you get problems with the <tt>`c_asm.h'</tt> file, you can create and use
a 'dummy' <tt>`c_asm.h'</tt> file with:

</P>

<PRE>
touch include/c_asm.h
CC=gcc CFLAGS=-I./include \
CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql
</PRE>

<P>
Note that the following problems with the <code>ld</code> program can be fixed
by downloading the latest DEC (Compaq) patch kit from:
<a HREF="http://ftp.support.compaq.com/public/unix/">http://ftp.support.compaq.com/public/unix/</a>.

</P>
<P>
On OSF/1 V4.0D and compiler "DEC C V5.6-071 on Digital Unix V4.0 (Rev. 878),"
the compiler had some strange behavior (undefined <code>asm</code> symbols).
<code>/bin/ld</code> also appears to be broken (problems with <code>_exit
undefined</code> errors occurring while linking <code>mysqld</code>).  On this system, we
have managed to compile MySQL with the following <code>configure</code>
line, after replacing <code>/bin/ld</code> with the version from OSF 4.0C:

</P>

<PRE>
CC=gcc CXX=gcc CXXFLAGS=-O3 ./configure --prefix=/usr/local/mysql
</PRE>

<P>
With the Digital compiler "C++ V6.1-029," the following should work:

</P>

<PRE>
CC=cc -pthread
CFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed \
       -speculate all -arch host
CXX=cxx -pthread
CXXFLAGS=-O4 -ansi_alias -ansi_args -fast -inline speed \
         -speculate all -arch host -noexceptions -nortti
export CC CFLAGS CXX CXXFLAGS
./configure --prefix=/usr/mysql/mysql \
            --with-mysqld-ldflags=-all-static --disable-shared \
            --with-named-thread-libs="-lmach -lexc -lc"
</PRE>

<P>
In some versions of OSF/1, the <code>alloca()</code> function is broken. Fix
this by removing the line in <tt>`config.h'</tt> that defines <code>'HAVE_ALLOCA'</code>.

</P>
<P>
The <code>alloca()</code> function also may have an incorrect prototype in
<code>/usr/include/alloca.h</code>.  This warning resulting from this can be ignored.

</P>
<P>
<code>configure</code> will use the following thread libraries automatically:
<code>--with-named-thread-libs="-lpthread -lmach -lexc -lc"</code>.

</P>
<P>
When using <code>gcc</code>, you can also try running <code>configure</code> like this:

</P>

<PRE>
CFLAGS=-D_PTHREAD_USE_D4 CXX=gcc CXXFLAGS=-O3 ./configure ...
</PRE>

<P>
If you have problems with signals (MySQL dies unexpectedly
under high load), you may have found an OS bug with threads and
signals. In this case, you can tell MySQL not to use signals by
configuring with:

</P>

<PRE>
CFLAGS=-DDONT_USE_THR_ALARM \
CXXFLAGS=-DDONT_USE_THR_ALARM \
./configure ...
</PRE>

<P>
This doesn't affect the performance of MySQL, but has the side
effect that you can't kill clients that are ``sleeping'' on a connection with
<code>mysqladmin kill</code> or <code>mysqladmin shutdown</code>.  Instead, the client
will die when it issues its next command.

</P>
<P>
With <code>gcc</code> 2.95.2, you will probably run into the following compile error:

</P>

<PRE>
sql_acl.cc:1456: Internal compiler error in `scan_region',
at except.c:2566
Please submit a full bug report.
</PRE>

<P>
To fix this, you should change to the <code>sql</code> directory and do a
cut-and-paste of the last <code>gcc</code> line, but change <code>-O3</code> to
<code>-O0</code> (or add <code>-O0</code> immediately after <code>gcc</code> if you don't
have any <code>-O</code> option on your compile line).  After this is done, you
can just change back to the top-level directory and run <code>make</code>
again.

</P>



<H4><A NAME="SGI-Irix" HREF="manual_toc.html#SGI-Irix">2.12.5.7  SGI Irix Notes</A></H4>

<P>
If you are using Irix Version 6.5.3 or newer, <code>mysqld</code> will be able to
create threads only if you run it as a user that has <code>CAP_SCHED_MGT</code>
privileges (such as <code>root</code>) or give the <code>mysqld</code> server this privilege
with the following shell command:

</P>

<PRE>
chcap "CAP_SCHED_MGT+epi" /opt/mysql/libexec/mysqld
</PRE>

<P>
You may have to undefine some symbols in <tt>`config.h'</tt> after running
<code>configure</code> and before compiling.

</P>
<P>
In some Irix implementations, the <code>alloca()</code> function is broken.  If the
<code>mysqld</code> server dies on some <code>SELECT</code> statements, remove the lines
from <tt>`config.h'</tt> that define <code>HAVE_ALLOC</code> and <code>HAVE_ALLOCA_H</code>.
If <code>mysqladmin create</code> doesn't work, remove the line from <tt>`config.h'</tt>
that defines <code>HAVE_READDIR_R</code>.  You may have to remove the
<code>HAVE_TERM_H</code> line as well.

</P>
<P>
SGI recommends that you install all the patches on this page as a set:
<a HREF="http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html">http://support.sgi.com/surfzone/patches/patchset/6.2_indigo.rps.html</a>

</P>
<P>
At the very minimum, you should install the latest kernel rollup, the
latest <code>rld</code> rollup, and the latest <code>libc</code> rollup.

</P>
<P>
You definitely need all the POSIX patches on this page, for pthreads support:

</P>
<P>
<a HREF="http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html">http://support.sgi.com/surfzone/patches/patchset/6.2_posix.rps.html</a>

</P>
<P>
If you get the something like the following error when compiling
<tt>`mysql.cc'</tt>:

</P>

<PRE>
"/usr/include/curses.h", line 82: error(1084):
invalid combination of type
</PRE>

<P>
Type the following in the top-level directory of your MySQL source
tree:

</P>

<PRE>
extra/replace bool curses_bool &#60; /usr/include/curses.h &#62; include/curses.h
make
</PRE>

<P>
There have also been reports of scheduling problems.  If only one thread is
running, performance is slow.  Avoid this by starting another client.  This may
lead to a two-to-tenfold increase in execution speed thereafter for the other
thread.  This is a poorly understood problem with Irix threads; you may have
to improvise to find solutions until this can be fixed.

</P>
<P>
If you are compiling with <code>gcc</code>, you can use the following
<code>configure</code> command:

</P>

<PRE>
CC=gcc CXX=gcc CXXFLAGS=-O3 \
./configure --prefix=/usr/local/mysql --enable-thread-safe-client \
    --with-named-thread-libs=-lpthread
</PRE>

<P>
On Irix 6.5.11 with native Irix C and C++ compilers ver. 7.3.1.2, the
following is reported to work

</P>

<PRE>
CC=cc CXX=CC CFLAGS='-O3 -n32 -TARG:platform=IP22 -I/usr/local/include \
-L/usr/local/lib' CXXFLAGS='-O3 -n32 -TARG:platform=IP22 \
-I/usr/local/include -L/usr/local/lib' \
./configure --prefix=/usr/local/mysql --with-innodb --with-berkeley-db \
    --with-libwrap=/usr/local \
    --with-named-curses-libs=/usr/local/lib/libncurses.a
</PRE>



<H4><A NAME="SCO" HREF="manual_toc.html#SCO">2.12.5.8  SCO Notes</A></H4>

<P>
The current port is tested only on ``sco3.2v5.0.5,'' ``sco3.2v5.0.6,'' 
and ``sco3.2v5.0.7'' systems. There has also been a lot of progress on a 
port to ``sco 3.2v4.2.''  Open Server 5.0.8(Legend) will have native 
threads and allow files greater than 2GB.  The current maximum file size 
is 2GB.

</P>
<P>
We have been able to compile MySQL with the following <code>configure</code>
command on OpenServer with <code>gcc</code> 2.95.3.

</P>

<PRE>
CC=gcc CXX=gcc ./configure --prefix=/usr/local/mysql \
    --enable-thread-safe-client --with-innodb \
    --with-openssl --with-vio --with-extra-charsets=complex
</PRE>

<P>
<code>gcc</code> is available at
<a HREF="ftp://ftp.sco.com/pub/openserver5/opensrc/gnutools-5.0.7Kj">ftp://ftp.sco.com/pub/openserver5/opensrc/gnutools-5.0.7Kj</a>.

</P>
<P>
This development system requires the OpenServer Execution 
Enviroment Supplement oss646B on OpenServer 5.0.6 and oss656B
and The OpenSource libraries found in gwxlibs.  All OpenSource tools are 
in the <tt>`opensrc'</tt> directory.  They are available at
<a HREF="ftp://ftp.sco.com/pub/openserver5/opensrc/">ftp://ftp.sco.com/pub/openserver5/opensrc/</a>.

</P>
<P>
We recommend using the latest production release of MySQL.  Currently
MySQL-4.0.x is the latest production release.  There were some problems
with MySQL 4.0.17 and MySQL 4.0.18, but they have now been fixed.

</P>
<P>
SCO provides operating system patches at 
<a HREF="ftp://ftp.sco.com/pub/openserver5">ftp://ftp.sco.com/pub/openserver5</a> for OpenServer 5.0.[0-6] and
<a HREF="ftp://ftp.sco.com/pub/openserverv5/507">ftp://ftp.sco.com/pub/openserverv5/507</a> for OpenServer 5.0.7.

</P>
<P>
SCO provides information about security fixes at 
<a HREF="ftp://ftp.sco.com/pub/security/OpenServer">ftp://ftp.sco.com/pub/security/OpenServer</a> for OpenServer 5.0.x.

</P>
<P>
The maximum file size on an OpenSever 5.0.x system is 2GB.

</P>
<P>
The total memory which could be allocated for streams buffers, clists and 
lock records cannot exceed 60MB on OpenServer 5.0.x.

</P>
<P>
Streams buffers are allocated in units of 4096 byte pages, clists are 70 
bytes each, and lock records are 64 bytes each, so:

</P>

<PRE>
(NSTRPAGES * 4096) + (NCLIST * 70) + (MAX_FLCKREC * 64) &#60;= 62914560 
</PRE>

<P>
Follow this procedure to configure the Database Services option. If you 
are unsure whether an application requires this, see the documentation 
provided with the application.

</P>

<OL>
<LI>

Log in as <code>root</code>.

<LI>

Enable the SUDS driver by editing the <tt>`/etc/conf/sdevice.d/suds'</tt> file. 
Change the <code>N</code> in the second field to a <code>Y</code>.

<LI>

Use <code>mkdev aio</code> or the Hardware/Kernel Manager to enable support for 
asynchronous I/O and relink the kernel. To allow users to lock down memory 
for use with this type of I/O, update the aiomemlock(F) file. This file 
should be updated to include the names of users that can use AIO and the 
maximum amounts of memory they can lock down.

<LI>

Many applications use setuid binaries so that you need to specify only a
single user. See the documentation provided with the application to see if
this is the case for your application.
</OL>

<P>
After you complete this process, reboot the system to create a new kernel 
incorporating these changes.

</P>
<P>
By default, the entries in <tt>`/etc/conf/cf.d/mtune'</tt> are set as follows:

</P>

<PRE>
Value           Default         Min             Max
-----           -------         --             ---
NBUF            0               24              450000
NHBUF           0               32              524288
NMPBUF          0               12              512
MAX_INODE       0               100             64000
MAX_FILE        0               100             64000
CTBUFSIZE       128             0               256
MAX_PROC        0               50              16000
MAX_REGION      0               500             160000
NCLIST          170             120             16640
MAXUP           100             15              16000
NOFILES         110             60              11000
NHINODE         128             64              8192
NAUTOUP         10              0               60
NGROUPS         8               0               128
BDFLUSHR        30              1               300
MAX_FLCKREC     0               50              16000
PUTBUFSZ        8000            2000            20000
MAXSLICE        100             25              100
ULIMIT          4194303         2048            4194303
* Streams Parameters
NSTREAM         64              1               32768
NSTRPUSH        9               9               9
NMUXLINK        192             1               4096
STRMSGSZ        16384           4096            524288
STRCTLSZ        1024            1024            1024
STRMAXBLK       524288          4096            524288
NSTRPAGES       500             0               8000
STRSPLITFRAC    80              50              100
NLOG            3               3               3
NUMSP           64              1               256
NUMTIM          16              1               8192
NUMTRW          16              1               8192
* Semaphore Parameters
SEMMAP          10              10              8192
SEMMNI          10              10              8192
SEMMNS          60              60              8192
SEMMNU          30              10              8192
SEMMSL          25              25              150
SEMOPM          10              10              1024
SEMUME          10              10              25
SEMVMX          32767           32767           32767
SEMAEM          16384           16384           16384
* Shared Memory Parameters
SHMMAX          524288          131072          2147483647
SHMMIN          1               1               1
SHMMNI          100             100             2000
FILE            0               100             64000
NMOUNT          0               4               256
NPROC           0               50              16000
NREGION         0               500             160000
</PRE>

<P>
We recommend setting these values as follows:

</P>
<P>
<code>NOFILES</code> should be 4096 or 2048.

</P>
<P>
<code>MAXUP</code> should be 2048.

</P>
<P>
To make changes to the kernel, <code>cd</code> to <tt>`/etc/conf/bin'</tt> and
use <code>./idtune</code> <var>name parameter</var> to make the changes. For example,
to change <code>SEMMS</code> to <code>200</code>, execute these commands as <code>root</code>:

</P>

<PRE>
# cd /etc/conf/bin
# ./idtune SEMMNS 200
</PRE>

<P>
We recommend tuning the system, but the proper parameter values to use
depend on the number of users accessing the application or database
and size the of the database (that is, the used buffer pool). The
following will affect the following kernel parameters defined in
<tt>`/etc/conf/cf.d/stune'</tt>:

</P>
<P>
<code>SHMMAX</code> (recommended setting: 128MB) and <code>SHMSEG</code> (recommended
setting: 15). 
These parameters have influence on the MySQL database engine to create
user buffer pools.

</P>
<P>
<code>NOFILES</code> and <code>MAXUP</code> should be at to at least 2048.

</P>
<P>
<code>MAXPROC</code> should be set to at least 3000/4000 (depends on number of users) 
or more.

</P>
<P>
Also is recommended to use following formula to count value for <code>SEMMSL</code>,
<code>SEMMNS</code> and <code>SEMMNU</code>:

</P>

<PRE>
SEMMSL = 13
</PRE>

<P>
The 13 is what has been found to be the best for both Progress and MySQL.  

</P>
<P>
<code>SEMMNS</code> = <code>SEMMSL</code> * number of db servers to be run on the system.

</P>
<P>
Set <code>SEMMNS</code> to the value of <code>SEMMSL</code> multiplied by the number of
db servers (maximum) that you will be running on the system at one time.

</P>

<PRE>
SEMMNU = SEMMNS
</PRE>

<P>
Set the value of <code>SEMMNU</code> to equal the value of <code>SEMMNS</code>. You
could probably set this to 75% of <code>SEMMNS</code>, but this is a conservative
estimate.

</P>
<P>
You need to at least install the "SCO OpenServer Linker and Application
Development Libraries" or the OpenServer Development System to use <code>gcc</code>.
You cannot just use the GCC Dev system without installing one of these.

</P>
<P>
You should get the FSU Pthreads package and install it first. This can be
found at <a HREF="http://moss.csc.ncsu.edu/~mueller/ftp/pub/PART/pthreads.tar.gz">http://moss.csc.ncsu.edu/~mueller/ftp/pub/PART/pthreads.tar.gz</a>.
You can also get a precompiled package from 
<a HREF="ftp://ftp.zenez.com/pub/zenez/prgms/FSU-threads-3.14.tar.gz">ftp://ftp.zenez.com/pub/zenez/prgms/FSU-threads-3.14.tar.gz</a>.

</P>
<P>
FSU Pthreads can be compiled with SCO Unix 4.2 with tcpip, or using
OpenServer 3.0 or Open Desktop 3.0 (OS 3.0 ODT 3.0) with the SCO
Development System installed using a good port of GCC 2.5.x. For ODT or OS
3.0, you will need a good port of GCC 2.5.x. There are a lot of problems
without a good port. The port for this product requires the SCO Unix
Development system. Without it, you are missing the libraries and the
linker that is needed.  You will also need
<tt>`SCO-3.2v4.2-includes.tar.gz'</tt>. This file contains the changes to the
SCO Development include files that are needed to get MySQL to build.  You
need to replace the existing system include files with these modified header
files.  They can be obtained from
<a HREF="ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz">ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz</a>.

</P>

<P>
To build FSU Pthreads on your system,
all you should need to do is run GNU <code>make</code>.  The <tt>`Makefile'</tt> in 
FSU-threads-3.14.tar.gz is already set up to make FSU-threads.

</P>
<P>
You can run <code>./configure</code> in the <tt>`threads/src'</tt> directory and
select the SCO OpenServer option. This command copies <tt>`Makefile.SCO5'</tt> to
<tt>`Makefile'</tt>.  Then run <code>make</code>.

</P>
<P>
To install in the default <tt>`/usr/include'</tt> directory, log in as 
<code>root</code>, then <code>cd</code> to the <tt>`thread/src'</tt> directory and run
<code>make install</code>. 

</P>
<P>
Remember that you must use GNU <code>make</code> when making MySQL.

</P>
<P>
<strong>Note</strong>: If you don't start <code>mysqld_safe</code> as <code>root</code>, you
probably will get only the default 110 open files per process. <code>mysqld</code>
will write a note about this in the log file.

</P>
<P>
With SCO 3.2V4.2, you should use FSU Pthreads version 3.14 or newer. 
The following <code>configure</code> command should work:

</P>

<PRE>
CFLAGS="-D_XOPEN_XPG4" CXX=gcc CXXFLAGS="-D_XOPEN_XPG4" \
./configure \
    --prefix=/usr/local/mysql \
    --with-named-thread-libs="-lgthreads -lsocket -lgen -lgthreads" \
    --with-named-curses-libs="-lcurses"
</PRE>

<P>
You may get some problems with some include files. In this case, you can
find new SCO-specific include files at
<a HREF="ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz">ftp://ftp.zenez.com/pub/zenez/prgms/SCO-3.2v4.2-includes.tar.gz</a>.

</P>
<P>
You should unpack this file in the <tt>`include'</tt> directory of your MySQL
source tree.

</P>
<P>
SCO development notes:

</P>

<UL>
<LI>

MySQL should automatically detect FSU Pthreads and link <code>mysqld</code> with 
<code>-lgthreads -lsocket -lgthreads</code>.

<LI>

The SCO development libraries are re-entrant in FSU Pthreads. SCO 
claims that its library functions are re-entrant, so they must be 
re-entrant with FSU Pthreads. FSU Pthreads on OpenServer tries to use the 
SCO scheme to make re-entrant libraries.

<LI>

FSU Pthreads (at least the version at <a HREF="ftp::/ftp.zenez.com">ftp::/ftp.zenez.com</a>) comes
linked with GNU <code>malloc</code>. If you encounter problems with memory usage,
make sure that <tt>`gmalloc.o'</tt> is included in <tt>`libgthreads.a'</tt> and
<tt>`libgthreads.so'</tt>.

<LI>

In FSU Pthreads, the following system calls are pthreads-aware:
<code>read()</code>, <code>write()</code>, <code>getmsg()</code>, <code>connect()</code>,
<code>accept(),</code> <code>select()</code>, and <code>wait()</code>.

<LI>

The CSSA-2001-SCO.35.2 (the patch is listed in custom as
erg711905-dscr_remap security patch (version 2.0.0)) breaks FSU threads and
makes <code>mysqld</code> unstable. You have to remove this one if you want to run
<code>mysqld</code> on an OpenServer 5.0.6 machine.

<LI>

SCO provides operating system patches at 
<a HREF="ftp://ftp.sco.com/pub/openserver5">ftp://ftp.sco.com/pub/openserver5</a> for OpenServer 5.0.x.

<LI>

SCO provides security fixes and <code>libsocket.so.2</code> at 
<a HREF="ftp://ftp.sco.com/pub/security/OpenServer">ftp://ftp.sco.com/pub/security/OpenServer</a> and 
<a HREF="ftp://ftp.sco.com/pub/security/sse">ftp://ftp.sco.com/pub/security/sse</a> for OpenServer 5.0.x.

<LI>

Pre-OSR506 security fixes. Also, the <code>telnetd</code> fix at
<a HREF="ftp://stage.caldera.com/pub/security/openserver/">ftp://stage.caldera.com/pub/security/openserver/</a> or
<a HREF="ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/">ftp://stage.caldera.com/pub/security/openserver/CSSA-2001-SCO.10/</a> as
both <tt>`libsocket.so.2'</tt> and <tt>`libresolv.so.1'</tt> with instructions for
installing on pre-OSR506 systems.

It's probably a good idea to install these
patches before trying to compile/use MySQL.

</UL>

<P>
Begining with Legend, OpenServer will have native threads and no 2GB file 
size limit.

</P>



<H4><A NAME="SCO_UnixWare" HREF="manual_toc.html#SCO_UnixWare">2.12.5.9  SCO UnixWare Version 7.1.x Notes</A></H4>

<P>
We recommend using the latest production release of MySQL.  Currently this
is MySQL 4.0.x.  Should you choose to use an older release of MySQL on
UnixWare 7.1.x, you must use a version of MySQL at least as recent as
3.22.13 to get fixes for some portability and OS problems.

</P>
<P>
We have been able to compile MySQL with the following <code>configure</code>
command on UnixWare Version 7.1.x:

</P>

<PRE>
CC="cc" CFLAGS="-I/usr/local/include" \
CXX="CC" CXXFLAGS="-I/usr/local/include" \
./configure --prefix=/usr/local/mysql \
    --enable-thread-safe-client --with-berkeley-db=./bdb \
    --with-innodb --with-openssl --with-extra-charsets=complex
</PRE>

<P>
If you want to use <code>gcc</code>, you must use <code>gcc</code> 2.95.3 or newer.

</P>

<PRE>
CC=gcc CXX=g++ ./configure --prefix=/usr/local/mysql
</PRE>

<P>
SCO provides operating system patches at
<a HREF="ftp://ftp.sco.com/pub/unixware7">ftp://ftp.sco.com/pub/unixware7</a> for UnixWare 7.1.1,
<a HREF="ftp://ftp.sco.com/pub/unixware7/713/">ftp://ftp.sco.com/pub/unixware7/713/</a> for UnixWare 7.1.3,
<a HREF="ftp://ftp.sco.com/pub/unixware7/714/">ftp://ftp.sco.com/pub/unixware7/714/</a> for UnixWare 7.1.4, and
<a HREF="ftp://ftp.sco.com/pub/openunix8">ftp://ftp.sco.com/pub/openunix8</a> for OpenUNIX 8.0.0.

</P>
<P>
SCO provides information about security fixes at
<a HREF="ftp://ftp.sco.com/pub/security/OpenUNIX">ftp://ftp.sco.com/pub/security/OpenUNIX</a> for OpenUNIX and
<a HREF="ftp://ftp.sco.com/pub/security/UnixWare">ftp://ftp.sco.com/pub/security/UnixWare</a> for UnixWare.

</P>
<P>
By default, the maximum file size on a UnixWare 7 system is 1GB.
Many OS utilities have a limitation of 2GB.  The maximum possible file
size on UnixWare 7 is 1TB with VXFS.

</P>
<P>
To enable large file support on UnixWare 7.1.x, run <code>fsadm</code>.

</P>

<PRE>
# fsadm -Fvxfs -o largefiles /
# fsadm /					* Note
# ulimit unlimited
# cd /etc/conf/bin
# ./idtune SFSZLIM 0x7FFFFFFF			** Note
# ./idtune HFSZLIM 0x7FFFFFFF			** Note
# ./idbuild -B

* This should report "largefiles".
** 0x7FFFFFFF represents infinity for these values.
</PRE>

<P>
Reboot the system using <code>shutdown</code>.

</P>
<P>
By default, the entries in <tt>`/etc/conf/cf.d/mtune'</tt> are set to:

</P>

<PRE>
Value           Default         Min             Max
-----           -------         --             ---
SVMMLIM         0x9000000       0x1000000       0x7FFFFFFF
HVMMLIM         0x9000000       0x1000000       0x7FFFFFFF
SSTKLIM         0x1000000       0x2000          0x7FFFFFFF
HSTKLIM         0x1000000       0x2000          0x7FFFFFFF
</PRE>

<P>
We recommend setting these values as follows:

</P>

<PRE>
SDATLIM 0x7FFFFFFF
HDATLIM 0x7FFFFFFF
SSTKLIM 0x7FFFFFFF
HSTKLIM 0x7FFFFFFF
SVMMLIM 0x7FFFFFFF
HVMMLIM 0x7FFFFFFF
SFNOLIM 2048
HFNOLIM 2048
</PRE>

<P>
We recommend tuning the system, but the proper parameter values to use
depend on the number of users accessing the application or database
and size the of the database (that is, the used buffer pool). The
following will affect the following kernel parameters defined in
<tt>`/etc/conf/cf.d/stune'</tt>:

</P>
<P>
<code>SHMMAX</code> (recommended setting: 128MB) and <code>SHMSEG</code> (recommended
setting: 15).
These parameters have influence on the MySQL database engine to create
user buffer pools.

</P>
<P>
<code>SFNOLIM</code> and <code>HFNOLIM</code> should be at maximum 2048.

</P>
<P>
<code>NPROC</code> should be set to at least 3000/4000 (depends on number of users).

</P>
<P>
Also is recommended to use following formula to count value for <code>SEMMSL</code>,
<code>SEMMNS</code>, and <code>SEMMNU</code>:

</P>

<PRE>
SEMMSL = 13
</PRE>

<P>
13 is what has been found to be the best for both Progress and MySQL.

</P>
<P>
<code>SEMMNS</code> = <code>SEMMSL</code> * number of db servers to be run on the system.

</P>
<P>
Set <code>SEMMNS</code> to the value of <code>SEMMSL</code> multiplied by the number
of db servers (maximum) that you will be running on the system at one time.

</P>
<P>
<code>SEMMNU</code> = <code>SEMMNS</code>

</P>
<P>
Set the value of <code>SEMMNU</code> to equal the value of <code>SEMMNS</code>. You
could probably set this to 75% of <code>SEMMNS</code>, but this is a conservative estimate.

</P>



<H3><A NAME="OS_2" HREF="manual_toc.html#OS_2">2.12.6  OS/2 Notes</A></H3>

<P>
MySQL uses quite a few open files. Because of this, you should add
something like the following to your <tt>`CONFIG.SYS'</tt> file:

</P>

<PRE>
SET EMXOPT=-c -n -h1024
</PRE>

<P>
If you don't do this, you will probably run into the following error:

</P>

<PRE>
File '<var>xxxx</var>' not found (Errcode: 24)
</PRE>

<P>
When using MySQL with OS/2 Warp 3, FixPack 29 or above is
required.  With OS/2 Warp 4, FixPack 4 or above is required. This is a
requirement of the Pthreads library.  MySQL must be installed
on a partition with a type that supports long filenames, such as HPFS, FAT32,
and so on.

</P>
<P>
The <tt>`INSTALL.CMD'</tt> script must be run from OS/2's own <tt>`CMD.EXE'</tt>
and may not work with replacement shells such as <tt>`4OS2.EXE'</tt>.

</P>
<P>
The <tt>`scripts/mysql-install-db'</tt> script has been renamed.  It is now called
<tt>`install.cmd'</tt> and is a REXX script, which will set up the default
MySQL security settings and create the WorkPlace Shell icons
for MySQL.

</P>
<P>
Dynamic module support is compiled in but not fully tested. Dynamic
modules should be compiled using the Pthreads runtime library.

</P>

<PRE>
gcc -Zdll -Zmt -Zcrtdll=pthrdrtl -I../include -I../regex -I.. \
    -o example udf_example.cc -L../lib -lmysqlclient udf_example.def
mv example.dll example.udf
</PRE>

<P>
<strong>Note</strong>: Due to limitations in OS/2, UDF module name stems must not
exceed eight characters. Modules are stored in the <tt>`/mysql2/udf'</tt>
directory; the <code>safe-mysqld.cmd</code> script will put this directory in
the <code>BEGINLIBPATH</code> environment variable. When using UDF modules,
specified extensions are ignored--it is assumed to be <tt>`.udf'</tt>.
For example, in Unix, the shared module might be named <tt>`example.so'</tt>
and you would load a function from it like this:

</P>

<PRE>
mysql&#62; CREATE FUNCTION metaphon RETURNS STRING SONAME 'example.so';
</PRE>

<P>
In OS/2, the module would be named <tt>`example.udf'</tt>, but you would not
specify the module extension:

</P>

<PRE>
mysql&#62; CREATE FUNCTION metaphon RETURNS STRING SONAME 'example';
</PRE>



<H3><A NAME="BeOS" HREF="manual_toc.html#BeOS">2.12.7  BeOS Notes</A></H3>

<P>
We have in the past talked with some BeOS developers who have said that
MySQL is 80% ported to BeOS, but we haven't heard from them
in a while.

</P>



<H2><A NAME="Perl_support" HREF="manual_toc.html#Perl_support">2.13  Perl Installation Notes</A></H2>

<P>
<A NAME="IDX326"></A>
<A NAME="IDX327"></A>

</P>
<P>
Perl support for MySQL is provided by means of the <code>DBI</code>/<code>DBD</code>
client interface. The interface requires Perl Version 5.6.0 or later.
It <em>will not work</em> if you have an older version of Perl.

</P>
<P>
If you want to use transactions with Perl DBI, you need to have
<code>DBD::mysql</code> version 1.2216 or newer. Version 2.9003 or newer
is recommended.

</P>
<P>
If you are using the MySQL 4.1 client library, you must use
<code>DBD::mysql</code> 2.9003 or newer.

</P>
<P>
As of MySQL 3.22.8, Perl support is no longer included with MySQL
distributions. You can obtain the necessary modules from
<a HREF="http://search.cpan.org">http://search.cpan.org</a> for Unix, or by using the ActiveState
<code>ppm</code> program on Windows. The following sections describe how to do
this.

</P>
<P>
Perl support for MySQL must be installed if you want to run the MySQL
benchmark scripts.
See section <A HREF="manual_MySQL_Optimization.html#MySQL_Benchmarks">7.1.4  The MySQL Benchmark Suite</A>.

</P>



<H3><A NAME="Perl_installation" HREF="manual_toc.html#Perl_installation">2.13.1  Installing Perl on Unix</A></H3>

<P>
MySQL Perl support requires that you've installed MySQL client programming
support (libraries and header files).  Most installation methods install
the necessary files. However, if you installed MySQL from RPM files
on Linux, be sure that you've installed the developer RPM.  The client
programs are in the client RPM, but client programming support is in
the developer RPM.

</P>
<P>
If you want to install Perl support, the files you will need can
be obtained from the CPAN (Comprehensive Perl Archive Network) at
<a HREF="http://search.cpan.org">http://search.cpan.org</a>.

</P>
<P>
The easiest way to install Perl modules on Unix is to use the <code>CPAN</code>
module. For example:

</P>

<PRE>
shell&#62; perl -MCPAN -e shell
cpan&#62; install DBI
cpan&#62; install DBD::mysql
</PRE>

<P>
The <code>DBD::mysql</code> installation runs a number of tests.
These tests require being able to connect to the local MySQL server
as the anonymous user with no password. If you have removed anonymous
accounts or assigned them passwords, the tests fail. You can use <code>force
install DBD::mysql</code> to ignore the failed tests.

</P>
<P>
<code>DBI</code> requires the <code>Data::Dumper</code> module. It may already be
installed; if not, you should install it before installing <code>DBI</code>.

</P>
<P>
It is also possible to download the module distributions in the form of
compressed <code>tar</code> archives and build the modules manually. For example,
to unpack and build a DBI distribution, use a procedure such as this:

</P>

<OL>
<LI>

Unpack the distribution into the current directory:

<PRE>
shell&#62; gunzip &#60; DBI-<var>VERSION</var>.tar.gz | tar xvf -
</PRE>

This command creates a directory named <tt>`DBI-<var>VERSION</var>'</tt>.

<LI>

Change location into the top-level directory of the unpacked distribution:

<PRE>
shell&#62; cd DBI-<var>VERSION</var>
</PRE>

<LI>

Build the distribution and compile everything:

<PRE>
shell&#62; perl Makefile.PL
shell&#62; make
shell&#62; make test
shell&#62; make install
</PRE>

</OL>

<P>
The <code>make test</code> command is important because it verifies that the
module is working.  Note that when you run that command during the
<code>DBD::mysql</code> installation to exercise the interface code, the
MySQL server must be running or the test will fail.

</P>
<P>
It is a good idea to rebuild and reinstall the <code>DBD::mysql</code>
distribution whenever you install a new release of MySQL,
particularly if you notice symptoms such as that all your <code>DBI</code> scripts
fail after you upgrade MySQL.

</P>
<P>
If you don't have access rights to install Perl modules in the system directory
or if you want to install local Perl modules, the following reference may be
useful:
<a HREF="http://servers.digitaldaze.com/extensions/perl/modules.html#modules">http://servers.digitaldaze.com/extensions/perl/modules.html#modules</a>

</P>
<P>
Look under the heading ``Installing New Modules that Require Locally
Installed Modules.''

</P>



<H3><A NAME="ActiveState_Perl" HREF="manual_toc.html#ActiveState_Perl">2.13.2  Installing ActiveState Perl on Windows</A></H3>

<P>
<A NAME="IDX328"></A>
<A NAME="IDX329"></A>
<A NAME="IDX330"></A>

</P>
<P>
On Windows, you should do the following to install the MySQL
<code>DBD</code> module with ActiveState Perl:

</P>

<UL>
<LI>

Get ActiveState Perl from
<a HREF="http://www.activestate.com/Products/ActivePerl/">http://www.activestate.com/Products/ActivePerl/</a>
and install it.

<LI>

Open a console window (a ``DOS window'').

<LI>

If required, set the <code>HTTP_proxy</code> variable. For example, you might try:


<PRE>
set HTTP_proxy=my.proxy.com:3128
</PRE>

<LI>

Start the PPM program:


<PRE>
C:\&#62; C:\perl\bin\ppm.pl
</PRE>

<LI>

If you have not already done so, install <code>DBI</code>:


<PRE>
ppm&#62; install DBI
</PRE>

<LI>

If this succeeds, run the following command:


<PRE>
install \
ftp://ftp.de.uu.net/pub/CPAN/authors/id/JWIED/DBD-mysql-1.2212.x86.ppd
</PRE>

</UL>

<P>
This procedure should work at least with ActiveState Perl Version 5.6.

</P>
<P>
If you can't get the procedure to work, you should instead install the
MyODBC driver and connect to the MySQL server through
ODBC:

</P>

<PRE>
use DBI;
$dbh= DBI-&#62;connect("DBI:ODBC:$dsn",$user,$password) ||
  die "Got error $DBI::errstr when connecting to $dsn\n";
</PRE>



<H3><A NAME="Perl_support_problems" HREF="manual_toc.html#Perl_support_problems">2.13.3  Problems Using the Perl <code>DBI</code>/<code>DBD</code> Interface</A></H3>

<P>
<A NAME="IDX331"></A>
<A NAME="IDX332"></A>

</P>
<P>
If Perl reports that it can't find the <tt>`../mysql/mysql.so'</tt> module,
then the problem is probably that Perl can't locate the shared library
<tt>`libmysqlclient.so'</tt>.

</P>
<P>
You should be able to fix this by one of the following methods:

</P>

<UL>
<LI>

Compile the <code>DBD::mysql</code> distribution with <code>perl
Makefile.PL -static -config</code> rather than <code>perl Makefile.PL</code>.

<LI>

Copy <tt>`libmysqlclient.so'</tt> to the directory where your other shared
libraries are located (probably <tt>`/usr/lib'</tt> or <tt>`/lib'</tt>).

<LI>

Modify the <code>-L</code> options used to compile <code>DBD::mysql</code> to reflect
the actual location of <tt>`libmysqlclient.so'</tt>.

<LI>

On Linux, you can add the pathname of the directory where
<tt>`libmysqlclient.so'</tt> is located to the <tt>`/etc/ld.so.conf'</tt> file.

<A NAME="IDX333"></A>
<A NAME="IDX334"></A>
<A NAME="IDX335"></A>
<A NAME="IDX336"></A>
<LI>

Add the pathname of the directory where <tt>`libmysqlclient.so'</tt> is located
to the <code>LD_RUN_PATH</code> environment variable. Some systems use
<code>LD_LIBRARY_PATH</code> instead.
</UL>

<P>
Note that you may also need to modify the <code>-L</code> options if there are
other libraries that the linker fails to find. For example, if the linker
cannot find <code>libc</code> because it is in <tt>`/lib'</tt> and the link command
specifies <code>-L/usr/lib</code>, change the <code>-L</code> option to <code>-L/lib</code>
or add <code>-L/lib</code> to the existing link command.

</P>
<P>
If you get the following errors from <code>DBD::mysql</code>,
you are probably using <code>gcc</code> (or using an old binary compiled with
<code>gcc</code>):

</P>

<PRE>
/usr/bin/perl: can't resolve symbol '__moddi3'
/usr/bin/perl: can't resolve symbol '__divdi3'
</PRE>

<P>
Add <code>-L/usr/lib/gcc-lib/... -lgcc</code> to the link command when the
<tt>`mysql.so'</tt> library gets built (check the output from <code>make</code> for
<tt>`mysql.so'</tt> when you compile the Perl client).  The <code>-L</code> option
should specify the pathname of the directory where <tt>`libgcc.a'</tt> is located
on your system.

</P>
<P>
Another cause of this problem may be that Perl and MySQL aren't both
compiled with <code>gcc</code>.  In this case, you can solve the mismatch by
compiling both with <code>gcc</code>.

</P>
<P>
You may see the following error from <code>DBD::mysql</code>
when you run the tests:

</P>

<PRE>
t/00base............install_driver(mysql) failed:
Can't load '../blib/arch/auto/DBD/mysql/mysql.so' for module DBD::mysql:
../blib/arch/auto/DBD/mysql/mysql.so: undefined symbol:
uncompress at /usr/lib/perl5/5.00503/i586-linux/DynaLoader.pm line 169.
</PRE>

<P>
This means that you need to include the <code>-lz</code> compression library on the
link line. That can be done by changing the following line in the file
<tt>`lib/DBD/mysql/Install.pm'</tt>:

</P>

<PRE>
$sysliblist .= " -lm";
</PRE>

<P>
Change that line to:

</P>

<PRE>
$sysliblist .= " -lm -lz";
</PRE>

<P>
After this, you <em>must</em> run <code>make realclean</code> and then
proceed with the installation from the beginning.

</P>
<P>
If you want to install DBI on SCO, you have to edit the
<tt>`Makefile'</tt> in DBI-<var>xxx</var> and each subdirectory.
Note that the following assumes <code>gcc</code> 2.95.2 or newer:

</P>

<PRE>
OLD:                                  NEW:
CC = cc                               CC = gcc
CCCDLFLAGS = -KPIC -W1,-Bexport       CCCDLFLAGS = -fpic
CCDLFLAGS = -wl,-Bexport              CCDLFLAGS =

LD = ld                               LD = gcc -G -fpic
LDDLFLAGS = -G -L/usr/local/lib       LDDLFLAGS = -L/usr/local/lib
LDFLAGS = -belf -L/usr/local/lib      LDFLAGS = -L/usr/local/lib

LD = ld                               LD = gcc -G -fpic
OPTIMISE = -Od                        OPTIMISE = -O1

OLD:
CCCFLAGS = -belf -dy -w0 -U M_XENIX -DPERL_SCO5 -I/usr/local/include

NEW:
CCFLAGS = -U M_XENIX -DPERL_SCO5 -I/usr/local/include
</PRE>

<P>
These changes are necessary
because the Perl dynaloader will not load the <code>DBI</code> modules
if they were compiled with <code>icc</code> or <code>cc</code>.

</P>
<P>
If you want to use the Perl module on a system that doesn't support
dynamic linking (such as SCO), you can generate a static version of
Perl that includes <code>DBI</code> and <code>DBD::mysql</code>.  The way this works
is that you generate a version of Perl with the <code>DBI</code> code linked
in and install it on top of your current Perl.  Then you use that to
build a version of Perl that additionally has the <code>DBD</code> code linked
in, and install that.

</P>
<P>
On SCO, you must have the following environment variables set:

</P>

<PRE>
LD_LIBRARY_PATH=/lib:/usr/lib:/usr/local/lib:/usr/progressive/lib
</PRE>

<P>
Or:

</P>

<PRE>
LD_LIBRARY_PATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\
    /usr/progressive/lib:/usr/skunk/lib
LIBPATH=/usr/lib:/lib:/usr/local/lib:/usr/ccs/lib:\
    /usr/progressive/lib:/usr/skunk/lib
MANPATH=scohelp:/usr/man:/usr/local1/man:/usr/local/man:\
    /usr/skunk/man:
</PRE>

<P>
First, create a Perl that includes a statically linked <code>DBI</code> module by
running these commands in the directory where your <code>DBI</code> distribution is
located:

</P>

<PRE>
shell&#62; perl Makefile.PL -static -config
shell&#62; make
shell&#62; make install
shell&#62; make perl
</PRE>

<P>
Then you must install the new Perl. The output of <code>make perl</code> will
indicate the exact <code>make</code> command you will need to execute to perform
the installation.  On SCO, this is
<code>make -f Makefile.aperl inst_perl MAP_TARGET=perl</code>.

</P>
<P>
Next, use the just-created Perl to create another Perl that also includes a
statically linked <code>DBD::mysql</code> by running these commands in the
directory where your <code>DBD::mysql</code> distribution is located:

</P>

<PRE>
shell&#62; perl Makefile.PL -static -config
shell&#62; make
shell&#62; make install
shell&#62; make perl
</PRE>

<P>
Finally, you should install this new Perl.  Again, the output of <code>make
perl</code> indicates the command to use.

</P>

<P><HR><P>
Go to the <A HREF="manual_Introduction.html">first</A>, <A HREF="manual_Introduction.html">previous</A>, <A HREF="manual_Tutorial.html">next</A>, <A HREF="manual_Concept_Index.html">last</A> section, <A HREF="manual_toc.html">table of contents</A>.
 </BODY>
 </HTML>
