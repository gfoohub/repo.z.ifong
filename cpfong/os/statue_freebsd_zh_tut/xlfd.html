<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="generator" content="HTML Tidy, see www.w3.org" />
<title>XLFD 的格式與 xtt 字型模組</title>
<meta name="GENERATOR" content="Modular DocBook HTML Stylesheet Version 1.7" />
<link rel="HOME" title="FreeBSD Chinese HOWTO" href="index.html" />
<link rel="UP" title="中文 X Window" href="xwin.html" />
<link rel="PREVIOUS" title="使用字型" href="using-font.html" />
<link rel="NEXT" title="fontconfig 與 xft" href="fontconfig.html" />
<link rel="STYLESHEET" type="text/css" href="docbook.css" />
<meta http-equiv="Content-Type" content="text/html; charset=Big5" />
</head>
<body class="SECT1" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#840084"
alink="#0000FF">
<div class="NAVHEADER">
<table summary="Header navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<th colspan="3" align="center">FreeBSD Chinese HOWTO</th>
</tr>

<tr>
<td width="10%" align="left" valign="bottom"><a href="using-font.html"
accesskey="P">Prev</a></td>
<td width="80%" align="center" valign="bottom">Chapter 4. 中文 X Window</td>
<td width="10%" align="right" valign="bottom"><a href="fontconfig.html"
accesskey="N">Next</a></td>
</tr>
</table>

<hr align="LEFT" width="100%" />
</div>

<div class="SECT1">
<h1 class="SECT1"><a id="XLFD" name="XLFD">4.4. XLFD 的格式與 xtt 字型模組</a></h1>

<p>Last Update: 2003年 1月20日 周一 10時25分06秒 CST</p>

<p>X11 Core Font 以 XLFD 的格式來讓選擇字型，以下稍微介紹一下：</p>

<pre class="PROGRAMLISTING">
   -<a id="FOUNDRY" name="FOUNDRY"><img src="./imagelib/callouts/1.png" hspace="0"
vspace="0" border="0" alt="(1)" /></a>kc-<a id="FAMILY" name="FAMILY"><img
src="./imagelib/callouts/2.png" hspace="0" vspace="0" border="0" alt="(2)" /></a>fixed-<a
id="WEIGHT" name="WEIGHT"><img src="./imagelib/callouts/3.png" hspace="0" vspace="0"
border="0" alt="(3)" /></a>medium-<a id="SLANT" name="SLANT"><img
src="./imagelib/callouts/4.png" hspace="0" vspace="0" border="0" alt="(4)" /></a>r-<a
id="SETWIDTH" name="SETWIDTH"><img src="./imagelib/callouts/5.png" hspace="0" vspace="0"
border="0" alt="(5)" /></a>normal-<a id="ADD-STYLE" name="ADD-STYLE"><img
src="./imagelib/callouts/6.png" hspace="0" vspace="0" border="0" alt="(6)" /></a>*-<a
id="PIXELS" name="PIXELS"><img src="./imagelib/callouts/7.png" hspace="0" vspace="0"
border="0" alt="(7)" /></a>16-<a id="POINTS" name="POINTS"><img
src="./imagelib/callouts/8.png" hspace="0" vspace="0" border="0" alt="(8)" /></a>160-<a
id="RESOLUTION-X" name="RESOLUTION-X"><img src="./imagelib/callouts/9.png" hspace="0"
vspace="0" border="0" alt="(9)" /></a>72-<a id="RESOLUTION-Y" name="RESOLUTION-Y"><img
src="./imagelib/callouts/10.png" hspace="0" vspace="0" border="0" alt="(10)" /></a>72-<a
id="SPACING" name="SPACING"><b>(11)</b></a>c-<a id="AVERAGE-WIDTH"
name="AVERAGE-WIDTH"><b>(12)</b></a>160-<a id="CHARSET"
name="CHARSET"><b>(13)</b></a>big5-0
</pre>

<div class="CALLOUTLIST">
<dl compact="COMPACT">
<dt><a href="xlfd.html#FOUNDRY"><img src="./imagelib/callouts/1.png" hspace="0"
vspace="0" border="0" alt="(1)" /></a></dt>

<dd>廠商名稱(Foundry)：字型提供廠商，如 Arphic(文鼎)、kc(國喬)。</dd>

<dt><a href="xlfd.html#FAMILY"><img src="./imagelib/callouts/2.png" hspace="0" vspace="0"
border="0" alt="(2)" /></a></dt>

<dd>種類(Family)：所屬的類型。</dd>

<dt><a href="xlfd.html#WEIGHT"><img src="./imagelib/callouts/3.png" hspace="0" vspace="0"
border="0" alt="(3)" /></a></dt>

<dd>粗細度(Weight)：粗細程度，如 medium(適中)、bold(粗體)。</dd>

<dt><a href="xlfd.html#SLANT"><img src="./imagelib/callouts/4.png" hspace="0" vspace="0"
border="0" alt="(4)" /></a></dt>

<dd>傾斜度(Slant)：傾斜程度，如 r(不傾斜)、o(傾斜)、 i(傾斜並且具有較奇特變化)。</dd>

<dt><a href="xlfd.html#SETWIDTH"><img src="./imagelib/callouts/5.png" hspace="0"
vspace="0" border="0" alt="(5)" /></a></dt>

<dd>寬度(Setwidth)：如 normal(正常)、condensed(最窄)、 semicondensed(稍窄)。</dd>

<dt><a href="xlfd.html#ADD-STYLE"><img src="./imagelib/callouts/6.png" hspace="0"
vspace="0" border="0" alt="(6)" /></a></dt>

<dd>附加型式(Add Style)：額外的格式，如 sans(無)、medium(適中)。
目前大部分字體均已不用此欄位。</dd>

<dt><a href="xlfd.html#PIXELS"><img src="./imagelib/callouts/7.png" hspace="0" vspace="0"
border="0" alt="(7)" /></a></dt>

<dd>像素大小(Pixels)：用像素來表示字體大小。</dd>

<dt><a href="xlfd.html#POINTS"><img src="./imagelib/callouts/8.png" hspace="0" vspace="0"
border="0" alt="(8)" /></a></dt>

<dd>點數大小(Points)：用點數來表示字體大小。10 個點數等於 1 個像素。</dd>

<dt><a href="xlfd.html#RESOLUTION-X"><img src="./imagelib/callouts/9.png" hspace="0"
vspace="0" border="0" alt="(9)" /></a></dt>

<dd>水平解析度(Resolution X)：每英吋的點數，如 72、75、100。</dd>

<dt><a href="xlfd.html#RESOLUTION-Y"><img src="./imagelib/callouts/10.png" hspace="0"
vspace="0" border="0" alt="(10)" /></a></dt>

<dd>垂直解析度(Resolution Y)：每英吋的點數，如 72、75、100。</dd>

<dt><a href="xlfd.html#SPACING"><b>(11)</b></a></dt>

<dd>字距(Spacing)：間隔，取其字首，如 Proportional(依比例大小)、
Monospace(等寬字)、Charcell(等寬等高字)。</dd>

<dt><a href="xlfd.html#AVERAGE-WIDTH"><b>(12)</b></a></dt>

<dd>平均寬度(Average Width)：以點數為單位。</dd>

<dt><a href="xlfd.html#CHARSET"><b>(13)</b></a></dt>

<dd>字型集(Character Registry and Charset Encoding)：如
big5-0(繁體中文)、big5.hkscs-0(香港繁體中文)、gb2312.1980-0(簡體中文)、
gbk-0(簡體中文)、gb18030-0(簡體中文)、iso8859-1(英文)、 iso10646-0(Uincode)。</dd>
</dl>
</div>

<p>但是 X11 Core Font 在反鋸齒上的支援不佳、 使用 CJK TrueType 的效率不好，
特別是目前常用的 Unicode 字型在效率和記憶體的使用都會是很大的問題，
因此需要較現代化的系統 fontconfig/xft。</p>

<p>X11 Core Font 透過 xtt 字型模組來顯示字型。 xtt 字型模組對於 CJK TrueType
字型加強過的字型顯示模組。 xtt 字型模組目前由 <a href="http://x-tt.sourceforge.jp/"
target="_top">After X-TT Project</a> 維護中。 要使用 xtt Module 必須修改 <tt
class="FILENAME">XF86Config</tt>， 幫他加上新的 FontPath，因為 ports collection 會將中文
TrueType 字型安裝到 <tt class="FILENAME">/usr/X11R6/lib/X11/fonts/TrueType/</tt>，
而且把中文PCF 安裝到 <tt class="FILENAME">/usr/X11R6/lib/X11/fonts/local/</tt>：</p>

<pre class="PROGRAMLISTING">
Section "Files"
        :
        :
        FontPath     "/usr/X11R6/lib/X11/fonts/TrueType/"
        FontPath     "/usr/X11R6/lib/X11/fonts/local/"
EndSection
</pre>

<p>以及讓 X 去使用 xtt 模組， 如果在模組區發現已經有設定 <var class="OPTION">Load
"freetype"</var>， 請將該行刪除，因為這兩個模組是互斥的：</p>

<pre class="PROGRAMLISTING">
Section "Module"
        :
        :
        Load  "xtt"
EndSection
</pre>

<p>最後再透過 <a href="ttfm.html">ttfm</a> 來安裝新字體就可以了。</p>

<p>是不是一定要 xtt 模組才能使用中文 TrueType？答案不是。 freetype
模組也可以用來處理中文，但是兩者只能選一個， 而 xtt 是專為 CJKV 字型而設計產生的 TrueType
處理模組， 其中 TTCap 選項所提供的粗體、斜體、粗斜體， 以及其他功能是中文 TrueType
所不能或缺的。</p>

<p>對 TTCap 而言，他的語法是擴充 fonts.dir 來提供更多的選項，例如：</p>

<pre class="PROGRAMLISTING">
ds=y:ai=0.3:bsmi00lp.ttf -Arphic-AR PL Mingti2L Big5-bold-i-normal--0-0-0-0-c-0-iso10646-1
</pre>

<p>最前面的 <var class="OPTION">ds=y:ai=0.3:</var> 就是 X-TT 擴充的部份。
在這個例子中，文鼎明體的名稱是 bsmi00lp.ttf， <var class="OPTION">ds=y</var>(Double
Strike) 使用粗體， <var class="OPTION">ai=0.3</var>(Automatic Italic) 使用斜體，
所以相對應的產生 <var class="OPTION">-bold-i-</var> 的文鼎明體粗斜體字型。 另外，最後面的
iso10646-1 就是 Unicode 字型， 目前文鼎字型在這個部分的支持並不是很好。</p>

<p>常用的還有 <var class="OPTION">fn=INTEGER</var> 來指定 TrueType Collection(.ttc)
檔案的 face 號碼， 像是目前處理 mingliu 就是跳過固定寬的細明體，
而改採用直接指定變動寬的新細明體 <var class="OPTION">fn=1</var>。</p>

<div class="NOTE">
<blockquote class="NOTE">
<p><b>Note:</b> 如果使用 freetype 模組，載入字型和顯示的的速度會比較快， 可以透過 <a
href="http://www.FreeBSD.org/cgi/url.cgi?ports/x11-fonts/ttmkfdir/pkg-descr"><tt
class="FILENAME">x11-fonts/ttmkfdir</tt></a> 來產生的 <tt
class="FILENAME">fonts.scale</tt> 和用 <tt class="COMMAND">mkfontdir -e</tt> 來產生 <tt
class="FILENAME">encodings.dir</tt> 與 <tt class="FILENAME">fonts.dir</tt>。</p>

<pre class="SCREEN">
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">cd /usr/X11R6/lib/X11/fonts/TrueType</kbd>
<samp class="PROMPT">#</samp> <kbd class="USERINPUT">ttmkfdir -o fonts.scale</kbd>
<samp class="PROMPT">#</samp> <kbd
class="USERINPUT">mkfontdir -e /usr/X11R6/lib/X11/fonts/encodings</kbd>
</pre>

<p>但是這對細明體會造成莫大的災難，在字距的部份為 -m- (等寬字)，
這會造成英文的字體和中文同為方塊字寬度，因為這會產生如下的 <tt
class="FILENAME">fonts.dir</tt>：</p>

<pre class="SCREEN">
5
mingliu.ttc -DynaLab-MingLiU-medium-r-normal--0-0-0-0-m-0-ascii-0
mingliu.ttc -DynaLab-MingLiU-medium-r-normal--0-0-0-0-m-0-fcd8859-15
mingliu.ttc -DynaLab-MingLiU-medium-r-normal--0-0-0-0-m-0-iso10646-1
mingliu.ttc -DynaLab-MingLiU-medium-r-normal--0-0-0-0-m-0-iso8859-1
mingliu.ttc -DynaLab-MingLiU-medium-r-normal--0-0-0-0-m-0-iso8859-15
</pre>
</blockquote>
</div>
</div>

<div class="NAVFOOTER">
<hr align="LEFT" width="100%" />
<table summary="Footer navigation table" width="100%" border="0" cellpadding="0"
cellspacing="0">
<tr>
<td width="33%" align="left" valign="top"><a href="using-font.html"
accesskey="P">Prev</a></td>
<td width="34%" align="center" valign="top"><a href="index.html"
accesskey="H">Home</a></td>
<td width="33%" align="right" valign="top"><a href="fontconfig.html"
accesskey="N">Next</a></td>
</tr>

<tr>
<td width="33%" align="left" valign="top">使用字型</td>
<td width="34%" align="center" valign="top"><a href="xwin.html" accesskey="U">Up</a></td>
<td width="33%" align="right" valign="top">fontconfig 與 xft</td>
</tr>
</table>
</div>
</body>
</html>

